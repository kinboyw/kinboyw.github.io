<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Git åŽ‹ç¼©å¤šä¸ªcommitä¸ºå•ä¸ªcommit]]></title>
    <url>%2F2019%2F04%2F09%2FGit-%E5%8E%8B%E7%BC%A9%E5%A4%9A%E4%B8%AAcommit%E4%B8%BA%E5%8D%95%E4%B8%AAcommit%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡â€”â€”Squash commits into one with Git æœ¬ç¯‡ä»‹ç»ä¸€ä¸ªå¾ˆæ£’çš„èƒ½å°†å¤šæ¬¡ä¿®æ”¹åˆå¹¶èµ·æ¥çš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å°†ä»–ä»¬å…±äº«å‡ºåŽ»ä¹‹å‰ åœ¨ Git ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å¼ºå¤§çš„ interactive rebaseï¼ˆäº¤äº’å¼ rebaseï¼‰å°†å¤šæ¬¡æäº¤åˆå¹¶æˆä¸€æ¬¡ã€‚è¿™æ˜¯æˆ‘å¸¸ç”¨çš„ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„å·¥å…·ï¼›æˆ‘ç»å¸¸é€šè¿‡å°†å¤šä¸ªä¸´æ—¶çš„å°çš„æäº¤åˆå¹¶æˆä¸€æ¬¡æäº¤ï¼Œç„¶åŽå°†æ•´ç†å¥½çš„ä»£ç  push ç»™è¿œç«¯ã€‚ æ­¥éª¤ 1: é€‰æ‹©ä½ çš„èµ·å§‹æäº¤ç¬¬ä¸€æ­¥å°±æ˜¯è®© git å¼€å§‹ä¸€æ¬¡äº¤äº’å¼ rebase ä¼šè¯ï¼š 1git rebase --interactive HEAD~[N] æˆ–è€…ç®€å†™çš„æ–¹å¼: 1git rebase -i HEAD~[N] è¿™é‡Œçš„ N å°±æ˜¯ä½ æƒ³è¦åˆå¹¶çš„æäº¤çš„æ•°é‡ï¼Œä»Žæœ€è¿‘çš„ä¸€æ¬¡æäº¤å¾€å‰æ•°ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡è±¡çš„ä»Ž git log ä¸­æ‹‰å–çš„æäº¤åˆ—è¡¨ï¼Œæˆ‘å½“å‰æ­£åœ¨ä¿®æ”¹ feature Zï¼š 12345678871adf OK, feature Z is fully implemented --- newer commit0c3317 Whoops, not yet...87871a I'm ready!643d0e Code cleanupafb581 Fix this and that4e9baa Cool implementationd94e78 Prepare the workbench for feature Z6394dc Feature Y --- older commit ç„¶åŽè¿™æ˜¯æˆ‘è¦åšçš„äº‹æƒ…ï¼š 12345678871adf OK, feature Z is fully implemented --- newer commit --â”0c3317 Whoops, not yet... |87871a I'm ready! |643d0e Code cleanup |-- Join these into oneafb581 Fix this and that |4e9baa Cool implementation |d94e78 Prepare the workbench for feature Z -------------------â”˜6394dc Feature Y --- older commit è¦è¾¾åˆ°çš„æ•ˆæžœï¼š 1284d1f8 Feature Z --- newer commit (result of rebase)6394dc Feature Y --- older commit æ‰€ä»¥åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œè¦æ‰§è¡Œçš„å‘½ä»¤å°±æ˜¯ï¼š 1git rebase --interactive HEAD~[7] å› ä¸ºæˆ‘æƒ³å°†æœ€åŽçš„ 7 æ¬¡æäº¤åˆå¹¶ä¸ºä¸€æ¬¡ï¼Œæ‰€ä»¥ d94e78 Prepare the workbench for feature X å°±æ˜¯ç¬¬ 7 æ¬¡æäº¤ã€‚ æˆ‘æœ‰æ•°ä¸æ¸…çš„æäº¤è¦åŽ‹ç¼©ï¼Œå¿…é¡»ä¸€ä¸ªä¸€ä¸ªçš„æ•°å—ï¼Ÿgit rebase --interactive HEAD~[N] å‘½ä»¤çš„ç¼ºç‚¹å°±æ˜¯ä½ å¿…é¡»ä¸€ä¸ªä¸€ä¸ªçš„æ•°å‡ºå‡†ç¡®çš„æäº¤æ¬¡æ•°ã€‚å¹¸è¿çš„æ˜¯è¿™é‡Œè¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼š 1git rebase --interactive [commit-hash] [commit-hash] å°±æ˜¯ä½ è¦åŽ‹ç¼©çš„æäº¤èŒƒå›´çš„èµ·å§‹æäº¤ä¹‹å‰çš„ä¸€æ¬¡æäº¤çš„ hashã€‚æ‰€ä»¥åœ¨æˆ‘çš„ç¤ºä¾‹ä¸­çš„å‘½ä»¤å°±æ˜¯ï¼š 1git rebase --interactive 6394dc 6394dc æ˜¯ Feature Yã€‚ä½ å¯ä»¥å°†è¿™ä¸ªå‘½ä»¤ç†è§£ä¸ºï¼š å¯¹ [commit-hash] ä¹‹ä¸Šçš„æ‰€æœ‰æäº¤è¿›è¡Œåˆå¹¶ã€‚ è¿™æ ·æ›´ç®€å•ä¸æ˜¯å—ï¼Ÿ æ­¥éª¤ 2: é€‰æ‹©ä¸ŽåŽ‹ç¼©è¿™æ—¶ä½ çš„ç¼–è¾‘å™¨ä¼šæœ‰å¼¹çª—ï¼Œæ˜¾ç¤ºå‡ºä½ æƒ³è¦åˆå¹¶çš„æäº¤åˆ—è¡¨ã€‚æ³¨æ„ï¼Œä¸€å¼€å§‹å¯èƒ½ä¼šæ„Ÿè§‰æœ‰ç‚¹çœ‹ä¸æ˜Žç™½ï¼Œå› ä¸ºæ˜¯æŒ‰ååºæŽ’åˆ—çš„ï¼Œæ—§çš„æäº¤æ˜¾ç¤ºåœ¨é¡¶éƒ¨ã€‚æˆ‘é€šè¿‡ --- older commit å’Œ --- newer commit è¿›è¡Œäº†è¯´æ˜Žï¼Œåœ¨ç¼–è¾‘å™¨çš„çª—å£ä¸­ä¸ä¼šæ˜¾ç¤ºè¯´æ˜Žã€‚ 123456789pick d94e78 Prepare the workbench for feature Z --- older commitpick 4e9baa Cool implementation pick afb581 Fix this and that pick 643d0e Code cleanuppick 87871a I'm ready! pick 0c3317 Whoops, not yet... pick 871adf OK, feature Z is fully implemented --- newer commit[...] åœ¨æäº¤åˆ—è¡¨çš„åº•éƒ¨æœ‰ä¸€ä¸ªç®€çŸ­çš„æ³¨é‡Šï¼ˆç¤ºä¾‹ä¸­å¿½ç•¥äº†ï¼‰ï¼Œæç¤ºäº†æ‰€æœ‰çš„æ“ä½œé€‰é¡¹ã€‚ä½ å¯ä»¥åœ¨äº¤äº’å¼ rebase ä¸­è¿›è¡Œå„ç§æ“ä½œï¼Œæˆ‘ä»¬çŽ°åœ¨åªè¿›è¡Œä¸€äº›åŸºæœ¬çš„æ“ä½œã€‚æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯å°†æ‰€æœ‰çš„æäº¤æ³¨é‡Šä¸º squashableï¼Œé™¤äº†ç¬¬ä¸€ä¸ªï¼ˆæœ€æ—©çš„ï¼‰æäº¤ï¼šå®ƒå°†è¢«ç”¨ä½œèµ·å§‹ç‚¹ã€‚ ä½ å¯ä»¥é€šè¿‡å°†ä»»åŠ¡ pick ä¿®æ”¹ä¸º squash ï¼ˆæˆ–è€…ç®€å†™ä¸º s ï¼Œè¯„è®ºä¸­æœ‰æç¤ºï¼‰æ¥å°†æäº¤æ ‡è®°ä¸º squashable ã€‚æœ€åŽçš„ç»“æžœå°±æ˜¯ï¼š 123456789pick d94e78 Prepare the workbench for feature Z --- older commits 4e9baa Cool implementation s afb581 Fix this and that s 643d0e Code cleanups 87871a I'm ready! s 0c3317 Whoops, not yet... s 871adf OK, feature Z is fully implemented --- newer commit[...] ä¿å­˜æ–‡ä»¶ï¼Œå…³é—­ç¼–è¾‘å™¨ã€‚ æ­¥éª¤ 3: åˆ›å»ºæ–°çš„æäº¤ä½ åˆšåˆšå‘Šè¯‰äº† Git å°†å…¨éƒ¨çš„ 7 æ¬¡æäº¤åˆå¹¶åˆ°åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæäº¤ä¸­ã€‚çŽ°åœ¨è¦ç»™å®ƒæ·»åŠ æ³¨é‡Šï¼šä½ çš„ç¼–è¾‘å™¨ä¼šå†æ¬¡å¼¹å‡ºä¸€ä¸ªå¸¦æœ‰é»˜è®¤æ¶ˆæ¯çš„çª—å£ï¼Œå†…å®¹æ˜¯åŽ‹ç¼©çš„æ‰€æœ‰æäº¤çš„æ³¨é‡Šã€‚ ä½ å¯ä»¥ä¿ç•™é»˜è®¤çš„æäº¤æ³¨é‡Šï¼Œè¿™æ ·æœ€ç»ˆçš„æäº¤ä¿¡æ¯å°†ä¼šæ˜¯è¿™äº›ä¸´æ—¶æäº¤çš„æ³¨é‡Šåˆ—è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567Prepare the workbench for feature ZCool implementation Fix this and that Code cleanupI'm ready! Whoops, not yet... OK, feature Z is fully implemented é€šå¸¸æˆ‘ä¸å–œæ¬¢ä¿ç•™è¿™äº›ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä¼šæ¸…æ¥šé»˜è®¤æ¶ˆæ¯ï¼Œä½¿ç”¨ä¸€äº›è‡ªå®šä¹‰æ³¨é‡Šï¼Œä¾‹å¦‚ Implemented feature Zã€‚]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­—ä½“è®¾è®¡åŸºç¡€(1)è§†è§‰å‡è¡¡]]></title>
    <url>%2F2019%2F04%2F03%2F%E5%AD%97%E4%BD%93%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80-1-%E8%A7%86%E8%A7%89%E5%9D%87%E8%A1%A1%2F</url>
    <content type="text"><![CDATA[å­—ä½“è®¾è®¡åŸºç¡€ ã€å­—ä½“è®¾è®¡åŸºç¡€ã€‘ç³»åˆ—ç¿»è¯‘è‡ª typeworkshop.comï¼Œæ¯ç¯‡æ–‡ç« éƒ½é…æœ‰ç²¾ç¾Žçš„æ’å›¾ï¼Œç”¨äºŽè§£é‡Šè®¾è®¡å­—ä½“æ—¶ä¼šé‡åˆ°çš„ä¸€äº›åŸºç¡€çš„é—®é¢˜ã€‚è¿™äº›å†…å®¹åªè§£é‡Šäº†ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸ä¼šæ·±å…¥è®¨è®ºå¤æ‚çš„å†…å®¹ã€‚ Same size for all! To optically align all characters on a line, they cannot not have exactly the same mathematical height. For example the triangle on this drawing has to be higher than the rectangle. If this is not the case, the triangle will for sure look smaller than the rectangle. While creating a typeface, you want all the letters to have the same height. ä¸€è§†åŒä»ï¼ï¼ä¸ºäº†è®©æ‰€æœ‰å­—ä½“åœ¨è§†è§‰ä¸Šå¯¹é½ï¼Œå®ƒä»¬å°±ä¸èƒ½é‡‡ç”¨æ°æ°ç›¸åŒçš„å°ºå¯¸ã€‚æ¯”å¦‚è¯´ï¼Œä¸Šå›¾ä¸­çš„ä¸‰è§’å½¢å¿…é¡»çš„é«˜åº¦å¿…é¡»å¤§äºŽçŸ©å½¢ã€‚å¦åˆ™ï¼Œä¸‰è§’å½¢å°±ä¼šçœ‹èµ·æ¥æ¯”çŸ©å½¢å°ã€‚åœ¨è®¾è®¡å­—ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€æƒ³è¦æ‰€æœ‰çš„å­—æ¯å®šä¹‰åŒæ ·çš„é«˜åº¦ã€‚ Also round forms have to exceed the baseline to be optically the same. If the circle would have exactly the same mathematical height as the rectangle, it would look smaller than the square. This doesnâ€™t only count for basic forms like triangles, circles and squares. Itâ€™s essential in type design, because they apply to every single character in a typeface. Then it even doesnâ€™t matter if youâ€™re designing a latin, cyrillic or greek font. Itâ€™s a basic principle for any kind of shape. åŒæ ·çš„ï¼Œä¸ºäº†ä½¿åœ†å½¢çœ‹èµ·æ¥å’ŒçŸ©å½¢ç›¸åŒå¤§å°ï¼Œå°±å¿…é¡»å¾—è®©åœ†å½¢è¶…å‡ºåŸºçº¿ã€‚å¦‚æžœåœ†å½¢çš„é«˜åº¦å’ŒçŸ©å½¢å®Œå…¨ç›¸åŒï¼Œå°±ä¼šçœ‹èµ·æ¥æ¯”æ–¹å½¢æ›´å°ã€‚è¿™ç§æƒ…å†µä¸ä»…é€‚ç”¨äºŽåƒä¸‰è§’å½¢ï¼Œåœ†å½¢å’Œæ–¹å—è¿™æ ·çš„åŸºæœ¬å½¢çŠ¶ã€‚è¿™æ˜¯å­—ä½“è®¾è®¡çš„åŸºæœ¬åŽŸåˆ™ï¼Œæ•´ä¸ªå­—ä½“ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½é€‚ç”¨è¿™å¥—åŽŸåˆ™ã€‚ç”šè‡³ä¸è®ºä½ æ­£åœ¨è®¾è®¡æ‹‰ä¸ï¼Œæ–¯æ‹‰å¤«è¿˜æ˜¯å¸Œè…Šå­—ä½“ï¼Œè¿™ç§æ•ˆæžœéƒ½åŒæ ·é€‚ç”¨ã€‚è¿™æ˜¯æ‰€æœ‰å½¢ä½“éƒ½å¿…é¡»éµå¾ªçš„åŸºæœ¬åŽŸåˆ™ã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>å­—ä½“</category>
      </categories>
      <tags>
        <tag>å­—ä½“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨ VSCode è°ƒè¯• React]]></title>
    <url>%2F2019%2F04%2F02%2F%E7%94%A8-VSCode-%E8%B0%83%E8%AF%95-React%2F</url>
    <content type="text"><![CDATA[æˆ‘ç»ˆäºŽä¸ç”¨å†èŠ±æ—¶é—´åœ¨ç»ˆç«¯ï¼Œæµè§ˆå™¨å’Œç¼–è¾‘å™¨ä¹‹é—´å¾€è¿”æ¥å›žäº†ã€‚éš¾é“ä¸æ˜¯æ‰€æœ‰äººéƒ½åœ¨è¿™ä¹ˆåšå—ï¼Ÿ åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­æˆ‘ä¼šæ•™ä½ ç”¨ Visual Studio Code çš„ debug åŠŸèƒ½ä¸ºä½ çš„ React å·¥ä½œæµèµ‹èƒ½ã€‚ä½ ä¼šå­¦åˆ°å¦‚ä½•å¦‚ä½•å°† VSCode å’Œ Chrome è¿žæŽ¥èµ·æ¥ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åšåˆ°ç›´æŽ¥ä»Ž VSCode è°ƒè¯•æµè§ˆå™¨ä¸­çš„ä»£ç äº†ðŸ˜Ž å‡†å¤‡æµ‹è¯•é¡¹ç›®åœ¨å¼€å§‹æ•™ç¨‹ä¹‹å‰æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæµ‹è¯•åº”ç”¨ï¼ŒåŽé¢å°†ä¼šç”¨åˆ°ã€‚æˆ‘å°å°é€‚ç”¨ create-react-app å› ä¸ºæˆ‘ä¸å–œæ¬¢å†™æ¨¡æ¿ã€‚å¦‚æžœä½ å·²ç»æœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åºäº†ä½ ä¹Ÿå¯ä»¥å°±ç”¨å®ƒã€‚ é¦–å…ˆåˆ›å»ºæµ‹è¯•åº”ç”¨ï¼š æ‰§è¡Œ npm i -g create-react-app å‘½ä»¤ï¼Œåœ¨å…¨å±€å®‰è£… create-react-app å®‰è£…æˆåŠŸåŽï¼Œè¿è¡Œå‘½ä»¤ create-react-app vscode-tutorial åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® å®ŒæˆåŽä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æ–°çš„ React åº”ç”¨ç¨‹åºçš„ç›®å½•ã€‚ è®¾ç½® VSCodeNext up we need to install the VSCode extension so it knows how to talk to Chrome. VSCode connects to Chrome through Chromeâ€™s debugger protocol. This is the same debugger protocol that Chromeâ€™s developer tools use. Instead of using Chromeâ€™s developer tools you can use VSCode to debug browser code. æŽ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®‰è£… VSCode æ‰©å±•ï¼Œé€šè¿‡æ‰©å±•æ¥å’Œ Chrome é€šä¿¡ã€‚VSCode é€šè¿‡ Chrome çš„ debugger åè®® æ¥è¿žæŽ¥åˆ° Chromeã€‚è¿™ä¸ªåè®®ä¸Ž Chrome å¼€å‘è€…å·¥å…·ä½¿ç”¨çš„åè®®ç›¸åŒã€‚ä½ å¯ä»¥ç”¨ VSCode å–ä»£ Chrome çš„å¼€å‘è€…å·¥å…·æ¥è°ƒè¯•æµè§ˆå™¨ä»£ç ã€‚ å®‰è£… Chrome Debugger æ‰©å±•å·¥å…·To get VSCode and Chrome communicating with each other we need to install an extension called Debugger for Chrome. Install it by navigating to the extensions pane and searching for: debugger for chrome. It should look similar to below: ä¸ºäº†è®© VSCode å’Œ Chrome ä¹‹é—´ç›¸äº’é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªå«ä½œ Debugger for Chrome çš„æ‰©å±•ã€‚é€šè¿‡å¯¼èˆªåˆ° VSCode çš„æ‰©å±•é¢æ¿ï¼Œæœç´¢ Debugger for Chrome ã€‚å®ƒåº”è¯¥çœ‹èµ·æ¥ä¸Žä¸‹å›¾ç›¸ä¼¼ã€‚ è®¾ç½® VSCode è¿žæŽ¥åˆ° ChromeæŽ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è®¾ç½® VSCode æ¥è®©å®ƒè¿žæŽ¥åˆ° Chromeã€‚ ç‚¹å‡» debugging å›¾æ ‡ ç‚¹å‡»ä¸‹æ‹‰èœå•ï¼ˆåœ¨è¿è¡ŒæŒ‰é’®æ—ï¼‰ï¼Œç„¶åŽç‚¹å‡»â€œæ·»åŠ é…ç½®â€¦â€ ä»Žâ€œé€‰æ‹©çŽ¯å¢ƒâ€ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©â€œChromeâ€ è¿™ä¸€æ­¥å®ŒæˆåŽä¼šè‡ªåŠ¨åœ¨ä½ çš„å·¥ç¨‹æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª .vscode ç›®å½•ã€‚ç›®å½•å°†ä¼šåŒ…å«ä¸€ä¸ª launch.json æ–‡ä»¶ï¼Œå®ƒå°†è¢«ç”¨æ¥é…ç½®ä½ å½“å‰å·¥ç¨‹ä¸‹çš„ VSCode çš„ debugger ã€‚æ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ—¶ï¼Œä½ éƒ½å¿…é¡»æŒ‰ç…§ç›¸åŒæ­¥éª¤æ¥è®¾ç½®è¿œç¨‹ debugï¼ˆæˆ–è€…æ‹·è´ä¹‹å‰é¡¹ç›®çš„ .vscode ç›®å½•åˆ°æ–°é¡¹ç›®ä¸­ï¼‰ ä¿®æ”¹ url å±žæ€§ï¼Œå°†å…¶åªæƒ³å¼€å‘æœåŠ¡å™¨çš„ URLã€‚å¯¹ä¸Ž create-react-app æ¥è¯´ï¼Œè¿™ä¸ª URL æ˜¯ http://localhost:3000 ã€‚ å®Œæ•´çš„é…ç½®é€‰é¡¹åˆ—è¡¨å¯ä»¥ åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚ è¿è¡Œè°ƒè¯•å™¨ä¸è¦ç€æ€¥ï¼Œæˆ‘ä»¬å¿«è¦å®Œæˆäº†ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°æˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®æ¥æµ‹è¯• debugger æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚ æ‰“å¼€è°ƒè¯•å™¨ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‡ ç§æ–¹å¼æ¥æ‰“å¼€è°ƒè¯•å™¨ï¼š æŒ‰ F5 åœ¨è°ƒè¯•é¢æ¿ä¸­æŒ‰ç»¿è‰²çš„è¿è¡ŒæŒ‰é’® ä»Žèœå•è¿è¡Œï¼š Debug &gt; Start Debugger è®¾ç½®ä¸€ä¸ªæ–­ç‚¹æ–­ç‚¹æ˜¯ç”¨æ¥å‘Šè¯‰è°ƒè¯•å™¨ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°æŒ‡å®šçš„ä½ç½®æ—¶æš‚åœæ‰§è¡Œã€‚è¿™æ ·ä½ å°±å¯ä»¥æŸ¥çœ‹å˜é‡ï¼Œå›žè°ƒå‡½æ•°ï¼Œç”šè‡³åœ¨åº”ç”¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ä¿®æ”¹ä»£ç ã€‚ è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨ä»£ç  src/App.js çš„ç¬¬ 11 è¡Œè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚ å¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æœ€åŽè¦çœ‹æ˜¯å¦èƒ½æˆåŠŸï¼Œé€šè¿‡åœ¨ç»ˆç«¯è¿è¡Œ npm start æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚è¿™ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡åœ°å€ http://localhost:3000/ è®¿é—®ã€‚ å¯¼èˆªåˆ° http://localhost:3000/ï¼Œç„¶åŽä½ åº”è¯¥èƒ½çœ‹åˆ°é¡µé¢â€œå†»ç»“â€äº†ã€‚è¿™æ˜¯å› ä¸ºåº”ç”¨ç¨‹åºå‘½ä¸­äº†æ–­ç‚¹ã€‚å¦‚æžœä½ åˆ‡æ¢å›ž VSCode ä¸­åŽ»çœ‹ï¼Œä½ ä¼šæ³¨æ„ç¬¬ 11 è¡Œä»£ç é«˜äº®äº†ï¼Œå¹¶ä¸”è°ƒè¯•é¢æ¿ä¹Ÿæ›´æ–°äº†èƒ½å¤Ÿååº”å‡ºè°ƒç”¨æ ˆã€‚ å¦‚æžœä¸€åˆ‡è¿è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆæ­å–œä½ ï¼ä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•è®¾ç½® VSCode è¿œç¨‹è°ƒè¯•ã€‚å¦‚æžœæƒ³è¦äº†è§£æ›´å¤šå…³äºŽ VSCode è°ƒè¯•çš„çŸ¥è¯†ï¼Œå¯ä»¥çœ‹çœ‹è¿™é‡Œ]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ’¤é”€ä¸€ä¸ª git commit --amend]]></title>
    <url>%2F2019%2F03%2F29%2F%E6%92%A4%E9%94%80%E4%B8%80%E4%B8%AA-git-commit-amend%2F</url>
    <content type="text"><![CDATA[å¯èƒ½ä¼šç¢°åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ æƒ³è¦å°†æœ¬è¯¥åœ¨ HEAD ä¹‹å‰æäº¤çš„ä¿®æ”¹é€šè¿‡ git commit --amend æäº¤è¿½åŠ åˆ° HEAD ä¸Šäº†ã€‚è¿™æ ·ï¼Œå°±éœ€è¦å›žæ»šä½ åˆšåˆšå®Œæˆçš„æ“ä½œï¼Œç„¶åŽå°†å®ƒåº”ç”¨åˆ°æ­£ç¡®çš„æäº¤ä¸Šã€‚å¯¹äºŽç®€å•çš„ä¿®æ”¹ï¼Œä½ å¯èƒ½ä¼šå‘çŽ° git reset -p å¾ˆæ–¹ä¾¿ã€‚å¾ˆå¤šæƒ…å†µä¸‹ä¿®æ”¹çš„å†…å®¹å¤ªå¤šï¼Œå¹¶ä¸”å’Œå‰é¢çš„æäº¤äº¤ç»‡åœ¨ä¸€èµ·ï¼Œä½ å¯èƒ½ä¼šéœ€è¦ git reflog å¸®å¿™ã€‚ reflog è®°å½•åˆ†æ”¯é¡¶ç«¯çš„æ›´æ–°ã€‚é¡¶ç«¯ä¼šåœ¨ä½ æ¯æ¬¡åˆ›å»ºæ–°çš„æäº¤ï¼Œè¿½åŠ æäº¤ï¼Œé‡ç½®æäº¤ï¼Œåˆ‡æ¢åˆ†æ”¯ç­‰ç­‰æ“ä½œçš„æ—¶å€™è¢«æ›´æ–°ã€‚åŸºæœ¬ä¸Šï¼Œä¸€æ—¦ HEAD å‘ç”Ÿäº†å˜åŒ–ï¼Œå°±ä¼šç”Ÿæˆä¸€æ¬¡ reflog è®°å½•ã€‚å› æ­¤ reflog æ˜¯ç†è§£ä»“åº“å¦‚ä½•è¿›å…¥ç‰¹å®šçŠ¶æ€çš„å¼ºå¤§å·¥å…·ã€‚ git reflog -2 ä¼šç»™ä½  Git æœ€è¿‘ä¸¤æ¬¡å®Œæˆçš„æ“ä½œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œçœ‹èµ·æ¥å°±åƒä¸‹é¢ï¼š 128751261 HEAD@&#123;0&#125;: commit (amend): Something something something commit message9d3a192 HEAD@&#123;1&#125;: reset: moving to HEAD~1 git commit --amend æ˜¯ä¸€ç§ç®€å†™ï¼ˆè€ƒè™‘ä¿®æ”¹å·²ç»äº§ç”Ÿï¼Œä¸åœ¨ç´¢å¼•åŒºå°±åœ¨å·¥ä½œç›®å½•ä¸­ï¼‰ï¼š 12345git stashgit reset HEAD~1git stash popgit add .git commit æˆ–è€…ç”¨æ–‡å­—æè¿°ï¼š å°†ä½ æƒ³è¦åº”ç”¨åˆ° HEAD æäº¤ä¸­çš„ä¿®æ”¹ä¿å­˜åˆ° stash ä¸­ ç§»é™¤ HEAD æäº¤ï¼Œå°†å†…å®¹æ”¾ç½®åˆ°ç´¢å¼•åŒº å°†æš‚å­˜èµ·æ¥çš„ä¿®æ”¹é‡Šæ”¾åˆ°å·¥ä½œç›®å½•ï¼Œæ·»åŠ åˆ°åˆšåˆšè¢«é‡ç½®çš„æäº¤çš„ä¿®æ”¹ä¸­ã€‚ æ‰§è¡Œä¸€ä¸ªæ–°çš„æäº¤ã€‚ å› æ­¤ï¼Œreflog ä¸­çš„æœ€åŽä¸¤éƒ¨æ“ä½œæ˜¯ reset å’Œ commitã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬èƒ½ç”¨å®ƒåšä»€ä¹ˆï¼Ÿå¥½å§ï¼Œåœ¨ amendï¼ˆå°¤å…¶æ˜¯åœ¨ reset ä¹‹å‰ï¼‰å‘ç”Ÿä¹‹å‰ï¼Œ9d3a192 æ˜¯ HEADã€‚8751261æ˜¯åœ¨ amend æ“ä½œä¹‹åŽç”Ÿæˆçš„æäº¤ã€‚git diff 8751261..9d3a192 å°†ä¼šå‘ä½ å±•ç¤º amend ä¸­åº”ç”¨äº†ä»€ä¹ˆä¿®æ”¹ã€‚ ä»Žè¿™é‡Œå¼€å§‹ï¼Œä½ å¯ä»¥ç”¨ git apply æ¥å°† amend ä¹‹å‰åˆ° amend ä¹‹åŽçš„å·®å¼‚åº”ç”¨åˆ°ä½ çš„å·¥ä½œæ ‘ï¼Œé€šè¿‡ git diffï¼š 1git diff 8751261..9d3a192 | git apply - Note: The hyphen in git apply - causes git apply to take stdin as input. Extra Note: The arguments here are given in reverse order, with the later commit happening first to show the reverse of the amend. Itâ€™s the same as doing git diff 9d3a192..8751261 -R, which reverses the diff output. Additionally, the -R argument may be applied to git apply instead of git diff to achieve the same effect. Now we can do another amend to put the commit back to where it was before we did the previous amend: 1git commit -a --amend -CHEAD And then, by reversing the order of the SHAs to git diff, get the changes we want to apply to the correct commit back: 1git diff 9d3a192..8751261 | git apply - And commit as necessary, this time using â€“fixup to indicate the correct commit (in this example, 1234567): 1git commit -a --fixup 1234567 Then you can rebase at a later time (or now) to do the â€˜amendâ€™ you had originally intended: 1git rebase --i --autosquash 1234567~1 So donâ€™t fret when you do an accidental amend. Itâ€™s just a couple commands away from being unwound and applied to the correct commit.]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitFlow å·¥ä½œæµ]]></title>
    <url>%2F2019%2F03%2F26%2FGitFlow-%E5%B7%A5%E4%BD%9C%E6%B5%81%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡â€“ Gitflow Workflow Gitfow å·¥ä½œæµæ˜¯ä¸€ä¸ª Git å·¥ä½œæµè®¾è®¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯è¢« Vincent Driessen at nvie å‘å¸ƒå¹¶æ”¶åˆ°æ¬¢è¿Žã€‚Gitflow å·¥ä½œæµ å®šä¹‰äº†ä¸€ä¸ªä¸¥æ ¼å›´ç»•é¡¹ç›®å‘å¸ƒçš„åˆ†æ”¯æ¨¡åž‹ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç”¨äºŽç®¡ç†å¤§åž‹é¡¹ç›®çš„ç¨³å®šæ¡†æž¶ã€‚ Gitflow å®Œç¾Žåœ°é€‚åˆäºŽå…·æœ‰è®¡åˆ’æ€§å‘å¸ƒå‘¨æœŸçš„é¡¹ç›®ã€‚è¿™ç§å·¥ä½œæµä¸ä¼šæ·»åŠ ä»»ä½•è¶…å‡º ç‰¹æ€§åˆ†æ”¯å·¥ä½œæµ æ‰€éœ€èŒƒå›´ä¹‹å¤–çš„æ–°æ¦‚å¿µæˆ–è€…å‘½ä»¤ã€‚ç›¸åï¼Œå®ƒä¸ºä¸åŒåˆ†æ”¯åˆ†é…äº†éžå¸¸è¯¦ç»†çš„è§’è‰²ï¼Œå¹¶ä¸”å®šä¹‰äº†å¦‚ä½•ä»¥åŠåˆé€‚ä»–ä»¬åº”è¯¥äº¤äº’ã€‚é™¤äº† feature åˆ†æ”¯ï¼Œå®ƒä¸ºå‡†å¤‡é˜¶æ®µï¼Œç»´æŠ¤é˜¶æ®µå’Œè®°å½•ç‰ˆæœ¬é˜¶æ®µä½¿ç”¨äº†ç‹¬ç«‹çš„åˆ†æ”¯ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å……åˆ†åˆ©ç”¨æ‰€æœ‰ç‰¹æ€§åˆ†æ”¯å·¥ä½œæµçš„ä¼˜åŠ¿ï¼šæ‹‰å–è¯·æ±‚ï¼Œç‹¬ç«‹å®žéªŒï¼Œä»¥åŠæ›´å¤šé«˜æ•ˆåˆä½œã€‚ å¼€å§‹Gitflow çœŸçš„åªæ˜¯ Git å·¥ä½œæµçš„ä¸€ä¸ªæŠ½è±¡ç†å¿µã€‚è¿™æ„å‘³ç€å®ƒæŒ‡ç¤ºäº†åº”è¯¥åˆ›å»ºä»€ä¹ˆç±»åž‹çš„åˆ†æ”¯ä»¥åŠå¦‚ä½•åˆå¹¶ä»–ä»¬ã€‚æˆ‘ä»¬å°†ä¼šè§¦åŠä¸‹é¢è¿™äº›åˆ†æ”¯çš„å¢“åœ°ã€‚git-flow å·¥å…·é›†æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œéœ€è¦å®‰è£…ã€‚git-flow çš„å®‰è£…è¿‡ç¨‹å¾ˆç®€å•ã€‚å„ä¸ªæ“ä½œç³»ç»Ÿå¹³å°éƒ½æœ‰å¯¹åº”çš„ git-flow å®‰è£…åŒ…ã€‚åœ¨ OSX ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥æ‰§è¡Œ brew install git-flow ã€‚åœ¨ Windows ä¸Šä½ éœ€è¦ä¸‹è½½å¹¶å®‰è£… git-flow ã€‚å®‰è£…å®ŒæˆåŽï¼Œä½ å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­æ‰§è¡Œ git flow init æ¥ä½¿ç”¨å®ƒã€‚Git-flow å†…éƒ¨å°è£…äº† Git ã€‚git flow init å‘½ä»¤æ˜¯å¯¹é»˜è®¤ git init çš„æ‰©å±•ï¼Œé™¤äº†ä¸ºä½ åˆ›å»ºåˆ†æ”¯å¤–ï¼Œä¸ä¼šå¯¹ä½ çš„ä»“åº“ä½œå‡ºä»»ä½•ä¿®æ”¹ã€‚ å®ƒå¦‚ä½•å·¥ä½œ.svg) Develop å’Œ Master åˆ†æ”¯è¿™ä¸ªå·¥ä½œæµä½¿ç”¨ä¸¤ä¸ªåˆ†æ”¯æ¥è®°å½•é¡¹ç›®åŽ†å²ï¼Œè€Œä¸æ˜¯ç”¨ä¸€ä¸ªå•ç‹¬çš„ master åˆ†æ”¯ã€‚master åˆ†æ”¯ä¿å­˜äº†æ­£å¼å‘å¸ƒåŽ†å²ï¼Œdevelop åˆ†æ”¯ç”¨äºŽé›†æˆç‰¹æ€§åˆ†æ”¯ã€‚å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸º master åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤æ‰“ä¸Šä¸€ä¸ªæ•°å­—çš„ç‰ˆæœ¬æ ‡è®°ã€‚ ç¬¬ä¸€æ­¥å°±æ˜¯ä»Ž master åˆ†æ”¯ä¸Šæ–°å»ºå‡º develop åˆ†æ”¯ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªç©ºçš„ develop åˆ†æ”¯ï¼Œç„¶åŽå°†å®ƒåŒæ­¥åˆ°æœåŠ¡å™¨ï¼š 12git branch developgit push -u origin develop è¿™ä¸ªåˆ†æ”¯å°†ä¼šåŒ…å«é¡¹ç›®çš„å®Œæ•´åŽ†å²ï¼Œè€Œ master åˆ†æ”¯å°†ä¼šåŒ…å«ä¸€ä¸ªç®€ç•¥çš„ç‰ˆæœ¬åŽ†å²ã€‚å…¶ä»–å¼€å‘è€…çŽ°åœ¨åº”è¯¥ clone ä¸­å¿ƒä»“åº“ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ª develop çš„è·Ÿè¸ªåˆ†æ”¯ã€‚ å½“ä½¿ç”¨ git-flow æ‰©å±•åº“æ—¶ï¼Œå¯¹ä¸€ä¸ªå·²å­˜åœ¨çš„ä»“åº“æ‰§è¡Œ git flow init å°†ä¼šåˆ›å»º develop åˆ†æ”¯ï¼š 12345678910111213141516$ git flow initInitialized empty Git repository in ~/project/.git/No branches exist yet. Base branches must be created now.Branch name for production releases: [master]Branch name for "next release" development: [develop]How to name your supporting branch prefixes?Feature branches? [feature/]Release branches? [release/]Hotfix branches? [hotfix/]Support branches? [support/]Version tag prefix? []$ git branch* develop master ç‰¹æ€§åˆ†æ”¯æ¯ä¸€ä¸ªæ–°çš„ç‰¹æ€§éƒ½åº”è¯¥æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œè¿™æ ·å°±å¯ä»¥è¢« push åˆ°ä¸­å¿ƒä»“åº“è¾¾åˆ°å¤‡ä»½/åä½œçš„ç›®çš„ã€‚ä½†æ˜¯ï¼Œfeature åˆ†æ”¯æ˜¯å°† develop åˆ†æ”¯ä½œä¸ºä»–ä»¬çš„çˆ¶äº²åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä»Ž master å¼€è¾Ÿåˆ†æ”¯ã€‚å½“ä¸€ä¸ªç‰¹æ€§å¼€å‘å®ŒæˆåŽï¼Œå®ƒå°†ä¼šè¢« merge å›žåˆ°developåˆ†æ”¯ä¸­ã€‚ç‰¹æ€§åˆ†æ”¯åº”è¯¥æ°¸è¿œä¸è¦å’Œ master åˆ†æ”¯äº¤äº’ã€‚ .svg) æ³¨æ„ï¼Œæ— è®ºå‡ºäºŽä»€ä¹ˆç›®åœ°ï¼Œfeature åˆ†æ”¯ä¸Ž develop åˆ†æ”¯çš„ç»“åˆå°±æ˜¯ç‰¹æ€§åˆ†æ”¯å·¥ä½œæµã€‚ä½†æ˜¯ Gitflow å·¥ä½œæµè¿˜æ²¡æœ‰æ­¢æ­¥äºŽæ­¤ã€‚ feature åˆ†æ”¯é€šå¸¸ä»Žæœ€æ–°çš„ develop åˆ†æ”¯åˆ›å»ºã€‚ åˆ›å»ºä¸€ä¸ªç‰¹æ€§åˆ†æ”¯æ²¡æœ‰ git-flow æ‰©å±•çš„æƒ…å†µä¸‹ï¼š 12git checkout developgit checkout -b feature_branch ä½¿ç”¨ git-flow æ‰©å±•çš„æƒ…å†µï¼š 1git flow feature start feature_branch ç»§ç»­ä½ çš„å·¥ä½œï¼Œå¹¶ä¸”åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨ Gitã€‚ ç»“æŸä¸€ä¸ªç‰¹æ€§åˆ†æ”¯å½“ä½ å®Œæˆäº†ç‰¹æ€§çš„å¼€å‘å·¥ä½œï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å°† feature_branch merge åˆ° develop ä¸­ã€‚ ä¸ä½¿ç”¨ git-flow æ‰©å±•ï¼š 12git checkout developgit merge feature_branch ä½¿ç”¨ git-flow æ‰©å±•ï¼š 1git flow feature finish feature_branch å‘å¸ƒåˆ†æ”¯.svg) ä¸€æ—¦ develop åˆ†æ”¯èŽ·å–çš„ç‰¹æ€§è¶³å¤Ÿå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬äº†ï¼ˆæˆ–è€…å¿«åˆ°äº†é¢„å®šçš„å‘å¸ƒæ—¥æœŸï¼‰ï¼Œä½ å°±ä»Ž develop åˆ†æ”¯å¼€è¾Ÿä¸€ä¸ª release åˆ†æ”¯ã€‚åˆ›å»ºè¿™ä¸ªåˆ†æ”¯å¯åŠ¨ä¸‹ä¸€ä¸ªå‘å¸ƒå‘¨æœŸï¼Œæ‰€æœ‰ä»Žè¿™æ—¶å¼€å§‹ä¸å…è®¸æ–°ç‰¹æ€§åŠ å…¥è¿›æ¥â€”â€”åªå…è®¸ bug ä¿®å¤ï¼Œæ–‡æ¡£ç”Ÿæˆï¼Œä»¥åŠå…¶ä»–é¢å‘å‘å¸ƒçš„ä»»åŠ¡å¯ä»¥è¿›å…¥åˆ°è¿™ä¸ªåˆ†æ”¯ä¸­æ¥ã€‚ä¸€æ—¦å‡†å¤‡å¥½ï¼Œrelease åˆ†æ”¯å°±ä¼šè¢«merge åˆ° master åˆ†æ”¯ä¸­ï¼Œå¹¶æ‰“ä¸Šä¸€ä¸ªæ•°å­—ç‰ˆæœ¬å·ã€‚å¦å¤–ï¼Œå®ƒä¹Ÿåº”è¯¥è¢«åˆå¹¶å›ž develop ä¸­ï¼Œåœ¨åˆ›å»º release åˆ†æ”¯ä»¥åŽï¼Œdevelop åˆ†æ”¯å¯èƒ½ä¼šæœ‰æŽ¨è¿›ã€‚ ä½¿ç”¨ä¸€ä¸ªä¸“ç”¨çš„åˆ†æ”¯ç”¨äºŽå‡†å¤‡å‘å¸ƒï¼Œè¿™æ ·å°±å¯ä»¥è®©ä¸€ä¸ªå›¢é˜Ÿæ¥å‡†å¤‡å½“å‰çš„å‘å¸ƒï¼ŒåŒæ—¶è®©å¦ä¸€ä¸ªå›¢é˜Ÿç»§ç»­ä¸ºä¸‹ä¸€ä¸ªç‰ˆæœ¬å¼€å‘æ–°ç‰¹æ€§ã€‚è¿™ä¹Ÿä¸ºå¼€å‘åˆ›å»ºäº†æ˜Žç¡®çš„é˜¶æ®µï¼ˆä¾‹å¦‚ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“è¯´ â€œè¿™å‘¨æˆ‘ä»¬å‡†å¤‡ 4.0 ç‰ˆæœ¬â€ï¼Œä¹Ÿå¾ˆå®¹æ˜“åœ¨ä»“åº“çš„ç»“æž„ä¸­çœ‹åˆ°ï¼‰ åˆ›å»º release åˆ†æ”¯æ˜¯å¦ä¸€é¡¹ç›´æŽ¥çš„åˆ†æ”¯æ“ä½œã€‚å°±åƒ feature åˆ†æ”¯ï¼Œrelease åˆ†æ”¯æ˜¯åŸºäºŽ develop åˆ†æ”¯çš„ã€‚ä¸€ä¸ªæ–°çš„ release åˆ†æ”¯å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•åˆ›å»ºã€‚ ä¸é€‚ç”¨ git-flow æ‰©å±•ï¼š 12git checkout developgit checkout -b release/0.1.0 ä½¿ç”¨ git-flow æ‰©å±•ï¼š 12$ git flow release start 0.1.0Switched to a new branch 'release/0.1.0' ä¸€æ—¦æ–°ç‰ˆæœ¬å‡†å¤‡å¥½äº†è¦å‘å¸ƒï¼Œå®ƒå°†è¢«åˆå¹¶åˆ° master å’Œ develop ä¸­ï¼Œç„¶åŽ release åˆ†æ”¯å°†è¢«åˆ é™¤ã€‚åˆå¹¶å›ž develop åˆ†æ”¯æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºå¯èƒ½æœ‰é‡è¦æ›´æ–°å·²ç»è¢«æ·»åŠ åˆ°äº† release åˆ†æ”¯ï¼Œä»–ä»¬ä¹Ÿè®¸è¦è¢«æ–°çš„ç‰¹æ€§ä½¿ç”¨åˆ°ã€‚å¦‚æžœä½ çš„å›¢é˜Ÿé‡è§†ä»£ç é‡å®¡ï¼Œè¿™æ˜¯å‘èµ· pull request ç†æƒ³æ—¶æœºã€‚ ç»“æŸä¸€ä¸ª release åˆ†æ”¯ï¼Œè¦ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š ä¸ä½¿ç”¨ git-flow æ‰©å±•ï¼š 12git checkout mastergit merge release/0.1.0 ä½¿ç”¨ git-flow æ‰©å±•ï¼š 1git flow release finish '0.1.0' ä¿®è¡¥åˆ†æ”¯.svg) ç»´æŠ¤æˆ–è€… hotfix åˆ†æ”¯è¢«ç”¨äºŽå¿«é€Ÿä¿®è¡¥ç”Ÿäº§ç‰ˆæœ¬ã€‚ hotfix åˆ†æ”¯å¾ˆåƒ release åˆ†æ”¯ä¸Ž feature åˆ†æ”¯ï¼Œé™¤äº†ä»–ä»¬æ˜¯åŸºäºŽ master åˆ†æ”¯ è€Œä¸æ˜¯ develop åˆ†æ”¯ã€‚è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªåº”è¯¥ç›´æŽ¥ä»Ž master åˆ†æ”¯å¼€è¾Ÿçš„åˆ†æ”¯ã€‚ä¸€æ—¦ fix å®Œæˆäº†ï¼Œå®ƒåº”è¯¥è¢« merge å›ž master å’Œ develop ï¼ˆæˆ–è€…å½“å‰ release åˆ†æ”¯ï¼‰ï¼Œmaster åº”è¯¥ç”¨ä¸€ä¸ªæ›´æ–°çš„æ•°å­—ç‰ˆæœ¬æ ‡è®°ã€‚ æœ‰ä¸€ä¸ªä¸“ç”¨çš„å¼€å‘çº¿ç”¨äºŽ bug fix å¯ä»¥è®©ä½ çš„å›¢é˜Ÿåœ¨ä¸ä¸­æ–­å…¶ä½™å·¥ä½œæµç¨‹æˆ–ç­‰å¾…ä¸‹ä¸€ä¸ªå‘å¸ƒå‘¨æœŸçš„æƒ…å†µä¸‹è§£å†³é—®é¢˜ã€‚ä½ å¯ä»¥å°†ç»´æŠ¤åˆ†æ”¯è§†ä¸ºç›´æŽ¥ä¸Ž master åˆ†æ”¯åä½œçš„ä¸´æ—¶ release åˆ†æ”¯ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ª hotfix åˆ†æ”¯ï¼š ä½¿ç”¨ git-flow å·¥ä½œæµï¼š 12git checkout mastergit checkout -b hotfix_branch ä¸ä½¿ç”¨ git-flow å·¥ä½œæµï¼š 1$ git flow hotfix start hotfix_branch ä¸Žç»“æŸ release åˆ†æ”¯ç±»ä¼¼ï¼Œhotfix åˆ†æ”¯è¦è¢« merge å›žåˆ° master å’Œ develop ä¸­ã€‚ 123456git checkout mastergit merge hotfix_branchgit checkout developgit merge hotfix_branchgit branch -D hotfix_branch$ git flow hotfix finish hotfix_branch ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªç‰¹æ€§åˆ†æ”¯å·¥ä½œæµçš„å®Œæ•´æ¼”ç¤ºç¤ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªå…·å¤‡ master åˆ†æ”¯çš„ä»“åº“ã€‚ 123456789git checkout mastergit checkout -b developgit checkout -b feature_branch# work happens on feature branchgit checkout developgit merge feature_branchgit checkout mastergit merge developgit branch -d feature_branch é™¤äº† feature å’Œ release æµç¨‹ï¼Œä¸‹é¢è¿˜æœ‰ä¸€ä¸ª hotfix çš„ç¤ºä¾‹ï¼š 1234567git checkout mastergit checkout -b hotfix_branch# work is done commits are added to the hotfix_branchgit checkout developgit merge hotfix_branchgit checkout mastergit merge hotfix_branch æ€»ç»“è¿™é‡Œæˆ‘ä»¬è®¨è®ºäº† Gitflow å·¥ä½œæµã€‚Gitflow æ˜¯ä½ å’Œå›¢é˜Ÿèƒ½å¤Ÿä½¿ç”¨çš„ä¼—å¤š Git å·¥ä½œæµ ä¹‹ä¸€ã€‚ å…³äºŽ Gitflow éœ€è¦äº†è§£çš„å…³é”®ç‚¹æœ‰è¿™äº›ï¼š è¿™ä¸ªå·¥ä½œæµé€‚åˆåŸºäºŽç‰ˆæœ¬çš„è½¯ä»¶å¼€å‘å·¥ä½œæµã€‚ Gitflow ä¸ºç”Ÿäº§çŽ¯å¢ƒæä¾›äº† hotfix é€šé“ã€‚ Gitflow çš„å®Œæ•´æµç¨‹å¦‚ä¸‹ï¼š ä»Ž master åˆ›å»ºä¸€ä¸ª develop åˆ†æ”¯ ä»Ž developåˆ›å»ºä¸€ä¸ª release åˆ†æ”¯ ä»Ž develop åˆ›å»º feature åˆ†æ”¯ å½“ä¸€ä¸ª feature å¼€å‘ç»“æŸï¼Œå°†è¢« merge åˆ° develop åˆ†æ”¯ å½“ release åˆ†æ”¯å®Œæˆï¼Œå°†è¢« merge åˆ° develop å’Œ master å¦‚æžœåœ¨ master ä¸­å‘çŽ°é—®é¢˜ï¼Œè¦ä»Ž master åˆ›å»ºä¸€ä¸ª hotfix åˆ†æ”¯ ä¸€æ—¦ hotfix å®Œæˆï¼Œå°†è¢« merge å›ž develop å’Œ master]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ååˆ†é’Ÿä»‹ç» MobX å’Œ React]]></title>
    <url>%2F2019%2F03%2F24%2F%E5%8D%81%E5%88%86%E9%92%9F%E4%BB%8B%E7%BB%8D-MobX-%E5%92%8C-React%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šTen minute introduction to MobX and React MobX æ˜¯ä¸€ä¸ªç®€å•çš„ï¼Œå¯æ‰©å±•å¹¶ä¸”ç»è¿‡å®žæˆ˜è€ƒç ”çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚è¿™ç¯‡æ•™ç¨‹å°†ä¼šèŠ±10åˆ†é’Ÿæ—¶é—´æ•™ä¼šä½ å…³äºŽ MobX çš„å…¨éƒ¨é‡è¦æ¦‚å¿µã€‚MobX æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº“ï¼Œä½†æ˜¯å¤§å¤šæ•°äººä¼šå°†å®ƒå’Œ React ç»„åˆä½¿ç”¨ï¼Œæœ¬ç¯‡æ•™ç¨‹ä¹Ÿå°†å…³æ³¨è¿™ç§ç»„åˆçš„ç”¨æ³•ã€‚ æ ¸å¿ƒæ¦‚å¿µçŠ¶æ€æ˜¯æ¯ä¸ªåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒï¼Œæ²¡æœ‰æ¯”ä½¿ç”¨ä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œæˆ–è€…å››å¤„åˆ†æ•£ä¸”ä¸èƒ½åŒæ­¥çš„æœ¬åœ°å˜é‡ç»„æˆçš„çŠ¶æ€æ›´å®¹æ˜“åˆ›é€ å‡ºå……æ»¡é”™è¯¯å’Œä¸å¯ç®¡ç†çš„åº”ç”¨ç¨‹åºäº†ã€‚å› æ­¤å¾ˆå¤šçŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆéƒ½ä¼šé™åˆ¶ä¿®æ”¹çŠ¶æ€çš„æ–¹å¼ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸å¯å˜çŠ¶æ€ã€‚ä½†æ˜¯è¿™æ ·åšä¼šå¼•å…¥æ–°çš„é—®é¢˜ï¼›æ•°æ®éœ€è¦è§„èŒƒåŒ–ï¼Œå‚ç…§å®Œæ•´æ€§å°±ä¸èƒ½å¾—åˆ°ä¿è¯ï¼ŒäºŽæ˜¯å°±ä¸å†å¯èƒ½ä½¿ç”¨åƒåŽŸåž‹è¿™æ ·å¼ºå¤§çš„æ¦‚å¿µã€‚* MobX é€šè¿‡è§£å†³äº†æ ¹æœ¬é—®é¢˜ä½¿å¾—æ•°æ®ç®¡ç†å†æ¬¡å˜å¾—ç®€å•ï¼šå®ƒä¿è¯äº†ä¸å¯èƒ½åˆ›é€ å‡ºä¸ä¸€è‡´çŠ¶æ€ã€‚å®žçŽ°çš„ç­–ç•¥å¾ˆç®€å•ï¼šç¡®å®šä¸€åˆ‡èƒ½å¤Ÿä»Žåº”ç”¨ç¨‹åºçš„çŠ¶æ€ç»§æ‰¿çš„ï¼Œéƒ½å°†ä»Žåº”ç”¨ç¨‹åºçš„çŠ¶æ€ç»§æ‰¿ã€‚å¹¶ä¸”è‡ªåŠ¨å®Œæˆç»§æ‰¿ã€‚ æ¦‚å¿µä¸Šï¼ŒMobX å¯¹å¾…ä½ çš„åº”ç”¨ç¨‹åºä¸Žç”µå­è¡¨æ ¼ç±»ä¼¼ã€‚ é¦–å…ˆï¼Œåº”ç”¨ç¨‹åºä¸­æœ‰ stateï¼ˆçŠ¶æ€ï¼‰ã€‚å³æž„æˆåº”ç”¨ç¨‹åºçš„æ•°æ®æ¨¡åž‹ä¸­çš„å¯¹è±¡ï¼Œæ•°ç»„ï¼ŒåŸºç¡€å€¼ï¼Œå¼•ç”¨ç»„æˆçš„å›¾è¡¨ã€‚è¿™äº›å€¼æ˜¯ä½ åº”ç”¨ç¨‹åºçš„æ•°æ®å•å…ƒ ç„¶åŽæœ‰ derivationsï¼ˆæ±‚å¯¼ï¼‰ã€‚åŸºæœ¬ä¸Šæ˜¯æŒ‡æ‰€æœ‰èƒ½å¤Ÿæ ¹æ®åº”ç”¨ç¨‹åºçš„ state è‡ªåŠ¨è®¡ç®—å‡ºçš„å€¼ã€‚è¿™äº› derivationï¼Œ æˆ–è€…è®¡ç®—å€¼çš„èŒƒå›´å¯ä»¥æ˜¯ä»Žç®€å•å€¼ç±»åž‹ï¼Œä¾‹å¦‚æœªå®Œæˆçš„ todo æ•°é‡ï¼Œåˆ°å¤æ‚ç±»åž‹ä¾‹å¦‚ todo çš„å¯è§†åŒ– HTML è¡¨ç¤ºã€‚ç”µå­è¡¨æ ¼ä¸­çš„ç­‰ä»·ç‰©ï¼šé‚£äº›å…¬å¼å’Œåº”ç”¨ç¨‹åºçš„å›¾è¡¨ã€‚ Reactionï¼ˆååº”ï¼‰å’Œ derivation ååˆ†ç›¸ä¼¼ã€‚ä¸»è¦çš„å·®å¼‚åœ¨äºŽ react ä¸ä¼šåˆ›é€ å¾—å‡ºä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯é€šè¿‡è‡ªåŠ¨è¿è¡Œæ¥æ‰§è¡Œä¸€äº›ä»»åŠ¡ã€‚é€šå¸¸æ˜¯ I/O ç›¸å…³çš„ã€‚å®ƒä»¬ç”¨æ¥ç¡®å®š DOM è¢«æ›´æ–°ï¼Œæˆ–è€…ç½‘ç»œè¯·æ±‚ä¼šåœ¨æ­£ç¡®çš„æ—¶é—´è‡ªåŠ¨æ‰§è¡Œç­‰ã€‚ æœ€åŽæ˜¯ actionï¼ˆåŠ¨ä½œï¼‰ã€‚action æ˜¯æ‰€æœ‰èƒ½å¤Ÿæ”¹å˜çŠ¶æ€çš„ä¸œè¥¿ã€‚MobX å°†ä¼šç¡®ä¿æ‰€æœ‰é€šè¿‡ ation å¯¹çŠ¶æ€æ‰€åšçš„ä¿®æ”¹éƒ½èƒ½è‡ªåŠ¨è¢«æ‰€æœ‰çš„ derivation å’Œ reaction å¤„ç†ã€‚åŒæ­¥å¹¶ä¸”æ— å¹²æ‰°ã€‚ ä¸€ä¸ªç®€å•çš„ todo storeåŽŸç†è¯´å¾—å¤Ÿå¤šäº†ï¼Œå®žè·µæ“ä½œä¸€ä¸‹å¯èƒ½ä¼šæ¯”è®¤çœŸé˜…è¯»ä¸Šé¢é‚£äº›ä¸œè¥¿å­¦åˆ°æ›´å¤šã€‚ä¸ºäº†ä»Žå¤´å¼€å§‹ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªéžå¸¸ç®€å•çš„ ToDo storeã€‚æ³¨æ„ä¸‹æ–¹çš„æ‰€æœ‰ä»£ç å—éƒ½æ˜¯å¯ç¼–è¾‘çš„ï¼Œç‚¹å‡» run code æŒ‰é’®æ‰§è¡Œä»£ç ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªéžå¸¸ç›´æŽ¥çš„ TodoStore ï¼Œç”¨æ¥ç®¡ç†ä¸€ä¸ª todo é›†åˆã€‚è¿˜æ²¡æœ‰å¼•å…¥ MobXã€‚ 1234567891011121314151617181920212223242526class TodoStore &#123; todos = []; get completedTodosCount() &#123; return this.todos.filter( todo =&gt; todo.completed === true ).length; &#125; report() &#123; if (this.todos.length === 0) return "&lt;none&gt;"; return `Next todo: "$&#123;this.todos[0].task&#125;". ` + `Progress: $&#123;this.completedTodosCount&#125;/$&#123;this.todos.length&#125;`; &#125; addTodo(task) &#123; this.todos.push(&#123; task: task, completed: false, assignee: null &#125;); &#125;&#125;const todoStore = new TodoStore(); æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª todoStore çš„å®žä¾‹ï¼Œå®žä¾‹ä¸­åŒ…å«äº† todo çš„é›†åˆã€‚ç»™è¿™ä¸ª todoStore æ·»åŠ ä¸€äº›å¯¹è±¡ã€‚ä¸ºäº†ç¡®ä¿çœ‹åˆ°ä¿®æ”¹çš„æ•ˆæžœï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡æ”¹å˜ä¹‹åŽè°ƒç”¨ todoStore.report æ¥è¾“å‡ºæ—¥å¿—ã€‚æ³¨æ„ report æ•…æ„å§‹ç»ˆåªæ‰“å°ç¬¬ä¸€ä¸ªä»»åŠ¡ã€‚è¿™ä½¿å¾—è¿™ä¸ªä¾‹å­éžå¸¸äººå·¥ï¼Œä½†æ˜¯ä½ å°†ä¼šåœ¨ä¸‹é¢çœ‹åˆ°å®ƒèƒ½å¾ˆå¥½åœ°è¯æ˜Ž MobX çš„ä¾èµ–è¿½è¸ªæ˜¯å¤šä¹ˆçš„åŠ¨æ€ã€‚ 1234567891011121314todoStore.addTodo("read MobX tutorial");console.log(todoStore.report());todoStore.addTodo("try MobX");console.log(todoStore.report());todoStore.todos[0].completed = true;console.log(todoStore.report());todoStore.todos[1].task = "try MobX in own project";console.log(todoStore.report());todoStore.todos[0].task = "grok MobX tutorial";console.log(todoStore.report()); å˜å¾—å“åº”å¼ç›®å‰ï¼Œè¿™éƒ¨åˆ†ä»£ç è¿˜æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ã€‚ä½†æ˜¯å¦‚æžœæˆ‘ä»¬ä¸å¿…æ˜¾ç¤ºæ‰§è¡Œ report ï¼Œè€Œæ˜¯å¯ä»¥åªç”¨å£°æ˜Žæˆ‘ä»¬æƒ³è¦å®ƒåœ¨æ¯ä¸€æ¬¡çŠ¶æ€æ”¹å˜æ—¶éƒ½è¢«è§¦å‘æ‰§è¡Œå‘¢ï¼Ÿè¿™æ ·èƒ½å¤Ÿå°†æˆ‘ä»¬ä»Žè´Ÿè´£åœ¨ä»£ç åº“ä¸­ä»»ä½•å¯èƒ½å½±å“ report ç»“æžœçš„åœ°æ–¹è°ƒç”¨ report çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ã€‚æˆ‘ä»¬åªéœ€è¦ç¡®å®šæœ€åŽçš„ report è¢«æ‰“å°å‡ºæ¥ã€‚ä½†æ˜¯ä¸æƒ³èŠ±è´¹ç²¾åŠ›æ¥ç»´æŠ¤éƒ¨åˆ†ä»£ç ã€‚ å¹¸è¿çš„æ˜¯è¿™æ­£æ˜¯ MobX èƒ½å¤Ÿä¸ºä½ åšçš„ã€‚è‡ªåŠ¨æ‰§è¡Œä»£ç åªå–å†³äºŽçŠ¶æ€ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ report æ–¹æ³•è‡ªåŠ¨æ›´æ–°ï¼Œå°±åƒç”µå­è¡¨æ ¼ä¸­çš„å›¾è¡¨ä¸€æ ·ã€‚ä¸ºäº†å®žçŽ°è¿™ä¸€ç‚¹ï¼ŒTodoStore å¿…é¡»å˜æˆå¯è§‚å¯Ÿçš„ï¼Œè¿™æ · MobX å°±èƒ½å¤Ÿè¿½è¸ªæ‰€æœ‰äº§ç”Ÿçš„ä¿®æ”¹ã€‚æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªç±»æ¥å®žçŽ°è¿™æ ·çš„åŠŸèƒ½ã€‚ åŒæ ·ï¼ŒcompletedTodosCount å±žæ€§å¯ä»¥è‡ªåŠ¨ä»Ž todo åˆ—è¡¨ç»§æ‰¿ã€‚é€šè¿‡ä½¿ç”¨ @observable å’Œ @computed è£…é¥°å™¨ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­å¼•å…¥å¯è§‚å¯Ÿå±žæ€§ï¼š 1234567891011121314151617181920212223242526272829303132class ObservableTodoStore &#123; @observable todos = []; @observable pendingRequests = 0; constructor() &#123; mobx.autorun(() =&gt; console.log(this.report)); &#125; @computed get completedTodosCount() &#123; return this.todos.filter( todo =&gt; todo.completed === true ).length; &#125; @computed get report() &#123; if (this.todos.length === 0) return "&lt;none&gt;"; return `Next todo: "$&#123;this.todos[0].task&#125;". ` + `Progress: $&#123;this.completedTodosCount&#125;/$&#123;this.todos.length&#125;`; &#125; addTodo(task) &#123; this.todos.push(&#123; task: task, completed: false, assignee: null &#125;); &#125;&#125;const observableTodoStore = new ObservableTodoStore(); å°±æ˜¯å®ƒï¼æˆ‘ä»¬å°†ä¸€äº›å±žæ€§æ ‡è®°ä¸º @observable æ¥é€šçŸ¥ MobX è¿™äº›å€¼å¯èƒ½éšæ—¶å˜åŒ–ã€‚è®¡ç®—ç”¨ @computed è£…é¥°ä»¥æ ‡è¯†è¿™äº›å¯ä»¥ä»Ž state ç»§æ‰¿ã€‚ pendingRequests å’Œ assignee å±žæ€§ç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šåœ¨è¿™ä¸ªæ•™ç¨‹çš„åŽé¢çš„éƒ¨åˆ†ç”¨åˆ°ã€‚ä¸ºäº†ç®€æ´ï¼Œæœ¬é¡µçš„æ‰€æœ‰ç¤ºä¾‹éƒ½æ˜¯ç”¨ ES6ï¼ŒJSX å’Œè£…é¥°å™¨ã€‚ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼ŒMobX ä¸­çš„æ‰€æœ‰è£…é¥°å™¨åœ¨ ES5 ä¸­éƒ½æœ‰å¯¹ç­‰çš„æ¦‚å¿µã€‚ åœ¨æž„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”¨æ¥æ‰“å° report çš„æ–¹æ³•ï¼Œå¹¶ç”¨ autorunåŒ…è£¹èµ·æ¥ã€‚Autorun åˆ›å»ºä¸€ä¸ªè¿è¡Œä¸€æ¬¡çš„ reactionï¼Œåˆ›å»ºä¹‹åŽæ¯å½“åº”ç”¨ç¨‹åºå†…éƒ¨ä½¿ç”¨çš„ä»»æ„å¯è§‚å¯Ÿæ•°æ®å‘ç”Ÿæ”¹å˜æ—¶è‡ªåŠ¨å†æ¬¡æ‰§è¡Œã€‚å› ä¸º report ä½¿ç”¨äº† å¯è§‚å¯Ÿçš„ todos å±žæ€§ï¼Œå®ƒå°†ä¼šåœ¨ä»»ä½•åˆé€‚çš„æ—¶å€™æ‰“å° report ã€‚ä¸‹ä¸€ä¸ªåˆ—è¡¨ä¸­ä¼šè¯å®žè¿™ä¸€ç‚¹ã€‚ç‚¹å‡» run æŒ‰é’®è¿è¡Œä»£ç ï¼š 12345observableTodoStore.addTodo("read MobX tutorial");observableTodoStore.addTodo("try MobX");observableTodoStore.todos[0].completed = true;observableTodoStore.todos[1].task = "try MobX in own project";observableTodoStore.todos[0].task = "grok MobX tutorial"; å¾ˆæœ‰è¶£å¯¹å§ï¼Ÿreport è‡ªåŠ¨åœ°ï¼ŒåŒæ­¥åœ°æ‰“å°å‡ºæ¥ï¼Œä¸ä¼šæ³„æ¼ä¸­é—´å€¼ã€‚å¦‚æžœä»”ç»†è§‚å¯Ÿæ—¥å¿—ï¼Œä½ ä¼šå‘çŽ°ç¬¬å››è¡Œæ²¡æœ‰äº§ç”Ÿæ–°çš„æ—¥å¿—è¡Œã€‚å› ä¸º report æ²¡æœ‰å› ä¸ºé‡å‘½åè€ŒçœŸæ­£åœ°æ”¹å˜ï¼Œå°½ç®¡åŽç«¯çš„æ•°æ®çš„ç¡®æ”¹å˜äº†ã€‚å¦ä¸€æ–¹é¢ï¼Œæ”¹å˜ç¬¬ä¸€æ¡ todo çš„åç§°çš„ç¡®æ›´æ–°äº† reportï¼Œå› ä¸ºæ›´æ–°çš„åç§°å‡ºçŽ°åœ¨äº† report ä¸­ã€‚è¿™å¾ˆå¥½åœ°è¯æ˜Žäº†ä¸åªæ˜¯ todos æ•°ç»„è¢« autorun è§‚å¯Ÿäº†ï¼Œtodo æ•°ç»„å…ƒç´ çš„å†…éƒ¨å±žæ€§ä¹Ÿè¢«è§‚å¯Ÿäº†ã€‚ è®© React å˜å¾—å“åº”å¼å¥½çš„ï¼Œç›®å‰æˆ‘ä»¬å®žçŽ°äº†ä¸€ä¸ªå¾ˆè ¢çš„å“åº”å¼ reportã€‚æ˜¯æ—¶å€™ç”¨è¿™ä¸ªåŒæ ·çš„ store å®žçŽ°ä¸€ä¸ªå“åº”å¼çš„ç”¨æˆ·ç•Œé¢äº†ã€‚React ç»„ä»¶ï¼ˆä¸ç®¡åå­—å¦‚ä½•ï¼‰å¹¶ä¸æ˜¯å¼€ç®±å³ç”¨çš„å“åº”å¼ã€‚mobx-react åŒ…ä¸­çš„ @observer è£…é¥°å™¨é€šè¿‡å°† React ç»„ä»¶çš„ render æ–¹æ³•åŒ…è£¹åœ¨ autorun ä¸­è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè‡ªåŠ¨ä¿æŒç»„ä»¶ä¸Ž state åŒæ­¥ã€‚è¿™åœ¨æ¦‚å¿µä¸Šå’Œæˆ‘ä»¬å‰é¢å¤„ç† report çš„æ–¹å¼æ²¡ä»€ä¹ˆä¸åŒã€‚ ä¸‹é¢çš„æ¸…å•å®šä¹‰äº†ä¸€äº› React ç»„ä»¶ã€‚å…¶ä¸­å”¯ä¸€ä¸Ž MobX æœ‰ä¸ªçš„ä¸œè¥¿å°±æ˜¯ @observer è£…é¥°å™¨ã€‚è¿™äº›å°±è¶³ä»¥ä¿è¯æ¯ä¸ªç»„ä»¶åœ¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶èƒ½å¤Ÿç‹¬ç«‹å®Œæˆé‡æ¸²æŸ“ã€‚ä½ ä¸å†éœ€è¦è°ƒç”¨ setState ï¼Œä¹Ÿä¸éœ€è¦æžæ¸…æ¥šå¦‚ä½•ä½¿ç”¨é€‰æ‹©æœŸæˆ–è€…éœ€è¦é…ç½®çš„é«˜é˜¶ç»„ä»¶æ¥è®¢é˜…åº”ç”¨ç¨‹åºçŠ¶æ€çš„æ­£ç¡®éƒ¨åˆ†ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰çš„ç»„ä»¶éƒ½å˜å¾—æ›´åŠ èªæ˜Žäº†ã€‚ç„¶è€Œä»–ä»¬æ˜¯ä»¥ä¸€ç§æ„šè ¢çš„é™ˆè¿°æ€§çš„æ–¹å¼å£°æ˜Žçš„ã€‚ ç‚¹å‡» run code æŒ‰é’®æ¥çœ‹çœ‹ä¸‹é¢ä»£ç çš„è¿è¡Œç»“æžœã€‚ä¸‹é¢çš„ä»£ç åˆ—è¡¨æ˜¯å¯ç¼–è¾‘çš„ï¼Œæ‰€ä»¥è¯·éšæ„çŽ©è€ã€‚å¯ä»¥è¯•è¯•ç§»é™¤æ‰€æœ‰çš„ @observer è°ƒç”¨ï¼Œæˆ–è€…åªç§»é™¤è£…é¥° TodoView çš„é‚£ä¸ªã€‚å³è¾¹é¢„è§ˆåŒºåŸŸçš„æ•°å­—ä¼šåœ¨æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶é«˜äº®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061@observerclass TodoList extends React.Component &#123; render() &#123; const store = this.props.store; return ( &lt;div&gt; &#123; store.report &#125; &lt;ul&gt; &#123; store.todos.map( (todo, idx) =&gt; &lt;TodoView todo=&#123; todo &#125; key=&#123; idx &#125; /&gt; ) &#125; &lt;/ul&gt; &#123; store.pendingRequests &gt; 0 ? &lt;marquee&gt;Loading...&lt;/marquee&gt; : null &#125; &lt;button onClick=&#123; this.onNewTodo &#125;&gt;New Todo&lt;/button&gt; &lt;small&gt; (double-click a todo to edit)&lt;/small&gt; &lt;RenderCounter /&gt; &lt;/div&gt; ); &#125; onNewTodo = () =&gt; &#123; this.props.store.addTodo(prompt('Enter a new todo:','coffee plz')); &#125;&#125;@observerclass TodoView extends React.Component &#123; render() &#123; const todo = this.props.todo; return ( &lt;li onDoubleClick=&#123; this.onRename &#125;&gt; &lt;input type='checkbox' checked=&#123; todo.completed &#125; onChange=&#123; this.onToggleCompleted &#125; /&gt; &#123; todo.task &#125; &#123; todo.assignee ? &lt;small&gt;&#123; todo.assignee.name &#125;&lt;/small&gt; : null &#125; &lt;RenderCounter /&gt; &lt;/li&gt; ); &#125; onToggleCompleted = () =&gt; &#123; const todo = this.props.todo; todo.completed = !todo.completed; &#125; onRename = () =&gt; &#123; const todo = this.props.todo; todo.task = prompt('Task name', todo.task) || todo.task; &#125;&#125;ReactDOM.render( &lt;TodoList store=&#123; observableTodoStore &#125; /&gt;, document.getElementById('reactjs-app')); ä¸‹é¢çš„ä»£ç å¾ˆå¥½åœ°å±•ç¤ºäº†æˆ‘ä»¬é™¤äº†æ›´æ–°æ•°æ®ä»¥å¤–ä¸éœ€è¦åšå…¶ä»–ä»»ä½•äº‹æƒ…ã€‚MobX å°†ä¼šè‡ªåŠ¨åœ°ä»Ž store ä¸­çš„çŠ¶æ€ç»§æ‰¿å¹¶æ›´æ–°ç”¨æˆ·ç•Œé¢ã€‚ 12345const store = observableTodoStore;store.todos[0].completed = !store.todos[0].completed;store.todos[1].task = "Random todo " + Math.random();store.todos.push(&#123; task: "Find a fine cheese", completed: true &#125;);// etc etc.. add your own statements here... ä½¿ç”¨å¼•ç”¨ä¸Šé¢æˆ‘ä»¬å·²ç»åˆ›å»ºäº†å¯è§‚å¯Ÿå¯¹è±¡ï¼ˆåŸºäºŽåŽŸåž‹çš„å¯¹è±¡å’Œçº¯å¯¹è±¡ï¼‰ï¼Œæ•°ç»„å’ŒåŸºç¡€å€¼ã€‚ä½ å¯èƒ½æƒ³çŸ¥é“ï¼ŒMobX ä¸­å¦‚ä½•å¤„ç†å¼•ç”¨ï¼Ÿæˆ‘çš„çŠ¶æ€èƒ½å¦å½¢æˆä¸€ä¸ªå›¾ï¼Ÿåœ¨å‰é¢çš„æ¸…å•ä¸­ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº† todos ä¸­åŒ…å«äº† assignee å±žæ€§ã€‚æˆ‘ä»¬é€šè¿‡å¼•å…¥å¦ä¸€ä¸ªåŒ…å«äº†peopleçš„ â€œstoreâ€œ ï¼ˆå¥½å§ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç¾ŽåŒ–çš„æ•°ç»„ï¼‰æ¥ç»™ä»–ä»¬èµ‹å€¼ï¼Œç„¶åŽåˆ†æ´¾ä»»åŠ¡ç»™ä»–ä»¬ã€‚ 1234567var peopleStore = mobx.observable([ &#123; name: "Michel" &#125;, &#123; name: "Me" &#125;]);observableTodoStore.todos[0].assignee = peopleStore[0];observableTodoStore.todos[1].assignee = peopleStore[1];peopleStore[0].name = "Michel Weststrate"; æˆ‘ä»¬çŽ°åœ¨æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„ store äº†ã€‚ä¸€ä¸ªåŒ…å«äº† peopleï¼Œä¸€ä¸ªåŒ…å«äº† todosã€‚å½“æˆ‘ä»¬å°†ä¸€ä¸ª assignee æŒ‡é…ç»™ä¸€ä¸ª people store ä¸­çš„äººæ—¶ï¼Œæˆ‘ä»¬åªæ˜¯æŒ‡é…äº†ä¸€ä¸ªå¼•ç”¨ã€‚è¿™äº›æ”¹å˜å›žè‡ªåŠ¨è¢« TodoView èŽ·å–ã€‚æœ‰äº† MobX ä»¥åŽå°±ä¸ç”¨å…ˆå¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ä¹Ÿä¸ç”¨å†™é€‰æ‹©å™¨æ¥ä¿è¯ç»„ä»¶è¢«æ›´æ–°ã€‚äº‹å®žä¸Š store ä¸­ä¿å­˜çš„æ•°æ®æ˜¯ä»€ä¹ˆéƒ½ä¸é‡è¦äº†ã€‚åªè¦å¯¹è±¡è¢«å˜æˆäº†å¯è§‚å¯Ÿçš„ï¼ŒMobX å°±èƒ½å¤Ÿè¿½è¸ªä»–ä»¬ã€‚çœŸæ­£çš„ JavaScript å¼•ç”¨å°†èµ·ä½œç”¨ã€‚å¦‚æžœä»–ä»¬æ˜¯å’Œ derivation æœ‰å…³ç³»çš„ï¼Œé‚£ä¹ˆ MobX å°†ä¼šè‡ªåŠ¨è¿½è¸ªä»–ä»¬ã€‚ä¸ºäº†æµ‹è¯•è¿™ä¸€ç‚¹ï¼Œè¯•è¯•åœ¨ä¸‹é¢çš„çš„è¾“å…¥æ¡†å†…æ”¹å˜ä½ çš„åå­—ï¼ˆè¦ç¡®ä¿å…ˆç‚¹å‡»äº†ä¸Šé¢çš„ run code æŒ‰é’®ï¼‰ Your name: é¡ºä¾¿ä¸€æï¼Œä¸Šé¢è¾“å…¥æ¡†çš„ HTML å¾ˆç®€å•ï¼š 1&lt;input onkeyup=&quot;peopleStore[1].name = event.target.value&quot; /&gt; å¼‚æ­¥ actionå› ä¸ºæˆ‘ä»¬çš„ Todo åº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸€éƒ¨åˆ†éƒ½æ˜¯ä»Ž state æ´¾ç”Ÿå‡ºçš„ï¼Œæ‰€ä»¥ state ä»€ä¹ˆæ—¶å€™æ”¹å˜éƒ½ä¸é‡è¦ã€‚è¿™ä½¿å¾—åˆ›å»ºå¼‚æ­¥ action éžå¸¸ç›´æŽ¥ã€‚ç›´æŽ¥ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼ˆå¤šæ¬¡ç‚¹å‡»ï¼‰æ¥æ¨¡ä»¿å¼‚æ­¥åŠ è½½æ–°çš„ todo é¡¹ï¼š Load todo è¿™éƒ¨åˆ†èƒŒåŽçš„ä»£ç ä¹Ÿç›¸å½“ç›´æŽ¥ã€‚æˆ‘ä»¬ä»Žæ›´æ–° store å±žæ€§ pendingRequests å¼€å§‹æ¥è®© UI ååº”å‡ºå½“å‰åŠ è½½çŠ¶æ€ã€‚ä¸€æ—¦åŠ è½½ç»“æŸï¼Œæˆ‘ä»¬å°±æ›´æ–° store ä¸­çš„ todosï¼Œå¹¶ä¸”å‡å°‘ pendingRequests è®¡æ•°å™¨ã€‚ç›´æŽ¥å¯¹æ¯”è¿™ä¸ªä»£ç æ®µå’Œå‰é¢çš„ TodoList å®šä¹‰æ¥çœ‹çœ‹ pendingRequests æ˜¯å¦‚ä½•è¿ç”¨çš„ã€‚ 12345observableTodoStore.pendingRequests++;setTimeout(function() &#123; observableTodoStore.addTodo(&apos;Random Todo &apos; + Math.random()); observableTodoStore.pendingRequests--;&#125;, 2000); å¼€å‘å·¥å…·mobx-react-devtools æä¾›äº†å¼€å‘å·¥å…·ï¼Œæ˜¾ç¤ºåœ¨å±å¹•çš„å³ä¸Šæ–¹å¹¶ä¸”å¯ä»¥è¢«ä»»æ„ MobX + ReactJS åº”ç”¨ä½¿ç”¨ã€‚ç‚¹å‡»ç¬¬ä¸€ä¸ªæŒ‰é’®å°†ä¼šé«˜äº®æ¯ä¸€ä¸ªæ­£åœ¨è¢«é‡æ¸²æŸ“çš„ @observer ç»„ä»¶ã€‚å¦‚æžœç‚¹å‡»ç¬¬äºŒä¸ªæŒ‰é’®ï¼Œç„¶åŽå†ç‚¹å‡»é¢„è§ˆä¸­çš„ä»»æ„ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„ä¾èµ–æ ‘å°±ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ä½ å¯ä»¥å‡†ç¡®åœ°è§‚å¯Ÿä»»æ„ç»™å®šæ—¶åˆ»æ­£åœ¨è¢«è§‚å¯Ÿçš„æ•°æ®ã€‚ ç»“è®ºä»¥ä¸Šå°±æ˜¯å…¨éƒ¨äº†ï¼æ²¡æœ‰åå¤å¥—ç”¨çš„æ¨¡æ¿ã€‚åªæ˜¯ä¸€äº›ç»„æˆæˆ‘ä»¬çš„æ•´ä¸ª UI çš„ç®€å•çš„ï¼Œå£°æ˜Žå¼çš„ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶éƒ½æ˜¯å®Œå…¨åœ°ï¼Œå“åº”å¼åœ°ä»Žæˆ‘ä»¬çš„ state ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚ä½ çŽ°åœ¨å¯ä»¥åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ mobx å’Œ mobx-react äº†ã€‚å­¦åˆ°è¿™é‡Œç®€å•çš„æ€»ç»“ä¸€ä¸‹ï¼š ä½¿ç”¨ @observable è£…é¥°å™¨æˆ–è€… observable(object æˆ–è€… array) æ–¹æ³•æ¥ä¸º MobX åˆ›å»ºå‡ºå¯è¿½è¸ªå¯¹è±¡ã€‚ @computed è£…é¥°å™¨å¯ä»¥è¢«ç”¨æ¥åˆ›å»ºèƒ½å¤Ÿè‡ªåŠ¨ä»Ž state ä¸­æ´¾ç”Ÿå‡ºå€¼çš„æ–¹æ³•ã€‚ ä½¿ç”¨ autorun æ¥è‡ªåŠ¨è¿è¡Œä¾èµ–äºŽä¸€äº› ovservable state çš„æ–¹æ³•ã€‚è¿™å¯¹äºŽè¾“å‡ºæ—¥å¿—ï¼Œå‘èµ·ç½‘ç»œè¯·æ±‚ç­‰æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ ä½¿ç”¨ mobx-react ä¸­çš„ @observer è£…é¥°å™¨æ¥è®©ä½ çš„ React ç»„ä»¶å˜å¾—çœŸæ­£å“åº”å¼ã€‚ä»–ä»¬å°†ä¼šè‡ªåŠ¨å¹¶ä¸”é«˜æ•ˆåœ°æ›´æ–°ã€‚å³ä½¿åº”ç”¨äºŽå…·æœ‰å¤§é‡æ•°æ®çš„å¤§åž‹å¤æ‚åº”ç”¨ã€‚ å¯ä»¥éšæ„è°ƒè¯•ä¸Šé¢çš„å¯ç¼–è¾‘ä»£ç å—æ¥æ„Ÿå—ä¸€ä¸‹ MobX æ˜¯å¦‚ä½•å¯¹ä½ çš„ä¿®æ”¹ä½œå‡ºååº”çš„ã€‚ä¾‹å¦‚ä½ å¯ä»¥åœ¨ report æ–¹æ³•è¢«è°ƒç”¨æ—¶æ·»åŠ æ—¥å¿—æè¿°ã€‚æˆ–è€…å®Œå…¨ä¸æ˜¾ç¤º report çœ‹çœ‹æ˜¯å¦‚ä½•å½±å“ TodoList æ¸²æŸ“çš„ã€‚æˆ–è€…åªåœ¨ç‰¹å®šæƒ…å†µä¸‹æ˜¾ç¤ºã€‚ MobX ä¸æ˜¯ä¸€ä¸ªçŠ¶æ€å®¹å™¨äººä»¬é•œå¸¸ç”¨ MobX æ¥æ›¿ä»£ Reduxã€‚ ä½†æ˜¯è¯·æ³¨æ„ MobX åªæ˜¯ç”¨æ¥è§£å†³ä¸€ä¸ªæŠ€æœ¯é—®é¢˜çš„åº“ï¼Œä¸æ˜¯ä¸€ä¸ªæ¡†æž¶ï¼Œç”šè‡³å†…éƒ¨æ²¡æœ‰åŒ…å«çŠ¶æ€å®¹å™¨ã€‚ä»Žè¿™ä¸ªæ„ä¹‰ä¸Šæ¥è¯´ï¼Œä¸Šé¢çš„ä¾‹å­éƒ½æ˜¯äººä¸ºçš„ã€‚å»ºè®®ä½¿ç”¨é€‚å½“çš„å·¥ç¨‹å®žè·µï¼Œä¾‹å¦‚åœ¨æ–¹æ³•ä¸­å°è£…é€»è¾‘ï¼Œåœ¨ store æˆ–è€… controller ä¸­ç»„ç»‡ä»–ä»¬ç­‰ç­‰ã€‚æˆ–è€…å¦‚ HackerNews æ‰€è¿°ï¼š â€œMobX, itâ€™s been mentioned elsewhere but I canâ€™t help but sing its praises. Writing in MobX means that using controllers/ dispatchers/ actions/ supervisors or another form of managing dataflow returns to being an architectural concern you can pattern to your applicationâ€™s needs, rather than being something thatâ€™s required by default for anything more than a Todo app.â€ Learn moreIntrigued? Here are some useful resources: MobX on GitHub Api documentation (Blog) Making React reactive: the pursuit of high performing, easily maintainable React apps (Blog) Becoming fully reactive: an in-depth explanation of Mobservable JSFiddle with a simple todo app MobX, React, TypeScript boilerplate MobX, React, Babel boilerplate MobX demo from Reactive2015 conference MobX + React TodoMVC]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºä»€ä¹ˆæ²¡æœ‰CSS4ï¼Œè§£é‡ŠCSS level]]></title>
    <url>%2F2019%2F03%2F21%2F%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B2%A1%E6%9C%89CSS4%EF%BC%8C%E8%A7%A3%E9%87%8ACSS-level%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡â€“ Where there is no CSS4 - explaining CSS Levels â€‹ æˆ‘ä»¬å·²ç»æœ‰äº† CSS1 å’Œ CSS2ï¼Œæˆ‘ä»¬ç”šè‡³è¿˜æœ‰è¿‡ CSS2.1ï¼ŒåŽæ¥æˆ‘ä»¬æŽ¥ç€æœ‰äº† CSS3ï¼ŒCSS3 çœŸçš„å­˜åœ¨å—ï¼Ÿè¿™ç¯‡æ–‡ç« å°†ä¼šå¿«é€Ÿä»‹ç»å½“ä»Š CSS æ˜¯å¦‚ä½•åˆ¶å®šç‰ˆæœ¬å·çš„ã€‚ â€‹ CSS ç‰ˆæœ¬ 1 å’Œ 2 éƒ½æ˜¯å±žäºŽå•ä½“å£°æ˜Žã€‚å³ CSS ä¸­æ‰€æœ‰æ¦‚å¿µéƒ½è¢«åŒ…å«åœ¨ä¸€ä¸ªåºžå¤§çš„æ–‡æ¡£ä¸­ã€‚Selectorï¼ŒPositionï¼ŒColour â€” å…¨éƒ¨éƒ½åœ¨å…¶ä¸­ã€‚ â€‹ å•ä½“å£°æ˜Žæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸ºäº†ç»“æŸä¸€ä¸ªè§„èŒƒçš„ç‰ˆæœ¬ï¼Œå¿…é¡»è¦æ‰€æœ‰çš„ç»„ä»¶éƒ½ä¸€èµ·å®Œæˆè¯¥ç‰ˆæœ¬çš„ä¿®è®¢ã€‚ä½†æ˜¯éšç€ CSS çš„å‘å±•å˜å¾—è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œæ–°ç‰¹æ€§ä¸æ–­æ·»åŠ è¿›æ¥ï¼Œä¸ºäº†åˆ¶å®šä¸€ä¸ª CSS ç‰ˆæœ¬è€Œè®©æ‰€æœ‰éƒ¨åˆ†éƒ½åœå·¥ä½œï¼Œè¿™æ ·æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚å› æ­¤ CSS2.1 ä¹‹åŽï¼Œå°±å°† 2.1 ç‰ˆæœ¬è§„èŒƒä¸­çš„æ‰€æœ‰éƒ¨åˆ†éƒ½è¢«æ‹†åˆ†æˆäº†æ¨¡å—ã€‚æ—§ç‰¹æ€§ç»„æˆçš„ CSS æ¨¡å—åŠ ä¸Šæ–°æ·»åŠ çš„ç‰¹æ€§ï¼Œéƒ½å°†å‡ºçŽ°åœ¨ Level 3 ä¸­ã€‚äºŽæ˜¯å’Œæˆ‘ä¸€æ ·å°† CSS ç†è§£ä¸ºä¸€ä¸ªå•ä½“è§„èŒƒçš„äººä»¬å°±å°†è¿™ä¸€ç»„ Level 3 æ¨¡å—ç§°ä¹‹ä¸º â€œCSS3â€ã€‚ â€‹ ç„¶è€Œå°†æ‰€æœ‰æ–°çš„ CSS ç‰¹æ€§ç§°ä¹‹ä¸º CSS3 å¹¶æ²¡æœ‰åæ˜ å‡ºå¦‚ä»Š CSS çš„æœ¬è´¨ã€‚å¦‚æžœä½ é˜…è¯»è¿‡ä¸€äº›å…³äºŽ CSS3 é€‰æ‹©å™¨çš„æ–‡ç« ï¼Œé‚£ä¹ˆä½ å¯èƒ½çŸ¥é“ CSS3 é€‰æ‹©å™¨å®žé™…ä¸Šå°±æ˜¯ CSS Selectors Level 3 è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚äº‹å®žä¸Š CSS é€‰æ‹©å™¨æ˜¯æ ‡è®°ä¸ºå·²å®Œæˆå’ŒæŽ¨èçš„è§„èŒƒä¹‹ä¸€ã€‚CSS å·¥ä½œç»„ç›®å‰æ­£åœ¨åˆ¶å®š Selectors Level 4ï¼Œå®ƒç”±ä¸€äº›æ–°æè®®çš„ç‰¹æ€§åŠ ä¸Š Level 3ï¼ˆä»¥åŠ CSS 1 å’Œ 2 ï¼‰çš„ä¸€éƒ¨åˆ†é€‰æ‹©å™¨ç»„æˆã€‚æ˜¯ CSS è§„èŒƒçš„ä¸€å°éƒ¨åˆ†ã€‚ â€‹ æˆ‘ä»¬å·²ç»æœ‰ä¸€äº›ä¸ºç‰¹æ€§åˆ¶å®šçš„è§„èŒƒï¼Œè¿™äº›ç‰¹æ€§ä¸å±žäºŽ CSS 1 å’Œ 2 çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥è¿™äº›ç‰¹æ€§çš„è§„èŒƒçŽ°åœ¨å°±æ˜¯ Level 1ã€‚ä»–ä»¬éƒ½æ˜¯å…¨æ–°çš„ã€‚Level 1 çš„ç‰¹æ€§è§„èŒƒçš„ä¾‹å­æœ‰ CSSGrid Layout and Flexbox ã€‚Flexbox å·²ç»æ˜¯ä¸€ä¸ªå€™é€‰æŽ¨èï¼ˆCRï¼ŒCandidate Recommendationï¼‰çš„è§„èŒƒäº†ï¼ŒGrid ä¹Ÿå·²ç»è¢«æŠ•ç¥¨å‚é€‰ CR äº†ã€‚å› æ­¤ä»ŽçŽ°åœ¨èµ·æè®®çš„ä»»ä½•æ–°ç‰¹æ€§éƒ½å°†å¯èƒ½å‡ºçŽ°åœ¨ä¸‹ä¸€ä¸ª Level çš„è§„èŒƒä¸­ â€” Flexbox Level 2 å’Œ CSS Grid Level 2ã€‚ â€‹ å¦‚æžœä½ æƒ³çœ‹çœ‹å„ç§ CSS ç‰¹æ€§çš„çŠ¶æ€ï¼Œä»¥åŠä»–ä»¬å½“å‰æ‰€åœ¨çš„ levelï¼Œå¯ä»¥æŸ¥çœ‹ CSS å·¥ä½œç»„ Current Work document ã€‚ä¸ºäº†ç†è§£ä¸€ä¸ªè§„èŒƒçš„ä¸åŒçŠ¶æ€ï¼Œå¯ä»¥çœ‹çœ‹å·¥ä½œè¿›å±•æ–‡æ¡£ä¸­ Maturity Levels ä¸Šçš„ä¿¡æ¯ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>Layout</tag>
        <tag>CSSå¸ƒå±€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£JSåŽŸåž‹]]></title>
    <url>%2F2019%2F02%2F27%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E5%8E%9F%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸ä¼šè¿‡å¤šä»‹ç»åŸºç¡€çŸ¥è¯†ï¼Œè€Œæ˜¯æŠŠé‡ç‚¹æ”¾åœ¨åŽŸåž‹çš„å„ä¸ªéš¾ç‚¹ä¸Šã€‚ å¤§å®¶å¯ä»¥å…ˆä»”ç»†åˆ†æžä¸‹è¯¥å›¾ï¼Œç„¶åŽè®©æˆ‘ä»¬è¿›å…¥ä¸»é¢˜ prototypeé¦–å…ˆæ¥ä»‹ç»ä¸‹ prototype å±žæ€§ã€‚è¿™æ˜¯ä¸€ä¸ªæ˜¾å¼åŽŸåž‹å±žæ€§ï¼Œåªæœ‰å‡½æ•°æ‰æ‹¥æœ‰è¯¥å±žæ€§ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰å‡½æ•°éƒ½æœ‰è¿™ä¸ªå±žæ€§ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªä¾‹å¤– 1let fun = Function.prototype.bind() å¦‚æžœä½ ä»¥ä¸Šè¿°æ–¹æ³•åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å‘çŽ°è¿™ä¸ªå‡½æ•°æ˜¯ä¸å…·æœ‰ prototype å±žæ€§çš„ã€‚ prototype å¦‚ä½•äº§ç”Ÿçš„å½“æˆ‘ä»¬å£°æ˜Žä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¿™ä¸ªå±žæ€§å°±è¢«è‡ªåŠ¨åˆ›å»ºäº†ã€‚ 1function Foo() &#123;&#125; å¹¶ä¸”è¿™ä¸ªå±žæ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯åŽŸåž‹ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªå±žæ€§ constructor constructor å¯¹åº”ç€æž„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ Fooã€‚ constructorconstructor æ˜¯ä¸€ä¸ªå…¬æœ‰ä¸”ä¸å¯æžšä¸¾çš„å±žæ€§ã€‚ä¸€æ—¦æˆ‘ä»¬æ”¹å˜äº†å‡½æ•°çš„ prototype ï¼Œé‚£ä¹ˆæ–°å¯¹è±¡å°±æ²¡æœ‰è¿™ä¸ªå±žæ€§äº†ï¼ˆå½“ç„¶å¯ä»¥é€šè¿‡åŽŸåž‹é“¾å–åˆ° constructorï¼‰ã€‚ é‚£ä¹ˆä½ è‚¯å®šä¹Ÿæœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¿™ä¸ªå±žæ€§åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®žè¿™ä¸ªå±žæ€§å¯ä»¥è¯´æ˜¯ä¸€ä¸ªåŽ†å²é—ç•™é—®é¢˜ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯æ²¡ç”¨çš„ï¼Œåœ¨æˆ‘çš„ç†è§£é‡Œï¼Œæˆ‘è®¤ä¸ºä»–æœ‰ä¸¤ä¸ªä½œç”¨ï¼š è®©å®žä¾‹å¯¹è±¡çŸ¥é“æ˜¯ä»€ä¹ˆå‡½æ•°æž„é€ äº†å®ƒ å¦‚æžœæƒ³ç»™æŸäº›ç±»åº“ä¸­çš„æž„é€ å‡½æ•°å¢žåŠ ä¸€äº›è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œå°±å¯ä»¥é€šè¿‡ xx.constructor.method æ¥æ‰©å±• _proto_è¿™æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„éšå¼åŽŸåž‹å±žæ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æž„é€ å‡½æ•°çš„åŽŸåž‹ã€‚å…¶å®žè¿™ä¸ªå±žæ€§æŒ‡å‘äº† [[prototype]]ï¼Œä½†æ˜¯ [[prototype]] æ˜¯å†…éƒ¨å±žæ€§ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è®¿é—®åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨ _proto_ æ¥è®¿é—®ã€‚ å› ä¸ºåœ¨ JS ä¸­æ˜¯æ²¡æœ‰ç±»çš„æ¦‚å¿µçš„ï¼Œä¸ºäº†å®žçŽ°ç±»ä¼¼ç»§æ‰¿çš„æ–¹å¼ï¼Œé€šè¿‡ _proto_ å°†å¯¹è±¡å’ŒåŽŸåž‹è”ç³»èµ·æ¥ç»„æˆåŽŸåž‹é“¾ï¼Œå¾—ä»¥è®©å¯¹è±¡å¯ä»¥è®¿é—®åˆ°ä¸å±žäºŽè‡ªå·±çš„å±žæ€§ã€‚ å®žä¾‹å¯¹è±¡çš„ _proto_ å¦‚ä½•äº§ç”Ÿçš„ä»Žä¸Šå›¾å¯çŸ¥ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ new æ“ä½œç¬¦æ—¶ï¼Œç”Ÿæˆçš„å®žä¾‹å¯¹è±¡æ‹¥æœ‰äº† _proto_å±žæ€§ã€‚ 1234function Foo() &#123;&#125;// è¿™ä¸ªå‡½æ•°æ˜¯ Function çš„å®žä¾‹å¯¹è±¡// function å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–// å†…éƒ¨è°ƒç”¨äº† new Function(...) æ‰€ä»¥å¯ä»¥è¯´ï¼Œåœ¨ new çš„è¿‡ç¨‹ä¸­ï¼Œæ–°å¯¹è±¡è¢«æ·»åŠ äº† _proto_ å¹¶ä¸”é“¾æŽ¥åˆ°æž„é€ å‡½æ•°çš„åŽŸåž‹ä¸Šã€‚ new çš„è¿‡ç¨‹ æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ é“¾æŽ¥åˆ°åŽŸåž‹ ç»‘å®š this è¿”å›žæ–°å¯¹è±¡ åœ¨è°ƒç”¨ new çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸Šå››ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯•ç€æ¥è‡ªå·±å®žçŽ°ä¸€ä¸ª new 123456789101112function create() &#123; // åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ let obj = new Object() // èŽ·å¾—æž„é€ å‡½æ•° let Con = [].shift.call(arguments) // é“¾æŽ¥åˆ°åŽŸåž‹ obj.__proto__ = Con.prototype // ç»‘å®š thisï¼Œæ‰§è¡Œæž„é€ å‡½æ•° let result = Con.apply(obj, arguments) // ç¡®ä¿ new å‡ºæ¥çš„æ˜¯ä¸ªå¯¹è±¡ return typeof result === 'object' ? result : obj&#125; å¯¹äºŽå®žä¾‹å¯¹è±¡æ¥è¯´ï¼Œéƒ½æ˜¯é€šè¿‡ new äº§ç”Ÿçš„ï¼Œæ— è®ºæ˜¯ function Foo() è¿˜æ˜¯ let a = { b : 1 } ã€‚ å¯¹äºŽåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼Œæ›´æŽ¨èä½¿ç”¨å­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ã€‚å› ä¸ºä½ ä½¿ç”¨ new Object() çš„æ–¹å¼åˆ›å»ºå¯¹è±¡éœ€è¦é€šè¿‡ä½œç”¨åŸŸé“¾ä¸€å±‚å±‚æ‰¾åˆ° Objectï¼Œä½†æ˜¯ä½ ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼å°±æ²¡è¿™ä¸ªé—®é¢˜ã€‚ 12345function Foo() &#123;&#125;// function å°±æ˜¯ä¸ªè¯­æ³•ç³–// å†…éƒ¨ç­‰åŒäºŽ new Function()let a = &#123; b: 1 &#125;// è¿™ä¸ªå­—é¢é‡å†…éƒ¨ä¹Ÿæ˜¯ä½¿ç”¨äº† new Object() Function.proto === Function.prototypeå¯¹äºŽå¯¹è±¡æ¥è¯´ï¼Œxx.__proto__.contrcutor æ˜¯è¯¥å¯¹è±¡çš„æž„é€ å‡½æ•°ï¼Œä½†æ˜¯åœ¨å›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘çŽ° Function.__proto__ === Function.prototypeï¼Œéš¾é“è¿™ä»£è¡¨ç€ Function è‡ªå·±äº§ç”Ÿäº†è‡ªå·±? ç­”æ¡ˆè‚¯å®šæ˜¯å¦è®¤çš„ï¼Œè¦è¯´æ˜Žè¿™ä¸ªé—®é¢˜æˆ‘ä»¬å…ˆä»Ž Object è¯´èµ·ã€‚ ä»Žå›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡åŽŸåž‹é“¾æœ€ç»ˆæ‰¾åˆ° Object.prototype ï¼Œè™½ç„¶ Object.prototype ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡å´ä¸æ˜¯ Object åˆ›é€ çš„ï¼Œè€Œæ˜¯å¼•æ“Žè‡ªå·±åˆ›å»ºäº† Object.prototype ã€‚æ‰€ä»¥å¯ä»¥è¿™æ ·è¯´ï¼Œæ‰€æœ‰å®žä¾‹éƒ½æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯å®žä¾‹ã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ Function.prototype è¿™ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå¦‚æžœä½ åœ¨æµè§ˆå™¨å°†è¿™ä¸ªå¯¹è±¡æ‰“å°å‡ºæ¥ï¼Œä¼šå‘çŽ°è¿™ä¸ªå¯¹è±¡å…¶å®žæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ æˆ‘ä»¬çŸ¥é“å‡½æ•°éƒ½æ˜¯é€šè¿‡ new Function() ç”Ÿæˆçš„ï¼Œéš¾é“ Function.prototype ä¹Ÿæ˜¯é€šè¿‡ new Function() äº§ç”Ÿçš„å—ï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯å¦å®šçš„ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯å¼•æ“Žè‡ªå·±åˆ›å»ºçš„ã€‚é¦–å…ˆå¼•æ“Žåˆ›å»ºäº† Object.prototype ï¼Œç„¶åŽåˆ›å»ºäº† Function.prototype ï¼Œå¹¶ä¸”é€šè¿‡ __proto__ å°†ä¸¤è€…è”ç³»äº†èµ·æ¥ã€‚è¿™é‡Œä¹Ÿå¾ˆå¥½çš„è§£é‡Šäº†ä¸Šé¢çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆ let fun = Function.prototype.bind() æ²¡æœ‰ prototype å±žæ€§ã€‚å› ä¸º Function.prototype æ˜¯å¼•æ“Žåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œå¼•æ“Žè®¤ä¸ºä¸éœ€è¦ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ  prototype å±žæ€§ã€‚ æ‰€ä»¥æˆ‘ä»¬åˆå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œä¸æ˜¯æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ new Function() äº§ç”Ÿçš„ã€‚ æœ‰äº† Function.prototype ä»¥åŽæ‰æœ‰äº† function Function() ï¼Œç„¶åŽå…¶ä»–çš„æž„é€ å‡½æ•°éƒ½æ˜¯ function Function() ç”Ÿæˆçš„ã€‚ çŽ°åœ¨å¯ä»¥æ¥è§£é‡Š Function.__proto__ === Function.prototype è¿™ä¸ªé—®é¢˜äº†ã€‚å› ä¸ºå…ˆæœ‰çš„ Function.prototype ä»¥åŽæ‰æœ‰çš„ function Function() ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸å­˜åœ¨é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„æ‚–è®ºé—®é¢˜äº†ã€‚å¯¹äºŽä¸ºä»€ä¹ˆ Function.__proto__ ä¼šç­‰äºŽ Function.prototype ï¼Œä¸ªäººçš„ç†è§£æ˜¯ï¼šå…¶ä»–æ‰€æœ‰çš„æž„é€ å‡½æ•°éƒ½å¯ä»¥é€šè¿‡åŽŸåž‹é“¾æ‰¾åˆ° Function.prototype ï¼Œå¹¶ä¸” function Function() æœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºäº†ä¸äº§ç”Ÿæ··ä¹±å°±å°† function Function() çš„ __proto__ è”ç³»åˆ°äº† Function.prototype ä¸Šã€‚ æ€»ç»“ Object æ˜¯æ‰€æœ‰å¯¹è±¡çš„çˆ¸çˆ¸ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡ __proto__ æ‰¾åˆ°å®ƒ Function æ˜¯æ‰€æœ‰å‡½æ•°çš„çˆ¸çˆ¸ï¼Œæ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥é€šè¿‡ __proto__ æ‰¾åˆ°å®ƒ Function.prototype å’Œ Object.prototype æ˜¯ä¸¤ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œä»–ä»¬ç”±å¼•æ“Žæ¥åˆ›å»º é™¤äº†ä»¥ä¸Šä¸¤ä¸ªç‰¹æ®Šå¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡éƒ½æ˜¯é€šè¿‡æž„é€ å™¨ new å‡ºæ¥çš„ å‡½æ•°çš„ prototype æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŽŸåž‹ å¯¹è±¡çš„ __proto__ æŒ‡å‘åŽŸåž‹ï¼Œ __proto__ å°†å¯¹è±¡å’ŒåŽŸåž‹è¿žæŽ¥èµ·æ¥ç»„æˆäº†åŽŸåž‹é“¾]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSONPåŽŸç†åŠå®žçŽ°]]></title>
    <url>%2F2019%2F02%2F26%2FJSONP%E5%8E%9F%E7%90%86%E5%8F%8A%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[JSONPçš„åŽŸç†å°±ä¸ç»†è¯´äº†ï¼Œå°±æ˜¯åˆ©ç”¨scriptå¯ä»¥è·¨åŸŸçš„ç‰¹ç‚¹æ¥å®žçŽ°è·¨åŸŸï¼Œé¦–å…ˆæˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªæœ€ç®€å•çš„jsonpï¼Œå°±æ˜¯ç®€ç®€å•å•åˆ›å»ºscriptæ ‡ç­¾ï¼Œæ·»åŠ urlçš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼š 123456function jsonp(url) &#123; const script = document.createElement('script'); script.src = url; script.type = 'text/javascript'; document.body.appendChild(script);&#125; æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨æœåŠ¡ç«¯çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415const http = require('http');const data = &#123;'data':'hello'&#125;;const url = require('url');const queryString = require('querystring');http.createServer(function(req, res) &#123; var params = url.parse(req.url); console.log(params); if(params.query &amp;&amp; queryString.parse(params.query).callback) &#123; console.log(1231232); const str = queryString.parse(params.query).callback + '(' + JSON.stringify(data) + ')'; return res.end(str) &#125; res.end(JSON.stringify(data));&#125;).listen(5000); è¿™æ˜¯æˆ‘ä»¬è°ƒç”¨jsonpï¼Œå‡è®¾æˆ‘ä»¬åªæ˜¯æƒ³è¦alertå‡ºè¿”å›žçš„æ•°æ®ï¼Œå¦‚ä¸‹ï¼š 12345function msg(res) &#123; alert(res.data);&#125;jsonp('http://localhost:5000?callback=msg'); è¿™æ—¶å€™æˆ‘ä»¬è¿è¡Œä»£ç å¯ä»¥å‘çŽ°å·²ç»æ­£ç¡®å¼¹å‡ºäº†ç›¸åº”çš„æ•°æ®ã€‚ä½†æ˜¯æˆ‘ä»¬ä¼šå‘çŽ°è¿™é‡Œçš„callbackå›žè°ƒå‡½æ•°æ˜¯ä¸€ä¸ªå…¨å±€çš„ï¼Œè¿™æ˜¯ä¸å¯å–çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œå°†å¤„ç†ä¿®æ”¹ä¸ºä¸€ä¸ªå±€éƒ¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ªå›žè°ƒå‡½æ•°æ¥å¤„ç†ï¼Œå¦‚ä¸‹ï¼š 1234567891011function jsonp(url, callback) &#123; window.jsonpCallback = callback; const script = document.createElement('script'); script.src = url + '?callback=jsonpCallback'; script.type = 'text/javascript'; document.body.appendChild(script);&#125;jsonp('http://localhost:5000', function(res) &#123; alert(res.data);&#125;); è¿™æ—¶å€™æˆ‘ä»¬ä¼šå‘çŽ°æˆ‘ä»¬ä¸å†éœ€è¦åœ¨urlä¸­å£°æ˜Žç›¸åº”çš„callbackäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯ä¼šå‘çŽ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬å°†æ‰€æœ‰çš„callbackéƒ½è®¾ç½®æˆäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè¿™æ ·çš„åŽŸå› æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨æ•°æ®è¯·æ±‚å®Œæˆä¹‹åŽè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤ä¸å¾—ä¸è®¾ç½®ä¸ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æœ‰å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”æ¯ä¸ªè¯·æ±‚çš„å¤„ç†éƒ½æ˜¯ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡å°†ä¼šè¢«è¦†ç›–ã€‚è¿™æ˜¯ä¸è¡Œçš„ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥ä¸ºæ¯ä¸€æ¬¡è¯·æ±‚è®¾ç½®ä¸€ä¸ªå”¯ä¸€ä¸”ä¸ä¼šå†²çªçš„å˜é‡ï¼Œå› æ­¤å¢žåŠ ä¸€ä¸ªç”Ÿæˆcallbackåå­—çš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122function generateJsonpCallback() &#123; return `jsonpcallback_$&#123;Date.now()&#125;_$&#123;Math.floor(Math.random() * 100000)&#125;`;&#125;function jsonp(url, callback) &#123; const funcName = generateJsonpCallback(); window[funcName] = callback; const script = document.createElement('script'); script.src = `$&#123;url&#125;?callback=$&#123;funcName&#125;`; script.type = 'text/javascript'; document.body.appendChild(script);&#125;jsonp('http://localhost:5000', function(res) &#123; alert(res.data);&#125;);jsonp('http://localhost:5000', function(res) &#123; const text = document.createTextNode(res.data); document.body.appendChild(text);&#125;); è¿™æ—¶å€™æˆ‘ä»¬ä¼šå‘çŽ°æˆ‘ä»¬å·²ç»åˆ©ç”¨äº†ä¸€ä¸ªç±»ä¼¼äºŽéšæœºIDçš„å½¢å¼å®Œæˆäº†å¤šæ¬¡è¯·æ±‚ã€‚ä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜å¤§é‡çš„è¯·æ±‚ä¹‹åŽï¼Œwindowä¸­ä¼šå«æœ‰å¤§é‡çš„å…¨å±€å˜é‡ï¼Œè€Œä¸”è¿˜æœ‰å¤§é‡çš„scriptæ ‡ç­¾ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¯·æ±‚å®Œæˆä¹‹åŽåˆ é™¤å˜é‡å’Œscriptæ ‡ç­¾ã€‚ 1234567891011121314151617181920212223242526272829303132333435function generateJsonpCallback() &#123; return `jsonpcallback_$&#123;Date.now()&#125;_$&#123;Math.floor(Math.random() * 100000)&#125;`;&#125;function removeScript(id) &#123; document.body.removeChild(document.getElementById(id));&#125;function removeFunc(name) &#123; delete window[name];&#125;function jsonp(url, timeout = 3000, callback) &#123; const funcName = generateJsonpCallback(); window[funcName] = callback; const script = document.createElement('script'); script.src = `$&#123;url&#125;?callback=$&#123;funcName&#125;`; script.id = funcName; script.type = 'text/javascript'; document.body.appendChild(script); setTimeout(() =&gt; &#123; removeScript(funcName); removeFunc(funcName); &#125;, timeout)&#125;jsonp('http://localhost:5000', 3000, function(res) &#123; alert(res.data);&#125;);jsonp('http://localhost:5000', 3000, function(res) &#123; const text = document.createTextNode(res.data); document.body.appendChild(text);&#125;); æˆ‘ä»¬é€šè¿‡å°†åˆ©ç”¨ä¸€ä¸ªtimeoutæ—¶é—´å®šæ—¶ä¸ºæˆ‘ä»¬æ¸…é™¤ç›¸åº”çš„scriptæ ‡ç­¾å’Œå…¨å±€å˜é‡å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªå®šæ—¶æ—¶é—´çš„ä½œç”¨ç±»ä¼¼äºŽajaxçš„timeoutæ—¶é—´ã€‚æˆ‘ä»¬æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯ä½¿ç”¨es6çš„ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ä½¿ç”¨Promiseæ¥å¤„ç†å‘¢ï¼Œè¿˜è¦ä½¿ç”¨çƒ¦äººçš„å›žè°ƒï¼ŒæŽ¥ä¸‹æ¥é‚£å°±æ¥PromiseåŒ–å§ã€‚ 123456789101112131415161718function jsonp(url, options = &#123;timeout:3000&#125;) &#123; const timeout = options.timeout; return new Promise((resolve, reject) =&gt; &#123; const funcName = generateJsonpCallback(); window[funcName] = (res) =&gt; &#123; resolve(res); setTimeout(() =&gt; &#123; removeScript(funcName); removeFunc(funcName); &#125;, timeout) &#125;; const script = document.createElement('script'); script.src = `$&#123;url&#125;?callback=$&#123;funcName&#125;`; script.id = funcName; script.type = 'text/javascript'; document.body.appendChild(script); &#125;)&#125; è°ƒç”¨åªéœ€è¦å¦‚ä¸‹å°±å¯ä»¥äº† 123456jsonp('http://localhost:5000').then((res) =&gt; alert(res.data));jsonp('http://localhost:5000').then((res) =&gt; &#123; const text = document.createTextNode(res.data); document.body.appendChild(text);&#125;); åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„jsonpå°±å®žçŽ°äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯ä¼šè§‰å¾—å°‘äº†ä¸€äº›ä»€ä¹ˆï¼Œç›¸ä¿¡ä½ å·²ç»çœ‹å‡ºæ¥äº†ï¼Œé‚£å°±æ˜¯é”™è¯¯å¤„ç†ã€‚è¿„ä»Šä¸ºæ­¢ï¼Œå¹¶æ²¡æœ‰æµ‹è¯•è¿‡å¦‚æžœè¿™ä¸ªscriptæ ‡ç­¾åŠ è½½ä¸æˆåŠŸå¦‚ä½•å¤„ç†ï¼Œåˆ¤æ–­èµ„æºåŠ è½½å¤±è´¥ï¼Œæ˜¾ç„¶ä½¿ç”¨çš„æ˜¯onerroräº‹ä»¶ï¼Œæˆ‘ä»¬è¿™å°±æŠŠä»–åŠ ä¸Šï¼š 12345678910111213141516171819202122232425function jsonp(url, options = &#123;timeout:3000&#125;) &#123; const timeout = options.timeout; let timeId; return new Promise((resolve, reject) =&gt; &#123; const funcName = generateJsonpCallback(); window[funcName] = (res) =&gt; &#123; resolve(res); timeId = setTimeout(() =&gt; &#123; removeScript(funcName); removeFunc(funcName); &#125;, timeout) &#125;; const script = document.createElement('script'); script.src = `$&#123;url&#125;?callback=$&#123;funcName&#125;`; script.id = funcName; script.type = 'text/javascript'; document.body.appendChild(script); script.onerror = () =&gt; &#123; reject(new Error(`fetch $&#123;url&#125; failed`)); removeScript(funcName); removeFunc(funcName); if(timeId) clearTimeout(timeId); &#125; &#125;)&#125; æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œè¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„url: 1jsonp('http://localhost:7000').then((res) =&gt; alert(res.data)); å¯ä»¥å‘çŽ°è¿™æ—¶æ­£å¸¸å¤„ç†é”™è¯¯äº†,å¯ä»¥åœ¨æŽ§åˆ¶å°çœ‹åˆ°ç›¸åº”çš„urlèŽ·å–å¤±è´¥ï¼Œè‡³æ­¤ï¼Œå®Œå·¥ï¼› è‡³æ­¤æ‰€æœ‰çš„ä»£ç ç®€å•å°è£…å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940(function(global)&#123; function generateJsonpCallback() &#123; return `jsonpcallback_$&#123;Date.now()&#125;_$&#123;Math.floor(Math.random() * 100000)&#125;`; &#125; function removeScript(id) &#123; document.body.removeChild(document.getElementById(id)); &#125; function removeFunc(name) &#123; delete global[name]; &#125; function jsonp(url, options = &#123;timeout:3000&#125;) &#123; const timeout = options.timeout; let timeId; return new Promise((resolve, reject) =&gt; &#123; const funcName = generateJsonpCallback(); global[funcName] = (res) =&gt; &#123; resolve(res); timeId = setTimeout(() =&gt; &#123; removeScript(funcName); removeFunc(funcName); &#125;, timeout) &#125;; const script = document.createElement('script'); script.src = `$&#123;url&#125;?callback=$&#123;funcName&#125;`; script.id = funcName; script.type = 'text/javascript'; document.body.appendChild(script); script.onerror = () =&gt; &#123; reject(new Error(`fetch $&#123;url&#125; failed`)); removeScript(funcName); removeFunc(funcName); if(timeId) clearTimeout(timeId); &#125; &#125;) &#125; window.jsonp = jsonp;&#125;)(window); æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š 12345678jsonp('http://localhost:5000').then((res) =&gt; alert(res.data));jsonp('http://localhost:5000').then((res) =&gt; &#123; const text = document.createTextNode(res.data); document.body.appendChild(text);&#125;);jsonp('http://localhost:7000').then((res) =&gt; alert(res.data));]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŽ¢ç´¢JavaScriptæž„é€ å‡½æ•°ä¸ŽåŽŸåž‹ç»§æ‰¿]]></title>
    <url>%2F2019%2F02%2F15%2F%E6%8E%A2%E7%B4%A2JavaScript%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF%2F</url>
    <content type="text"><![CDATA[In javascript, every object has a constructor property that refers to the constructor function that initializes the object. Sounds nice: it makes constructors sound static like classes in Java. Even the new Constructor() syntax looks like it. And it seems true: 123function MyConstructor() &#123;&#125;var myobject = new MyConstructor();myobject.constructor == MyConstructor; // true But life isnâ€™t that simple: 12345function MyConstructor() &#123;&#125;MyConstructor.prototype = &#123;&#125;;var myobject = new MyConstructor();myobject.constructor == MyConstructor; // false Whatâ€™s going on? Some definitionsObjects and methodsJavascript1 objects are simply bags of named properties that you can read and set. Javascript does not have classes. Functions in javascript are first-class objects. Methods in javascript are just properties that are functions. PrototypesThe prototype of an object is an internal property that Iâ€™ll refer to here as {Prototype}. In other words, obj.prototype is in general not the objâ€™s {Prototype}. The standard does not provide any way to retrieve the {Prototype} property from an object. Property lookupJavascript objects can delegate properties to their {Prototype} and their {Prototype} can do the same; all the way up to Object.prototype. Whenever a property propname of an object is read, the system checks if that object has a property named propname. If that propery does not exist, the system checks the objectâ€™s {Prototype} for that property, recursively. This means that objects that share a {Protoype} also share the properties of that {Prototype}. Setting propertiesWhenever a property propname of an object is set, the property is inserted into that object, ignoring the {Prototype} chain of that object. The {Prototype} property is set from the (public) prototype property of the constructor function when constructor function is called. Whatâ€™s going on? Line by line.This is what the relevant prototype and {Prototype} properties look like. The ellipses are objects, the arrows are properties that reference other objects. The {Prototype} chain(s) are in green. #1: Define constructor function1function MyConstructor() &#123;&#125; Fairly simple. MyConstructor.prototype is an object thatâ€™s automatically created which in turn has a constructor property pointing back at MyConstructor. Remember that: the only objects that in fact have a constructor property by default are the automatically createdprototype properties of functions. The rest isnâ€™t really relevant but may confuse and enlighten (and hopefully in that order): MyConstructorâ€™s {Prototype} is Function.prototype, not MyConstructor.prototype. Also note that the {Prototype} chain for each object ends up at Object.prototype. Object.prototypeâ€™s {Prototype} is actually null indicating that itâ€™s the end of the chain. 2 For the next steps Iâ€™m leaving out the {Prototype} chain of MyConstructor for clarity, since it doesnâ€™t change and itâ€™s not relevant. #2: Assign new prototype property1MyConstructor.prototype = &#123;&#125; Weâ€™ve now done away with the predefined MyConstructor.protoype object and replaced it with an anonymous object, shown here as {}. This object does not have a constructor property, #3: Call constructor to create new object1var myobject = new MyConstructor(); From this graph, following the L rules, we can now see that myobject.constructor is delegated to Object.prototype.constructor, which points to Object. In other words: 12345function MyConstructor() &#123;&#125;MyConstructor.prototype = &#123;&#125;;var myobject = new MyConstructor();myobject.constructor == Object // true What about instanceof ?Javascript provides the instanceof operator thatâ€™s intended to check the prototype chain of the object youâ€™re dealing with. From the above you might think that the following would return false: 12345function MyConstructor() &#123;&#125;MyConstructor.prototype = &#123;&#125;;var myobject = new MyConstructor();myobject instanceof MyConstructor // true But in fact it works. It also notices that myobject delegates to Object.prototype: 12345function MyConstructor() &#123;&#125;MyConstructor.prototype = &#123;&#125;;var myobject = new MyConstructor();myobject instanceof Object // true When instanceof is called it checks the prototype property of the given constructor and checks it agains the {Prototype} chain of the given object. In other words, itâ€™s not dependent on the constructor property. All nice and dandy, but you can still break it if you try hard enough: 1234567function MyConstructor() &#123;&#125;var myobject = new MyConstructor();MyConstructor.prototype = &#123;&#125;;[ myobject instanceof MyConstructor, // false ! myobject.constructor == MyConstructor, // true ! myobject instanceof Object ] // true This is what the prototype chains look like after running that: Constructors are not classesIn a class-based object system, typically classes inherit from each other, and objects are instances of those classes. Methods and properties that are shared between instances are (at least conceptually) properties of a class. Properties (and for some languages, methods) that should not be shared are properties of the objects themselves. Javascriptâ€™s constructors do nothing like this: in fact constructors have their own {Prototype} chain completely separate from the {Prototype} chain of objects they initialize. Constructors do not work like class-based initializersA constructor call associates a new object with a {Prototype} the constructor function mayset additional properties on the object. Constructor calls do not call â€œinheritedâ€ constructors, and they shouldnâ€™t because the objectâ€™s {Prototype} (the constructorâ€™sprototype) is assumed to be shared and (probably) already initialized. Constructors are just functionsAny user-defined function in javascript automatically gets a prototype property which in turn has a constructor property that refers back to the function. Any user-defined function in javascript can be called as a constructor by prepending new to the call. This will pass a new this object to the function and its {Prototype} property will be set to the prototype property of the function. ReferencesA comp.lang.javascript question123Subject: &quot;x.constructor == Foo&quot; vs &quot;x instanceof Foo&quot;.Message-ID: &lt;fniu6a$2cn$1@reader2.panix.com&gt;&gt;http://groups.google.com/group/comp.lang.javascript/msg/102ab20c68aa738f Ecma-262Standard ECMA-262. ECMAScript Language Specification 3rd edition (December 1999) Flanagan 2006JavaScript: The Definitive Guide, Fifth Edition. ISBN 10: 0-596-10199-6 | ISBN 13:9780596101992]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä¸­çš„Newå…³é”®å­—]]></title>
    <url>%2F2019%2F02%2F15%2FJavaScript%E4%B8%AD%E7%9A%84New%E5%85%B3%E9%94%AE%E5%AD%97%2F</url>
    <content type="text"><![CDATA[The new keyword in JavaScript can be quite confusing when it is first encountered, as people tend to think that JavaScript is not an object-oriented programming language. What is it? What problems does it solve? When is it appropriate and when not? It does 5 things: It creates a new object. The type of this object is simply object. It sets this new objectâ€™s internal, inaccessible, [[prototype]] (i.e. proto) property to be the constructor functionâ€™s external, accessible, prototype object (every function object automatically has a prototype property). It makes the this variable point to the newly created object. It executes the constructor function, using the newly created object whenever this is mentioned. It returns the newly created object, unless the constructor function returns a non-null object reference. In this case, that object reference is returned instead. Note: constructor function refers to the function after the new keyword, as in 1new ConstructorFunction(arg1, arg2) Once this is done, if an undefined property of the new object is requested, the script will check the objectâ€™s [[prototype]] object for the property instead. This is how you can get something similar to traditional class inheritance in JavaScript. The most difficult part about this is point number 2. Every object (including functions) has this internal property called [[prototype]]. It can only be set at object creation time, either with new, with Object.create, or based on the literal (functions default to Function.prototype, numbers to Number.prototype, etc.). It can only be read with Object.getPrototypeOf(someObject). There is noother way to set or read this value. Functions, in addition to the hidden [[prototype]] property, also have a property called prototype, and it is this that you can access, and modify, to provide inherited properties and methods for the objects you make. Here is an example: 123456789101112131415161718192021222324252627ObjMaker = function() &#123;this.a = &apos;first&apos;;&#125;;// ObjMaker is just a function, there&apos;s nothing special about it that makes // it a constructor.ObjMaker.prototype.b = &apos;second&apos;;// like all functions, ObjMaker has an accessible prototype property that // we can alter. I just added a property called &apos;b&apos; to it. Like // all objects, ObjMaker also has an inaccessible [[prototype]] property// that we can&apos;t do anything withobj1 = new ObjMaker();// 3 things just happened.// A new, empty object was created called obj1. At first obj1 was the same// as &#123;&#125;. The [[prototype]] property of obj1 was then set to the current// object value of the ObjMaker.prototype (if ObjMaker.prototype is later// assigned a new object value, obj1&apos;s [[prototype]] will not change, but you// can alter the properties of ObjMaker.prototype to add to both the// prototype and [[prototype]]). The ObjMaker function was executed, with// obj1 in place of this... so obj1.a was set to &apos;first&apos;.obj1.a;// returns &apos;first&apos;obj1.b;// obj1 doesn&apos;t have a property called &apos;b&apos;, so JavaScript checks // its [[prototype]]. Its [[prototype]] is the same as ObjMaker.prototype// ObjMaker.prototype has a property called &apos;b&apos; with value &apos;second&apos;// returns &apos;second&apos; Itâ€™s like class inheritance because now, any objects you make using new ObjMaker() will also appear to have inherited the â€˜bâ€™ property. If you want something like a subclass, then you do this: 1234567891011121314151617181920212223SubObjMaker = function () &#123;&#125;;SubObjMaker.prototype = new ObjMaker(); // note: this pattern is deprecated!// Because we used &apos;new&apos;, the [[prototype]] property of SubObjMaker.prototype// is now set to the object value of ObjMaker.prototype.// The modern way to do this is with Object.create(), which was added in ECMAScript 5:// SubObjMaker.prototype = Object.create(ObjMaker.prototype);SubObjMaker.prototype.c = &apos;third&apos;; obj2 = new SubObjMaker();// [[prototype]] property of obj2 is now set to SubObjMaker.prototype// Remember that the [[prototype]] property of SubObjMaker.prototype// is ObjMaker.prototype. So now obj2 has a prototype chain!// obj2 ---&gt; SubObjMaker.prototype ---&gt; ObjMaker.prototypeobj2.c;// returns &apos;third&apos;, from SubObjMaker.prototypeobj2.b;// returns &apos;second&apos;, from ObjMaker.prototypeobj2.a;// returns &apos;first&apos;, from SubObjMaker.prototype, because SubObjMaker.prototype // was created with the ObjMaker function, which assigned a for us I read a ton of rubbish on this subject before finally finding this page, where this is explained very well with nice diagrams. æ‰‹å†™ä¸€ä¸ª new çš„å®žçŽ° 1234567891011function New(func) &#123; var res = &#123;&#125;; if (func.prototype !== null) &#123; res.__proto__ = func.prototype; &#125; var ret = func.apply(res, Array.prototype.slice.call(arguments, 1)); if ((typeof ret === "object" || typeof ret === "function") &amp;&amp; ret !== null) &#123; return ret; &#125; return res;&#125;]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä½œç”¨åŸŸ]]></title>
    <url>%2F2019%2F02%2F13%2FJavaScript%E4%BD%9C%E7%94%A8%E5%9F%9F%2F</url>
    <content type="text"><![CDATA[â€‹ ä½œç”¨åŸŸï¼ˆScope ï¼‰æ˜¯ JavaScript è¯­è¨€çš„åŸºç¡€æ¦‚å¿µä¹‹ä¸€ï¼Œå¯èƒ½æ˜¯è®©æˆ‘åœ¨ç¼–å†™å¤æ‚ç¨‹åºçš„æ—¶å€™ç…Žç†¬æœ€å¤šçš„ã€‚è®°ä¸æ¸…å¤šå°‘æ¬¡è¿·å¤±åœ¨è¿½è¸ªå‡½æ•°åˆ°å‡½æ•°ä¹‹é—´ä¼ é€’æŽ§åˆ¶æ—¶ this å…³é”®å­—æŒ‡å‘çš„é—®é¢˜ä¸­äº†ï¼Œæˆ‘å‘çŽ°è‡ªå·±ç»å¸¸ä»¥å„ç§ä»¤äººå›°æƒ‘çš„æ–¹å¼æ‰­æ›²æˆ‘çš„ä»£ç ï¼Œè¯•å›¾å¯¹ç†è§£å˜é‡åœ¨å“ªäº›åœ°æ–¹å¯ä»¥è®¿é—®çš„é—®é¢˜ä¸Šä¿ç•™ä¸€ç‚¹ç†æ™ºã€‚ â€‹ è¿™ç¯‡æ–‡ç« å°†ä¼šæ­£é¢è§£å†³é—®é¢˜ï¼Œæ¦‚è¿°ä½œç”¨åŸŸå’Œä¸Šä¸‹æ–‡çš„å®šä¹‰ï¼Œæµ‹è¯•ä¸¤ç§å…è®¸æˆ‘ä»¬æ“ä½œä¸Šä¸‹æ–‡çš„ JavaScript æ–¹æ³•ï¼Œå¹¶æ·±å…¥æŽ¢è®¨æˆ‘é‡åˆ°è¿‡çš„ 90% çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ thisï¼Ÿæ˜¯ä»€ä¹ˆï¼Ÿ è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•° â€‹ åœ¨ç»å…¸çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥æ ‡è¯†å’ŒæŒ‡å‘æˆ‘ä»¬æ­£åœ¨æ“ä½œçš„å¯¹è±¡ã€‚this ä¼˜ç§€åœ°æ»¡è¶³äº†è¿™ä¸ªç›®çš„ï¼Œä¸ºæˆ‘ä»¬çš„å¯¹è±¡æä¾›äº†è®¿é—®è‡ªå·±å’ŒæŒ‡å‘è‡ªæœ‰å±žæ€§çš„ç›®çš„ã€‚ 123456789&lt;script type="text/javascript"&gt; var deep_thought = &#123; the_answer: 42, ask_question: function () &#123; return this.the_answer; &#125;&#125;;var the_meaning = deep_thought.ask_question();&lt;/script&gt; â€‹ ä¸Šé¢çš„ç¤ºä¾‹æž„é€ äº† ä¸€ä¸ªå¯¹è±¡ï¼Œåä¸º deep_thought ï¼Œå¹¶å°†å®ƒçš„ this_answer å±žæ€§è®¾ç½®ä¸º 42ï¼Œç„¶åŽåˆ›å»ºäº†ä¸€ä¸ª ask_question æ–¹æ³•ã€‚å½“ deep_thought.ask_question() å‡½æ•°è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaScript ä¸ºå‡½æ•°è°ƒç”¨åˆ›å»ºäº†ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå°† this è®¾ç½®ä¸ºè°ƒç”¨è¯­å¥æœ€åŽä¸€ä¸ª â€.â€ å‰é¢çš„å˜é‡æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯ deep_thought ã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨åŽé¢é€šè¿‡ this è®¿é—®åˆ° deep_thought çš„é•œåƒï¼Œå¹¶æŸ¥çœ‹å®ƒçš„è‡ªæœ‰å±žæ€§ï¼Œå¹¶è¿”å›ž this.the_answer ä¸­ä¿å­˜çš„å€¼ï¼š42ã€‚ æž„é€ å‡½æ•° â€‹ åŒæ ·çš„ï¼Œåœ¨å®šä¹‰ä¸€ä¸ªç”¨æ¥ä½œä¸ºå¯ä»¥ä½¿ç”¨ new å…³é”®å­—çš„æž„é€ å‡½æ•°çš„æ–¹æ³•æ—¶ï¼Œthis å¯ä»¥è¢«ç”¨æ¥æŒ‡å‘è¢«åˆ›å»ºçš„å¯¹è±¡ã€‚ æˆ‘ä»¬é‡å†™ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­æ¥ä½“çŽ°è¿™ä¸ªåœºæ™¯ï¼š 12345678910&lt;script type="text/javascript"&gt; function BigComputer(answer) &#123; this.the_answer = answer; this.ask_question = function () &#123; return this.the_answer; &#125;&#125;var deep_thought = new BigComputer(42);var the_meaning = deep_thought.ask_question();&lt;/script&gt; â€‹ æˆ‘å¹¶æ²¡æœ‰æ˜¾ç¤ºåœ°åˆ›å»º deep_thought å¯¹è±¡ï¼Œè€Œæ˜¯å†™äº†ä¸€ä¸ªæ–¹æ³•æ¥åˆ›å»º BigComputer å¯¹è±¡ï¼Œç„¶åŽé€šè¿‡ new å…³é”®å­—å°† deep_thought å®žä¾‹åŒ–ä¸ºä¸€ä¸ªå®žä¾‹å˜é‡ã€‚å½“ new BigComputer() è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡åœ¨åŽå°é€æ˜Žåœ°åˆ›å»ºäº†ã€‚BigComputer() æ–¹æ³•è¢«è°ƒç”¨ï¼Œç„¶åŽå®ƒçš„ this å…³é”®å­—è¢«è®¾ç½®ä¸ºæŒ‡å‘ è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥å°†å±žæ€§å’Œæ–¹æ³•è®¾ç½®åˆ° this ä¸Šï¼Œç„¶åŽåœ¨ BigComputer æ‰§è¡Œç»“æŸåŽé€æ˜Žåœ°å°†å…¶è¿”å›žã€‚ â€‹ æ³¨æ„ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œdeep_thought.ask_question() ä»ç„¶åƒä»¥å‰ä¸€æ ·å·¥ä½œã€‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆ this åœ¨ the_question ä¸­çš„å«ä¹‰ä¸Žåœ¨ BigComputer ä¸­çš„ä¸åŒï¼Ÿç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ new è¿›å…¥ BigComputer çš„ï¼Œæ‰€ä»¥ this è¡¨ç¤º æ–°åˆ›å»ºçš„å¯¹è±¡ ï¼Œå¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ deep_thought è¿›å…¥ ask_question ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œ this å°±ä»£è¡¨ç€ deep_thought æŒ‡å‘çš„ä»»æ„å¯¹è±¡ã€‚this å¹¶ä¸æ˜¯åƒå…¶ä»–å˜é‡ä¸€æ ·ä»Žä½œç”¨åŸŸé“¾ä¸­è¯»å–çš„ï¼Œè€Œæ˜¯åŸºäºŽä¸Šä¸‹æ–‡ä¸Žä¸Šä¸‹æ–‡é—´é‡ç½®çš„ã€‚ æ–¹æ³•è°ƒç”¨ â€‹ å¦‚æžœæˆ‘ä»¬åªæ˜¯è°ƒç”¨ä¸€ä¸ªç®€å•çš„ï¼Œæ²¡æœ‰è¿™äº›çœ¼èŠ±ç¼­ä¹±çš„å¯¹è±¡çš„æ–¹æ³•å‘¢ï¼Ÿ this åœ¨è¿™æ ·çš„æƒ…æ™¯ä¸‹æŒ‡å‘å“ªé‡Œå‘¢ï¼Ÿ 123456&lt;script type="text/javascript"&gt;function test_this() &#123; return this;&#125;var i_wonder_what_this_is = test_this();&lt;/script&gt; â€‹ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æœ‰é€šè¿‡ new æ¥æä¾›ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œä¹Ÿæ²¡æœ‰æä¾›ä¸€ä¸ªå¯¹è±¡å½¢å¼çš„ä¸Šä¸‹æ–‡ã€‚åœ¨è¿™é‡Œ this ä¼šå°½å¯èƒ½æŒ‡å‘æœ€å…¨å±€çš„å¯¹è±¡ï¼šå¯¹ ç½‘é¡µæ¥è¯´ï¼Œå°±æ˜¯ window å¯¹è±¡ã€‚ äº‹ä»¶å¤„ç†å‡½æ•° Event Handler For a more complicated twist on the normal function call, letâ€™s say that weâ€™re using a function to handle an onclick event. What does this mean when the event triggers our functionâ€™s execution? Unfortunately, thereâ€™s not a simple answer to this question.If we write the event handler inline, this refers to the global window object: å¯¹äºŽä¸€ä¸ª However, when we add an event handler via JavaScript, this refers to the DOM element that generated the event. (Note: The event handling shown here is short and readable, but otherwise poor. Please use a real addEvent function instead.): 12345678function addhandler() &#123;document.getElementById(â€˜thebuttonâ€™).onclick = click_handler;&#125;window.onload = addhandler;&lt;/script&gt;â€¦&lt;button id='thebutton'&gt;Click me!&lt;/button&gt; ComplicationsLetâ€™s run with that last example for a moment longer. What if instead of running click_handler, we wanted to ask deep_thought a question every time we clicked the button? The code for that seems pretty straightforward; we might try this: 12345678910111213141516&lt;script type="text/javascript"&gt;function BigComputer(answer) &#123; this.the_answer = answer; this.ask_question = function () &#123; alert(this.the_answer); &#125;&#125;function addhandler() &#123; var deep_thought = new BigComputer(42), the_button = document.getElementById(â€˜thebuttonâ€™); the_button.onclick = deep_thought.ask_question;&#125;window.onload = addhandler;&lt;/script&gt; Perfect, right? We click on the button, deep_thought.ask_question is executed, and we get back â€œ42.â€ So why is the browser giving us undefined instead? What did we do wrong? The problem is simply this: Weâ€™ve passed off a reference to the ask_question method, which, when executed as an event handler, runs in a different context than when itâ€™s executed as an object method. In short, the this keyword in ask_question is pointing at the DOM element that generated the event, not at a BigComputer object. The DOM element doesnâ€™t have a the_answer property, so weâ€™re getting back undefined instead of â€œ42.â€ setTimeout exhibits similar behavior, delaying the execution of a function while at the same time moving it out into a global context. This issue crops up all over the place in our programs, and itâ€™s a terribly difficult problem to debug without keeping careful track of whatâ€™s going on in all the corners of your program, especially if your object has properties that do exist on DOM elements or the window object. Manipulating Context With .apply() and .call()We really do want to be able to ask deep_thought a question when we click the button, and more generally, we do want to be able to call object methods in their native context when responding to things like events and setTimeout calls. Two little-known JavaScript methods, apply and call, indirectly enable this functionality by allowing us to manually override the /files/includes/default.css value of this when we execute a function call. Letâ€™s look at callfirst: 1234567891011121314&lt;script type="text/javascript"&gt;var first_object = &#123; num: 42&#125;;var second_object = &#123; num: 24&#125;;function multiply(mult) &#123; return this.num * mult;&#125;multiply.call(first_object, 5); // returns 42 * 5multiply.call(second_object, 5); // returns 24 * 5&lt;/script&gt; In this example, we first define two objects, first_object and second_object, each with a num property. Then we define a multiply function that accepts a single argument, and returns the product of that argument, and the num property of its this object. If we called that function by itself, the answer returned would almost certainly be undefined, since the global windowobject doesnâ€™t have a num property unless we explicitly set one. We need some way of telling multiply what its this keyword ought refer to; the call method of the multiply function is exactly what weâ€™re looking for. The first argument to call defines what this means inside the executed function. The remaining arguments to call are passed into the executed function, just as if youâ€™d called it yourself. So, when multiply.call(first_object, 5) is executed, the multiply function is called, 5 is passed in as the first argument, and the this keyword is set to refer to object first_object. Likewise, when multiply.call(second_object, 5) is executed, the multiply function is called, 5 is passed in as the first argument, and the this keyword is set to refer to object second_object. apply works in exactly the same way as call, but allows you to wrap up the arguments to the called function in an array, which can be quite useful when programatically generating function calls. Replicating the functionality we just talked about using apply is trivial: 12345&lt;script type="text/javascript"&gt;...multiply.apply(first_object, [5]); // returns 42 * 5multiply.apply(second_object, [5]); // returns 24 * 5&lt;/script&gt; apply and call are very useful on their own, and well worth keeping around in your toolkit, but they only get us halfway to solving the problem of context shifts for event handlers. Itâ€™s easy to think that we could solve the problem by simply using call to shift the meaning of this when we set up the handler: 12345function addhandler() &#123; var deep_thought = new BigComputer(42), the_button = document.getElementById('thebutton'); the_button.onclick = deep_thought.ask_question.call(deep_thought);&#125; The problem with this line of reasoning is simple: call executes the function immediately. Instead of providing a function reference to the onclick handler, weâ€™re giving it the result of an executed function. We need to exploit another feature of JavaScript to really solve this problem. The Beauty of .bind()Iâ€™m not a huge fan of the Prototype JavaScript framework, but I am very much impressed with the quality of its code as a whole. In particular, one simple addition it makes to the Function object has had a hugely positive impact on my ability to manage the context in which function calls execute: bind performs the same general task as call, altering the context in which a function executes. The difference is that bind returns a function reference that can be used later, rather than the result of an immediate execution that we get with call. If we simplify the bind function a bit to get at the key concepts, we can insert it into the multiplication example we discussed earlier to really dig into how it works; itâ€™s quite an elegant solution: 1234567891011121314151617181920212223242526&lt;script type="text/javascript"&gt;var first_object = &#123; num: 42&#125;;var second_object = &#123; num: 24&#125;;function multiply(mult) &#123; return this.num * mult;&#125;Function.prototype.bind = function(obj) &#123; var method = this, temp = function() &#123; return method.apply(obj, arguments); &#125;;return temp;&#125;var first_multiply = multiply.bind(first_object);first_multiply(5); // returns 42 * 5var second_multiply = multiply.bind(second_object);second_multiply(5); // returns 24 * 5&lt;/script&gt; First, we define first_object, second_object, and the multiply function, just as before. With those taken care of, we move on to creating a bind method on the Function objectâ€™s prototype, which has the effect of making bind available for all functions in our program. When multiply.bind(first_object) is called, JavaScript creates an execution context for the bind method, setting this to the multiply function, and setting the first argument, obj, to reference first_object. So far, so good. The real genius of this solution is the creation of method, set equal to this (the multiplyfunction itself). When the anonymous function is created on the next line, method is accessible via its scope chain, as is obj (this couldnâ€™t be used here, because when the newly created function is executed, this will be overwritten by a new, local context). This alias to this makes it possible to use apply to execute the multiply function, passing in obj to ensure that the context is set correctly. In computer-science-speak, temp is a closure that, when returned at the end of the bind call, can be used in any context whatsoever to execute multiply in the context of first_object. This is exactly what we need for the event handler and setTimeout scenarios discussed above. The following code solves that problem completely, binding the deep_thought.ask_questionmethod to the deep_thought context, so that it executes correctly whenever the event is triggered: 12345function addhandler() &#123; var deep_thought = new BigComputer(42), the_button = document.getElementById('thebutton'); the_button.onclick = deep_thought.ask_question.bind(deep_thought);&#125; Beautiful. References JavaScript Closures is the best resource on the net for a thorough discussion of closures: what they do, how they do it, and how to use them without going insane. The Protype JavaScript Framework is full of little nuggets like bind. The version available here not only allows the binding of a particular this value, but also of some or all of a functionâ€™s arguments, which comes in handy all too often. Douglas Crockfordâ€™s JavaScript essays are excellent resources for both basic and advanced JavaScript programmers. The man knows what heâ€™s talking about, and explains difficult concepts in an easy-to-grasp manner. Variable Scope for New Programmers is a good article if youâ€™d like more discussion of scope from a beginnerâ€™s perspective. Written by Jonathan Snook, and published in this very magazine at the end of last year, itâ€™s still an informative and useful read.]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…ç½® Nginx HTTPS æœåŠ¡å™¨]]></title>
    <url>%2F2019%2F01%2F17%2F%E9%85%8D%E7%BD%AE-Nginx-HTTPS-%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[è¯‘è‡ªå®˜æ–¹æ–‡æ¡£â€”â€” Configuring HTTPS servers è¦é…ç½® HTTPS æœåŠ¡å™¨ï¼Œå¿…é¡»åœ¨ server åŒºçš„ç›‘å¬ï¼ˆlistenï¼‰å¥—æŽ¥å­—ä¸Šå…è®¸ ssl å‚æ•°ï¼ŒåŒæ—¶è¦å£°æ˜ŽæœåŠ¡å™¨è¯ä¹¦å’Œç§é’¥æ–‡ä»¶çš„ä½ç½®ï¼š 123456789server &#123; listen 443 ssl; server_name www.example.com; ssl_certificate www.example.com.crt; ssl_certificate_key www.example.com.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers HIGH:!aNULL:!MD5; ...&#125; â€‹ æœåŠ¡å™¨è¯ä¹¦æ˜¯ä¸€ä¸ªå…¬å¼€çš„å®žä½“ã€‚å®ƒä¼šè¢«å‘é€ç»™æ‰€æœ‰è¿žæŽ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ã€‚ç§é’¥æ˜¯ä¸€ä¸ªå®‰å…¨å®žä½“ï¼Œåº”è¯¥è¢«ä¿å­˜åœ¨ä¸€ä¸ªé™åˆ¶è®¿é—®çš„æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯è¦å…è®¸ Nginx çš„ä¸»çº¿ç¨‹å¯è¯»ã€‚ç§é’¥ä¹Ÿå¯ä»¥ä¿å­˜åœ¨å’Œè¯ä¹¦åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š ssl_certificate www.example.com.cert; ssl_certificate_key www.example.com.cert; â€‹ è¿™ç§æƒ…å†µä¸‹æ–‡ä»¶çš„è®¿é—®æƒé™ä¹Ÿåº”å½“è¢«é™åˆ¶ã€‚å°½ç®¡è¯ä¹¦å’Œç§é’¥è¢«ä¿å­˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œåªæœ‰è¯ä¹¦ä¼šè¢«å‘é€ç»™å®¢æˆ·ç«¯ã€‚ â€‹ ssl_protocols å’Œ ssl_ciphers æŒ‡ä»¤å¯ä»¥ç”¨æ¥é™åˆ¶åªå…è®¸é«˜ç‰ˆæœ¬å’Œå¼ºåŠ å¯†çš„ SSL/TLS çš„è¿žæŽ¥ã€‚Nginx é»˜è®¤ä½¿ç”¨ â€œssl_protocols TLSv1 TLSv1.1 TLSv1.2â€ å’Œ â€œssl_ciphers HIGH:!aNULL:!MD5â€ï¼Œæ‰€ä»¥é€šå¸¸ä¸éœ€è¦ç‰¹æ„é…ç½®å®ƒä»¬ã€‚è¦çŸ¥é“è¿™äº›æŒ‡ä»¤çš„é»˜è®¤é…ç½®å˜è¿‡å‡ æ¬¡ã€‚ HTTPS server optimization HTTPS æœåŠ¡å™¨ä¼˜åŒ–â€‹ SSL æ“ä½œæ¶ˆè€—é¢å¤–çš„ CPU èµ„æºã€‚åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­åº”è¯¥å¯åŠ¨å¤šä¸ªå·¥ä½œè¿›ç¨‹ï¼Œæ•°é‡ä¸å°‘äºŽå¯ç”¨çš„ CPU å†…æ ¸ã€‚æœ€æ¶ˆè€— CPU çš„æ“ä½œæ˜¯ SSL æ¡æ‰‹ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è®©æ¯ä¸ªå®¢æˆ·ç«¯çš„æ¡æ‰‹æ¬¡æ•°é™ä½Žåˆ°æœ€å°ï¼šç¬¬ä¸€ç§æ˜¯é€šè¿‡å…è®¸ keepalive è¿žæŽ¥ï¼Œè¿™æ ·å°±å¯ä»¥å®žçŽ°è¿žæŽ¥å¤ç”¨ï¼Œå³é€šè¿‡ä¸€ä¸ªè¿žæŽ¥å‘é€å¤šä¸ªè¯·æ±‚ï¼›ç¬¬äºŒç§æ˜¯é‡ç”¨ SSL ä¼šè¯å‚æ•°æ¥é¿å…å¹¶å‘è¯·æ±‚å’Œè‡ªè¯·æ±‚çš„ SSL æ¡æ‰‹ã€‚è¿™äº›ä¼šè¯è¢«ä¿å­˜åœ¨ä¸€ä¸ªè¢«å·¥ä½œè¿›ç¨‹å…±äº«çš„ SSL ä¼šè¯ç¼“å­˜ä¸­ï¼Œå¯ä»¥é€šè¿‡ ssl_session_cache æŒ‡ä»¤æ¥é…ç½®ã€‚1MB ç¼“å­˜å¯ä»¥åŒ…å« 4000 ä¸ªä¼šè¯ã€‚é»˜è®¤çš„ç¼“å­˜è¿‡æœŸæ—¶é—´æ˜¯ 5 åˆ†é’Ÿã€‚å¯ä»¥é€šè¿‡ ssl_session_timeout æŒ‡ä»¤å¢žåŠ è¿‡æœŸæ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œé€šè¿‡è®¾ç½® 10MB å…±äº«ä¼šè¯ç¼“å­˜æ¥ä¼˜åŒ–ä¸€ä¸ªå¤šæ ¸ç³»ç»Ÿï¼š 12345678910111213141516worker_processes auto;http &#123; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; server &#123; listen 443 ssl; server_name www.example.com; keepalive_timeout 70; ssl_certificate www.example.com.crt; ssl_certificate_key www.example.com.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers HIGH:!aNULL:!MD5; ... SSL è¯ä¹¦é“¾â€‹ æŸäº›æµè§ˆå™¨å¯èƒ½ä¼šæŠ±æ€¨ç”±çŸ¥åè¯ä¹¦é¢å‘æœºæž„ç­¾åçš„è¯ä¹¦ï¼Œè€Œå…¶ä»–ä¸€äº›æµè§ˆå™¨å¯èƒ½æ¯«æ— é—®é¢˜çš„æŽ¥å—è¯ä¹¦ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºé¢å‘æœºæž„ä½¿ç”¨ä¸­é—´è¯ä¹¦å¯¹æœåŠ¡å™¨è¿›è¡Œäº†ç­¾åï¼Œè¯¥ä¸­é—´è¯ä¹¦ä¸å­˜åœ¨äºŽä¸Žç‰¹å®šæµè§ˆå™¨ä¸€èµ·åˆ†å‘çš„ä¼—æ‰€å‘¨çŸ¥çš„å¯ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæž„çš„è¯ä¹¦åº“ä¸­ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œé¢å‘æœºæž„æä¾›äº†ä¸€ç»„é“¾å¼è¯ä¹¦ï¼Œé€šè¿‡è¯ä¹¦é“¾åº”è¯¥èƒ½å¤Ÿé“¾æŽ¥åˆ°ç­¾åçš„æœåŠ¡å™¨è¯ä¹¦ã€‚åœ¨åˆå¹¶æ–‡ä»¶ä¸­ï¼ŒæœåŠ¡å™¨è¯ä¹¦å¿…é¡»å‡ºçŽ°åœ¨é“¾å¼è¯ä¹¦ä¹‹å‰ï¼š $ cat www.example.com.crt bundle.crt &gt; www.example.com.chained.crt ç»“æžœæ–‡ä»¶åº”è¯¥ç”¨åœ¨ ssl_certificate æŒ‡ä»¤ä¸­ï¼š 1234567server &#123; listen 443 ssl; server_name www.example.com; ssl_certificate www.example.com.chained.crt; ssl_certificate_key www.example.com.key; ...&#125; â€‹ å¦‚æžœæœåŠ¡å™¨è¯ä¹¦å’Œé“¾å¼è¯ä¹¦ç”¨é”™è¯¯çš„é¡ºåºè¿žæŽ¥äº†ï¼Œnginxå°†ä¸èƒ½æ­£å¸¸å¯åŠ¨ï¼Œå¹¶çŽ°å®ž é”™è¯¯ä¿¡æ¯ï¼š SSL_CTX_use_PrivateKey_file(â€œ â€¦ /www.example.com.key&quot;) failed (SSL: error:0B080074:x509 certificate routines:â€‹ X509_check_private_key:key values mismatch) â€‹ å› ä¸º nginx å°è¯•ç”¨ç§é’¥å’Œé“¾å¼è¯ä¹¦ä¸­çš„ç¬¬ä¸€ä¸ªè¯ä¹¦è€Œä¸æ˜¯æœåŠ¡å™¨è¯ä¹¦ã€‚ â€‹ æµè§ˆå™¨é€šå¸¸ä¼šä¿å­˜æŽ¥å—åˆ°çš„ç”±å¯ä¿¡ä»»é¢å‘æœºæž„ç­¾å‘çš„ä¸­é—´è¯ä¹¦ï¼Œæ‰€ä»¥é¢‘ç¹ä½¿ç”¨çš„æµè§ˆå™¨å¯èƒ½å·²ç»èŽ·å–è¿‡ä¸­é—´è¯ä¹¦ï¼Œæ‰€ä»¥é‡åˆ°æ²¡æœ‰åŒ…å«é“¾å¼è¯ä¹¦çš„æœåŠ¡å™¨è¯ä¹¦å°±ä¸ä¼šå‡ºçŽ°è­¦å‘Šã€‚ä¸ºç¡®ä¿æœåŠ¡å™¨å‘é€äº†å®Œæ•´çš„è¯ä¹¦é“¾ï¼Œå¯ä»¥ç”¨ openssl å‘½ä»¤è¡Œå·¥å…·æµ‹è¯•ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617181920212223$ openssl s_client -connect www.godaddy.com:443...Certificate chain 0 s:/C=US/ST=Arizona/L=Scottsdale/1.3.6.1.4.1.311.60.2.1.3=US /1.3.6.1.4.1.311.60.2.1.2=AZ/O=GoDaddy.com, Inc /OU=MIS Department/CN=www.GoDaddy.com /serialNumber=0796928-7/2.5.4.15=V1.0, Clause 5.(b) i:/C=US/ST=Arizona/L=Scottsdale/O=GoDaddy.com, Inc. /OU=http://certificates.godaddy.com/repository /CN=Go Daddy Secure Certification Authority /serialNumber=07969287 1 s:/C=US/ST=Arizona/L=Scottsdale/O=GoDaddy.com, Inc. /OU=http://certificates.godaddy.com/repository /CN=Go Daddy Secure Certification Authority /serialNumber=07969287 i:/C=US/O=The Go Daddy Group, Inc. /OU=Go Daddy Class 2 Certification Authority 2 s:/C=US/O=The Go Daddy Group, Inc. /OU=Go Daddy Class 2 Certification Authority i:/L=ValiCert Validation Network/O=ValiCert, Inc. /OU=ValiCert Class 2 Policy Validation Authority /CN=http://www.valicert.com//emailAddress=info@valicert.com... â€‹ å½“ç”¨ SNI æµ‹è¯•é…ç½®çš„æ—¶å€™ï¼ŒæŒ‡å®š -servername é€‰é¡¹æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸º openss é»˜è®¤ä¸ä½¿ç”¨ SNI ã€‚ â€‹ åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œwww.godaddy.com æœåŠ¡å™¨è¯ä¹¦ #0 çš„ä¸»ä½“ç”±å‘è¡Œè€…ï¼ˆâ€œ i â€ï¼‰ç­¾åï¼Œå‘è¡Œè€…ï¼ˆâ€œ i â€ï¼‰æœ¬èº«æ˜¯è¯ä¹¦ #1 çš„ä¸»ä½“ï¼Œè¯ä¹¦ #1 ç­¾åçš„å‘è¡Œè€…åˆæ˜¯ è¯ä¹¦ #2 çš„ä¸»ä½“ï¼Œè¯ä¹¦ #2 æ˜¯ç”±çŸ¥åå‘è¡Œæ–¹ ValiCert, Inc ç­¾åçš„ï¼ŒValiCert, Inc. çš„è¯ä¹¦ä¿å­˜åœ¨æµè§ˆå™¨çš„å†…ç½®è¯ä¹¦åº“ä¸­ã€‚ â€‹ å¦‚æžœç¼ºå°‘è¯ä¹¦é“¾ï¼Œæµè§ˆå™¨åªèƒ½çœ‹åˆ°æœåŠ¡å™¨è¯ä¹¦ #0ã€‚ å• HTTP/HTTPS æœåŠ¡å™¨å¯ä»¥é…ç½®ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨æ¥åŒæ—¶å¤„ç† HTTP å’Œ HTTPS è¯·æ±‚ï¼š 12345678server &#123; listen 80; listen 443 ssl; server_name www.example.com; ssl_certificate www.example.com.crt; ssl_certificate_key www.example.com.key; ...&#125; â€‹ æ—©åœ¨ 0.7.14 ç‰ˆæœ¬ä¹‹å‰ï¼Œè¿˜ä¸èƒ½åƒä¸Šé¢é‚£æ ·ä¸ºä¸ªåˆ« socket ç›‘å¬é€‰æ‹©æ€§å¯ç”¨ SSLã€‚SSL åªèƒ½é€šè¿‡ ssl æŒ‡ä»¤ç”¨äºŽæ•´ä¸ª server é…ç½®ï¼Œä½¿å¾—ä¸å¯èƒ½é…ç½®ä¸€ä¸ªå•ç‹¬çš„ HTTP/HTTPS æœåŠ¡å™¨ã€‚äºŽæ˜¯åœ¨listen æŒ‡ä»¤ä¸­æ·»åŠ  ssl å‚æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ä¸é¼“åŠ±åœ¨çŽ°ä»£ç‰ˆæœ¬ä¸­ä½¿ç”¨ ssl æŒ‡ä»¤ã€‚ åŸºäºŽåŸŸåçš„ HTTPS æœåŠ¡å™¨å½“é…ç½®ä¸¤ä¸ªæˆ–è€…å¤šä¸ª HTTPS æœåŠ¡å™¨ç›‘å¬åŒä¸€ä¸ª IP åœ°å€æ—¶ä¼šå‡ºçŽ°çš„ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼š server {â€‹ listen 443 ssl;â€‹ server_name www.example.com;â€‹ ssl_certificate www.example.com.crt;â€‹ â€¦} server {â€‹ listen 443 ssl;â€‹ server_name www.example.org;â€‹ ssl_certificate www.example.org.crt;â€‹ â€¦} â€‹ ä½¿ç”¨æ­¤é…ç½®,æµè§ˆå™¨æŽ¥å—é»˜è®¤æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œå³ www.example.com ï¼Œä¸è®ºè¯·æ±‚çš„æœåŠ¡å™¨åç§°å¦‚ä½•ã€‚è¿™æ˜¯ç”± SSL åè®®çš„è¡Œä¸ºæ‰€è‡´ã€‚SSL è¿žæŽ¥æ˜¯åœ¨æµè§ˆå™¨å‘é€ HTTP è¯·æ±‚ä¹‹å‰å»ºç«‹çš„ï¼Œnginx ä¸çŸ¥é“è¯·æ±‚çš„æœåŠ¡å™¨çš„åç§°ã€‚æ‰€ä»¥ï¼Œå®ƒåªèƒ½æä¾›é»˜è®¤çš„æœåŠ¡å™¨è¯ä¹¦ã€‚ â€‹ è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ€å¤è€ä¹Ÿæ˜¯æœ€ç¨³å®šçš„åŠžæ³•å°±æ˜¯ä¸ºæ¯ä¸ª HTTPS æœåŠ¡å™¨åˆ†é…ä¸€ä¸ªå•ç‹¬çš„ IP åœ°å€ï¼š server {â€‹ listen 192.168.1.1:443 ssl;â€‹ server_name www.example.com;â€‹ ssl_certificate www.example.com.crt;â€‹ â€¦} server {â€‹ listen 192.168.1.2:443 ssl;â€‹ server_name www.example.org;â€‹ ssl_certificate www.example.org.crt;â€‹ â€¦} å…·æœ‰å¤šä¸ªåŸŸåçš„ SSL è¯ä¹¦â€‹ ä¹Ÿæœ‰å…¶ä»–çš„æ–¹æ³•å…è®¸åœ¨å¤šä¸ª HTTPS æœåŠ¡å™¨ä¹‹é—´å…±äº«ä¸€ä¸ªå•ç‹¬çš„ IP åœ°å€ã€‚ä½†æ˜¯ï¼Œæ‰€æœ‰è¿™äº›åŠžæ³•éƒ½æœ‰å‰¯ä½œç”¨ã€‚ä¸€ç§æ–¹æ³•æ˜¯åœ¨è¯ä¹¦çš„ SubjectAltName å­—æ®µä¸Šä½¿ç”¨å¤šä¸ªåŸŸåï¼Œä¾‹å¦‚ www.example.com å’Œ www.example.orgã€‚ä½†æ˜¯ï¼Œ`SubjectAltName` å­—æ®µçš„é•¿åº¦æœ‰é™ã€‚ â€‹ å¦ä¸€ä¸ªæ–¹æ³•æ˜¯è®©è¯ä¹¦ä½¿ç”¨é€šé…ç¬¦åŸŸåï¼Œä¾‹å¦‚ï¼Œ.example.orgã€‚ä¸€ä¸ªé€šé…ç¬¦è¯ä¹¦èƒ½å¤ŸåŠ å›ºæŒ‡å®šåŸŸåçš„æ‰€æœ‰å­åŸŸåï¼Œä½†ä»…é™äºŽä¸€ä¸ªçº§åˆ«ã€‚è¯ä¹¦åŒ¹é… www.example.orgï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é… example.org å’Œ www.sub.example.org ã€‚ è¿™ä¸¤ç§æ–¹æ³•ä¹Ÿå¯ä»¥åˆå¹¶ã€‚ä¸€ä¸ªè¯ä¹¦å¯ä»¥åœ¨ SubjectAltName å­—æ®µä¸­åŒ…å«å‡†ç¡®çš„å’Œé€šé…ç¬¦çš„åŸŸåï¼Œä¾‹å¦‚ï¼Œ`example.org and .example.org`ã€‚ â€‹ æœ€å¥½å°†å¤šåŸŸåè¯ä¹¦æ–‡ä»¶å’Œå¯¹åº”çš„ç§é’¥æ–‡ä»¶æ”¾åœ¨ http çº§åˆ«çš„é…ç½®åŒºåŸŸï¼Œä»¥ä½¿è¯ä¹¦çš„å•ä¸ªå†…å­˜æ‹·è´èƒ½å¤Ÿåœ¨æ‰€æœ‰æœåŠ¡å™¨é…ç½®ä¸­å…±äº«ï¼š 1234567891011121314ssl_certificate common.crt;ssl_certificate_key common.key;server &#123; listen 443 ssl; server_name www.example.com; ...&#125;server &#123; listen 443 ssl; server_name www.example.org; ...&#125; æœåŠ¡å™¨åŸŸåæŒ‡ç¤ºï¼ˆSNIï¼‰â€‹ ä¸€ä¸ªç”¨äºŽåœ¨å•ä¸ª IP åœ°å€ä¸Šæ‰¿è½½å¤šä¸ª HTTPS æœåŠ¡å™¨çš„æ›´åŠ é€šç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ TLS Server Name Indicationj æ‰©å±•ï¼ˆSNI, RFC 6066ï¼‰ï¼ŒSNI å…è®¸æµè§ˆå™¨åœ¨ SSL æ¡æ‰‹æœŸé—´ä¸Šä¼ è¯·æ±‚çš„æœåŠ¡å™¨åŸŸåï¼ŒäºŽæ˜¯æœåŠ¡å™¨å°±èƒ½çŸ¥é“åº”è¯¥å°†å“ªä¸ªè¯ä¹¦ç”¨äºŽè¿™ä¸ªè¿žæŽ¥ã€‚SNI çŽ°åœ¨å·²ç»è¢«å¤§å¤šæ•°çŽ°ä»£æµè§ˆå™¨æ”¯æŒï¼Œä½†æ˜¯ä¸€äº›è€ç‰ˆæœ¬çš„æˆ–è€…ç‰¹å®šçš„æµè§ˆå™¨è¿˜æ²¡æœ‰æ”¯æŒã€‚ â€‹ SNI ä¸­åªèƒ½ä¼ é€’åŸŸåï¼Œä½†æ˜¯å¦‚æžœä¸€ä¸ªè¯·æ±‚ä¸­åŒ…å«äº†å­—é¢çš„ IP åœ°å€ï¼Œæœ‰äº›æµè§ˆå™¨å¯èƒ½é”™è¯¯åœ°ä¼ é€’è¿™ä¸ªæœåŠ¡å™¨çš„ IP åœ°å€ã€‚ä¸èƒ½å®Œå…¨ä¾èµ– SNIã€‚ â€‹ ä¸ºäº†åœ¨ nginx ä¸­ä½¿ç”¨ SNIï¼Œå¿…é¡»åœ¨æž„å»º nginx äºŒè¿›åˆ¶çš„ OpenSSL åº“ä»¥åŠåœ¨è¿è¡Œæ—¶åŠ¨æ€é“¾æŽ¥åˆ°çš„åº“ä¸­æ”¯æŒå®ƒã€‚OpenSSL ä»Ž 0.9.8f ç‰ˆæœ¬å¼€å§‹æ”¯æŒ SNI ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶æŒ‡å®šç¼–è¯‘é€‰é¡¹ â€--enable-tlsextâ€œã€‚ä»Ž OpenSSL 0.9.8j ç‰ˆæœ¬å¼€å§‹ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯é»˜è®¤å¼€å¯çš„ã€‚å¦‚æžœ nginx ç¼–è¯‘æ—¶æ”¯æŒäº† SNIï¼Œè¿è¡Œ nginx å‘½ä»¤æ—¶åŠ ä¸Š â€œ-Vâ€ å¼€å…³ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼š 1234$ nginx -V...TLS SNI support enabled... â€‹ ç„¶è€Œï¼Œå¦‚æžœå¼€å¯äº† SNI çš„ nginx åŠ¨æ€é“¾æŽ¥åˆ°äº†ä¸æ”¯æŒ SNI çš„ OpenSSL äºŒè¿›åˆ¶ï¼Œnginx ä¼šæ˜¾ç¤ºè­¦å‘Šï¼š nginx was built with SNI support, however, now it is linkeddynamically to an OpenSSL library which has no tlsext support,therefore SNI is not available]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptåŽŸåž‹å›¾è§£]]></title>
    <url>%2F2018%2F12%2F13%2FJavaScript%E5%8E%9F%E5%9E%8B%E5%9B%BE%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[ä»‹ç» JavaScript åŽŸåž‹JavaScript å¼•æ“Žé»˜è®¤æä¾›äº† Object() æž„é€ å‡½æ•°å’Œä¸€ä¸ªå¯ä»¥è¢« Object.prototype å¼•ç”¨åˆ°çš„åŒ¿åå¯¹è±¡ã€‚ 12console.log(Object);console.log(Object.prototype); Object.prototype å¯¹è±¡æœ‰è®¸å¤šå†…ç½®å±žæ€§ï¼Œä¾‹å¦‚ toString() ï¼ŒvalueOf()ç­‰ç­‰ã€‚ä¹Ÿæœ‰ä¸€ä¸ªåä¸º constructor çš„å±žæ€§ï¼Œå®ƒæŒ‡å‘ Object() æž„é€ å‡½æ•°ã€‚ 1console.log(Object.prototype.constructor === Object); // true å‡è®¾åŽŸåž‹ä»£è¡¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹å—ä»£è¡¨ä¸€ä¸ªå¯¹è±¡ã€‚ä¸‹é¢çš„å›¾å½¢å°±æç»˜å‡ºäº† Object() å‡½æ•°å’Œ Object.prototype å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåä¸º Foo çš„å‡½æ•°å¦‚ä¸‹ï¼š 123function Foo(name) &#123; this.name = name;&#125; Foo() å‡½æ•°æŽ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ·»åŠ  name å±žæ€§åˆ°å¯¹è±¡ä¸­ï¼Œå¹¶è®¾ç½® name å±žæ€§çš„å€¼ä¸ºä¼ å…¥çš„å‚æ•°ã€‚ åœ¨è¿™ä¸ªæƒ…æ™¯çš„èƒŒåŽï¼ŒJavaScript å¼•æ“Žåˆ›å»ºäº†ä¸€ä¸ªå‡½æ•° Foo() å’Œä¸€ä¸ªåŒ¿åå¯¹è±¡ã€‚è¿™ä¸ª Foo() å‡½æ•°æœ‰ä¸€ä¸ªåä¸º prototype çš„å±žæ€§æŒ‡å‘è¿™ä¸ªåŒ¿åå¯¹è±¡ã€‚è¿™ä¸ªåŒ¿åå¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ª constructor å±žæ€§æŒ‡å‘è¿™ä¸ª Foo() å‡½æ•°ã€‚ å¦å¤–ï¼ŒFoo.prototype å¯¹è±¡é€šè¿‡ [[Prototype]] è¿žæŽ¥åˆ° Object.prototype ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çŸ¥é“çš„åŽŸåž‹é“¾æŽ¥ã€‚åŽŸåž‹é“¾æŽ¥ç”±ä¸‹å›¾ä¸­çš„ [[Prototype]] è¡¨ç¤ºã€‚ ç¬¬äºŒæ­¥ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º whoAmI() çš„æ–¹æ³•åˆ°è¿™ä¸ª Foo.prototype å¯¹è±¡ã€‚ 123Foo.prototype.whoAmI = function() &#123; return "I am " + this.name;&#125; ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºä¸€ä¸ª Foo å¯¹è±¡çš„å®žä¾‹ã€‚ 1var a = new Foo('a'); JavaScript å¼•æ“Žåœ¨å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåä¸º a ï¼Œå¹¶é€šè¿‡åŽŸåž‹é“¾æŽ¥å°† a å¯¹è±¡è¿žæŽ¥åˆ°äº† Foo.prototype å¯¹è±¡ã€‚ å¯¹è±¡ aï¼ŒFoo.prototypeï¼Œå’Œ Object.prototype ä¹‹é—´çš„è¿žæŽ¥å°±å«ä½œåŽŸåž‹é“¾ã€‚ ç¬¬å››æ­¥ï¼Œåˆ›å»º Foo å¯¹è±¡çš„å¦ä¸€ä¸ªå®žä¾‹ bã€‚ 1var b = new Foo('b'); ç¬¬æ­¥ï¼Œåœ¨ b å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª say() æ–¹æ³•ã€‚ 123b.say = function() &#123; console.log('Hi from ' + this.whoAmI());&#125; JavaScript å¼•æ“Žåœ¨ b å¯¹è±¡ä¸­æ·»åŠ  say() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ Foo.prototype å¯¹è±¡ã€‚ çŽ°åœ¨çœ‹çœ‹ä¸‹é¢çš„ä»£ç ã€‚ 1console.log(a.constructor); // Foo å¯¹è±¡ a æ²¡æœ‰ constructor å±žæ€§ï¼Œæ‰€ä»¥ JavaScript å¼•æ“Žä¼šæ²¿åŽŸåž‹é“¾å‘ä¸ŠæŸ¥æ‰¾ã€‚å› ä¸º a å¯¹è±¡é€šè¿‡åŽŸåž‹é“¾æŽ¥è¿žæŽ¥åˆ°äº† Foo.prototypeï¼Œ å¹¶ä¸” Foo.prototype æœ‰ constructor å±žæ€§ï¼ŒJavaScript å¼•æ“Žä¼šè¿”å›ž Fooã€‚æ‰€ä»¥ä¸‹é¢çš„ è¡¨è¾¾å¼ç»“æžœä¸º trueã€‚ 1console.log(a.constructor === Foo); // true èŽ·å–åŽŸåž‹é“¾æŽ¥proto æ˜¯ Object.prototype å¯¹è±¡çš„ä¸€ä¸ªè®¿é—®å™¨å±žæ€§ã€‚å®ƒæš´éœ²äº†ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çš„åŽŸåž‹é“¾æŽ¥ï¼ˆ[[Prototype]]ï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ˜¯é€šè¿‡åŽŸåž‹é“¾æŽ¥è¢«è®¿é—®çš„ã€‚ proto åœ¨ ES6 ä¸­è¢«æ ‡å‡†åŒ–ï¼Œä¸ºäº†æµè§ˆå™¨çš„å…¼å®¹æ€§ã€‚ç„¶è€Œæœªæ¥å¯èƒ½ä¼šè¢«åºŸé™¤ä»¥æ”¯æŒ Object.getPrototypeOf() ã€‚æ‰€ä»¥ï¼Œæœ€å¥½ä¸è¦åœ¨ç”Ÿäº§ä»£ç ä¸­ä½¿ç”¨ protoã€‚ ä½ å¯ä»¥åœ¨å‰é¢çš„å›¾æ ‡ä¸­çœ‹åˆ°ï¼Œa.proto æš´éœ²äº†æŒ‡å‘ Foo.prototype çš„ [[Prototype]] ã€‚ç›¸ä¼¼çš„ï¼Œb.proto ä¹ŸæŒ‡å‘äº†å’Œ a.proto ç›¸åŒçš„å¯¹è±¡ï¼š 12console.log(a.proto === Foo.prototype); // trueconsole.log(a.proto === b.proto); // true å‰é¢æåˆ°è¿‡ï¼Œä½ åº”è¯¥ä½¿ç”¨ Object.getPrototypeOf() æ–¹æ³•è€Œä¸æ˜¯ proto ã€‚Object.getPrototypeOf() æ–¹æ³•è¿”å›žä¸€ä¸ªæŒ‡å®šå¯¹è±¡çš„åŽŸåž‹ã€‚ 1console.log(a.proto === Object.getPrototypeOf(a)); // true åœ¨ Object.getPrototypeOf() æ–¹æ³•è¿˜ä¸èƒ½ç”¨çš„æ—¶å€™ï¼Œç¨‹åºå‘˜ç»å¸¸ä½¿ç”¨çš„å¦ä¸€ç§èŽ·å¾—åŽŸåž‹é“¾æŽ¥çš„æ–¹æ³•æ˜¯é€šè¿‡ constructor å±žæ€§ï¼Œå¦‚ä¸‹ï¼š 1a.constructor.prototype a.constructor è¿”å›ž Fooï¼Œæ‰€ä»¥ a.constructor.prototypeè¿”å›žåŽŸåž‹å¯¹è±¡ã€‚ å½±å­çœ‹çœ‹ä¸‹é¢çš„æ–¹æ³•è°ƒç”¨ã€‚ 1console.log(a.whoAmI()); // I am a a å¯¹è±¡æ²¡æœ‰ whoAmI() æ–¹æ³•ï¼Œæ‰€ä»¥å½“ è¿™ä¸ªæ–¹æ³•è¢«ä»Ž a è°ƒç”¨æ—¶ï¼Œ JavaScript å¼•æ“Žä¼šæ²¿ç€åŽŸåž‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å®ƒã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±åœ¨ Foo.prototype å¯¹è±¡ä¸­å‘çŽ°å¹¶æ‰§è¡Œäº†è¿™ä¸ªè°ƒç”¨ã€‚ æˆ‘ä»¬åœ¨ a å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œå’Œ Foo.prototype å¯¹è±¡ä¸­çš„æ–¹æ³•åå­—ç›¸åŒã€‚ 123a.whoAmI = function() &#123; console.log('This is ' + this.name);&#125; ç„¶åŽè°ƒç”¨è¿™ä¸ª whoAmI æ–¹æ³•ï¼š 1console.log(a.whoAmI()); // This is a å› ä¸ºæˆ‘ä»¬åœ¨ a å¯¹è±¡ä¸­æœ‰ whoAmI() æ–¹æ³•äº†ï¼Œ JavaScript å¼•æ“Žä¸ä¼šåœ¨åŽŸåž‹é“¾ä¸­æŸ¥æ‰¾ï¼Œè€Œæ˜¯ç«‹å³æ‰§è¡Œè°ƒç”¨ã€‚ è¿™æ˜¯ä¸€ä¸ªå…³äºŽ å½±å­ çš„ç¤ºä¾‹ã€‚a å¯¹è±¡çš„ whoAmI() æ–¹æ³•éšè—äº† a è¿žæŽ¥åˆ°çš„åŽŸåž‹å¯¹è±¡ä¸Šçš„ whoAmI() æ–¹æ³•ã€‚ çŽ°åœ¨ä½ å°±ç†è§£äº†å…³äºŽ JavaScript åŽŸåž‹çš„æ‰€æœ‰é‡è¦æ¦‚å¿µï¼ŒåŒ…æ‹¬ åŽŸåž‹é“¾ï¼ŒåŽŸåž‹é“¾æŽ¥ï¼Œprotoï¼Œä»¥åŠå½±å­ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†è§£JavaScriptå¯¹è±¡]]></title>
    <url>%2F2018%2F12%2F12%2F%E7%90%86%E8%A7%A3JavaScript%E5%AF%B9%E8%B1%A1%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šUnderstanding JavaScript Objects å¦‚æžœä½ å†™è¿‡ C++ï¼ŒJava æˆ–è€… C#ï¼Œé‚£ä½ é€šå¸¸ä¼šå®šä¹‰ç±»ï¼Œç±»æ˜¯å¯¹è±¡çš„è“å›¾ï¼Œç„¶åŽä»Žè¿™ä¸ªç±»åˆ›å»ºä¸€äº›è·Ÿè¿™ä¸ªç±»å…·æœ‰ç›¸åŒå±žæ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ JavaScript é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ–¹å¼æœ‰æ‰€ä¸åŒã€‚JavaScript ä¸­æ²¡æœ‰å…¶ä»–é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„ç±»çš„æ¦‚å¿µï¼ˆES6ä¸­æ‰å¼€å§‹å®šä¹‰äº†ç±»ï¼‰ã€‚ JavaScript å°†å¯¹è±¡å®šä¹‰ä¸ºä¸€ç»„åŒ…å«äº†åˆå§‹å€¼ï¼Œå¯¹è±¡ä¸Žå‡½æ•°çš„å±žæ€§çš„æ— åºé›†åˆã€‚æ¢å¥è¯è¯´ï¼Œå¯¹è±¡å°±æ˜¯ä¸€ç»„é”®å€¼å¯¹ï¼ˆå“ˆå¸Œï¼‰ï¼Œå€¼å°±æ˜¯æ•°æ®æˆ–è€…å‡½æ•°ã€‚ å¯¹è±¡å¯ä»¥åœ¨å†…éƒ¨ç±»æˆ–è€…ç”¨æˆ·å®šä¹‰ç±»çš„åŸºç¡€ä¸Šåˆ›å»ºã€‚åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»çš„æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åˆ›å»ºä¸€ä¸ª Object çš„å®žä¾‹ï¼Œç„¶åŽå‘å…¶ä¸­æ·»åŠ å±žæ€§å’Œæ–¹æ³•ã€‚ 12345678910var machine = new Object(); // propertymachine.isOn = false; // methodmachine.start = function() &#123; this.isOn = true; console.log('Machine has been starting');&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† Object çš„ä¸€ä¸ª machine å®žä¾‹ï¼Œå¹¶ä¸”æ·»åŠ äº† isOn å±žæ€§å’Œ start() æ–¹æ³•ã€‚ å¦ä¸€ä¸ªæ–¹æ³•ï¼Œå¯èƒ½æ˜¯æ›´ç®€å•çš„åŠžæ³•ï¼Œå°±æ˜¯ç”¨å¯¹è±¡è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚ä¸‹é¢çš„ä¾‹å­åˆ›å»ºçš„ machine å¯¹è±¡å’Œå‰é¢ä¾‹å­ä¸­çš„ machine å¯¹è±¡æ˜¯ä¸€æ ·çš„ã€‚ 1234567var machine = &#123; isOn: false, start: function() &#123; this.isOn = true; console.log('Machine has been starting'); &#125;&#125;; å±žæ€§çš„ç±»åž‹JavaScript é€šè¿‡ç”¨ä¸¤å¯¹æ–¹æ‹¬å·åŒ…å›´ç€å†…éƒ¨å±žæ€§æ¥æŒ‡å®šå±žæ€§çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ [[Enumerable]]ã€‚JavaScript æœ‰ä¸¤ç§ç±»åž‹çš„å±žæ€§ï¼šæ•°æ®å±žæ€§å’Œè®¿é—®å™¨å±žæ€§ã€‚ æ•°æ®å±žæ€§æ•°æ®å±žæ€§ä¸­åŒ…å«æ•°æ®å€¼çš„å•ä¸ªåœ°å€ã€‚ä¸€ä¸ªæ•°æ®å±žæ€§æœ‰å››ä¸ªå…ƒå±žæ€§ï¼Œæè¿°å¦‚ä¸‹ï¼š [[Configurarable]] â€“ å†³å®šä¸€ä¸ªæ•°æ®å±žæ€§æ˜¯å¦å¯ä»¥è¢« delete æˆ–è€…é‡å®šä¹‰æ“ä½œåˆ é™¤ã€‚ [[Enumerable]] â€“ è¡¨ç¤ºæ•°æ®å±žæ€§å¯ä»¥åœ¨ forâ€¦in å¾ªçŽ¯ä¸­éåŽ†è®¿é—®ã€‚ [[Writable]] â€“ æŒ‡ç¤ºæ•°æ®å±žæ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«æ”¹å˜ã€‚ [[Value]] â€“ åŒ…å«äº†æ•°æ®å±žæ€§å®žé™…çš„å€¼ã€‚æ˜¯è¯¥å±žæ€§è¯»å–å’Œå†™å…¥å€¼çš„ä½ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç›´æŽ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰çš„æ‰€æœ‰å±žæ€§çš„[[Configurable]]ï¼Œ[[Enumerable]]ï¼Œå’Œ [[Writable]] å±žæ€§çš„å€¼éƒ½è¢«è®¾ç½®ä¸º true ã€‚[[Value]] å±žæ€§çš„é»˜è®¤å€¼æ˜¯ undefinedã€‚ ä¸ºäº†æ”¹å˜ä¸€ä¸ªå±žæ€§çš„å…ƒå±žæ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨ Object.defineProperty() æ–¹æ³•ã€‚Object.defineProperty() æ–¹æ³•æŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š è¢«å®šä¹‰å±žæ€§çš„å¯¹è±¡ è¯¥å¯¹è±¡ä¸Šå®šä¹‰çš„å±žæ€§çš„åç§° å…ƒå±žæ€§æè¿°å¯¹è±¡æœ‰å››ä¸ªå±žæ€§: configurable, enumerable, writable, å’Œvalue å¦‚æžœä½ ç”¨ Object.defineProperty() æ–¹æ³•æ¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§ï¼Œ[[Configurable]], [[Enumerable]], å’Œ [[Writable]]çš„é»˜è®¤å€¼éƒ½æ˜¯ false ï¼Œé™¤éžä¸“é—¨æŒ‡å®šã€‚ 1234var machine = &#123;&#125;;machine.isOn = false;delete machine.isOn;console.log(machine.isOn); // undefined å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ [[Configurable]] å±žæ€§çš„å€¼ä¸º true ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ delete æ“ä½œè´Ÿåˆ é™¤è¯¥å±žæ€§ã€‚ ä¸‹é¢çš„ä¾‹å­åˆ›å»ºäº†ä¸€ä¸ª machine å¯¹è±¡ï¼Œç„¶åŽç”¨ Object.defineProperty()æ–¹æ³•æ·»åŠ äº† isOn å±žæ€§ã€‚ 12345678var machine = &#123;&#125;; Object.defineProperty(machine, 'isOn', &#123; configurable: false, value: false&#125;); delete machine.isOn; // undefined// Uncaught TypeError: Cannot delete property 'isOn' of #&lt;Object&gt; ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† configurable å±žæ€§è®¾ç½®ä¸º false ï¼Œå› æ­¤åˆ é™¤ isOn å±žæ€§åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ä¼šæŠ¥é”™ã€‚ å¦å¤–ï¼Œå¦‚æžœä¸€ä¸ªå±žæ€§è¢«è®¾ç½®ä¸ºä¸å¯é…ç½®ï¼Œå®ƒå°±ä¸å¯èƒ½å†å˜æˆå¯é…ç½®çš„äº†ã€‚å¦‚æžœç”¨ Object.defineProperty() æ–¹æ³•æ¥æ›´æ”¹ writable ä»¥å¤–çš„ä»»ä½•å±žæ€§ï¼Œéƒ½ä¼šå‡ºé”™ã€‚ 1234Object.defineProperty(machine, 'isOn', &#123; configurable: true&#125;);// Uncaught TypeError: Cannot redefine property: isOn é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å¯¹è±¡ä¸Šå®šä¹‰çš„æ‰€æœ‰å±žæ€§çš„ enumerable å±žæ€§éƒ½æ˜¯ true ã€‚æ„å‘³ç€ä½ å¯ä»¥ç”¨ forâ€¦in å¾ªçŽ¯æ¥éåŽ†å±žæ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678var machine = &#123;&#125;;machine.isOn = false;machine.name = 'computer'; for (var prop in machine) &#123; console.log(prop);&#125; // isOn// name ä¸‹é¢çš„ä»£ç é€šè¿‡å°† enumerable å±žæ€§è®¾ç½®ä¸º false ï¼Œè®© name å±žæ€§å˜æˆä¸å¯éåŽ†çš„ã€‚ 123456789// make the name non-enumerableObject.defineProperty(machine, 'name', &#123; enumerable: false&#125;); for (var prop in machine) &#123; console.log(prop);&#125;// isOn è®¿é—®å™¨å±žæ€§å’Œæ•°æ®å±žæ€§ç›¸åŒï¼Œè®¿é—®å™¨å±žæ€§ä¹Ÿæœ‰ [[Configurable]] å’Œ [[Enumerable]] å±žæ€§ã€‚ç„¶è€Œï¼Œè®¿é—®å™¨å±žæ€§æœ‰ [[Get]] å’Œ [[Set]] å±žæ€§è€Œä¸æ˜¯ [[Value]] å’Œ [[Writable]] ã€‚ å½“ä½ ä»Žè®¿é—®å™¨å±žæ€§è¯»å–æ•°æ®æ—¶ï¼Œ [[Get]] æ–¹æ³•è¢«è°ƒç”¨ï¼Œè¿”å›žä¸€ä¸ªå€¼ã€‚[[Get]]æ–¹æ³•çš„é»˜è®¤è¿”å›žå€¼æ˜¯ undefined ã€‚ç›¸ä¼¼çš„ï¼Œå½“ä½ ç»™å±žæ€§èµ‹å€¼ä¸€ä¸ªå€¼æ—¶ï¼Œ [[Set]] æ–¹æ³•è¢«è°ƒç”¨ã€‚ è¦å®šä¹‰ä¸€ä¸ªè®¿é—®å™¨å±žæ€§ï¼Œå¿…é¡»ä½¿ç”¨ Object.defineProperty()æ–¹æ³•ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425var person = &#123; firstName: 'John', lastName: 'Doe'&#125; Object.defineProperty(person, 'fullName', &#123; get: function() &#123; return this.firstName + ' ' + this.lastName; &#125;, set: function(value) &#123; var parts = value.split(' '); if (parts.length == 2) &#123; this.firstName = parts[0]; this.lastName = parts[1]; &#125; else &#123; throw 'Invalid name format'; &#125; &#125;&#125;); console.log(person.fullName); // person.fullName = 'John Cho'; console.log(person.firstName); // Johnconsole.log(person.lastName); // Choconsole.log(person.fullName); // John Cho å®šä¹‰å¤šä¸ªå±žæ€§ä½ å¯ä»¥ç”¨ Object.defineProperty() åœ¨å•ä¸ªè¡¨è¾¾å¼ä¸­å®šä¹‰å¤šä¸ªå±žæ€§ã€‚ 1234567891011121314151617181920let product = &#123;&#125;; Object.defineProperties(product, &#123; name: &#123; value: 'iPhone' &#125;, price: &#123; value: 799 &#125;, tax: &#123; value: 0.1 &#125;, netPrice: &#123; get: function() &#123; return this.price * (1 + this.tax); &#125; &#125;&#125;); console.log('The net price of ' + product.name + ' is ' + product.netPrice.toFixed(2) + ' USD'); èŽ·å–å±žæ€§çš„å…ƒå±žæ€§ES5ä¸­å¼•å…¥äº†æ–°çš„æ–¹æ³• Object.getOwnPropertyDescriptor() ï¼Œå…è®¸ä½ ç”¨å®ƒæ¥èŽ·å–ä¸€ä¸ªå¯¹è±¡å±žæ€§çš„æè¿°å¯¹è±¡ã€‚ Object.getOwnPropertyDescriptor() æ–¹æ³•æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå¯¹è±¡å’Œå¯¹è±¡çš„å±žæ€§ï¼Œè¿”å›žå¯¹è±¡çš„æè¿°å™¨ã€‚ 1234var descriptor = Object.getOwnPropertyDescriptor(product, 'name'); console.log(descriptor.configurable); // falseconsole.log(descriptor.writable); // falseconsole.log(descriptor.enumerable); // falseconsole.log(descriptor.value); // iPhone]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptçš„æ•°æ®ç±»åž‹è½¬æ¢]]></title>
    <url>%2F2018%2F12%2F10%2FJavaScript%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹JavaScriptæ˜¯ä¸€ç§æ¾æ•£ç±»åž‹ã€‚è¿™å¹¶ä¸æ„å‘³ç€å®ƒå°±æ²¡æœ‰æ•°æ®ç±»åž‹ï¼Œåªæ˜¯å˜é‡çš„å€¼æˆ–è€… JavaScript å¯¹è±¡å±žæ€§ä¸éœ€è¦ä¸ºå…¶åˆ†é…ç‰¹å®šç±»åž‹çš„å€¼ï¼Œä¹Ÿä¸å¿…æ€»æ˜¯ä¿æŒç›¸åŒçš„ç±»åž‹ã€‚JavaScript å¯ä»¥è‡ªç”±åœ°å°†ä¸€ç§ç±»åž‹çš„å€¼è½¬ä¸ºä»–ä»¬ä½¿ç”¨å˜é‡çš„ä¸Šä¸‹æ–‡ä¸­éœ€è¦çš„ç±»åž‹ã€‚ JavaScript çš„æ¾æ•£ç±»åž‹ä»¥åŠè½»æ¾çš„ç±»åž‹è½¬æ¢ä»ç„¶æ‹¯æ•‘ä¸äº†ç¨‹åºå‘˜ä»¬éœ€è¦æ€è€ƒä»–ä»¬æ­£åœ¨å¤„ç†çš„å€¼çš„å®žé™…ç±»åž‹ã€‚ä¸€ä¸ªæµè§ˆå™¨è„šæœ¬ä¸­éžå¸¸å¸¸è§çš„é”™è¯¯å°±æ˜¯ï¼Œè¯»å–ä¸€ä¸ªè¡¨å•ç©ºé—´çš„ value å±žæ€§ï¼Œç”¨æˆ·åº”è¯¥åœ¨å…¶ä¸­è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åŽå°†è¯¥å€¼ä¸Žå¦ä¸€ä¸ªæ•°å­—ç›¸åŠ ã€‚å› ä¸ºè¡¨å•ç©ºé—´çš„ value å±žæ€§å…¶å®žæ˜¯å­—ç¬¦ä¸²ï¼ˆå°½ç®¡å…¶åŒ…å«çš„å­—ç¬¦åºåˆ—è¡¨ç¤ºçš„æ˜¯ä¸€ä¸²æ•°å­—ï¼‰ï¼Œå¦‚æžœå°è¯•å°†è¿™ä¸²å­—ç¬¦ä¸²ä¸Žå¦ä¸€ä¸ªå€¼ç›¸åŠ ï¼Œå³ä½¿å¦ä¸€ä¸ªå€¼ç¢°å·§æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œç»“æžœä¹Ÿä¼šå¯¼è‡´ç¬¬äºŒä¸ªå€¼è¢«ç±»åž‹è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åŽæ‹¼æŽ¥åˆ°ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„æœ«å°¾ã€‚ è¿™ä¸ªé—®é¢˜æºäºŽ + æ“ä½œç¬¦çš„æ•°å­—ç›¸åŠ å’Œå­—ç¬¦ä¸²æ‹¼æŽ¥çš„åŒé‡æ€§è´¨ã€‚å› æ­¤ï¼Œè¿™ä¸ªæ“ä½œç¬¦çš„å®žé™…ä½œç”¨å–å†³äºŽä¸Šä¸‹æ–‡ï¼Œåªæœ‰æ“ä½œç¬¦ä¸¤è¾¹çš„æ“ä½œæ•°éƒ½æ˜¯æ•°å­—æ—¶ï¼Œ + æ“ä½œç¬¦æ‰ç”¨ä½œæ•°å€¼ç›¸åŠ ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒéƒ½ä¼šå°†æ“ä½œæ•°è½¬æ¢æˆå­—ç¬¦åž‹ï¼Œç„¶åŽæ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æŽ¥ã€‚ to Booleanåœ¨è®¡ç®— if è¡¨è¾¾å¼çš„æ—¶å€™ï¼ŒJavaScript è§£é‡Šå™¨ä¼šè‡ªåŠ¨å°†è¡¨è¾¾å¼çš„è¿ç®—ç»“æžœè½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ“ä½œç¬¦ä¼šå°†æ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”åž‹ï¼ŒåŒ…æ‹¬é€»è¾‘æ“ä½œç¬¦ï¼š&amp;&amp; ï¼Œ|| ï¼Œ! ã€‚é€šå¸¸ç”¨ || æ¥å¾—åˆ°ä¸€ä¸ªè¡¨è¾¾æ—¶çš„å¸ƒå°”åž‹è½¬æ¢å€¼ã€‚ 1var boolValue = !!x; ä¸‹é¢çš„è¡¨æ ¼ä¹Ÿæ˜¯ç”¨ || æ¥ç”Ÿæˆå„ç§ç±»åž‹å¯¹åº”çš„å¸ƒå°”åž‹ã€‚ è¿˜æœ‰ä¸€ç§ç”Ÿæˆå¸ƒå°”åž‹å€¼çš„æ–¹æ³•æ˜¯å°†å€¼ä½œä¸ºå‚æ•°ä¼ å…¥ Boolean æž„é€ å‡½æ•°ï¼Œè¿™æ ·å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»åž‹çš„åŒ…è£…å¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªå¸ƒå°”çš„åˆå§‹å€¼äº†ï¼š 1var boolValue = Boolean(x); -1.6 -0 +0 1 1.6 8 16 16.8 123e-2 -Infinity +Infinity NaN !!col true false false true true true true true true true true false æ•°å­—è½¬æ¢æˆ bool åž‹æ—¶ï¼Œ0 ä¸º false ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯ trueã€‚ç‰¹æ®Šæ•°å­— NaN é™¤å¤–ï¼Œå®ƒè¡¨ç¤ºå°†å…¶ä»–ç±»åž‹è½¬æ¢ä¸ºæ•°å­—åž‹æ—¶ï¼Œè½¬æ¢æ— æ•ˆä¸èƒ½å¾—åˆ°æœ‰æ„ä¹‰çš„æ•°å­—ã€‚NaN å§‹ç»ˆæ˜¯ false ã€‚Infinity å’Œ -Infinity éƒ½æ˜¯ trueã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ !!col false true true true true true true true true true true true true true true å­—ç¬¦ä¸²è½¬å¸ƒå°”åž‹æ›´ç®€å•ï¼Œé™¤ç©ºå­—ç¬¦ä¸²ä»¥å¤–ï¼Œéƒ½æ˜¯ trueï¼Œç©ºå­—ç¬¦ä¸²æ˜¯ false ã€‚ undefined null true false new Object() function(){ return; } !!col false false true false true true å¯¹äºŽå…¶ä»–ç±»åž‹ï¼Œ undefined å’Œ null è½¬æ¢ä¸º false ï¼Œå¯¹è±¡å’Œå‡½æ•°å§‹ç»ˆæ˜¯ true ã€‚ è¿™æ˜¯ç±»åž‹è½¬æ¢ä¸ºå¸ƒå°”åž‹æœ€æœ‰ä»·å€¼çš„æ–¹é¢ï¼Œå› ä¸ºå®ƒå…è®¸è„šæœ¬åŒºåˆ†å±žæ€§æ˜¯æœªå®šä¹‰è¿˜æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚ç»å¸¸ç”¨ if è¯­å¥å°†è¦è®¿é—®çš„å¯¹è±¡åŒ…è£¹èµ·æ¥æµ‹è¯•å¯¹è±¡æ˜¯å¦æœªå®šä¹‰ï¼Œä»¥æ­¤æ¥é¿å…å‡ºé”™ï¼Œå¦‚æžœå¯¹è±¡æœªå®šä¹‰ï¼Œåˆ™è¿”å›ž falseï¼Œå¦‚æžœå·²å­˜åœ¨ï¼Œåˆ™è¿”å›ž trueã€‚ 123if(document.documentElement)&#123; scrollX = document.documentElement.scrollLeft;&#125; to Stringä¸Šé¢è®²åˆ°äº†ï¼Œç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç»å¸¸æ˜¯ç”± + æ“ä½œç¬¦åœ¨å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ä¸æ˜¯æ•°å­—çš„æƒ…å†µä¸‹å¯¼è‡´çš„ã€‚è½¬æ¢ä¸ºå­—ç¬¦ä¼ ç±»åž‹æœ€ç®€å•çš„åŠžæ³•å°±æ˜¯ç”¨è¯¥å€¼æ‹¼æŽ¥ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ç”¨è¿™ä¸ªæ–¹æ³•æ¥ç”Ÿæˆä¸‹é¢çš„è¡¨æ ¼ã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ç”¨ String æž„é€ å‡½æ•°ï¼Œè¿™æ ·å¾—åˆ°çš„ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦åž‹çš„åˆå§‹å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ª String ç±»åž‹çš„åŒ…è£…å¯¹è±¡ï¼š 1var stringValue = String(x); -1.6 -0 +0 1 1.6 8 16 16.8 123e-2 -Infinity +Infinity NaN â€œâ€ + col -1.6 0 0 1 1.6 8 16 16.8 1.23 -Infinity Infinity NaN æ³¨æ„ï¼Œä¸Šé¢è¡¨æ ¼ä¸­çš„æºç  123e-2 è½¬æ¢åŽå¾—åˆ°äº†å­—ç¬¦ä¸² 1.23 ï¼Œè¿™æ˜¯å› ä¸º JavaScript å†…éƒ¨æ•°å­—çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œç„¶è€Œ JavaScript å†…éƒ¨æ•°å­—è¡¨ç¤ºé‡‡ç”¨äº† IEEE æ ‡å‡†è§„èŒƒçš„åŒç²¾åº¦æµ®ç‚¹æ•°å­—å½¢å¼ï¼Œè¿™æ„å‘³ç€ JavaScript æ— æ³•ç²¾ç¡®åœ°è¡¨ç¤ºæ‰€æœ‰æ•°å­—ã€‚æ•°å­¦è¿ç®—çš„ç»“æžœå¯èƒ½äº§ç”Ÿè¿‘ä¼¼å€¼ï¼Œå½“ä»–ä»¬è½¬æ¢æˆå­—ç¬¦ä¸²æ—¶ï¼Œå­—ç¬¦ä¸²å¯èƒ½å‡ºä¹Žæ„æ–™åœ°è¡¨ç¤ºä¸ºè¿‘ä¼¼å€¼ã€‚ç»å¸¸ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°æ¥ç”ŸæˆæŒ‡å®šæ ¼å¼çš„æ•°å­—å­—ç¬¦ä¸²ï¼Œç±»åž‹è½¬æ¢æœºåˆ¶å¾ˆå°‘é€‚ç”¨äºŽç”¨æ¥ç”Ÿæˆç”¨äºŽè¡¨ç¤ºçš„æ•°å­—è¾“å‡ºã€‚ undefined null true false new Object() function(){ return; } â€œâ€ + col undefined null true false [object Object] function(){ return; } å½“å¯¹è±¡æˆ–è€…å‡½æ•°è¢«è½¬æ¢æˆå­—ç¬¦ä¸²æ—¶ï¼Œä¼šè°ƒç”¨å®ƒä»¬çš„ toString æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é»˜è®¤ç»§æ‰¿äºŽ Object.prototype.toString å’Œ Function.prototype.toStringï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç»™å¯¹è±¡/å‡½æ•°çš„ â€œtoStringâ€ å±žæ€§èµ‹å€¼ä¸€ä¸ªæ–¹æ³•æ¥é‡å†™ã€‚å‡½æ•°ç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¸ä¸€å®šä¼šå¾—åˆ°å‡½æ•°çš„æºä»£ç ã€‚Function.prototype.toString å› å…·ä½“å®žçŽ°ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œâ€œå®¿ä¸»å¯¹è±¡â€ å’Œæ–¹æ³•ï¼ˆç”±çŽ¯å¢ƒæä¾›çš„å¯¹è±¡å’Œæ–¹æ³•ï¼Œä¾‹å¦‚ DOMå…ƒç´ ï¼‰ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ to Numberè½¬æ¢ä¸ºæ•°å­—ç±»åž‹ï¼Œå°¤å…¶æ˜¯å­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—ï¼Œæ˜¯éžå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ç”¨ã€‚é™¤è¿žæŽ¥/åŠ æ³•æ“ä½œç¬¦ä»¥å¤–çš„ä»»ä½•æ•°å­¦è¿ç®—æ“ä½œç¬¦éƒ½ä¼šå¼ºåˆ¶ç±»åž‹è½¬æ¢ã€‚æ‰€ä»¥å­—ç¬¦ä¸²è½¬æ•°å­—å¯èƒ½è¦å¯¹æ•°å­—å­—ç¬¦ä¸²æ‰§è¡Œä¸å½±å“ç»“æžœæ•°å€¼çš„æ•°å­¦è¿ç®—ï¼Œä¾‹å¦‚å‡åŽ» 0 æˆ–è€…ä¹˜ä»¥ 1ã€‚ 12345var numValue = stringValue - 0;/* or */var numValue = stringValue * 1;/* or */var numValue = stringValue / 1; ç„¶è€Œï¼Œä¸€å…ƒçš„ + è¿ç®—ç¬¦ä¹Ÿå¯ä»¥å°†æ“ä½œæ•°è½¬æ¢æˆæ•°å­—ï¼Œå› ä¸ºå®ƒä¸ä¼šåšä»»ä½•é¢å¤–çš„æ•°å­¦è¿ç®—ï¼Œè¿™æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„æœ€å¿«çš„æ–¹æ³•ã€‚ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä¸€å…ƒçš„ - ï¼ˆå‡æ³•ï¼‰æ“ä½œç¬¦é™¤äº†éšåŽä¼šå–è´Ÿå…¶å€¼ä»¥å¤–ï¼Œä¹Ÿä¼šå¯¹æ“ä½œæ•°æ‰§è¡Œç±»åž‹è½¬æ¢ï¼ˆå¿…è¦çš„æƒ…å†µä¸‹ï¼‰ã€‚ 1var numValue = (+stringValue); åŒæ ·ä¹Ÿå¯ä»¥è°ƒç”¨ Number æž„é€ å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ä½œä¸ºå¤Ÿæ”’å‡½æ•°çš„å‚æ•°ï¼Œè¿”å›žä¸€ä¸ªæ•°å­—çš„åŒ…è£…å¯¹è±¡ï¼š 1var numValue = Number(stringValue); Number æž„é€ å‡½æ•°æ˜¯ç±»åž‹è½¬æ¢æ–¹æ³•ä¸­æœ€æ…¢çš„ä¸€ç§ï¼Œå½“é€Ÿåº¦ä¸æ˜¯æœ€é‡è¦çš„è€ƒè™‘å› ç´ æ—¶ï¼Œå®ƒçš„ä»£ç é€»è¾‘ä¼šæ¯”è¾ƒæ¸…æ™°ã€‚ ä¸‹é¢çš„è¡¨æ ¼ä½¿ç”¨ä¸€å…ƒ + è¿ç®—ç¬¦ç”Ÿæˆã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ +col 0 -1.6 0 1 1.6 8 16 16.8 1.23 10 16 255 -10 NaN NaN å­—ç¬¦ä¸²è½¬æ•°å­—æ—¶æœ€é‡è¦çš„è€ƒè™‘æ˜¯ç»“æžœå¯èƒ½ä¸æ˜¯æ•°å­—ã€‚ç©ºå­—ç¬¦è½¬æ¢æˆæ•°å­— 0ï¼Œå–å†³äºŽåº”ç”¨ï¼Œè¿™æ ·åšå¯èƒ½ä¼šå¸¦æ¥å±å®³ã€‚åœ¨å…¶ä»–ä¸Šä¸‹æ–‡ä¸­ï¼Œéµå¾ª JavaScript å…«è¿›åˆ¶æ•°å­—æ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆ0 å¼€å¤´ï¼‰å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œç±»åž‹è½¬æ¢ä¼šå°†å®ƒä»¬æŒ‰10è¿›åˆ¶æ•°å­—çœ‹å¾…ã€‚ç„¶è€Œéµå¾ª16è¿›åˆ¶æ•°å­—æ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆox æˆ–è€… oX å¼€å¤´ï¼‰ä¼šè¯»ä½œ 16 è¿›åˆ¶ã€‚ä¸èƒ½è¢«è¯»ä½œæ•°å­—çš„å­—ç¬¦ä¸²ä¼šè¢«ç±»åž‹è½¬æ¢ä¸º NaN ï¼ŒNaN çš„æµ‹è¯•æ–¹æ³•æ˜¯å¦å…¶ä¸ç­‰äºŽè‡ªèº«ã€‚æŒ‡æ•°è®¡æ•°æ ¼å¼ï¼ˆ&quot;123e-2&quot;ï¼‰çš„æ•°å­—å­—ç¬¦ä¸²ä¸Žå‰å¯¼çš„è´Ÿå·ä¸€èµ·è¢«è½¬æ¢ã€‚ undefined null true false new Object() function(){ return; } +col NaN 0 1 0 NaN NaN å¯¹è±¡å’Œå‡½æ•°å§‹ç»ˆè½¬æ¢æˆ NaNï¼Œundefined ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†æ˜¯ null ä¼šç±»åž‹è½¬æ¢ä¸º 0ã€‚å¯èƒ½æ˜¯å› ä¸ºå®ƒå…ˆè½¬æ¢ä¸ºå¸ƒå°”åž‹ï¼Œç„¶åŽè½¬æ¢ä¸ºæ•°å­—çš„ï¼Œnull å…ˆè½¬æ¢æˆ false ï¼Œfalse ä¼šè½¬æ¢æˆæ•°å­— 0ã€‚å‡ ä¹Žä¸å¯èƒ½ä¼šå‡ºçŽ°éœ€è¦å°†è¿™äº›ç±»åž‹è½¬æ¢æˆæ•°å­—çš„æƒ…å†µã€‚ Parsing to Numberå¦ä¸€ç§è½¬æ¢å­—ç¬¦ä¸²ä¸ºæ•°å­—çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€äº›è®¾è®¡ç”¨æ¥è¿”å›žä¸€ä¸ªæ•°å­—çš„å…¨å±€å‡½æ•°ã€‚parseFloat å‡½æ•°æŽ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå°†å­—ç¬¦ä¸²è§£æžä¸ºä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå¹¶è¿”å›žè¯¥æµ®ç‚¹æ•°ã€‚éžå­—ç¬¦å‚æ•°ä¼šå…ˆæŒ‰ä¸Šé¢è¯´çš„æ–¹å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ å­—ç¬¦ä¸²è§£æžå‡½æ•°ä¼šé€ä¸ªå­—ç¬¦åœ°è¯»å–å­—ç¬¦ä¸²ç›´åˆ°é‡åˆ°ä¸€ä¸ªä¸èƒ½è½¬æ¢ä¸ºæ•°å­—çš„å­—ç¬¦ä¸ºæ­¢ï¼Œè¿™æ˜¯å®ƒä¼šåœä¸‹æ¥ï¼Œå¹¶å°†å·²è§£æžçš„å¯è½¬æ¢ä¸ºæ•°å­—çš„å­—ç¬¦è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åŽè¿”å›žè¯¥æ•°å­—ã€‚è¿™ä¸ªç‰¹æ€§åœ¨æŸäº›æƒ…å†µä¸‹éžå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªä»£è¡¨ CSS é•¿åº¦çš„å€¼ 34.5em ï¼ŒparseFloat ä¼šè‡ªåŠ¨å¿½ç•¥ em ï¼Œå› ä¸ºè¿™äº›å­—ç¬¦ä¸èƒ½ä¸Žå‰é¢çš„æ•°å­—å­—ç¬¦åˆå¹¶è½¬ä¸ºæ•°å­—ã€‚è¿”å›žçš„å€¼ä¼šæ˜¯ 34.5ï¼ŒCSS å­—ç¬¦ä¸²æˆªå–åŽä¸åŒ…å«å•ä½çš„æ•°å­—éƒ¨åˆ†ã€‚ parseFloat â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ parseFloat(col) NaN -1.6 0 1 1.6 8 16 16.8 1.23 10 0 0 -10 0 NaN parseFloatå°†ç©ºå­—ç¬¦ä¸²ä»¥åŠä¸èƒ½è¿›è¡Œæ•°å­—è§£é‡Šçš„å­—ç¬¦ä¸²è½¬æ¢ä¸º NaN ã€‚æŒ‡æ•°è®¡æ•°æ³•æ ¼å¼å¯ä»¥è¢«ç†è§£ï¼Œå…«è¿›åˆ¶æ ¼å¼ä¸­çš„å‰å¯¼ 0 ä¸ä¼šå¦¨ç¢å­—ç¬¦ä¸²ä½œä¸ºåè¿›åˆ¶æ•°æ¥è§£é‡Šã€‚åå…­è¿›åˆ¶å­—ç¬¦ä¸²è§£é‡Šä¸ºæ•°å­— 0 ï¼Œå› ä¸ºåŽé¢è·Ÿç€ x ä¸èƒ½è§£é‡Šä¸ºæ•°å­—çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥è§£æžåœ¨å‰å¯¼çš„ 0 ä¹‹åŽå°±ç»“æŸäº†ã€‚ undefined null true false new Object() function(){ return; } parseFloat(col) NaN NaN NaN NaN NaN NaN éžå­—ç¬¦ä¸²å€¼ä¼šå…ˆè¢« parseFloat è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å› ä¸ºç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¸ä¼šå¾—åˆ°ä¸€ä¸ªèƒ½è§£é‡Šä¸ºæ•°å­—çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç»“æžœæ˜¯ NaNã€‚å¯¹è±¡å’Œå‡½æ•°å¯èƒ½æœ‰è‡ªå®šä¹‰çš„ toString æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿”å›žèƒ½å¤Ÿè¿›è¡Œæ•°å­—è§£é‡Šçš„å­—ç¬¦ä¸²ï¼Œä½†é‚£æ˜¯éžå¸¸è§„çš„éœ€æ±‚ã€‚ parseIntparseInt å‡½æ•°ä¸Ž parseFloat çš„ä½œç”¨éžå¸¸ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºŽå®ƒå°è¯•å°†å­—ç¬¦ä¸²å‚æ•°è§£é‡Šä¸ºæ•´æ•°ï¼Œå› æ­¤å¯ä»¥è¯†åˆ«è¾ƒå°‘çš„å­—ç¬¦ä½œä¸ºè¯¥æ•°å­—çš„ä¸€éƒ¨åˆ†ã€‚ parseInt å¶å°”è¢«ç”¨äºŽå°†ä¸€ä¸ªæµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ã€‚å®ƒéžå¸¸ä¸é€‚åˆè¿™æ ·ç”¨ï¼Œå› ä¸ºå¦‚æžœå®ƒçš„å‚æ•°æ˜¯æ•°å­—ç±»åž‹ï¼Œå®ƒä¼šå…ˆè¢«è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åŽåœ¨è½¬æ¢æˆæ•°å­—ï¼Œéžå¸¸ä½Žæ•ˆã€‚ 2e-200è¿™æ ·çš„æ•°å­— å¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯çš„ç»“æžœ ï¼Œè¿‘ä¼¼çš„æ•´æ•°æ˜¯ 0ï¼Œä½†æ˜¯ parseInt è¿”å›žäº† 2ã€‚ç”±äºŽ JavaScript ä½¿ç”¨çš„æ•°å­—æ ¼å¼ï¼Œæ•°å­—ç»å¸¸è¢«è¡¨ç¤ºä¸ºè¿‘ä¼¼å€¼ã€‚æ‰€ä»¥ï¼Œä¾‹å¦‚ 1/2+1/3+1/6 = 0.99999999999999ï¼Œå¦‚æžœç”¨ parseInt æ¥è½¬æ¢è¯¥è¡¨è¾¾å¼ï¼Œä¼šè¿”å›ž 0ã€‚ å¯¹äºŽå°†æ•°å­—èˆå…¥ä¸ºæ•´æ•°ï¼Œä¼˜å…ˆä½¿ç”¨Math.round ï¼ŒMath.ceil å’Œ Math.floor è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚ -1.6 -0 +0 1 1.6 8 16 16.8 123e-2 -Infinity +Infinity NaN parseInt(col) -1 0 0 1 1 8 16 16 1 NaN NaN NaN å½“å®ƒä½œç”¨äºŽæ•°å­—æ—¶ï¼Œå‚æ•°çš„åˆå§‹å€¼ç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„è¿‡ç¨‹åœ¨ç»“æžœä¸­ä½“çŽ°åœ°å¾ˆæ˜Žæ˜¾ã€‚æ³¨æ„ï¼Œ123e-2 çš„å†…éƒ¨æ•°å­—æ˜¯ 1.23 ï¼Œç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¾—åˆ° &quot;1.23&quot;ï¼Œä¸Šé¢è¡¨æ ¼ä¸­çš„è½¬æ¢ç»“æžœçœ‹ä¸ŠåŽ»å¥‡æ€ªï¼Œå…¶å®žæ˜¯æ­£ç¡®çš„ã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ parseInt(col) NaN -1 0 1 1 8 16 16 123 8 16 255 -8 -16 NaN å…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶æ•°å­—æ ¼å¼çš„å­—ç¬¦ä¸²çš„ç¡®è¡¨ç¤ºæ•´æ•°ï¼Œå¹¶ä¸”parseIntèƒ½å¤Ÿæ ¹æ® JavaScript çš„æºç è§£é‡Šå®ƒä»¬ï¼Œå³ä½¿æ˜¯ä»¥è´Ÿå·å¼€å¤´ã€‚ undefined null true false new Object() function(){ return; } parseInt(col) NaN NaN NaN NaN NaN NaN ç”±äºŽ parseInt ä¼šå°†éžå­—ç¬¦åž‹å‚æ•°ç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯¹äºŽ boolean ï¼Œnullï¼Œundefined å¯¹è±¡å’Œå‡½æ•°ç±»åž‹çš„å‚æ•°æ¥è¯´ï¼ŒparseInt å¾—åˆ°çš„ç»“æžœæ€»æ˜¯ä¸Ž parseFloat ç›¸åŒï¼ˆå‡è®¾å¯¹è±¡å’Œå‡½æ•°æ²¡æœ‰è‡ªå®šä¹‰ toString æ–¹æ³•ï¼‰ã€‚ æœ‰ä¸€ä¸ªåŸºæ•°å‚æ•°çš„ parseIntå¾ˆå°‘ä¼šå…è®¸ parseInt æŽ¨å¯¼å‡ºå­—ç¬¦ä¸²ä¸­æ•°å­—è¡¨ç¤ºçš„åŸºæ•°ï¼Œå› ä¸ºå‰å¯¼çš„ 0 å¾ˆå°‘ç”¨äºŽæŒ‡ç¤ºå…«è¿›åˆ¶æ ¼å¼çš„æ•°æ®ï¼ˆå°¤å…¶æ˜¯åœ¨ç”¨æˆ·è¾“å…¥ä¸­ï¼‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒparseInt èƒ½å¤Ÿè¯†åˆ«ç¬¬äºŒä¸ªæŒ‡ç¤ºåŸºæ•°çš„å‚æ•°ï¼Œå¯ä»¥ç”¨äºŽæŒ‡å®šè§£é‡Šå­—ç¬¦ä¸­æ•°å­—çš„åŸºæ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¸º 10 ä¼šå¯¼è‡´ parseInt ä»¥ 10 ä¸ºåŸºæ•°è§£é‡Šå­—ç¬¦ã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ parseInt(col, 10) NaN -1 0 1 1 8 16 16 123 10 0 0 -10 0 NaN å…«è¿›åˆ¶æ ¼å¼çš„å­—ç¬¦ä¸²çŽ°åœ¨å¯ä»¥ä»¥ 10 ä¸ºåŸºæ•°æ¥è§£é‡Šï¼Œ16 è¿›åˆ¶å­—ç¬¦ä¸²åˆ™åªèƒ½è½¬æ¢ä¸º 0 ï¼Œå› ä¸ºé‡åˆ° &quot;x&quot; çš„æ—¶å€™ï¼Œè½¬æ¢å°±ä¼šåœæ­¢ã€‚ parseInt å¯ä»¥ç”¨äºŽä»¥ 2 åˆ° 36 ä¸ºåŸºæ•°çš„æ•°å­—ã€‚ä¸‹é¢æ˜¯ä»¥ 16 ä¸ºåŸºæ•°ã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ parseInt(col, 16) NaN -1 0 1 1 8 22 22 4670 16 16 255 -16 -16 NaN åå…­è¿›åˆ¶çš„ 0x æ ¼å¼åœ¨ä»¥ 16 ä¸ºè§£é‡ŠåŸºæ•°æ—¶å¯ä»¥è¢«è¯†åˆ«ã€‚ æœ€åŽä»¥ 3 ä¸ºåŸºæ•°ï¼š -1.6 -0 +0 1 1.6 8 16 16.8 123e-2 -Infinity +Infinity NaN parseInt(col, 3) -1 0 0 1 1 NaN 1 1 1 NaN NaN NaN æ•°å­—å‚æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„ç»“æžœå¾ˆæ˜Žæ˜¾ã€‚æ•°å­— 8 è½¬æ¢ä¸º NaN æ˜¯å› ä¸º &quot;8&quot; è¿™ä¸ªå­—ç¬¦ä¸èƒ½ä»¥ 3 ä¸ºåŸºæ•°è§£é‡Šï¼Œå¾—åˆ°ä¸€ä¸ªä¸ºç©ºçš„å¯æŽ¥å—å­—ç¬¦çš„åºåˆ—ï¼Œäº§ç”Ÿä¸Žç©ºå­—ç¬¦ä¸²ä¸€æ ·çš„ç»“æžœã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ parseInt(col, 3) NaN -1 0 1 1 NaN 1 1 5 3 0 0 -3 0 NaN ToInt32ToInt32 æ˜¯ä¸€ä¸ªåªåœ¨ JavaScript å®žçŽ°ä¸­å¯ç”¨çš„å†…éƒ¨å‡½æ•°ï¼Œä¸èƒ½åœ¨è„šæœ¬ä¸­ä»¥ parseInt ä¸€æ ·çš„æ–¹å¼ç›´æŽ¥è°ƒç”¨ã€‚JavaScript è½¬æ¢ä¸ºæ•°å­—æ—¶å¾ˆå°‘ç”¨åˆ°è¿™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä¸€äº›æƒ…å†µä¸‹å¯ä»¥ç”¨åˆ°ã€‚æŒ‰ä½æ“ä½œç¬¦ï¼Œä¾‹å¦‚æŒ‰ä½æˆ–ï¼ˆ|ï¼‰å’Œ æŒ‰ä½ä¸Žï¼ˆ&amp;ï¼‰æ“ä½œç¬¦ä½œç”¨äºŽæ•°å­—ï¼Œæ‰€ä»¥å®ƒä»¬ä¼šå°†æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ã€‚ç„¶è€Œå®ƒä»¬åªèƒ½ä½œç”¨äºŽ 32 ä½æœ‰ç¬¦å·æ•´åž‹ï¼Œæ‰€ä»¥å¯¹äºŽç»™å®šçš„ï¼ˆå¯èƒ½æ˜¯è½¬æ¢å¾—åˆ°çš„ï¼‰æ•°å­—ï¼Œå®ƒä»¬ä¼šå°†å®ƒä½œä¸ºå‚æ•°ä¼ å…¥ ToInt32 å‡½æ•°ï¼Œç”¨è¿”å›žå€¼ä½œæ“ä½œæ•°ã€‚è¿”å›žçš„æ•°å­—å§‹ç»ˆæ˜¯ä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´åž‹ã€‚ è¿™ç§æ•ˆæžœå°±åƒ parseInt ç»“åˆäº†ç±»åž‹è½¬æ¢ä¸ºæ•°å­—ã€‚ç„¶è€Œç»“æžœåªèƒ½é™å®šåœ¨ 32 ä½èŒƒå›´å†…ï¼Œè€Œä¸”å§‹ç»ˆæ˜¯æ•°å­—ï¼Œä¸å¯èƒ½æ˜¯ NaN æˆ–è€… Â±Infinityã€‚ å°±åƒåœ¨å¯¹ç»“æžœæ•°å€¼æ²¡æœ‰å½±å“çš„æ“ä½œä¸­ä½¿ç”¨æ•°å­¦è¿ç®—ç¬¦ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥åœ¨å¯¹ ToInt32 è¿”å›žçš„ç»“æžœæ²¡æœ‰å½±å“çš„æ“ä½œä¸­ä½¿ç”¨æŒ‰ä½æ“ä½œç¬¦ã€‚ä¸‹é¢çš„è¡¨æ ¼å°±æ˜¯ç”¨ æŒ‰ä½æˆ– 0 æ“ä½œç”Ÿæˆçš„ã€‚ -1.6 -0 +0 1 1.6 8 16 16.8 123e-2 -Infinity +Infinity NaN col\ 0 -1 0 0 1 1 8 16 16 1 0 0 0 NaN å’Œ Â±Infinity å˜æˆäº† 0 ï¼Œæµ®ç‚¹æ•°è¢«æˆªå–æˆäº†æ•´æ•°ã€‚ â€œâ€ (empty string) â€œ-1.6â€ â€œ0â€ â€œ1â€ â€œ1.6â€ â€œ8â€ â€œ16â€ â€œ16.8â€ â€œ123e-2â€ â€œ010â€ (Octal) â€œ0x10â€ (Hex) â€œ0xFFâ€ (Hex) â€œ-010â€ â€œ-0x10â€ â€œxxâ€ col\ 0 0 -1 0 1 1 8 16 16 1 10 16 255 -10 0 0 ç±»åž‹è½¬æ¢ä¸º NaN çš„å­—ç¬¦ä¸²ä¼šä»Ž ToInt32 ä¸­è¿”å›ž 0 ã€‚ undefined null true false new Object() function(){ return; } col\ 0 0 0 1 0 0 0 ç”šè‡³ undefined ï¼Œå¯¹è±¡å’Œå‡½æ•°éƒ½è¢«è¿™ä¸ªæ“ä½œè½¬æ¢ä¸º 0 ã€‚æ³¨æ„ å¸ƒå°”å€¼ true è¢«è½¬æ¢æˆæ•°å­— 1ã€‚ è½¬æ¢ç”¨æˆ·è¾“å…¥å¤šæ•°èŽ·å¾—ç”¨æˆ·è¾“å…¥çš„æœºåˆ¶ï¼Œä¾‹å¦‚ &lt;input type=text&gt; å’Œ prompt è¿™äº›ï¼Œæä¾›äº†å­—ç¬¦ä¸²æ ¼å¼çš„è¾“å…¥ç»“æžœã€‚å¦‚æžœå¸Œæœ›ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œä»–ä»¬ä»ç„¶å¯ä»¥è¾“å…¥ä»»ä½•ä¸œè¥¿ï¼ˆè‡³å°‘ä»–ä»¬å¯èƒ½æ‰“é”™å­—ï¼‰ã€‚å¦‚æžœå­—ç¬¦ä¸²éœ€è¦è½¬æ¢æˆæ•°å­—ç”¨äºŽåŽç»­çš„æ“ä½œï¼Œä¸Šé¢æåˆ°çš„æ–¹æ³•å¯ä»¥æ ¹æ®å“ªä¸ªæœ€æŽ¥è¿‘æœŸå¾…çš„ç”¨æˆ·è¾“å…¥æ¥é€‰æ‹©ï¼Œä½†æ˜¯ä¸€äº›ç”±é”™è¯¯çš„è¾“å…¥å¾—åˆ°çš„ç»“æžœå¯èƒ½ä¼šéš¾ä»¥è¯†åˆ«å’Œå¤„ç†ã€‚ æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹123456789/^\d+$/ //All-digit/^\s*[-+]?\d+\s*$/ //Unbroken Signed integer &amp; spaces/^\d&#123;1,5&#125;$/ //1 to 5 digits/^\d+\.\d\d$/ //Money/^\d+(\.\d&#123;2&#125;)$/ //Money/^\d&#123;1,3&#125;(,\d\d\d)*\.\d\d$/ //comma-separated money - 12,432.57 // optional comma-separated money - 12,432.57 or 12432.57/^\d&#123;1,3&#125;(,\d\d\d)*\.\d\d$|^\d+\.\d\d$/]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptçš„æ•°æ®ç±»åž‹]]></title>
    <url>%2F2018%2F12%2F10%2FJavaScript%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[JavaScriptçš„ä¸¤ç§ç±»åž‹JavaScriptä¸­æœ‰ä¸¤ç§æ•°æ®ï¼šåˆå§‹å€¼å’Œå¯¹è±¡ã€‚å¯¹è±¡ä»¥å¤–çš„ç±»åž‹å°±æ˜¯åˆå§‹å€¼ç±»åž‹ï¼Œåˆå§‹å€¼ç±»åž‹ä¸åŒ…å«æ–¹æ³•ã€‚ JSä¸­å…±æœ‰6ä¸­åˆå§‹å€¼ç±»åž‹ï¼šBooleanï¼ŒNumberï¼ŒStringï¼ŒNullï¼ŒUndefinedï¼ŒSymbol Boolean å¸ƒå°”ç±»åž‹è¡¨ç¤ºtrue å’Œ false è¿™ä¸¤ä¸ªå€¼çš„å…¶ä¸­ä¸€ä¸ªï¼Œå¯ä»¥å°†å¸ƒå°”åž‹æƒ³è±¡æˆ å¼€/å…³ï¼Œæˆ–è€…æ˜¯/å¦ã€‚ 12var boo1 = true;var boo2 = false; NumberJavaScriptä¸­åªæœ‰ä¸€ç§æ•°å­—ç±»åž‹ï¼šåŸºäºŽ IEEE754æ ‡å‡†çš„åŒç²¾åº¦64ä½äºŒè¿›åˆ¶æ ¼å¼çš„å€¼ï¼ˆ-(263 -1) åˆ° 263 -1ï¼‰ã€‚æ•°å­—ç±»åž‹ä¸å¸¦å°æ•°ç‚¹å°±æ˜¯æ•´æ•°ï¼ŒJavaScript æ²¡æœ‰ä¸ºæ•´æ•°å£°æ˜Žä¸€ç§ç‰¹æ®Šçš„ç±»åž‹ã€‚é™¤äº†èƒ½è¡¨ç¤ºæµ®ç‚¹æ•°ä»¥å¤–ï¼Œè¿˜å¯ä»¥å¸¦ç¬¦å·çš„ç‰¹æ®Šå€¼ï¼šInfinityï¼Œ -Infinityï¼Œ NaNï¼ˆNot a Numberï¼‰ ã€‚ 12var num1 = 32;var num2 = +Infinity; Stringå­—ç¬¦åž‹ç”¨äºŽè¡¨ç¤ºæ–‡æœ¬æ•°æ®ï¼Œå®ƒç”±ä¸€ç»„16ä½æ— ç¬¦å·æ•´åž‹æ•°å€¼è¡¨ç¤ºçš„â€œå…ƒç´ â€ç»„æˆã€‚å­—ç¬¦åž‹å¿…é¡»ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ‹¬èµ·æ¥ã€‚åœ¨ JS ä¸­ï¼Œå­—ç¬¦åž‹æ˜¯ä¸å¯å˜çš„ã€‚ä¿®æ”¹ä¸€ä¸ªå­—ç¬¦ä¸²çš„è¿‡ç¨‹æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªæ”¹å˜è¿‡çš„æ–°å­—ç¬¦ä¸²ï¼Œå†å°†æ–°å­—ç¬¦ä¸²èµ‹å€¼ç»™å˜é‡ã€‚ 12var str1 = 'hello, it is me';var str2 = "hello, it's me"; NullNull ç±»åž‹åªæœ‰ä¸€ä¸ªå€¼ï¼šnullã€‚ 1var nothing = null; Undefinedå·²å£°æ˜Žæœªèµ‹å€¼çš„å˜é‡çš„å€¼å°±æ˜¯ undefinedï¼Œ ä¹Ÿæ˜¯å…¶æ‰€è¿°ç±»åž‹çš„å”¯ä¸€ä¸€ä¸ªå€¼ã€‚ 12var testVar;console.log(testVar); // undefined Symbolç¬¦å·ç±»åž‹æ˜¯ES6æ–°å¼•å…¥çš„ç±»åž‹ã€‚ç¬¦å·åž‹æ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿæ˜¯ä¸å¯å˜çš„åˆå§‹å€¼ç±»åž‹ï¼Œåªèƒ½ç”¨ä½œå¯¹è±¡å±žæ€§çš„é”®ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™é‡Œ ã€‚ 1const mySymbol = Symbol(&apos;mySymbol&apos;); å¯¹è±¡æ˜¯ä»€ä¹ˆ?å¯¹è±¡ä¸æ˜¯åˆå§‹å€¼ç±»åž‹ã€‚ å¯¹è±¡æ˜¯ä¸€ç»„å±žæ€§çš„é›†åˆã€‚è¿™äº›å±žæ€§ä»¥é”®å€¼å¯¹çš„å½¢å¼ä¿å­˜ã€‚å±žæ€§å¯ä»¥æŒ‡å‘ä»»æ„ç±»åž‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°å€¼å€¼å’Œå¯¹è±¡ã€‚ 1234567var obj = &#123; key1: &apos;value&apos;, key2: &apos;value&apos;, key3: true, key4: 32, key5: &#123;&#125;&#125; æ¾æ•£ç±»åž‹JavaScript æ˜¯ä¸€ç§æ¾æ•£ç±»åž‹çš„è¯­è¨€ã€‚è¿™æ„å‘³ç€ä½ ä¸å¿…å£°æ˜Žå˜é‡çš„ç±»åž‹ã€‚JavaScriptè‡ªåŠ¨æ›¿ä½ å†³å®šå˜é‡ç±»åž‹ã€‚åŒæ—¶ä¹Ÿæ„å‘³ç€ï¼Œå˜é‡ç±»åž‹æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå˜é‡ car ï¼Œå¹¶ç»™å®ƒèµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š 1var car = &apos;ford&apos;; ç„¶åŽï¼Œæˆ‘ä»¬æƒ³è¦carä¿å­˜å®ƒç”Ÿäº§çš„å¹´ä»½ï¼ŒäºŽæ˜¯æˆ‘ä»¬å°† car çš„å€¼æ”¹æˆä¸€ä¸ªæ•°å­—ï¼š 1car = 1998; æˆåŠŸäº†ï¼Œåœ¨JavaScriptä¸­ä½ å¯ä»¥æ›´éšå¿ƒæ‰€æ¬²ã€‚å› ä¸ºå®ƒæ˜¯æ¾æ•£ç±»åž‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„æ”¹å˜å˜é‡ç±»åž‹ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptçŽ°ä»£æ¨¡å¼ï¼Œuse strict]]></title>
    <url>%2F2018%2F12%2F02%2FJavaScript%E7%8E%B0%E4%BB%A3%E6%A8%A1%E5%BC%8F%EF%BC%8Cuse-strict%2F</url>
    <content type="text"><![CDATA[å¾ˆä¹…ä»¥æ¥ï¼ŒJavaScript çš„å‘å±•è¿‡ç¨‹ä¸­éƒ½ä¸å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚æ–°ç‰¹æ€§ä¸æ–­æ·»åŠ ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ”¹å˜æ—§çš„åŠŸèƒ½ã€‚ è¿™æ ·çš„å¥½å¤„å°±æ˜¯æ°¸è¿œä¸ä¼šç ´åå·²æœ‰çš„ä»£ç ã€‚ä½†æ˜¯ä¸å¥½çš„ä¸€é¢æ˜¯ï¼Œä»»ä½•ç”± JavaScript ä½œè€…å¸¦æ¥çš„é”™è¯¯æˆ–è€…è®¾è®¡ç¼ºé™·éƒ½å°†æ°¸è¿œä¼´éšè¿™é—¨è¯­è¨€ã€‚ ç›´åˆ° ECMAScript 5ï¼ˆES5ï¼‰å‡ºçŽ°ï¼ŒçŠ¶å†µæ‰æœ‰æ‰€æ”¹è§‚ã€‚å®ƒæ–°å¢žäº†è¯­è¨€ç‰¹æ€§çš„åŒæ—¶ä¹Ÿä¿®æ”¹äº†ä¸€äº›æ—§çš„ç‰¹æ€§ã€‚ä¸ºäº†è®©ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå¤šæ•°æ”¹åŠ¨éƒ½æ˜¯é»˜è®¤å…³é—­çš„ã€‚å¼€å‘è€…éœ€è¦ç”¨ use strict æŒ‡ä»¤æ˜¾ç¤ºåœ°å¯ç”¨å®ƒä»¬ã€‚ â€œuse strictâ€è¿™ä¸ªæŒ‡ä»¤çœ‹ä¸ŠåŽ»å°±åƒä¸€ä¸ªå­—ç¬¦ä¸²ï¼š&quot;use strict&quot; æˆ–è€… &#39;use strict&#39; ã€‚å½“å®ƒè¢«æ”¾åœ¨è„šæœ¬çš„é¡¶éƒ¨æ—¶ï¼Œæ•´ä¸ªè„šæœ¬å°±ä¼šä»¥ çŽ°ä»£çš„æ–¹å¼è¿è¡Œã€‚ ä¾‹å¦‚ 1234"use strict";// this code works the modern way... &quot;use strict&quot; ä¹Ÿå¯ä»¥ç”¨åœ¨ä¸€ä¸ª function çš„å¼€å¤´ï¼ˆå¤§å¤šæ•° fucntionï¼‰è€Œä¸ä¸€å®šæ˜¯è„šæœ¬çš„èµ·å§‹ä½ç½®ã€‚è¿™æ ·å°±ä¼šåªåœ¨ function å†…éƒ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ä½†æ˜¯é€šå¸¸äººä»¬ä¼šå¯¹æ•´ä¸ªè„šæœ¬ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ ç¡®ä¿ â€œuse strictâ€ åœ¨ä»£ç é¡¶éƒ¨ åŠ¡å¿…ä¿è¯ &quot;use strict&quot; åœ¨ä»£ç é¡¶éƒ¨ï¼Œå¦åˆ™ä¸¥æ ¼æ¨¡å¼ä¸ä¼šå¯ç”¨ã€‚ ä¸‹é¢çš„ä»£ç ä¸­å°±æ²¡æœ‰å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼š 1234567&gt; alert("some code");&gt; // "use strict" below is ignored, must be on the top&gt; &gt; "use strict";&gt; &gt; // strict mode is not activated&gt; åªæœ‰æ³¨é‡Šå¯ä»¥å‡ºçŽ°åœ¨ &quot;use strict&quot; çš„é¡¶éƒ¨ã€‚ ä¸èƒ½å–æ¶ˆ use strict æ²¡æœ‰ä¸€ä¸ªå« &quot;no use strict&quot;æˆ–è€…ç±»ä¼¼çš„æŒ‡ä»¤å¯ä»¥è®© Javascript è¿”å›žæ—§çš„è¡Œä¸ºæ¨¡å¼ã€‚ ä¸€æ—¦æˆ‘ä»¬è¿›å…¥äº†ä¸¥æ ¼æ¨¡å¼ï¼Œå°±ä¸èƒ½è¿”å›žäº†ã€‚ å§‹ç»ˆâ€œuse strictâ€ &quot;use strict&quot; æŒ‡ä»¤å°†å¼•æ“Žåˆ‡æ¢åˆ° â€œçŽ°ä»£â€ æ¨¡å¼ï¼Œæ”¹å˜å†…ç½®ç‰¹æ€§çš„è¡Œä¸ºã€‚ &quot;use strict&quot; å‡ºçŽ°åœ¨é¡¶éƒ¨ä¼šå¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ä¹Ÿæœ‰ä¸€äº›è¯­è¨€ç‰¹æ€§ï¼Œåƒ â€œclassâ€ å’Œ â€œmoduleâ€ ä¼šè‡ªåŠ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒä¸¥æ ¼æ¨¡å¼ã€‚ å§‹ç»ˆå»ºè®®ç”¨ &quot;use strict&quot; æ¥å¼€å§‹ç¼–å†™è„šæœ¬ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSSå…ƒç´ å°ºå¯¸ä¸Žæ»šåŠ¨]]></title>
    <url>%2F2018%2F12%2F02%2FCSS%E5%85%83%E7%B4%A0%E5%B0%BA%E5%AF%B8%E4%B8%8E%E6%BB%9A%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šElement size and scrolling æˆ‘ä»¬å¯ä»¥ä»Žå¾ˆå¤š JavaScript å±žæ€§ä¸­å¾—åˆ°å…³äºŽå…ƒç´ å®½åº¦ï¼Œé«˜åº¦å’Œå‡ ä½•ç‰¹æ€§çš„ä¿¡æ¯ã€‚ å½“åœ¨ JavaScript ä¸­ç§»åŠ¨æˆ–è€…å®šä½å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿™äº›ä¿¡æ¯æ¥è®¡ç®—åæ ‡ã€‚ ç¤ºä¾‹å…ƒç´ æˆ‘ä»¬å°†ç”¨ä¼šç”¨ä¸‹é¢çš„ç¤ºä¾‹å…ƒç´ æ¥æ¼”ç¤ºè¿™äº›å±žæ€§ï¼š 123456789101112&lt;div id="example"&gt; ...Text...&lt;/div&gt;&lt;style&gt; #example &#123; width: 300px; height: 200px; border: 25px solid #E8C48F; padding: 20px; overflow: auto; &#125;&lt;/style&gt; ç¤ºä¾‹å…ƒç´ åŒ…å«äº† borderï¼Œpaddingä»¥åŠ scrollingã€‚å…¨å¥—ç‰¹æ€§ã€‚è¿™é‡Œæ²¡æœ‰ margin ï¼Œå› ä¸º margin å¹¶ä¸å±žäºŽå…ƒç´ æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹å…ƒç´ æ¥è¯´ä¹Ÿä¸æ˜¯ç‰¹æ®Šçš„å±žæ€§ã€‚ è¿™ä¸ªå…ƒç´ é•¿è¿™æ ·ï¼š ä½ å¯ä»¥ åœ¨sandboxä¸­æ‰“å¼€æ–‡æ¡£ã€‚ æ³¨æ„æ»šåŠ¨æ¡ ä¸Šé¢è¿™å¹…å›¾å±•ç¤ºäº†å½“å…ƒç´ åŒ…å«ä¸€ä¸ªæ»šåŠ¨æ¡æ—¶çš„æœ€å¤æ‚çš„æƒ…å†µã€‚ä¸€äº›æµè§ˆå™¨ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰ï¼‰é€šè¿‡å æ®å…ƒç´ çš„ç©ºé—´æ¥ä¸ºæ»šåŠ¨æ¡ä¿ç•™ç©ºé—´ã€‚ æ‰€ä»¥ï¼Œæœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼Œå†…å®¹å®½åº¦æ˜¯ 300pxï¼Œä½†æ˜¯å¦‚æžœæ»šåŠ¨æ¡æ˜¯ 16px å®½ï¼ˆå®½åº¦å¯èƒ½ä¼šå› æµè§ˆå™¨æˆ–è€…è®¾å¤‡è€Œä¸åŒï¼‰åˆ™å†…å®¹å®½åº¦å°±åªä¼šå‰© 300-16 = 284px ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘æ»šåŠ¨æ¡çš„å®½åº¦ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªç¤ºä¾‹ä¸­ä¼šåŒ…å«ä¸€ä¸ªæ»šåŠ¨æ¡ã€‚å¦‚æžœæ²¡æœ‰æ»šåŠ¨æ¡ï¼Œäº‹æƒ…å°±ä¼šç®€å•ä¸€äº›äº†ã€‚ padding-bottom å¯èƒ½ä¼šå¡«å……æ–‡å­— é€šå¸¸æƒ…å†µä¸‹ padding åœ¨æ’å›¾ä¸­æ˜¾ç¤ºçš„æ˜¯ç©ºç™½çš„ï¼Œä½†æ˜¯å¦‚æžœå…ƒç´ ä¸­å­˜åœ¨å¤§é‡æ–‡å­—ï¼Œå¹¶ä¸”æº¢å‡ºäº†ï¼Œæµè§ˆå™¨å°±ä¼šåœ¨ padding-bottom ä¸­æ˜¾ç¤ºæº¢å‡ºçš„æ–‡å­—ï¼ŒäºŽæ˜¯ä½ å°±å¯ä»¥çœ‹åˆ°äº†ã€‚ä½†æ˜¯ padding ä»ç„¶å­˜åœ¨äºŽé‚£é‡Œçš„ï¼Œé™¤éžæœ‰å…¶ä»–æŒ‡å®šã€‚ å‡ ä½•æä¾›å®½åº¦ï¼Œé«˜åº¦ä»¥åŠå…¶å‡ ä½•æ€§è´¨çš„å…ƒç´ å±žæ€§çš„å€¼éƒ½æ˜¯æ•°å­—ã€‚ä¸€èˆ¬è®¤ä¸ºä»–ä»¬çš„å•ä½æ˜¯åƒç´ ã€‚ è¿™é‡Œæ˜¯æ•´ä½“çš„å›¾ç‰‡ï¼š è¿™é‡Œæœ‰å¾ˆå¤šå±žæ€§ï¼Œå¾ˆéš¾å°†å®ƒä»¬å±•ç¤ºåœ¨åŒä¸€å¼ å›¾ç‰‡ä¸­ï¼Œä½†æ˜¯ä»–ä»¬çš„å€¼å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚ æˆ‘ä»¬ä»Žå¤–å‘å†…æ¥æŽ¢ç´¢å®ƒä»¬ã€‚ offsetParent, offsetLeft/Topè¿™äº›å±žæ€§å¾ˆå°‘éœ€è¦ç”¨åˆ°ï¼Œä½†æ˜¯ä»–ä»¬æ˜¯æœ€å¤–å±‚çš„å‡ ä½•å±žæ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»Žå®ƒä»¬å¼€å§‹è¯´ã€‚ offsetParent æ˜¯è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„ç¥–å…ˆå…ƒç´ ï¼š å…·æœ‰ CSS å®šä½ï¼ˆposition ä¸º absoluteï¼Œ relativeï¼Œ fixed æˆ–è€… stickyï¼‰ï¼Œ æˆ–è€… &lt;td&gt;ï¼Œ &lt;th&gt;ï¼Œ &lt;table&gt;ï¼Œ æˆ–è€… &lt;body&gt;ã€‚ åœ¨å¤§å¤šæ•°å®žé™…æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ offsetParent æ¥å¾—åˆ°æœ€è¿‘çš„ CSS å®šä½çš„ ç¥–å…ˆå…ƒç´ ã€‚å¹¶ä¸” offsetLeft / offsetTop æä¾›äº†ç›¸å¯¹äºŽå®ƒçš„å·¦ä¸Šè§’çš„ x / y åæ ‡ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå†…éƒ¨çš„ &lt;div&gt; æœ‰ä¸€ä¸ª &lt;main&gt; ä½œä¸º offsetParent ï¼Œ å¹¶ä¸” offsetLeft / offsetTop ä»Žå®ƒçš„å·¦ä¸Šè§’ç§»å¼€äº†ï¼ˆ180åƒç´ ï¼‰: 12345678910&lt;main style=&quot;position: relative&quot; id=&quot;main&quot;&gt; &lt;article&gt; &lt;div id=&quot;example&quot; style=&quot;position: absolute; left: 180px; top: 180px&quot;&gt;...&lt;/div&gt; &lt;/article&gt;&lt;/main&gt;&lt;script&gt; alert(example.offsetParent.id); // main alert(example.offsetLeft); // 180 (note: a number, not a string &quot;180px&quot;) alert(example.offsetTop); // 180&lt;/script&gt; æœ‰å‡ ç§æƒ…å†µä¸‹ offsetParent ä¸º null ï¼š å¯¹äºŽæœªæ˜¾ç¤ºçš„å…ƒç´ ï¼ˆdisplay:none æˆ–è€…ä¸åœ¨æ–‡æ¡£ä¸­ï¼‰ã€‚ å¯¹äºŽ &lt;body&gt; å’Œ &lt;html&gt; å…ƒç´ ã€‚ å¯¹äºŽ position:fixed çš„å…ƒç´ ã€‚ offsetWidth/Height çŽ°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹å…ƒç´ æœ¬èº«ã€‚ è¿™ä¸¤ä¸ªå±žæ€§æ˜¯æœ€ç®€å•çš„ã€‚å®ƒä»¬æä¾›äº†å…ƒç´ çš„å¤–éƒ¨ width/heightã€‚æˆ–è€…ï¼Œæ¢å¥è¯è¯´ï¼ŒåŒ…å« border çš„å®Œæ•´å°ºå¯¸ã€‚ å¯¹äºŽæˆ‘ä»¬çš„ç¤ºä¾‹å…ƒç´ ï¼š offsetWidth = 390 â€“ å¤–éƒ¨å®½åº¦ï¼Œå¯ä»¥è®¡ç®—ä¸ºå†…éƒ¨å®½åº¦ï¼ˆ300pxï¼‰ + paddingï¼ˆ2*20pxï¼‰+ border ï¼ˆ2*25pxï¼‰ã€‚ offsetHeight = 290 â€“ å¤–éƒ¨é«˜åº¦ã€‚ æœªæ˜¾ç¤ºçš„å‡ ä½•å±žæ€§çš„å€¼ä¸º 0/null å‡ ä½•å±žæ€§åªè®¡ç®—å·²æ˜¾ç¤ºçš„å…ƒç´ ã€‚ å¦‚æžœä¸€ä¸ªå…ƒç´ ï¼ˆæˆ–è€…å®ƒçš„ä»»æ„ç¥–å…ˆï¼‰æœ‰ display:none æˆ–è€…ä¸åœ¨æ–‡æ¡£ä¸­ï¼Œåˆ™æ‰€æœ‰å‡ ä½•å±žæ€§éƒ½æ˜¯ 0 æˆ–è€… nullï¼Œ0 æˆ–è€… null å–å†³äºŽè¿™ä¸ªå±žæ€§æ˜¯ä»€ä¹ˆã€‚ ä¾‹å¦‚ï¼ŒoffsetParent æ˜¯ null ï¼ŒoffsetWidth ï¼ŒoffsetHeight æ˜¯ 0ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ¥æ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦éšè—ï¼Œåƒè¿™æ ·ï¼š 123function isHidden(elem) &#123; return !elem.offsetWidth &amp;&amp; !elem.offsetHeight;&#125; è¯·æ³¨æ„ï¼Œè¿™ä¸ª isHidden å¯¹äºŽæ²¡æœ‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œä½†æ˜¯å¤§å°ä¸º 0 çš„å…ƒç´ ï¼ˆä¾‹å¦‚ä¸€ä¸ªç©ºçš„ &lt;div&gt;ï¼‰è¿”å›ž true ã€‚ clientTop/Leftåœ¨è¿™ä¸ªå…ƒç´ å†…éƒ¨ï¼Œæˆ‘ä»¬æœ‰ border å±žæ€§ã€‚ æœ‰ clientTop å’Œ clientLeft å±žæ€§å¯ä»¥ç”¨æ¥æµ‹é‡å®ƒä»¬ã€‚ åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼š clientLeft = 25 â€“ å·¦è¾¹æ¡†å®½åº¦ clientTop = 25 â€“ ä¸Šè¾¹æ¡†å®½åº¦ ä½†æ˜¯ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ border ï¼Œåªæ˜¯å†…ä¾§äºŽå¤–ä¾§çš„ç›¸å¯¹åæ ‡ã€‚ æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å½“æ–‡æ¡£æ˜¯ä»Žå³æŒ‡è‡³å·¦ï¼ˆæ“ä½œç³»ç»Ÿæ—¶é˜¿æ‹‰ä¼¯è¯­æˆ–è€…å¸Œä¼¯æ¥è¯­ï¼‰æ—¶å¯è§ã€‚æ»šåŠ¨æ¡å°†ä¸ä¼šå‡ºçŽ°åœ¨å³ä¾§ï¼Œè€Œæ˜¯åœ¨å·¦ä¾§ï¼ŒclientLeft ä¹ŸåŒ…æ‹¬äº†æ»šåŠ¨æ¡å®½åº¦ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ clientLeft å°±ä¸æ˜¯ 25 è€Œæ˜¯åŠ ä¸Šæ»šåŠ¨æ¡çš„å®½åº¦ 25+16=41ï¼š clientWidth/Heightè¿™äº›å±žæ€§æä¾›äº†å…ƒç´ è¾¹ç•Œå†…éƒ¨åŒºåŸŸçš„å°ºå¯¸ã€‚ å®ƒä»¬åŒ…æ‹¬äº†å†…å®¹å®½åº¦ï¼Œä¹ŸåŒ…æ‹¬äº† padding ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬æ»šåŠ¨æ¡å®½åº¦ï¼š åœ¨ä¸Šé¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ clientHeightï¼šå¾ˆå®¹æ˜“è®¡ç®—ã€‚è¿™é‡Œæ²¡æœ‰æ¨ªå‘æ»šåŠ¨æ¡ï¼Œæ‰€ä»¥å°±æ˜¯è¾¹ç•Œå†…éƒ¨å„ç§é•¿åº¦çš„ç»¼åˆï¼šCSS é«˜åº¦ 200px + top å’Œ bottom padding ï¼ˆ2*20pxï¼‰ï¼Œæ€»å…±æ˜¯ 240pxã€‚ çŽ°åœ¨è®¡ç®— clientWidth ï¼Œå†…å®¹å®½åº¦ä¸æ˜¯ 300pxï¼Œè€Œæ˜¯ 284pxï¼Œ16px è¢«æ»šåŠ¨æ¡å ç”¨äº†ã€‚æ‰€ä»¥ 284px + å·¦å³ padding ï¼Œæ€»å…±æ˜¯ 324pxã€‚ å¦‚æžœæ²¡æœ‰ padding ï¼Œé‚£ä¹ˆ clientWidth / Height å°±ç›´æŽ¥æ˜¯è¾¹ç•Œå†…éƒ¨çš„å†…å®¹åŒºåŸŸå’Œæ»šåŠ¨æ¡ï¼ˆå¦‚æžœå­˜åœ¨ï¼‰çš„å®½åº¦/é«˜åº¦ã€‚ æ‰€ä»¥å½“ä¸å­˜åœ¨ padding æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ clientWidth / clientHeight æ¥å¾—åˆ°å†…å®¹åŒºåŸŸçš„å¤§å°ã€‚ scrollWidth/Height å±žæ€§ clientWidth / clientHeight åªå¯¹å…ƒç´ çš„å¯è§†éƒ¨åˆ†æœ‰æ•ˆã€‚ å…ƒç´  scrollWidth / scrollHeight ä¹ŸåŒ…æ‹¬äº†æ»šå‡ºï¼ˆéšè—ï¼‰çš„éƒ¨åˆ†ï¼š åœ¨ä¸Šé¢çš„å›¾ä¸­ï¼š scrollHeight = 723 â€“ æ˜¯æ•´ä¸ªå†…å®¹åŒºåŸŸåŒ…æ‹¬æ»šå‡ºéƒ¨åˆ†çš„å†…éƒ¨é«˜åº¦ã€‚ scrollWidth = 324 â€“ æ˜¯æ•´ä¸ªå†…éƒ¨å®½åº¦ï¼Œè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰æ¨ªå‘æ»šåŠ¨æ¡ï¼Œæ‰€ä»¥å®ƒå°±ç­‰äºŽ clientWidthã€‚ æˆ‘ä»¬å¯ä»¥ç”¨è¿™äº›å±žæ€§æ¥å°†å…ƒç´ å®½åº¦æ‰©å±•ä¸ºæ•´ä¸ªçš„å®½åº¦/é«˜åº¦ã€‚ åƒè¿™æ ·: 12// å°†å…ƒç´ æ‰©å±•åˆ°æ•´ä¸ªå†…å®¹çš„å®½åº¦element.style.height = `$&#123;element.scrollHeight&#125;px`; ç‚¹å‡»æŒ‰é’®æ¥å±•å¼€å…ƒç´ ï¼š text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text textelement.style.height = ${element.scrollHeight}px scrollLeft/scrollTopå±žæ€§ scrollLeft / scrollTop æ˜¯å…ƒç´ ä¸­éšè—çš„ï¼Œæ»šå‡ºéƒ¨åˆ†çš„ width/heightã€‚ åœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå…·æœ‰åž‚ç›´æ»šåŠ¨æ¡çš„å—çš„ scrollHeight å’Œ scrollTop ã€‚ æ¢å¥è¯è¯´ï¼ŒscrollTop å…¶å®žæ˜¯ å‘ä¸Šæ»šåŠ¨äº†å¤šå°‘ã€‚ scrollLeft/scrollTop å¯ä»¥è¢«ä¿®æ”¹ã€‚ å¤§å¤šæ•°å‡ ä½•å±žæ€§éƒ½æ˜¯åªè¯»çš„ï¼Œä½†æ˜¯ scrollLeft/scrollTop å¯ä»¥è¢«ä¿®è®¢ï¼Œå¹¶ä¸”æµè§ˆå™¨å°†ä¼šæ»šåŠ¨å…ƒç´ ã€‚ å¦‚æžœä½ ç‚¹å‡»ä¸‹é¢çš„å…ƒç´ ï¼Œä»£ç  elem.scrollTop +=10 ä¼šæ‰§è¡Œã€‚è¿™ä¼šä½¿å…ƒç´ å†…å®¹å‘ä¸‹æ»šåŠ¨ 10pxã€‚ > > ClickMe123456789 > > è®¾ç½® scrollTop ä¸º 0 æˆ–è€… Infinity å°†ä¼šåˆ†åˆ«ä½¿å…ƒç´ æ»šåŠ¨åˆ° top/bottom çš„ä½ç½®ã€‚ ä¸è¦ç”¨ CSS å– width/heightæˆ‘ä»¬åˆšåˆšè®²äº† DOM å…ƒç´ çš„å‡ ä½•å±žæ€§ã€‚å®ƒä»¬é€šå¸¸è¢«ç”¨æ¥èŽ·å–å®½åº¦ï¼Œé«˜åº¦ä»¥åŠè®¡ç®— è·ç¦»ã€‚ ä½†æ˜¯æˆ‘ä»¬ä»Ž Style and classes è¿™ä¸€ç« çŸ¥é“äº†ï¼Œå¯ä»¥ç”¨ getComputedStyle æ¥èŽ·å– CSS çš„é«˜åº¦å’Œå®½åº¦ã€‚ æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åƒè¿™æ ·è¯»å–å…ƒç´ çš„å®½åº¦å‘¢ï¼Ÿ 123let elem = document.body;alert( getComputedStyle(elem).width ); // show CSS width for elem ä¸ºä»€ä¹ˆæˆ‘ä»¬åº”è¯¥ä½¿ç”¨å‡ ä½•å±žæ€§ï¼Ÿæœ‰ä¸¤ä¸ªåŽŸå› ï¼š é¦–å…ˆï¼ŒCSS çš„ width/height å†³å®šäºŽå¦å¤–ä¸€ä¸ªå±žæ€§ï¼šå®šä¹‰äº† CSS çš„ width å’Œ height â€œæ˜¯ä»€ä¹ˆçš„â€box-sizing ã€‚ä¸€ä¸ªå‡ºäºŽæŸç§ CSS ç›®çš„çš„å¯¹ box-sizing çš„æ”¹åŠ¨å°±å¯èƒ½ç ´åäº†è¿™æ®µ JavaScript ä»£ç ã€‚ ç¬¬äºŒï¼ŒCSS width/height å¯èƒ½æ˜¯ autoï¼Œä¾‹å¦‚ä¸€ä¸ª inline å…ƒç´ ï¼š 12345&lt;span id="elem"&gt;Hello!&lt;/span&gt;&lt;script&gt; alert( getComputedStyle(elem).width ); // auto&lt;/script&gt; ç«™åœ¨ CSS çš„è§’åº¦æ¥çœ‹ï¼Œwidth:auto æ˜¯éžå¸¸æ­£å¸¸çš„ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥è®¡ç®—çš„ç²¾ç¡®çš„åƒç´ å°ºå¯¸ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ CSS width ä¸€ç‚¹ç”¨å¤„éƒ½æ²¡æœ‰ã€‚ ä¹Ÿæœ‰ä¸€äº›å…¶ä»–çš„åŽŸå› ï¼šæ»šåŠ¨æ¡ã€‚æœ‰æ—¶å€™ä»£ç åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æ—¶å€™å·¥ä½œåœ°å¾ˆå¥½ï¼Œå‡ºçŽ°æ»šåŠ¨æ¡æ—¶å°±å‡ºé—®é¢˜äº†ï¼Œå› ä¸ºæ»šåŠ¨æ¡ä¼šåœ¨ä¸€äº›æµè§ˆå™¨ä¸­ä¼šå æ®å†…å®¹çš„ç©ºé—´ã€‚æ‰€ä»¥å†…å®¹çœŸæ­£å¯ç”¨çš„ç©ºé—´æ¯” CSS width è¦å°‘ã€‚ clientWidth / clientHeight ä¼šè€ƒè™‘è¿™ä¸€ç‚¹ã€‚ ä½†æ˜¯å¯¹äºŽ getComputedStyle(elem).width ï¼Œæƒ…å†µå°±ä¸åŒäº†ã€‚ä¸€äº›æµè§ˆå™¨ï¼ˆä¾‹å¦‚ï¼ŒChromeï¼‰è¿”å›žçœŸæ­£çš„å®žé™…çš„å†…éƒ¨å®½åº¦ï¼Œè´Ÿçš„æ»šåŠ¨æ¡ï¼Œä¸€äº›æµè§ˆå™¨ï¼ˆä¾‹å¦‚ï¼Œç«ç‹ï¼‰è¿”å›ž CSS widthï¼ˆå¿½ç•¥æ»šåŠ¨æ¡ï¼‰ã€‚è¿™æ ·çš„è·¨æµè§ˆå™¨å·®å¼‚å°±æ˜¯ä¸è¦ä½¿ç”¨ getComputedStyle ï¼Œè€Œæ˜¯ä¾é å‡ ä½•å±žæ€§çš„åŽŸå› ã€‚ å¦‚æžœä½ çš„æµè§ˆå™¨ä¿ç•™äº†æ»šåŠ¨æ¡çš„ç©ºé—´ï¼ˆWindowsçš„å¤§å¤šæ•°æµè§ˆå™¨éƒ½æœ‰ï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ä¸‹é¢æµ‹è¯•ã€‚ è¿™ä¸ªå¡«å……æ–‡å­—çš„å…ƒç´ æœ‰ CSS width:300pxã€‚ åœ¨ä¸€ä¸ª Windows æ¡Œé¢æ“ä½œç³»ç»Ÿä¸­ï¼ŒFirefoxï¼ŒChromeï¼ŒEdge å…¨éƒ¨ä¿ç•™äº†æ»šåŠ¨æ¡çš„ç©ºé—´ã€‚ä½†æ˜¯Firefox æ˜¾ç¤º 300px ï¼Œè€Œ Chrome å’Œ Edge æ˜¾ç¤ºçš„æ›´å°‘ã€‚è¿™æ˜¯å› ä¸º Firefox è¿”å›žçš„æ˜¯ CSS widthï¼Œå…¶ä»–æµè§ˆå™¨è¿”å›žçš„æ˜¯ å®žé™… å®½åº¦ã€‚ è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ‰€è¯´çš„åªæ˜¯å…³äºŽç”¨ JavaScript è¯»å– getComputedStyle(elem).widthçš„å·®å¼‚ ï¼Œè§†è§‰ä¸Šè¿™äº›éƒ½æ˜¯æ­£ç¡®çš„ã€‚ æ€»ç»“å…ƒç´ æœ‰ä¸‹é¢è¿™äº›å‡ ä½•å±žæ€§ï¼š offsetParent â€“ æ˜¯è·ç¦»æœ€è¿‘çš„ å®šä½ çš„ç¥–å…ˆï¼Œæˆ–è€… td, th, table, bodyã€‚ offsetLeft/offsetTop â€“ ç›¸å¯¹äºŽ offsetParent å·¦ä¸Šè§’çš„åæ ‡ã€‚ offsetWidth/offsetHeight â€“ ä¸€ä¸ªå…ƒç´ åŒ…å« border çš„â€œå¤–éƒ¨â€ width/height ã€‚ clientLeft/clientTop â€“ ä»Žå·¦ä¸Šå¤–è§’åˆ°å·¦ä¸Šå†…è§’çš„è·ç¦»ã€‚å¯¹äºŽä»Žå·¦è‡³å³çš„æ“ä½œç³»ç»Ÿï¼Œå®ƒä»¬æ€»æ˜¯å·¦/ä¸Šè¾¹ç•Œçš„å®½åº¦ã€‚å¯¹äºŽä»Žå³è‡³å·¦çš„æ“ä½œç³»ç»Ÿï¼Œåž‚ç›´æ»šåŠ¨æ¡åœ¨å·¦ä¾§ï¼Œæ‰€ä»¥ clientLeft ä¹ŸåŒ…å«æ»šåŠ¨æ¡çš„å®½åº¦ã€‚ clientWidth/clientHeight â€“ å†…å®¹çš„ width/height ï¼ŒåŒ…æ‹¬ padding ä½†æ˜¯ä¸åŒ…æ‹¬æ»šåŠ¨æ¡ã€‚ scrollWidth/scrollHeight â€“ å†…å®¹çš„ width/height åŒ…æ‹¬æ»šå‡ºåŽ»çš„éƒ¨åˆ†ã€‚ä¹ŸåŒ…æ‹¬ padding ä½†æ˜¯ä¸åŒ…æ‹¬æ»šåŠ¨æ¡ã€‚ scrollLeft/scrollTop â€“ å…ƒç´ æ»šå‡ºéƒ¨åˆ†çš„ width/heigh ï¼Œä»Žå·¦ä¸Šè§’å¼€å§‹ã€‚ All properties are read-only except scrollLeft/scrollTop. They make the browser scroll the element if changed. æ‰€æœ‰å±žæ€§éƒ½æ˜¯åªè¯»çš„ï¼Œé™¤äº† scrollLeft/scrollTopã€‚å¦‚æžœå‘ç”Ÿæ”¹å˜ï¼Œä¼šè®©æµè§ˆå™¨æ»šåŠ¨å…ƒç´ ã€‚ ä»»åŠ¡åº•éƒ¨æ»šåŠ¨è·ç¦»æ˜¯å¤šå°‘ï¼Ÿéš¾åº¦: 5 elem.scrollTop å±žæ€§æ˜¯æ»šå‡ºéƒ¨åˆ†çš„å¤§å°ã€‚å¦‚ä½•å¾—åˆ° â€œscrollBottom â€ â€” ä¹Ÿå°±æ˜¯åˆ°åº•éƒ¨çš„è·ç¦»ï¼Ÿ å†™å‡ºå¯¹ä»»æ„ä¸€ä¸ªå…ƒç´  elem æœ‰æ•ˆçš„ä»£ç ã€‚ P.S. è¯·æ£€æŸ¥ä»£ç ï¼šå¦‚æžœå…ƒç´ æ²¡æœ‰æ»šåŠ¨ï¼Œæˆ–è€…æ»šåˆ°åº•äº†ï¼Œå°±è¦è¿”å›ž 0ã€‚ ç­”æ¡ˆ: 12&gt; let scrollBottom = elem.scrollHeight - elem.scrollTop - elem.clientHeight;&gt; ä¹Ÿå°±æ˜¯: (å…¨éƒ¨é«˜åº¦) - (æ»šå‡ºçš„é¡¶éƒ¨é«˜åº¦) - (å¯è§éƒ¨åˆ†) â€“ è¿™å°±æ˜¯åº•éƒ¨æ»šå‡ºè·ç¦»ã€‚ æ»šåŠ¨æ¡å®½åº¦æ˜¯å¤šå°‘ï¼Ÿéš¾åº¦: 3 å†™ä»£ç ï¼Œè¿”å›žæ»šåŠ¨æ¡å®½åº¦ï¼š å¯¹äºŽ Windows æ“ä½œç³»ç»Ÿï¼Œè¿™ä¸ªå€¼åœ¨ 12px å’Œ 20px ä¹‹é—´ã€‚å¦‚æžœæµè§ˆå™¨ä¸ä¿ç•™æ»šåŠ¨æ¡å®½åº¦ï¼Œå°±å¯èƒ½æ˜¯ 0pxã€‚ P.S. ä»£ç åº”è¯¥å¯¹ä»»ä½• HTML æ–‡æ¡£æœ‰æ•ˆï¼Œä¸å–å†³äºŽå†…å®¹ã€‚ ä¸ºäº†å¾—åˆ°æ»šåŠ¨æ¡å®½åº¦ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå…ƒç´ ï¼Œæœ‰æ»šåŠ¨æ¡ï¼Œä½†æ˜¯æ²¡æœ‰ border å’Œ padding ã€‚ å…¨å®½ offsetWidth å’Œå†…å®¹åŒºåŸŸçš„å®½åº¦ clientWidth ä¹‹å·®å°±æ˜¯æ»šåŠ¨æ¡çš„å®½åº¦äº†ï¼š 123456789101112131415&gt; // create a div with the scroll&gt; let div = document.createElement('div');&gt; &gt; div.style.overflowY = 'scroll';&gt; div.style.width = '50px';&gt; div.style.height = '50px';&gt; &gt; // must put it in the document, otherwise sizes will be 0&gt; document.body.append(div);&gt; let scrollWidth = div.offsetWidth - div.clientWidth;&gt; &gt; div.remove();&gt; &gt; alert(scrollWidth);&gt; å°†çƒæ”¾åˆ°è‰åªä¸­é—´éš¾åº¦: 5 è¿™æ˜¯åŽŸå§‹æ–‡æ¡£çš„æ ·å­ï¼š è‰åªä¸­å¿ƒçš„åæ ‡æ˜¯å¤šå°‘ï¼Ÿ è®¡ç®—ä¸­å¿ƒåæ ‡ï¼Œç„¶åŽå°†çƒæ”¾åˆ°è‰åªä¸­å¿ƒ: å…ƒç´ åº”è¯¥ç”¨ JavaScript ç§»åŠ¨ï¼Œ è€Œä¸æ˜¯ CSSã€‚ ä»£ç åº”è¯¥é€‚ç”¨äºŽä»»æ„å¤§å°çš„çƒï¼ˆ10ï¼Œ 20ï¼Œ 30 åƒç´ ï¼‰ï¼Œä»»æ„å¤§å°çš„è‰åªï¼Œä¸åº”è¯¥åªæ˜¯ç»™å®šçš„å€¼ã€‚ P.S. å½“ç„¶ï¼Œå±…ä¸­å¯ä»¥ç”¨ CSS å®žçŽ°ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬åªæƒ³ç”¨ JavaScript ã€‚ä»¥åŽæˆ‘ä»¬å°†ä¼šç¢°åˆ°å…¶ä»–çš„è¯é¢˜å’Œæ›´å¤æ‚çš„æƒ…å†µåªèƒ½ç”¨ JavaScriptã€‚è¿™é‡Œæˆ‘ä»¬åªæ˜¯ä¸€ä¸ªâ€œçƒ­èº«â€ã€‚ åœ¨sandboxä¸­æŸ¥çœ‹ä»»åŠ¡ è¿™ä¸ªçƒæœ‰ position:absolute ï¼Œæ„å‘³ç€å®ƒçš„ left/top åæ ‡æ˜¯ç›¸å¯¹äºŽæœ€è¿‘çš„å®šä½ç¥–å…ˆå…ƒç´ ï¼Œé‚£å°±æ˜¯#è‰åª ï¼ˆå› ä¸ºå®ƒæœ‰ position:relativeï¼‰ã€‚ åæ ‡ä»Žè‰åªå†…éƒ¨çš„å·¦ä¸Šè§’å¼€å§‹ï¼š è‰åªå†…éƒ¨çš„ width/height æ˜¯ clientWidth/clientHeightæ‰€ä»¥è‰åªä¸­å¿ƒåæ ‡æ˜¯ (clientWidth/2, clientHeight/2)ã€‚ â€¦ä½†æ˜¯å¦‚æžœæˆ‘ä»¬è®¾ç½® ball.style.left/top ä¸ºè¿™æ ·çš„å€¼ï¼Œé‚£ä¹ˆå¹¶ä¸æ˜¯æ•´ä¸ªçƒï¼Œè€Œæ˜¯è¿™ä¸ªçƒçš„å·¦ä¸Šè¾¹ç¼˜åœ¨ä¸­é—´äº†: 123&gt; ball.style.left = Math.round(field.clientWidth / 2) + 'px';&gt; ball.style.top = Math.round(field.clientHeight / 2) + 'px';&gt; è¿™æ˜¯å®ƒçš„æ ·å­ To align the ball center with the center of the field, we should move the ball to the half of its width to the left and to the half of its height to the top: ä¸ºäº†è®©çƒåœ¨è‰åªä¸Šå±…ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å°†çƒå·¦ç§»è‡ªèº«å®½åº¦çš„ä¸€åŠï¼Œå†ä¸Šç§»è‡ªèº«å®½åº¦çš„ä¸€åŠï¼š 123&gt; ball.style.left = Math.round(field.clientWidth / 2 - ball.offsetWidth / 2) + 'px';&gt; ball.style.top = Math.round(field.clientHeight / 2 - ball.offsetHeight / 2) + 'px';&gt; æ³¨æ„ï¼šé™·é˜±ï¼ å½“ &lt;img&gt; æ²¡æœ‰ width/height æ—¶è¿™æ®µä»£ç ä¸å¯ç”¨ï¼š 12&gt; &lt;img src=&quot;ball.png&quot; id=&quot;ball&quot;&gt;&gt; å½“æµè§ˆå™¨ä¸çŸ¥é“å›¾ç‰‡çš„ width/height æ—¶ï¼ˆæ ¹æ®å…ƒç´ å±žæ€§æˆ–è€…CSSï¼‰ï¼Œé‚£ä¹ˆå®ƒä¼šå‡è®¾å®ƒä»¬ç­‰äºŽ 0 ç›´åˆ°å›¾ç‰‡å®ŒæˆåŠ è½½ã€‚ åœ¨å®žé™…æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨åˆæ¬¡åŠ è½½æ—¶å¸¸å¸¸ä¼šç¼“å­˜å›¾ç‰‡ï¼Œä¸‹æ¬¡åŠ è½½æ—¶å®ƒä¼šç«‹åˆ»å¾—åˆ°å¤§å°ã€‚ ä½†æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ ball.offsetWidth çš„å€¼æ—¶ 0 ã€‚è¿™ä¼šå¯¼è‡´é”™è¯¯çš„åæ ‡ã€‚ We should fix that by adding width/height to &lt;img&gt;: æˆ‘ä»¬åº”è¯¥é€šè¿‡ç»™ &lt;img&gt; æ·»åŠ  width/height æ¥è§£å†³: 12&gt; &lt;img src="ball.png" width="40" height="40" id="ball"&gt;&gt; â€¦æˆ–è€…åœ¨ CSS ä¸­æä¾›å¤§å°ï¼š 12345&gt; #ball &#123;&gt; width: 40px;&gt; height: 40px;&gt; &#125;&gt; åœ¨sandboxä¸­æŸ¥çœ‹ç­”æ¡ˆ å¯¹æ¯”: CSS width VS clientWidthéš¾åº¦: 5 getComputedStyle(elem).width å’Œelem.clientWidthæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ ç»™å‡ºè‡³å°‘ 3 ä¸ªå·®å¼‚ã€‚è¶Šå¤šè¶Šå¥½ã€‚ å·®å¼‚: clientWidthæ˜¯æ•°å€¼ï¼Œè€ŒgetComputedStyle(elem).width è¿”å›žä¸€ä¸ªä»¥ px ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚ getComputedStyle å¯èƒ½å¯¹å†…è”å…ƒç´ è¿”å›žéžæ•°å­—ï¼Œåƒ &quot;auto&quot;ã€‚ clientWidth æ˜¯å…ƒç´ å†…éƒ¨çš„å†…å®¹åŒºåŸŸåŠ ä¸Šå†…è¾¹è·ï¼Œè€Œ CSS width (åœ¨æ ‡å‡† box-sizingä¸‹) æ˜¯å†…éƒ¨å†…å®¹åŒºåŸŸ ä¸åŒ…å«å†…è¾¹è·ã€‚ å¦‚æžœå­˜åœ¨æ»šåŠ¨æ¡ï¼Œå¹¶ä¸”æµè§ˆå™¨ä¿ç•™äº†æ»šåŠ¨æ¡çš„ç©ºé—´ï¼Œä¸€äº›æµè§ˆå™¨ä»Ž CSS width å‡åŽ»æ»šåŠ¨æ¡å®½åº¦ï¼ˆå¯¼è‡´å†…å®¹å®½åº¦ å—åˆ°å½±å“ï¼‰ï¼Œä¸€äº›æµè§ˆå™¨ä¸ä¼šè¿™æ ·åšã€‚clientWidth å±žæ€§æ€»æ˜¯ä¸€è‡´çš„ï¼šæ»šåŠ¨æ¡å¤§å°è¢«å‡åŽ»äº†ï¼Œå¦‚æžœä¿ç•™äº†çš„è¯ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactä¸­ç”¨Indexåšåˆ—è¡¨çš„keyå€¼æ˜¯åæ¨¡å¼]]></title>
    <url>%2F2018%2F11%2F19%2FReact%E7%94%A8Index%E5%81%9A%E5%88%97%E8%A1%A8%E7%9A%84key%E5%80%BC%E6%98%AF%E5%8F%8D%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[ç¿»è¯‘åŽŸæ–‡ï¼šIndex as a key is an anti-pattern ç»å¸¸è§åˆ°ç¨‹åºå‘˜ç”¨ index ä½œä¸ºåˆ—è¡¨é¡¹çš„ key å€¼ä¼ ç»™ React æ¥æ¸²æŸ“åˆ—è¡¨ï¼š 123456&#123;todos.map((todo, index) =&gt; &lt;Todo &#123;...todo&#125; key=&#123;index&#125; /&gt;)&#125; è¿™çœ‹èµ·æ¥è¿˜æ¯”è¾ƒä¼˜é›…ï¼Œçš„ç¡®ä¹Ÿæ¶ˆé™¤äº†è­¦å‘Šã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä»€ä¹ˆå±é™©ï¼Ÿ å®ƒå¯èƒ½ä¼šç ´åä½ çš„åº”ç”¨ï¼Œç”šè‡³æ˜¾ç¤ºé”™è¯¯æ•°æ® è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼Œ key æ˜¯ React ç”¨æ¥åŒºåˆ† DOM å…ƒç´ çš„å”¯ä¸€æ ‡è¯†ã€‚å¦‚æžœä½ åœ¨ä¸­é€”å‘ list ä¸­å¢žåŠ äº†ä¸€ä¸ª å…ƒç´ ï¼Œæˆ–è€…åˆ é™¤äº†ä¸€äº›ä¸œè¥¿ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æžœæ›´æ–°åŽçš„ key çš„å€¼è·Ÿä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼Œé‚£ React å°±ä¼šè®¤ä¸ºè¿™ä¸ª key å¯¹åº”çš„ DOM å…ƒç´ å’Œä¹‹å‰æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯å®žé™…ä¸Šä¸æ˜¯ã€‚ ä¸ºäº†è¯æ˜Žè¿™ç§æ½œåœ¨çš„å±é™©ï¼Œæˆ‘åˆ›å»ºäº†ä¸€æ®µç®€å•çš„ç¤ºä¾‹ä»£ç ã€‚ ç»“æžœè¡¨åï¼Œå½“æ²¡æœ‰ä¼  key çš„æ—¶å€™ï¼ŒReact é»˜è®¤ä½¿ç”¨ index ä½œä¸º key ï¼Œå› ä¸ºæ­¤æ—¶è¿™æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚è€Œä¸” React ä¼šè­¦å‘Šä½ ï¼Œè¿™ä¸æ˜¯æœ€ç†æƒ³çš„ï¼ˆè¿™ä¸ªè­¦å‘Šè¯´çš„æœ‰ç‚¹å®¹æ˜“è®©äººè¯¯è§£ï¼‰ã€‚å¦‚æžœä½ æä¾›äº† index ä½œä¸º key å€¼ï¼ŒReact å°±ä¼šè®¤ä¸ºä½ çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œæƒ³æƒ³ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ï¼Œè¿™ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„åŽæžœã€‚ æ›´å¥½çš„åŠžæ³•æ¯ä¸€ä¸ªè¿™æ ·çš„é¡¹ç›®éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæ°¸æ’çš„å”¯ä¸€çš„å±žæ€§ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”è¯¥åœ¨è¢«åˆ›å»ºçš„æ—¶å€™å°±èµ‹å€¼ã€‚å½“ç„¶ï¼Œæˆ‘è¯´çš„æ˜¯è¿™ä¸ª idã€‚ç„¶åŽæˆ‘ä»¬å°±å¯ä»¥åƒä¸‹ç¾¡æ…•è¿™æ ·æ¥ç”¨å®ƒäº†ï¼š 1234&#123;todos.map((todo) =&gt; &lt;Todo &#123;...todo&#125; key=&#123;todo.id&#125; /&gt;)&#125; æ³¨æ„ï¼šé¦–å…ˆçœ‹çœ‹åˆ—è¡¨é¡¹çš„å·²æœ‰å±žæ€§ã€‚ä»–ä»¬å¾ˆå¯èƒ½å·²ç»æœ‰ä¸€äº›å¯ä»¥ç”¨æ¥å½“ä½œ id çš„å±žæ€§äº†ã€‚ ä¸€ä¸ªåŠžæ³•å°±æ˜¯åœ¨æŠ½è±¡ä¸­ç”¨ä¸€ä¸ªé€’å¢žçš„æ•°å€¼æ¥ä»£æ›¿ idã€‚ç”¨ä¸€ä¸ªå…¨å±€çš„ index æ¥ä¿è¯ä»»æ„ä¸¤ä¸ªåˆ—è¡¨é¡¹éƒ½æœ‰ä¸åŒçš„ idã€‚ 12345678todoCounter = 1;function createNewTodo(text) &#123; return &#123; completed: false, id: todoCounter++, text &#125;&#125; æ¯”æ›´å¥½è¿˜è¦å¥½çš„åŠžæ³•åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­åº”è¯¥ç”¨ä¸€ç§æ›´å…·æœ‰é²æ£’æ€§çš„æ–¹æ³•ï¼Œè¦èƒ½å¤„ç†åˆ—è¡¨é¡¹çš„åˆ†å¸ƒå¼åˆ›å»ºã€‚å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘æŽ¨èä½¿ç”¨ shortid ç±»åº“ã€‚å®ƒå¯ä»¥å¿«é€Ÿç”Ÿæˆ â€œçŸ­å°çš„éžåºåˆ—ä¸” URL å‹å¥½çš„å”¯ä¸€â€ idã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678var shortid = require('shortid');function createNewTodo(text) &#123; return &#123; completed: false, id: shortid.generate(), text &#125;&#125; é•¿è¯çŸ­è¯´ï¼šä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ idï¼Œå¹¶åœ¨æ¸²æŸ“åˆ—è¡¨çš„æ—¶å€™å°†å®ƒè®¾ç½®ä¸º keyã€‚ æ›´æ–°ï¼šä¾‹å¤–æƒ…å†µ è®¸å¤šäººä¼šé—®ä»–ä»¬æ˜¯å¦æ€»æ˜¯éœ€è¦ç”Ÿæˆ idã€‚è¿˜æœ‰ä¸€äº›äººå»ºè®®äº†ä¸€äº›éžå¸¸é€‚åˆç”¨ index æ¥ä½œä¸º key çš„ç”¨ä¾‹ã€‚ çš„ç¡®ï¼Œæœ‰çš„æ—¶å€™ç”Ÿæˆæ–°çš„ id æ˜¯å¤šä½™çš„ï¼Œä¹Ÿå¯ä»¥é¿å…ã€‚ä¾‹å¦‚è®¸å¯æ¡æ¬¾å’Œè´¡çŒ®è€…åˆ—è¡¨çš„ç¿»è¯‘ã€‚ ä¸ºäº†å¸®ä½ åšå†³å®šï¼Œæˆ‘å°†è¿™äº›ç¤ºä¾‹å…±æœ‰çš„ä¸‰ä¸ªæ¡ä»¶æ”¾åœ¨ä¸€èµ·ï¼š åˆ—è¡¨å’Œåˆ—è¡¨é¡¹éƒ½æ˜¯é™æ€çš„-ä¸æ˜¯è®¡ç®—å‡ºæ¥çš„å€¼ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ï¼› åˆ—è¡¨ä¸­çš„åˆ—è¡¨é¡¹æ²¡æœ‰ idï¼› åˆ—è¡¨ä¸å¯èƒ½ä¼šåˆ›æ–°æ¸²æŸ“ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿè¿‡æ»¤ã€‚ å¦‚æžœæ»¡è¶³ä¸Šé¢çš„å…¨éƒ¨ï¼Œä½ å°±å¯ä»¥å®‰å…¨åœ°ç”¨ index äº†å½“ key å€¼äº†ã€‚ æ›´æ–°2: Reactï¼ŒPreact å’Œ *react å°½ç®¡è¿™ç¯‡æ–‡ç« å†™çš„æ˜¯å…³äºŽ React çš„ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜å´ä¸å±€é™äºŽ Reactã€‚åœ¨ç›¸ä¼¼çš„ç±»åº“ä¸­ï¼Œä¾‹å¦‚ Preactï¼Œä¹ŸåŒæ ·å­˜åœ¨è¿™ä¸­é—®é¢˜ã€‚å°½ç®¡æ•ˆæžœå¯èƒ½ä¸åŒã€‚ ç›¸å…³æ–‡ç«  Dynamic Children and Keyed Fragments in React Docs Explanation from Paul Oâ€™Shannessy The importance of component keys in React.js React.js and Dynamic Children â€” Why the Keys are Important React animations for a single component, section The key is using key Why you need keys for collections in React by Paul Gray]]></content>
      <categories>
        <category>FE</category>
        <category>React</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•åœ¨Node.jsä¸­å¯ç”¨ES6 Import]]></title>
    <url>%2F2018%2F11%2F16%2F%E5%A6%82%E4%BD%95%E5%9C%A8Node-js%E4%B8%AD%E5%90%AF%E7%94%A8ES6-Import%2F</url>
    <content type="text"><![CDATA[åˆ°ç›®å‰ï¼ŒNode.js è¿˜æ²¡æœ‰æ”¯æŒ ES6 çš„ import æ¨¡å—ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ Babel çš„ååŠ©æ¥ä½¿ç”¨å®ƒã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ª express.js server çš„ç¤ºä¾‹ã€‚ 1. å®‰è£…ä¾èµ–1npm install babel-register babel-preset-env --save-dev 2. æ”¹é€ Server.jsè¿™æ˜¯ server.js çš„ç¤ºä¾‹ä»£ç  12345678910const express = require('express')const app = express()// respond with "hello world" when a GET request is made to the homepageapp.get('/', function (req, res) &#123; res.send('hello world')&#125;)app.listen(3000, () =&gt; console.log('Example app listening on port 3000!'))copy æˆ‘ä»¬ç”¨ ES6 import ä»£æ›¿ require(â€¦) 12345678910import express from 'express'const app = express()// respond with "hello world" when a GET request is made to the homepageapp.get('/', function (req, res) &#123; res.send('hello world')&#125;)app.listen(3000, () =&gt; console.log('Example app listening on port 3000!'))copy å¦‚æžœä½ çŽ°åœ¨å°±æ‰§è¡Œ node server.js , è¿˜æ˜¯ä¼šæŠ¥é”™ SyntaxError: Unexpected token import ã€‚ä¹‹æ‰€ä»¥è¿™æ ·æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è®© Babel åœ¨ Node.js ä»£ç ä¸­ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥é…ç½®ã€‚ 3. æ·»åŠ ä¸€ä¸ªå…¥å£æ–‡ä»¶ start.jsè¿™ä¸ªæ–‡ä»¶ä¼šå……å½“æˆ‘ä»¬çš„ Node.js åº”ç”¨ç¨‹åºçš„å…¥å£ï¼Œå…¶ä¸­åŒ…å«äº†æ³¨å†Œ babel çš„ä»£ç ï¼š 12345678// Transpile all code following this line with babel and use 'env' (aka ES6) preset.require('babel-register')(&#123; presets: [ 'env' ]&#125;)// Import the rest of our application.module.exports = require('./server.js')copy And thatâ€™s all, from now on, instead of running node server.js, start your app as node start.js and you will get a hassle-free ES6 Imports support in your node.js application. åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†ï¼ŒçŽ°åœ¨è¦è¿è¡Œ node start.js è€Œä¸æ˜¯ node server.js äº†ï¼Œä½ çš„ node.js åº”ç”¨ç¨‹åºå°±å¯ä»¥æ— éšœç¢åœ°ä½¿ç”¨ ES6 import æ¨¡å—äº†ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŒ‡é’ˆåŸºç¡€]]></title>
    <url>%2F2018%2F11%2F16%2F%E6%8C%87%E9%92%88%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[ç¿»è¯‘åŽŸæ–‡ï¼šPointer Basics è¿™æ˜¯ç¿»è¯‘çš„æ–¯å¦ç¦å¤§å­¦å®˜ç½‘ä¸Šçš„ CSLibrary ä¸­çš„ä¸€ç¯‡è¯¾ç¨‹æ–‡æ¡£ è¿™ä¸ªæ–‡æ¡£ä»‹ç»æŒ‡é’ˆçš„åŸºç¡€çŸ¥è¯†ï¼Œå› ä¸ºå¾ˆå¤šè®¡ç®—æœºè¯­è¨€ä¸­éƒ½ä¼šç”¨åˆ°å®ƒï¼Œä¾‹å¦‚ï¼šCï¼ŒC++ï¼ŒJavaï¼Œä»¥åŠ Pascalã€‚ Section 1 â€“ æŒ‡é’ˆçš„ä¸‰ä¸ªåŸºæœ¬è§„åˆ™ Section 2 â€“ ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹ Section 3 â€“ ä¹ é¢˜å’Œç­”æ¡ˆ è¿™æ˜¯ Stanford CS Education Library çš„106å·æ–‡æ¡£ã€‚å…¶ä»–å…è´¹èµ„æ–™åœ¨ cslibrary.stanford.edu ä¸­å¯ä»¥èŽ·å–åˆ°ã€‚ 1 â€“ æŒ‡é’ˆè§„åˆ™1å…³äºŽæŒ‡é’ˆï¼Œå¥½çš„åœ°æ–¹æ˜¯æŽ§åˆ¶ä»–ä»¬å·¥ä½œçš„è§„åˆ™éžå¸¸ç®€å•ã€‚è¿™äº›è§„åˆ™å¯ä»¥ç»„åˆå¾—åˆ°å¤æ‚çš„ç»“æžœï¼Œä½†æ˜¯å•ä¸ªçš„è§„åˆ™è¿˜æ˜¯å¾ˆç®€å•ã€‚ 1) æŒ‡é’ˆä¸ŽæŒ‡é’ˆå¯¹è±¡æŒ‡é’ˆå­˜æ”¾äº†å¯¹ä¸€äº›ä¸œè¥¿çš„å¼•ç”¨ ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„ç›®æ ‡è¿˜æ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„æœ¯è¯­ï¼Œä¸åŒçš„è®¡ç®—æœºè¯­è¨€ä¸­ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹å¾ˆå¤šã€‚æˆ‘ä»¬ç”¨æœ¯è¯­ æŒ‡é’ˆå¯¹è±¡ æ¥ä»£æŒ‡æŒ‡é’ˆæŒ‡å‘çš„äº‹ç‰©ï¼Œæˆ‘ä»¬å°±æ¥ç ”ç©¶ä¸€ä¸‹é‚£äº›åœ¨æ‰€æœ‰è¯­è¨€ä¸­éƒ½æ­£ç¡®çš„ æŒ‡é’ˆ/æŒ‡é’ˆå¯¹è±¡ å…³ç³»çš„åŸºæœ¬æ€§è´¨ã€‚æœ¯è¯­ â€œå¼•ç”¨â€å’Œ â€œæŒ‡é’ˆâ€çš„æ„æ€éžå¸¸ç›¸ä¼¼â€”â€”â€œå¼•ç”¨â€æ„åœ¨æ›´é«˜å±‚çš„è®¨è®ºï¼Œè€Œâ€œæŒ‡é’ˆâ€æ˜¯æŒ‡ä¼ ç»Ÿçš„ç¼–è¯‘è¯­è¨€å¯¹åœ°å€æŒ‡é’ˆçš„å®žçŽ°ã€‚å¯¹äºŽè¿™é‡Œæ‰€è®²çš„åŸºæœ¬çš„ æŒ‡é’ˆ/æŒ‡é’ˆå¯¹è±¡ è§„åˆ™ï¼Œè¿™ä¸¤ä¸ªæœ¯è¯­å¯ä»¥è®¤ä¸ºæ˜¯ç­‰åŒçš„ã€‚ ä¸Šé¢çš„å›¾ä¸­ç”»å‡ºäº†ä¸€ä¸ªåä¸º x çš„æŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸€ä¸ªä¿å­˜äº†æ•°å€¼42 çš„æŒ‡é’ˆå¯¹è±¡ã€‚æŒ‡é’ˆé€šå¸¸è¢«ç”»æˆä¸€ä¸ªçŸ©å½¢ç›’å­ï¼ŒæŒ‡é’ˆä¸­ä¿å­˜çš„å¼•ç”¨è¢«ç”»æˆä¸€ä¸ªç®­å¤´ï¼Œä»ŽæŒ‡é’ˆçš„ç›’å­å¼€å§‹ï¼ŒæŒ‡å‘å®ƒçš„æŒ‡é’ˆå¯¹è±¡ã€‚ åˆ†é…æŒ‡é’ˆå’Œç»™æŒ‡é’ˆåˆ†é…æŒ‡é’ˆå¯¹è±¡æ˜¯åˆ†å¼€çš„ä¸¤ä¸ªæ­¥éª¤ã€‚ä½ å¯ä»¥è®¤ä¸º æŒ‡é’ˆ/æŒ‡é’ˆå¯¹è±¡ ç»“æž„æ˜¯åœ¨ä¸¤ä¸ªå±‚çº§çš„æ“ä½œã€‚ä¸¤ä¸ªå±‚çº§éƒ½å¿…é¡»è®¾ç½®æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚æœ€å¸¸è§çš„é”™è¯¯é›†ä¸­äºŽç¼–å†™æ‰‹åŠ¨æ“ä½œæŒ‡é’ˆçš„ä»£ç æ—¶ï¼Œå¿˜è®°äº†è®¾ç½®æŒ‡é’ˆå¯¹è±¡ã€‚æœ‰æ—¶å€™ä¸æŽ¥è§¦æŒ‡é’ˆå¯¹è±¡çš„æŒ‡é’ˆæ“ä½œè¢«ç§°ä¸ºâ€œæµ…â€ï¼Œè€Œæ“ä½œæŒ‡é’ˆå¯¹è±¡çš„æŒ‡é’ˆæ“ä½œç§°ä¸ºâ€œæ·±â€ã€‚ 2) è§£å¼•ç”¨è§£å¼•ç”¨ æ“ä½œä»ŽæŒ‡é’ˆå¼€å§‹ï¼Œæ²¿ç€ç®­å¤´ä¸€ç›´è®¿é—®åˆ°å®ƒçš„æŒ‡é’ˆå¯¹è±¡ã€‚ç›®çš„å¯èƒ½æ˜¯æŸ¥çœ‹æŒ‡é’ˆå¯¹è±¡çš„çŠ¶æ€æˆ–è€…æ”¹å˜æŒ‡é’ˆå¯¹è±¡çš„çŠ¶æ€ã€‚ å¯¹ä¸€ä¸ªæŒ‡é’ˆæ‰§è¡Œçš„è§£å¼•ç”¨æ“ä½œåªåœ¨è¿™ä¸ªæŒ‡é’ˆæœ‰ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡â€”â€”è¿™ä¸ªæŒ‡é’ˆå¯¹è±¡å¿…é¡»å·²ç»è¢«åˆ†é…å¹¶ä¸”æŒ‡é’ˆå¿…é¡»å·²ç»è®¾ç½®ä¸ºæŒ‡å‘å®ƒâ€”â€” çš„æƒ…å†µä¸‹æœ‰æ•ˆã€‚æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ä»£ç ä¸­å¿˜è®°ä¸ºæŒ‡é’ˆè®¾ç½®æŒ‡é’ˆå¯¹è±¡ã€‚åœ¨ Java ä¸­ï¼Œè¿è¡Œæ—¶ä¼šç¤¼è²Œåœ°æ ‡è®°é”™è¯¯çš„è§£å¼•ç”¨ã€‚åœ¨ç¼–è¯‘è¯­è¨€ä¸­ï¼Œä¾‹å¦‚ Cï¼ŒC++ï¼Œå’ŒPascalä¸­ï¼Œé”™è¯¯çš„è§£å¼•ç”¨æœ‰æ—¶ä¼šå´©æºƒï¼Œæœ‰æ—¶ä¼šä»¥ä¸€äº›å¾®å¦™è€Œéšæœºçš„æ–¹å¼ç ´åå†…å­˜ã€‚å› æ­¤ç¼–è¯‘è¯­è¨€ä¸­çš„æŒ‡é’ˆå¼‚å¸¸å¾ˆéš¾è¿½è¸ªã€‚ 3) æŒ‡é’ˆèµ‹å€¼ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„ æŒ‡é’ˆèµ‹å€¼ ä¼šä½¿ä»–ä»¬æŒ‡å‘åŒä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚æ‰€ä»¥ y=x; çš„èµ‹å€¼ä¼šè®© y æŒ‡å‘ä¸Ž x ç›¸åŒçš„æŒ‡é’ˆå¯¹è±¡ã€‚æŒ‡é’ˆèµ‹å€¼ä¸æŽ¥è§¦æŒ‡é’ˆå¯¹è±¡ã€‚å®ƒåªæ˜¯æ”¹å˜ä¸€ä¸ªæŒ‡é’ˆæ¥è®©å®ƒæ‹¥æœ‰ä¸Žå…¶ä»–æŒ‡é’ˆç›¸åŒçš„å¼•ç”¨ã€‚æŒ‡é’ˆèµ‹å€¼åŽï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆè¢«ç§°ä¸º å…±äº« æŒ‡é’ˆå¯¹è±¡ã€‚ 2 â€“ ä»£ç ç¤ºä¾‹æœ‰ä¸åŒè®¡ç®—æœºè¯­è¨€çš„ä»£ç ç¤ºä¾‹ã€‚æ‰€æœ‰çš„ç‰ˆæœ¬éƒ½æœ‰ç›¸åŒçš„ç»“æž„ï¼Œè¯æ˜Žç›¸åŒçš„åŸºæœ¬è§„åˆ™å’ŒæŒ‡é’ˆåªæ˜¯ï¼›ä»–ä»¬åªæœ‰è¯­æ³•ä¸Šçš„ä¸åŒã€‚ä¸è€ƒè™‘ç‰¹å®šè¯­è¨€ï¼Œç¤ºä¾‹çš„åŸºæœ¬ç»“æž„å¦‚ä¸‹â€¦ 1. åˆ†é… x å’Œ y ä¸¤ä¸ªæŒ‡é’ˆã€‚è®©ä»–ä»¬ä¸æŒ‡å‘ä»»ä½•æŒ‡é’ˆå¯¹è±¡ã€‚ 2. åˆ†é…ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼Œç„¶åŽè®¾ç½® x æŒ‡å‘å®ƒã€‚æ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„è¯­æ³•æ¥å®žçŽ°è¿™ä¸€æ­¥æ“ä½œã€‚é‡è¦çš„æ˜¯æŒ‡é’ˆå¯¹è±¡çš„å†…å­˜æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œç„¶åŽè®©x æŒ‡å‘è¿™ä¸ªæŒ‡é’ˆå¯¹è±¡ 3.è§£å¼•ç”¨ x å°†42ä¿å­˜åˆ°æŒ‡é’ˆå¯¹è±¡ä¸­ã€‚è¿™æ˜¯è§£å¼•ç”¨æ“ä½œçš„åŸºæœ¬ç¤ºä¾‹ã€‚ä»Ž x å¼€å§‹ï¼Œæ²¿ç€ç®­å¤´æ–¹å‘è®¿é—®åˆ°æŒ‡é’ˆå¯¹è±¡ã€‚ 4. å°è¯•è§£å¼•ç”¨ y æ¥ä¿å­˜ 13 åˆ°æŒ‡é’ˆå¯¹è±¡ä¸­.è¿™ä¸€æ­¥ä¼šå´©æºƒâ€”â€”å› ä¸ºå®ƒè¿˜æ²¡æœ‰è¢«èµ‹å€¼ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚ 5. èµ‹å€¼ y=x; è®© y æŒ‡å‘ x çš„æŒ‡é’ˆå¯¹è±¡ã€‚çŽ°åœ¨ x å’Œ y æŒ‡å‘äº†ç›¸åŒçš„æŒ‡é’ˆå¯¹è±¡â€”â€”ä»–ä»¬æ˜¯å…±äº«çš„ã€‚ 6. å°è¯•è§£å¼•ç”¨ y æ¥ä¿å­˜ 13åˆ°æŒ‡é’ˆå¯¹è±¡ä¸­ã€‚è¿™ä¸€æ¬¡æˆåŠŸäº†ï¼Œå› ä¸ºä¸Šä¸€æ­¥èµ‹å€¼æ“ä½œä¸º y åˆ†é…äº†æŒ‡é’ˆå¯¹è±¡ã€‚ ç‰ˆæœ¬ä¸‹é¢æ˜¯ä¸åŒè¯­è¨€ç‰ˆæœ¬çš„ç¤ºä¾‹ã€‚ä»–ä»¬åšäº†ç›¸åŒçš„äº‹æƒ…â€”â€”åªæ˜¯æ¯ç§è¯­è¨€çš„è¯­æ³•ä¸åŒã€‚ C ç‰ˆæœ¬æŒ‡é’ˆ x å’Œ y åˆ†é…æˆæœ¬åœ°å˜é‡ã€‚ç±»åž‹ int* è¡¨ç¤ºâ€œæŒ‡é’ˆæŒ‡å‘ int ç±»åž‹â€ã€‚æŒ‡é’ˆä¸ä¼šè‡ªåŠ¨å¾—åˆ°æŒ‡é’ˆå¯¹è±¡ã€‚x çš„æŒ‡é’ˆå¯¹è±¡æ˜¯å¦å¤–ç”¨æ ‡å‡†åº“ malloc() åŠ¨æ€åˆ†é…çš„ã€‚è¯­æ³• *x è§£å¼•ç”¨ x æ¥è®¿é—®å®ƒçš„æŒ‡é’ˆå¯¹è±¡ã€‚ 123456789101112131415void main() &#123; int* x; // Allocate the pointers x and y int* y; // (but not the pointees) x = malloc(sizeof(int)); // Allocate an int pointee, // and set x to point to it *x = 42; // Dereference x to store 42 in its pointee *y = 13; // CRASH -- y does not have a pointee yet y = x; // Pointer assignment sets y to point to x's pointee *y = 13; // Dereference y to store 13 in its (shared) pointee&#125; Cè¯­è¨€ï¼ˆæˆ–è€…C++ï¼‰ä¸­å¦ä¸€ç§ä½¿ç”¨æŒ‡é’ˆçš„æ–¹å¼æ˜¯ä½¿ç”¨ &amp; ç¬¦å·ï¼ˆampersand ï¼‰è¿ç®—ç¬¦æ¥è®¡ç®—æ ˆä¸­æŒ‡å‘æœ¬åœ°å†…å­˜çš„æŒ‡é’ˆã€‚ç„¶è€Œï¼ŒæŒ‡é’ˆå¯¹è±¡é€šå¸¸æ˜¯åœ¨å †ä¸­åŠ¨æ€åˆ†é…çš„ï¼Œæ‰€ä»¥è¿™å°±æ˜¯æˆ‘ä»¬å±•ç¤ºçš„ã€‚ Java ç‰ˆæœ¬Javaä¸­æœ€å¸¸è§çš„ æŒ‡é’ˆ/æŒ‡é’ˆå¯¹è±¡ç»“æž„æ˜¯ä¸€ä¸ªæœ¬åœ°å˜é‡ä½œä¸ºæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€äº›ç±»çš„å¯¹è±¡ä½œä¸ºæŒ‡é’ˆå¯¹è±¡ã€‚æ‰€ä»¥ä¸ºäº†æŒ‰è®¡åˆ’åˆ›å»ºä¸€ä¸ªä¿å­˜äº†æ•´æ•°ç±»åž‹çš„æŒ‡é’ˆå¯¹è±¡ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª IntObj ç±»æ¥ä¿å­˜ä¸€ä¸ªæ•´åž‹ã€‚ç„¶åŽæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª IntObj æŒ‡é’ˆå¯¹è±¡æ¥ä¿å­˜ intã€‚ç”¨ IntObj x; è¿™æ ·çš„ä»£ç æ¥åˆ†é…æŒ‡é’ˆä¸ä¼šè‡ªåŠ¨åˆ†é…æŒ‡é’ˆå¯¹è±¡ã€‚ IntObj æŒ‡é’ˆå¯¹è±¡é€šè¿‡è°ƒç”¨ new æ¥åˆ†é…ã€‚x.value è§£å¼•ç”¨ x æ¥è®¿é—®æŒ‡é’ˆå¯¹è±¡ä¸­çš„ .value å­—æ®µã€‚ 123456789101112131415161718192021class IntObj &#123; public int value;&#125;public class Binky() &#123; public static void main(String[] args) &#123; IntObj x; // Allocate the pointers x and y IntObj y; // (but not the IntObj pointees) x = new IntObj(); // Allocate an IntObj pointee // and set x to point to it x.value = 42; // Dereference x to store 42 in its pointee y.value = 13; // CRASH -- y does not have a pointee yet y = x; // Pointer assignment sets y to point to x's pointee y.value = 13; // Deference y to store 13 in its (shared) pointee &#125;&#125; C++ ç‰ˆæœ¬ä¸Ž ä¸Šé¢ C è¯­è¨€ç‰ˆæœ¬å”¯ä¸€çš„ä¸åŒæ˜¯ä½¿ç”¨äº†æ ‡å‡†æ“ä½œç¬¦ new æ¥ä»£æ›¿ malloc() 123456789101112131415void main() &#123; int* x; // Allocate the pointers x and y int* y; // (but not the pointees) x = new int; // Allocate an int pointee, // and set x to point to it *x = 42; // Dereference x to store 42 in its pointee *y = 13; // CRASH -- y does not have a pointee yet y = x; // Pointer assignment sets y to point to x's pointee *y = 13; // Dereference y to store 13 in its (shared) pointee&#125; Pascal ç‰ˆæœ¬è¿™è·Ÿ C è¯­è¨€ç‰ˆæœ¬åœ¨ç»“æž„ä¸€è‡´ï¼Œä½†æ˜¯ä½¿ç”¨äº† Pascal è¯­æ³•ã€‚^Integer æ„æ€æ˜¯â€œæŒ‡å‘æ•´åž‹çš„æŒ‡é’ˆâ€ã€‚åˆ†é…æŒ‡é’ˆä¸ä¼šè‡ªåŠ¨åˆ†é…å®ƒçš„æŒ‡é’ˆå¯¹è±¡ã€‚æ ‡å‡†ç¨‹åº New() å–ä¸€ä¸ªæŒ‡é’ˆå‚æ•°ï¼Œåˆ†é…ä¸€ä¸ªæ–°çš„æŒ‡é’ˆå¯¹è±¡ï¼Œè®¾ç½®æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚è¡¨è¾¾å¼ x^ è§£å¼•ç”¨è®¿é—®è¿™ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚ 1234567891011121314Procedure main var x:^Integer; /* Allocate the pointers x and y */ var y:^Integer; /* (but not the pointees) */Begin New(x); /* Allocate a pointee and set x to point to it */ x^ := 42; /* Deference x to store 42 in its pointee */ y^ := 13; /* CRASH -- y does not have a pointee yet */ y := x; /* Pointer assignment makes y point to x's pointee */ y^ := 13; /* Dereference y to store 13 in its (shared) pointee */End; 3 â€“ ä¹ é¢˜è¿™äº›ä¹ é¢˜è€ƒå¯ŸæŒ‡é’ˆçš„åŸºæœ¬ç‰¹æ€§ã€‚å…¶ä¸­ä¸¤ä¸ªé—®é¢˜å¤§é‡ä½¿ç”¨å†…å­˜å›¾ã€‚å†…å­˜å›¾æ˜¯æ€è€ƒæŒ‡é’ˆé—®é¢˜çš„å¾ˆå¥½çš„æ–¹æ³•ã€‚ Question 1åœ¨ä¸Šé¢ä»£ç çš„æœ«å°¾ï¼Œy è¢«æŒ‡å®šäº†ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼Œç„¶åŽè§£å¼•ç”¨å®ƒä¿å­˜æ•°å­—13åˆ°æŒ‡é’ˆå¯¹è±¡ä¸­ï¼Œåœ¨è¿™å‘ç”ŸåŽï¼Œx çš„æŒ‡é’ˆå¯¹è±¡çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ ç­”æ¡ˆï¼š13ï¼Œå› ä¸º x çš„æŒ‡é’ˆå¯¹è±¡ä¹Ÿæ˜¯ y çš„æŒ‡é’ˆå¯¹è±¡ï¼Œè¿™å°±æ˜¯æŒ‡é’ˆå…±äº«çš„å…¨éƒ¨ä½œç”¨â€”â€”å¤šä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚ Question 2æ€è€ƒä¸‹é¢è¿™å¼ å›¾â€¦ é€‰æ‹©ä¸­è¯­è¨€ï¼Œå†™ä»£ç åˆ›å»ºä¸Šé¢çš„æŒ‡é’ˆç»“æž„ã€‚ ç­”æ¡ˆï¼šåŸºæœ¬æ­¥éª¤æ˜¯â€¦ åˆ†é…ä¸¤ä¸ªæŒ‡é’ˆ åˆ†é…ä¸¤ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼Œç„¶åŽè®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä»–ä»¬ ä¿å­˜æ•°å­— 1 å’Œ 2 åˆ°è¿™ä¸¤ä¸ªæŒ‡é’ˆå¯¹è±¡ä¸­ èµ‹å€¼ç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚è¿™ä¼šä¸¢å¤±å¯¹ç¬¬ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™æ˜¯å¾ˆå°‘è§çš„ï¼Œä½†é¢˜ç›®å°±æ˜¯è¿™æ ·è¦æ±‚çš„ã€‚ C Code 123456789&#123; int* x; int* y; x = malloc(sizeof(int)); y = malloc(sizeof(int)); *x = 1; *y = 2; x = y;&#125; Java Code 123456789&#123; IntObj x; IntObj y; x = new IntObj(); y = new IntObj(); x.value = 1; y.value = 2; x = y;&#125; Question 3å‡è®¾ä½ æœ‰ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡å«ä½œ â€œNodeâ€ï¼ŒåŒ…å«ä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ª int å’Œä¸€ä¸ª æŒ‡å‘å¦ä¸€ä¸ª Node çš„æŒ‡é’ˆï¼ˆè¿™ä¸ªNode ç±»åž‹çš„çš„å®šä¹‰åœ¨ä¸‹é¢ï¼‰ã€‚ä½ å¯ä»¥ç”¨è¿™æ ·çš„æŒ‡é’ˆå¯¹è±¡ç±»åž‹åœ¨ä¸€ä¸ªç»“æž„ä¸­æž„é€ ä¸‰ä¸ª Node äº’ç›¸æŒ‡å‘çš„æŒ‡é’ˆå¯¹è±¡ï¼Œåƒè¿™æ ·â€¦ åå« x çš„æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ª Node æŒ‡é’ˆå¯¹è±¡ã€‚ç¬¬ä¸€ä¸ª Node åŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ª Node ï¼Œç¬¬äºŒä¸ªåŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸‰ä¸ª Node ï¼Œç¬¬ä¸‰ä¸ª Node åˆåŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ç¬¬ä¸€ä¸ª Nodeã€‚è¿™ä¸ªç»“æž„åªèƒ½ç”¨æˆ‘ä»¬å·²ç»è§è¿‡çš„æŒ‡é’ˆå¯¹è±¡åˆ†é…ï¼Œè§£å¼•ç”¨å’Œèµ‹å€¼çš„è§„åˆ™æ¥åˆ›å»ºã€‚ä½¿ç”¨ä¸‹é¢çš„å®šä¹‰ï¼Œæ¯ä¸€ä¸ª Node éƒ½åŒ…å«äº†ä¸€ä¸ª Integer åä¸º value ï¼Œå’Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåä¸º next çš„ Nodeã€‚ C Code 1234struct Node &#123; int value; struct Node* next; &#125;; Java Code 1234class Node &#123; public int value; public Node next;&#125;; å†™ä»£ç åˆ›å»ºä¸Šé¢å›¾ä¸­çš„ç»“æž„ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œä½ å¯ä»¥ä½¿ç”¨ x ä»¥å¤–çš„ä¸´æ—¶æŒ‡é’ˆæ¥è®¿é—®æŒ‡é’ˆå¯¹è±¡ä¸­çš„å­—æ®µâ€”â€”æ‰€ä»¥ -&gt;value è®¿é—® x æŒ‡é’ˆå¯¹è±¡ä¸­çš„ åä¸ºvalue å­—æ®µã€‚ Answer The basic steps areâ€¦ ç­”æ¡ˆ åŸºæœ¬æ­¥éª¤â€¦ åˆ†é…ä¸‰ä¸ªæŒ‡é’ˆï¼šx æŒ‡å‘ç¬¬ä¸€ä¸ª Nodeï¼Œç„¶åŽä¸´æ—¶æŒ‡é’ˆ y å’Œ z æŒ‡å‘å…¶ä»–ä¸¤ä¸ª Nodeã€‚ åˆ†é…ä¸‰ä¸ª Node æŒ‡é’ˆå¯¹è±¡å¹¶ä¿å­˜ä»–ä»¬çš„è§£å¼•ç”¨åˆ°ä¸‰ä¸ªæŒ‡é’ˆä¸­ã€‚ è§£å¼•ç”¨æ¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼Œä¿å­˜åˆé€‚çš„æ•°å€¼åˆ°å…¶æŒ‡é’ˆå¯¹è±¡çš„ value å­—æ®µä¸­ã€‚ è§£å¼•ç”¨æ¯ä¸ªæŒ‡é’ˆæ¥è®¿é—®å…¶æŒ‡é’ˆå¯¹è±¡ä¸­çš„ .next å­—æ®µï¼Œå¹¶ä½¿ç”¨æŒ‡é’ˆèµ‹å€¼æ¥è®¾ç½® .next å­—æ®µæŒ‡å‘åˆé€‚çš„ Nodeã€‚ C Code 123456789101112131415161718&#123; // Allocate the pointers struct Node* x; struct Node* y; struct Node* z; // Allocate the pointees x = malloc(sizeof(Node)); y = malloc(sizeof(Node)); z = malloc(sizeof(Node)); // Put the numbers in the pointees x-&gt;value = 1; y-&gt;value = 2; z-&gt;value = 3; // Put the pointers in the pointees x-&gt;next = y; y-&gt;next = z; z-&gt;next = x;&#125; Java Code 123456789101112131415161718&#123; // Allocate the pointers Node x; Node y; Node z; // Allocate the pointees x = new Node(); y = new Node(); z = new Node(); // Put the numbers in the pointees x.value = 1; y.value = 2; z.value = 3; // Put the pointers in the pointees x.next = y; y.next = z; z.next = x;&#125; è¿™é‡Œä»‹ç»çš„ Node ç»“æž„å®žé™…ä¸Šæ˜¯ä¸€ç§çœŸå®žçš„æ•°æ®ç±»åž‹ï¼Œè¢«ç”¨æ¥åˆ›å»º â€œé“¾è¡¨â€ æ•°æ®ç»“æž„ã€‚é“¾è¡¨æ˜¯æŒ‡é’ˆçš„å®žé™…åº”ç”¨çš„ç”¨é€”ï¼Œæ˜¯æå‡æŒ‡é’ˆæŠ€èƒ½çš„ç»ä½³é¢†åŸŸã€‚çœ‹Stanford CS Library ä¸­çš„Linked List Basics å’Œ Linked List Problems äº†è§£æ›´å¤šé“¾è¡¨çŸ¥è¯†ã€‚ Up to the CS Education Library Home]]></content>
      <categories>
        <category>Language</category>
        <category>C</category>
      </categories>
      <tags>
        <tag>Langauge</tag>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸è§é¢è¯•ç®—æ³•é¢˜]]></title>
    <url>%2F2018%2F11%2F15%2F%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ç®—æ³•å¸¸å¸¸è¢«æ‹¿æ¥è€ƒå¯Ÿç¨‹åºå‘˜çš„ç¼–ç¨‹åŠŸåº•ï¼Œå³ä¾¿æ˜¯å‰ç«¯ï¼Œæ‰¾å·¥ä½œçš„æ—¶å€™ä¸€äº›å¤§åŽ‚ä¹Ÿä¼šå‡ºå‡ é“ç®—æ³•é¢˜æ¥åˆéš¾ä¸€ä¸‹ä½ ï¼Œæ¯•ç«Ÿå¥½çš„å·¥ä½œèµ„æºç›¸å¯¹è¾ƒå°‘ï¼Œæƒ³è¦ä»Žä¸€ä¼—æ±‚èŒè€…ä¸­è„±é¢–è€Œå‡ºï¼ŒåªæŽŒæ¡äº†å¤§å®¶éƒ½ä¼šçš„æŠ€èƒ½æ˜¯ä¸å¤Ÿçš„ã€‚é¢è¯•å®˜è¦ä»Žåº”è˜è€…ä¸­æŒ‘å‡ºæœ€ä¼˜ç§€çš„äººï¼Œä¹Ÿå°±è¦ç”¨æ›´éš¾çš„é¢˜æ¥ç­›é€‰ã€‚æ‰€ä»¥å³ä½¿å‰ç«¯ç”¨åˆ°ç®—æ³•çš„åœ°æ–¹å±ˆæŒ‡å¯æ•°ï¼Œæƒ³è¦æå‡è‡ªå·±ï¼Œå¾—åˆ°æ›´å¥½çš„æœºä¼šï¼Œå°±å¾—åŽ»å­¦ä¹ æ›´åº•å±‚çš„çŸ¥è¯†ã€‚ æŒç»­æ›´æ–°ã€‚ã€‚ã€‚ å¤§æ•°ç›¸åŠ æè¿°å¯¹äºŽä¸¤ä¸ªè¶…è¿‡äº†JSå®‰å…¨èŒƒå›´çš„æ•´æ•°ï¼Œç”¨åŠ æ³•æ±‚å’Œå¹¶ä¸èƒ½å¾—åˆ°å‡†ç¡®çš„ç»“æžœï¼ŒçŽ°åœ¨å¸Œæœ›å†™ä¸€ç§æ–¹å¼èƒ½å¤Ÿå¯¹ä¸¤ä¸ªè¶…è¿‡äº†JSå®‰å…¨èŒƒå›´çš„æ•´æ•°æ±‚å’Œå¾—åˆ°å‡†ç¡®çš„ç»“æžœã€‚ æ€è·¯å°†å¤§æ•°ä¿å­˜åˆ°ä¸¤ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åŽæŒ‰ä½ä»Žåº•åˆ°é«˜ä¾æ¬¡ç´¯åŠ è¿›ä½ï¼Œå°†æ¯ä¸€ä½çš„è®¡ç®—ç»“æžœä¿å­˜åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­ï¼Œä¸€å¼€å§‹æ ¹æ®è‡ªå·±çš„ç†è§£å®žçŽ°äº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ•°ç»„è¿­ä»£éƒ½ç”¨çš„ç´¢å¼•ï¼Œå†™èµ·æ¥ç¹çï¼Œè€Œä¸”æžå…¶å®¹æ˜“å‡ºé”™ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627function addbig(a,b)&#123; let arrA = Array.from(a+â€œâ€); let arrB = Array.from(b+â€œâ€); let la = arrA.length; let lb = arrB.length; let lm = Math.max(la,lb); let delta = 0; let result = []; for(var i = 0;i&lt;lm;i++)&#123; var a = getItem(arrA,i); var b = getItem(arrB,i); var sum = a + b + delta; result[lm-1-i] = sum&lt;10?sum:sum-10; delta = sum&lt;10?0:1; &#125; if(delta&gt;0)&#123; result.unshift(1); &#125; return Number.parseInt(result.join(''));&#125;function getItem(arr,index)&#123; let n = arr.length; if(index &lt; n)&#123; return Number.parseInt(arr[n-1-index]) &#125; return 0;&#125; åŽæ¥ä½¿ç”¨ JavaScript Array åŽŸç”ŸæŽ¥å£æ¥ä»£æ›¿ä¸€äº›å¾ªçŽ¯è¿­ä»£ï¼Œç”¨ + æ“ä½œç¬¦ä»£æ›¿parseIntçš„ç±»åž‹è½¬æ¢ï¼Œå·§ç”¨ / å’Œ % è¿ç®—ç¬¦æ¥å–æ•´å’Œæ±‚ä½™ ï¼Œä¼˜åŒ–åŽçš„ä»£ç åªå‰©ä¸åˆ°äºŒåè¡Œï¼Œç®€æ´æ¸…æ™° 1234567891011121314151617function addbig(a,b)&#123; let arrA = Array.from(a.toString()); let arrB = Array.from(b.toString()); let i = Math.max(arrA.length,arrB.length); let delta = 0; let result = []; while(i&gt;0)&#123; var sum = (+arrA.pop() || 0) + (+arrB.pop()||0) + delta; result.unshift(sum % 10); delta = parseInt(sum/10); i--; &#125; if(delta)&#123; result.unshift(delta); &#125; return +result.join('');&#125; å†æ¬¡ä¼˜åŒ–ï¼Œå°†å–ä¸¤ä¸ªæ•°å€¼å­—ç¬¦ä¸²ä¸­æœ€å¤§é•¿åº¦å˜æˆå–æœ€å°é•¿åº¦ï¼Œå¯ä»¥å‡å°‘éåŽ†æ¬¡æ•° 1234567891011121314function addbig(a,b)&#123; let arrA = Array.from(a.toString()); let arrB = Array.from(b.toString()); let i = Math.min(arrA.length,arrB.length); let delta = 0; let result = []; while(i--)&#123; var sum = (+arrA.pop() || 0) + (+arrB.pop()||0) + delta; result.unshift(sum % 10); delta = parseInt(sum/10); &#125; result.unshift(+arrA.join('') || +arrB.join('')+delta); return +result.join('');&#125;]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†è§£inlineå…ƒç´ çš„CSSç›’æ¨¡åž‹]]></title>
    <url>%2F2018%2F11%2F14%2F%E7%90%86%E8%A7%A3inline%E5%85%83%E7%B4%A0%E7%9A%84CSS%E7%9B%92%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šUnderstanding the CSS box model for inline elements â€‹ é¡µé¢ä¸Šçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½ä¼šè¢«æµè§ˆå™¨æ¸²æŸ“æˆä¸€ä¸ªä¸ªçš„çŸ©å½¢çš„ç›’å­ã€‚box modelè§£é‡Šäº†å…ƒç´ çš„ content, padding, border, å’Œ margin æ˜¯å¦‚ä½•å†³å®šå…ƒç´ å æ®çš„ç©ºé—´ä»¥åŠä¸Žé¡µé¢ä¸Šå…¶ä»–å…ƒç´ ä¹‹é—´çš„å…³ç³»ã€‚ â€‹ é¡µé¢å…ƒç´ å›  display å±žæ€§è®¾ç½®ä¸åŒå¯èƒ½å‡ºçŽ°ä¸¤ç§ç±»åž‹ï¼šblock boxï¼ˆå—çº§å…ƒç´ ï¼‰æˆ–è€… inline boxï¼ˆå†…è”å…ƒç´ ï¼‰ã€‚ç›’æ¨¡åž‹å¯¹è¿™ä¸¤ç§ç±»åž‹çš„å¤„ç†æ–¹å¼ä¸åŒã€‚æœ¬æ–‡å°±èŠä¸€èŠç›’æ¨¡åž‹å¦‚ä½•ä½œç”¨äºŽ inline boxã€‚ Inline box å’Œ line boxinline box æ¨ªå‘åˆ†å¸ƒäºŽ line box ä¸­ï¼š å¦‚æžœæ°´å¹³æ–¹å‘æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥å°†æ‰€æœ‰å…ƒç´ åœ¨ä¸€è¡Œå†…æ˜¾ç¤ºï¼Œæµè§ˆå™¨å°±ä¼šåœ¨å½“å‰è¡Œçš„åŽé¢åˆ›å»ºä¸€ä¸ªæ–°çš„ line boxã€‚ä¸€ä¸ª inline å…ƒç´ å°±æœ‰å¯èƒ½è¢«æ‹†åˆ†åˆ°ä¸¤è¡Œä¸­ï¼š inline box çš„ç›’æ¨¡åž‹â€‹ å½“ inline boxè¢«æ‹†åˆ†æˆå¤šè¡Œçš„æ—¶å€™ï¼Œå®ƒåœ¨é€»è¾‘ä¸Šä»ç„¶æ˜¯ä¸€ä¸ªç›’å­ã€‚è¿™å°±æ˜¯è¯´ï¼Œä»»ä½•æ°´å¹³çš„ padding, border, æˆ–è€… margin çš„è®¾ç½®åªä¼šä½œç”¨äºŽå…ƒç´ å æ®çš„ç¬¬ä¸€è¡Œçš„èµ·å§‹ä½ç½®å’Œæœ€åŽä¸€è¡Œçš„æœ«å°¾ã€‚ â€‹ ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æˆªå›¾ä¸­ï¼Œé«˜äº®çš„ span è¢«åˆ†æˆäº† 2 è¡Œã€‚æ°´å¹³çš„ padding æ²¡æœ‰ä½œç”¨äºŽç¬¬ä¸€è¡Œçš„æœ«å°¾ï¼Œä¹Ÿæ²¡æœ‰ä½œç”¨äºŽç¬¬äºŒè¡Œçš„å¼€å¤´ã€‚ â€‹ å¯¹ inline å…ƒç´ è®¾ç½®çš„ä»»ä½•åž‚ç›´çš„ padding, border, æˆ–è€… margin éƒ½ä¸èƒ½å°†å…ƒç´ ä¸Šä¸‹çš„ç›¸é‚»å…ƒç´ æŽ¨å¼€ï¼š â€‹ ç„¶è€Œï¼Œè¯·æ³¨æ„åž‚ç›´çš„ padding å’Œ border ä»ç„¶åº”ç”¨äº†ï¼Œpadding ä¹Ÿå°†border æŽ¨å¼€äº†ï¼š å¦‚æžœä½ éœ€è¦è°ƒæ•´è¡Œè·ï¼Œè¦ç”¨ line-height ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>HTML</tag>
        <tag>Inline</tag>
        <tag>Box</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå¯¹è±¡æ‹·è´çš„è¯¯åŒº]]></title>
    <url>%2F2018%2F11%2F14%2FJavaScript%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D%E7%9A%84%E8%AF%AF%E5%8C%BA%2F</url>
    <content type="text"><![CDATA[JavaScript å¯¹è±¡æ‹·è´æš—è—é™·é˜±ï¼ŒJavaScript æä¾›äº†è®¸å¤šç§æ–¹å¼æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼Œä½†éžéƒ½æ˜¯æ·±æ‹·è´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æµ…æ‹·è´æ˜¯é»˜è®¤è¡Œä¸ºã€‚ æ·±æ‹·è´ VS æµ…æ‹·è´â€‹ æµ…æ‹·è´èƒ½å¤ŸæˆåŠŸåœ°å¤åˆ¶æ•°å­—å’Œå­—ç¬¦ä¸²ç­‰åŽŸå§‹å€¼ ï¼ˆåŸºæœ¬ç±»åž‹ï¼‰ï¼Œä½†æ˜¯ä¸ä¼šé€’å½’åœ°å¤åˆ¶ä»»ä½•å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œæ˜¯å¤åˆ¶å¾—åˆ°çš„æ–°å¯¹è±¡å°†ä¼šå¼•ç”¨ä¹‹å‰çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚ â€‹ å¦‚æžœä¸€ä¸ªå¯¹è±¡ A å¼•ç”¨äº†å¦ä¸€ä¸ªå¯¹è±¡ B ï¼Œå½“å¯¹å¯¹è±¡ A æ‰§è¡Œ æµ…æ‹·è´ çš„æ—¶å€™ï¼Œä½ åªæ˜¯æ‹·è´äº†å¯¹ B çš„å¼•ç”¨ï¼Œå¤åˆ¶å¾—åˆ°çš„æ–°å¯¹è±¡ä»ç„¶å¼•ç”¨äº† B ã€‚ â€‹ å½“æ‰§è¡Œæ·±æ‹·è´çš„æ—¶å€™ï¼Œå¤–éƒ¨çš„ B å¯¹è±¡ä¹Ÿä¼šä¸€å¹¶æ‹·è´ï¼Œæ‰€ä»¥æ–°å¤åˆ¶å¾—åˆ°çš„å¯¹è±¡æ˜¯å®Œå…¨ç‹¬ç«‹äºŽ B å¯¹è±¡çš„ã€‚ æœ€ç®€å•çš„é€‰æ‹©ï¼šä½¿ç”¨ Lodashå»ºè®®å·¥ä½œä¸­æ‰§è¡Œæ·±æ‹·è´æ—¶æœ€å¥½ç”¨ä¸€äº›ç»è¿‡ä¸¥æ ¼æµ‹è¯•çš„ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œæ¯”å¦‚å¾ˆå—æ¬¢è¿Žçš„ä¸€ç›´åœ¨ç»´æŠ¤çš„ï¼šLodashã€‚ Lodash æä¾›äº†éžå¸¸æ–¹ä¾¿çš„ clone å’Œ deepclone å‡½æ•°æ¥å®žçŽ°æµ…æ‹·è´å’Œæ·±æ‹·è´ã€‚ Lodash æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç‰¹æ€§ï¼šä½ å¯ä»¥åªå¯¼å…¥å•ä¸ªå‡½æ•°æ¥é™ä½Žä½ çš„é¡¹ç›®ä¾èµ–æ•°é‡ã€‚ åœ¨ Node.js ä¸­ï¼š 12const clone = require('lodash.clone')const clonedeep = require('lodash.clonedeep') è¿™é‡Œæ˜¯ä¸¤ä¸ªå‡½æ•°çš„ä½¿ç”¨ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738const clone = require('lodash.clone')const clonedeep = require('lodash.clonedeep')const externalObject = &#123; color: 'red'&#125;const original = &#123; a: new Date(), b: NaN, c: new Function(), d: undefined, e: function() &#123;&#125;, f: Number, g: false, h: Infinity, i: externalObject&#125;const cloned = clone(original)externalObject.color = 'blue'console.info('â¬‡ï¸ shallow cloning ðŸŒˆ')console.info( 'âœï¸ Notice the i.color property we changed on original is also changed in the shallow copy')console.log(original)console.log(cloned)const deepcloned = clonedeep(original)externalObject.color = 'yellow'console.log('')console.info('â¬‡ï¸ deep cloning ðŸŒˆ')console.info('âœï¸ Notice the i.color property does not propagate any more')console.log(original)console.log(deepcloned) In this simple example we first create a shallow copy, and edit the i.color property, which propagates to the copied object. In the deep clone, this does not happen. See this live in Glitch. Object.Assign()Object.assign() æ‰§è¡Œæµ…æ‹·è´ï¼Œä¸æ˜¯æ·±æ‹·è´. 1const copied = Object.assign(&#123;&#125;, original) Being a shallow copy, values are cloned, and objects references are copied (not the objects themselves), so if you edit an object property in the original object, thatâ€™s modified also in the copied object, since the referenced inner object is the same: æµ…æ‹·è´åªä¼šå¤åˆ¶å€¼ç±»åž‹å’Œå¯¹è±¡ç±»åž‹çš„å¼•ç”¨ï¼ˆè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼‰ã€‚æ‰€ä»¥å¦‚æžœä½ ç¼–è¾‘äº†åŽŸå§‹å¯¹è±¡çš„å±žæ€§ï¼Œå¤åˆ¶å¯¹è±¡ä¸­çš„è¿™ä¸ªå±žæ€§ä¹Ÿä¼šè¢«ä¿®æ”¹ï¼Œå› ä¸ºåŽŸå§‹å¯¹è±¡å’Œå¤åˆ¶å¯¹è±¡å†…éƒ¨çš„å¼•ç”¨æŒ‡å‘æ˜¯ç›¸åŒçš„ï¼š 12345678910111213const original = &#123; name: 'Fiesta', car: &#123; color: 'blue' &#125;&#125;const copied = Object.assign(&#123;&#125;, original)original.name = 'Focus'original.car.color = 'yellow'copied.name //Fiestacopied.car.color //yellow ä½¿ç”¨å¯¹è±¡å±•å¼€è¡¨è¾¾å¼è¿™ä¸ª ES6/ES2015 ç‰¹æ€§æä¾›äº†éžå¸¸æ–¹ä¾¿çš„æµ…æ‹·è´æ–¹æ³•ï¼Œå®ƒå’ŒObject.assign() åšçš„äº‹æƒ…ç›¸åŒã€‚ 1const copied = &#123; ...original &#125; é”™è¯¯çš„æ–¹å¼ä½¿ç”¨ Object.create() ä¸æŽ¨èè¿™æ ·å®žçŽ°å¯¹è±¡æ‹·è´ 1const copied = Object.create(original) â€‹ è¿™æ˜¯é”™è¯¯çš„åšæ³•ï¼Œå®ƒå¹¶æ²¡æœ‰åšä»»ä½•æ‹·è´çš„æ“ä½œã€‚ â€‹ ç›¸å, original å¯¹è±¡ä¼šè¢«å½“æˆ copied å¯¹è±¡çš„ prototype ã€‚ â€‹ è¡¨é¢ä¸Šå®ƒå¯ä»¥æˆåŠŸï¼Œä½†æ˜¯å®žé™…ä¸Šæ²¡æœ‰ï¼š 12345678const original = &#123; name: 'Fiesta'&#125;const copied = Object.create(original)copied.name //Fiestaoriginal.hasOwnProperty('name') //truecopied.hasOwnProperty('name') //false JSON åºåˆ—åŒ– ä¹Ÿä¸æŽ¨è â€‹ ç½‘ä¸Šæœ‰ä¸€äº›å»ºè®®æ˜¯å°†å¯¹è±¡è½¬æ¢æˆ JSONï¼Œç„¶åŽå†ä»Ž JSON åå‘ç”Ÿæˆå¯¹è±¡ 1const cloned = JSON.parse(JSON.stringify(original)) â€‹ ä½†æ˜¯è¿™æ ·åšå¯èƒ½æœ‰é¢„æ–™ä¸åˆ°çš„åŽæžœï¼š â€‹ è¿™æ ·åšä½ å¯èƒ½ä¼šå¤±åŽ»ä»»ä½•åœ¨ JSON ä¸­æ‰¾ä¸åˆ°å¯¹ç­‰ç±»åž‹çš„ JavaScript å±žæ€§ï¼Œæ¯”å¦‚ Function æˆ–è€… Infinityã€‚ ä»»ä½•èµ‹å€¼ä¸º undefined çš„å±žæ€§ä¹Ÿä¼šç›´æŽ¥è¢« JSON.stringify å¿½ç•¥æŽ‰ï¼Œå¯¼è‡´è¿™äº›å±žæ€§åœ¨å¤åˆ¶å¯¹è±¡ä¸­æ¶ˆå¤±äº†ã€‚ â€‹ æ­¤å¤–ï¼Œä¹Ÿæœ‰ä¸€äº›å¯¹è±¡åªæ˜¯ç®€å•åœ°è½¬æˆå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ Date å¯¹è±¡ï¼ˆåŒæ ·ï¼Œä¸è€ƒè™‘æ—¶åŒºï¼Œé»˜è®¤ä¸ºUTCï¼‰ï¼ŒSetï¼ŒMapä»¥åŠè®¸å¤šå…¶ä»–ç±»åž‹ï¼š 123456789101112JSON.parse( JSON.stringify(&#123; a: new Date(), b: NaN, c: new Function(), d: undefined, e: function() &#123;&#125;, f: Number, g: false, h: Infinity &#125;)) è¿™ç§æ–¹å¼åªé€‚ç”¨äºŽå¯¹è±¡ä¸åŒ…å«ä»»ä½•å†…éƒ¨å¯¹è±¡å’Œå‡½æ•°ï¼Œåªæœ‰å€¼ç±»åž‹çš„æƒ…å†µã€‚ ä¸‹é¢æ˜¯ç”¨åŽŸç”Ÿ JS æ‰‹åŠ¨å®žçŽ°çš„ä¸¤ç§æ·±æ‹·è´çš„æ–¹å¼ 1234567891011121314151617181920var array = [ &#123; number: 1 &#125;, &#123; number: 2 &#125;, &#123; number: 3 &#125;];function copy (obj) &#123; var newobj = obj.constructor === Array ? [] : &#123;&#125;; if(typeof obj !== 'object')&#123; return; &#125; for(var i in obj)&#123; newobj[i] = typeof obj[i] === 'object' ? copy(obj[i]) : obj[i]; &#125; return newobj&#125;var copyArray = copy(array)copyArray[0].number = 100;console.log(array); // [&#123;number: 1&#125;, &#123; number: 2 &#125;, &#123; number: 3 &#125;]console.log(copyArray); // [&#123;number: 100&#125;, &#123; number: 2 &#125;, &#123; number: 3 &#125;] 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253(function($) &#123; 'use strict'; var types = 'Array Object String Date RegExp Function Boolean Number Null Undefined'.split(' '); function type() &#123; return Object.prototype.toString.call(this).slice(8, -1); &#125; for (var i = types.length; i--;) &#123; $['is' + types[i]] = (function(self) &#123; return function(elem) &#123; return type.call(elem) === self; &#125;; &#125;)(types[i]); &#125; return $;&#125;)(window.$ || (window.$ = &#123;&#125;)); //ç±»åž‹åˆ¤æ–­function copy(obj, deep) &#123; if (obj === null || (typeof obj !== "object" &amp;&amp; !$.isFunction(obj))) &#123; return obj; &#125; if ($.isFunction(obj)) &#123; return new Function("return " + obj.toString())(); &#125; else &#123; var name, target = $.isArray(obj) ? [] : &#123;&#125;, value; for (name in obj) &#123; value = obj[name]; if (value === obj) &#123; continue; &#125; if (deep) &#123; if ($.isArray(value) || $.isObject(value)) &#123; target[name] = copy(value, deep); &#125; else if ($.isFunction(value)) &#123; target[name] = new Function("return " + value.toString())(); &#125; else &#123; target[name] = value; &#125; &#125; else &#123; target[name] = value; &#125; &#125; return target; &#125; &#125;]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼„æ¸… ECMAScript 6 æ¨¡å—]]></title>
    <url>%2F2018%2F11%2F13%2F%E5%BC%84%E6%B8%85-ECMAScript-6-%E6%A8%A1%E5%9D%97%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡: ECMAScript 6 modules: the final syntax 1. JavaScript çš„æ¨¡å—ç³»ç»ŸçŽ°çŠ¶JavaScript æ²¡æœ‰å†…å»ºçš„æ¨¡å—ç³»ç»Ÿï¼Œä½†æ˜¯ç¤¾åŒºåˆ›é€ äº†å¾ˆå¤šç»™åŠ›çš„è§£å†³æ–¹æ¡ˆã€‚ ä¸¤ç§æœ€é‡è¦ï¼ˆä¸å¹¸çš„æ˜¯äº’ä¸å…¼å®¹ï¼‰çš„æ ‡å‡†æ˜¯: CommonJS Modules: è¿™ä¸ªæ ‡å‡†çš„ä¸»è¦ å®žçŽ°æ˜¯åœ¨Node.jsä¸­ï¼ˆNode.js æ¨¡å—æœ‰ä¸€äº›ç‰¹æ€§é¢†å…ˆäºŽ CommonJS)ã€‚ ç‰¹æ€§ï¼š è¯­æ³•ç´§å‡‘ è®¾è®¡ç”¨äºŽåŒæ­¥åŠ è½½ ä¸»è¦åº”ç”¨äºŽæœåŠ¡å™¨ç«¯ Asynchronous Module Definition (AMD): è¿™ä¸ªæ ‡å‡†çš„ä¸»è¦å®žçŽ°æ˜¯ RequireJSã€‚ ç‰¹æ€§ï¼š è¯­æ³•ç¨å¾®å¤æ‚ï¼Œä½¿AMDèƒ½å¤Ÿåœ¨æ²¡æœ‰ eval()ï¼ˆæˆ–è€…æ— é¡»ç¼–è¯‘ï¼‰çš„æƒ…å†µä¸‹å·¥ä½œã€‚ è®¾è®¡ç”¨äºŽå¼‚æ­¥åŠ è½½ ä¸»è¦ç”¨äºŽæµè§ˆå™¨ç«¯ ä¸Šé¢åªæ˜¯å¯¹å½“å‰çŠ¶å†µçš„ç®€å•ä»‹ç»ï¼Œå¦‚æžœæƒ³è¦è¯¦ç»†äº†è§£ï¼Œå¯ä»¥çœ‹çœ‹ Addy Osmani å†™çš„ â€œWriting Modular JavaScript With AMD, CommonJS &amp; ES Harmonyâ€ 2. ECMAScript 6 æ¨¡å—ECMAScript 6ï¼ˆåŽé¢ç®€ç§°ES6ï¼‰ æ¨¡å—çš„è®¾è®¡ç›®æ ‡æ˜¯è¦åˆ›é€ ä¸€ç§è®© CommonJS å’Œ AMD çš„ç”¨æˆ·éƒ½èƒ½æ„‰å¿«ä½¿ç”¨çš„æ¨¡å—ç³»ç»Ÿï¼š ç±»ä¼¼ CommonJS ï¼ŒES6 æ¨¡å—ä¹Ÿæœ‰ç´§å‡‘çš„è¯­æ³•ï¼Œåå‘äºŽå•ä¸ªå¯¼å‡ºï¼Œæ”¯æŒå¾ªçŽ¯ä¾èµ–ã€‚ ç±»ä¼¼ AMDï¼ŒES6 æ¨¡å—ç›´æŽ¥æ”¯æŒå¼‚æ­¥åŠ è½½å’Œå¯é…ç½®æ¨¡å—åŠ è½½ã€‚ å†…ç½®äºŽè¯­è¨€ä¸­ï¼Œä½¿å¾— ES6 æ¨¡å—è¶…è¶Š CommonJS å’Œ AMD ï¼ˆåŽé¢ä¼šè¯¦ç»†è¯´æ˜Žï¼‰: è¯­æ³•ç”šè‡³æ¯” CommonJS æ›´åŠ ç´§å‡‘ ç»“æž„å¯ä»¥é™æ€åˆ†æžï¼ˆç”¨äºŽé™æ€æ£€æŸ¥ï¼Œä¼˜åŒ–ç­‰ï¼‰ æ”¯æŒå¾ªçŽ¯å¼•ç”¨è¿™ä¸€ç‚¹è¦ä¼˜äºŽ CommonJS ES6 æ¨¡å—åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†: å£°æ˜Žè¯­æ³•ï¼ˆç”¨äºŽå¯¼å…¥å’Œå¯¼å‡ºï¼‰ å¯ç¼–ç¨‹çš„åŠ è½½å™¨ APIï¼šé…ç½®æ¨¡å—çš„åŠ è½½æ–¹å¼ä»¥åŠæŒ‰æ¡ä»¶æ¨¡å—åŠ è½½ 3. ES6 æ¨¡å—è¯­æ³•æ¦‚è¿°æœ‰ä¸¤ç§å¯¼å‡ºæ–¹å¼ï¼šå‘½åå¯¼å‡ºï¼ˆä¸€å¯¹å¤šæ¨¡å—ï¼‰å’Œé»˜è®¤å¯¼å‡ºï¼ˆä¸€å¯¹ä¸€æ¨¡å—ï¼‰ã€‚ 3.1 å‘½åå¯¼å‡º ï¼ˆä¸€å¯¹å¤šæ¨¡å—ï¼‰ä¸€ä¸ªæ¨¡å—å¯ä»¥é€šè¿‡åœ¨å£°æ˜Žå‰æ·»åŠ å…³é”®å­— export æ¥å¯¼å‡ºå¤šä¸ªä¸œè¥¿ã€‚è¿™äº›å¯¼å‡ºæŒ‰åç§°åŒºåˆ†ï¼Œæˆä¸ºå‘½åå¯¼å‡ºã€‚ 12345678//------ lib.js ------export const sqrt = Math.sqrt;export function square(x) &#123; return x * x;&#125;export function diag(x, y) &#123; return sqrt(square(x) + square(y));&#125; 1234//------ main.js ------import &#123; square, diag &#125; from 'lib';console.log(square(11)); // 121console.log(diag(4, 3)); // 5 ä¹Ÿæœ‰å…¶ä»–çš„æ–¹å¼å£°æ˜Žå‘½åå¯¼å‡ºï¼ˆåŽé¢è¯¦ç»†ä»‹ç»ï¼‰ï¼Œä½†æ˜¯æˆ‘å‘çŽ°è¿™ä¸ªéžå¸¸æ–¹ä¾¿ï¼šç›´æŽ¥åœ¨jsæ–‡ä»¶é‡Œå†™å¥½ä»£ç ï¼Œç„¶åŽåœ¨ä½ æƒ³å¯¼å‡ºçš„æ¯ä¸€ä¸ªä¸œè¥¿çš„å®šä¹‰å‰åŠ ä¸Šä¸€ä¸ª export å…³é”®å­—ã€‚ ä½ ä¹Ÿå¯ä»¥å¼•å…¥æ•´ä¸ªæ¨¡å—ï¼Œç„¶åŽé€šè¿‡å±žæ€§è¡¨è¾¾å¼å¼•ç”¨å…¶å‘½åå¯¼å‡ºï¼š 1234//------ main.js ------import * as lib from 'lib';console.log(lib.square(11)); // 121console.log(lib.diag(4, 3)); // 5 CommonJS è¯­æ³•ä¸­ç›¸åŒçš„ä»£ç ï¼šæ›¾ç»æœ‰æ®µæ—¶é—´ï¼Œæˆ‘å°è¯•è¿‡ç”¨ä¸€äº›èªæ˜Žçš„åŠžæ³•ï¼Œæ¥å‡å°‘ Node.js ä¸­æ¨¡å—å¯¼å‡ºçš„å†—ä½™ã€‚çŽ°åœ¨æˆ‘æ›´å–œæ¬¢ä¸‹é¢çš„ç®€å•ä½†ç•¥æ˜¾å†—é•¿çš„é£Žæ ¼: 12345678910111213//------ lib.js ------var sqrt = Math.sqrt;function square(x) &#123; return x * x;&#125;function diag(x, y) &#123; return sqrt(square(x) + square(y));&#125;module.exports = &#123; sqrt: sqrt, square: square, diag: diag,&#125;; 12345//------ main.js ------var square = require('lib').square;var diag = require('lib').diag;console.log(square(11)); // 121console.log(diag(4, 3)); // 5 3.2 é»˜è®¤å¯¼å‡º ï¼ˆä¸€å¯¹ä¸€æ¨¡å—ï¼‰å¯¼å‡ºå•ä¸€å€¼çš„æ¨¡å—åœ¨ Node.js ç¤¾åŒºå¤§å—æ¬¢è¿Žã€‚ä½†æ˜¯åœ¨å‰ç«¯å¼€å‘ä¸­ä¹Ÿå¾ˆå¸¸è§ï¼Œåœ¨ä¸€äº›æœ‰æž„é€ å‡½æ•°/ç±»çš„æ¨¡åž‹ï¼Œä¸”æ¯ä¸ªæ¨¡åž‹å¯¹åº”ä¸€ä¸ªæ¨¡å—çš„åœ°æ–¹ã€‚ä¸€ä¸ª ES6 æ¨¡å—å¯ä»¥é€‰æ‹©é»˜è®¤å¯¼å‡ºï¼Œä½œä¸ºæœ€é‡è¦çš„å¯¼å‡ºå€¼ã€‚é»˜è®¤å¯¼å‡ºç‰¹åˆ«æ˜“äºŽå¯¼å…¥ã€‚ ä¸‹é¢çš„ ES6 æ¨¡å—é»˜è®¤å¯¼å‡ºæ˜¯ä¸€ä¸ªå‡½æ•°ï¼š 123456//------ myFunc.js ------export default function () &#123; ... &#125;;//------ main1.js ------import myFunc from 'myFunc';myFunc(); ä¸€ä¸ªé»˜è®¤å¯¼å‡ºæ˜¯ä¸€ä¸ªç±»çš„ ES6 æ¨¡å—å¦‚ä¸‹: 123456//------ MyClass.js ------export default class &#123; ... &#125;;//------ main2.js ------import MyClass from 'MyClass';let inst = new MyClass(); æ³¨æ„ï¼šé»˜è®¤å¯¼å‡ºçš„æ“ä½œå¯¹è±¡æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼è¯­å¥ï¼Œé€šå¸¸æ²¡æœ‰åç§°ï¼›ç„¶è€Œï¼Œå®ƒå¯ä»¥é€šè¿‡æ¨¡å—çš„åç§°ï¼ˆæ¨¡å—çš„æ–‡ä»¶åï¼‰æ¥è¯†åˆ«ã€‚ 3.3 åœ¨ä¸€ä¸ªæ¨¡å—ä¸­åŒæ—¶ä½¿ç”¨å‘½åå¯¼å‡ºå’Œé»˜è®¤å¯¼å‡ºä¸‹é¢çš„æ¨¡å¼åœ¨ JavaScript ä¸­å¾ˆå¸¸è§ï¼šä¸€ä¸ªç±»åº“æ˜¯å•ä¸€çš„å‡½æ•°ï¼Œä½†æ˜¯é€šè¿‡æ”¹å‡½æ•°çš„å±žæ€§æä¾›äº†é™„åŠ æœåŠ¡ã€‚jQuery å’Œ Underscores.js éƒ½æ˜¯è¿™ç§æ–¹å¼çš„ä¾‹å­ã€‚ä¸‹é¢æ˜¯å°† Underscore.js å†™æˆ CommonJS æ¨¡å—çš„è‰å›¾ï¼š 123456789//------ underscore.js ------var _ = function (obj) &#123; ...&#125;;var each = _.each = _.forEach = function (obj, iterator, context) &#123; ... &#125;;module.exports = _; 1234//------ main.js ------var _ = require('underscore');var each = _.each;... ä»Ž ES6 æ¥çœ‹ï¼Œå‡½æ•° _ æ˜¯é»˜è®¤å¯¼å‡ºï¼Œeach å’Œ forEach æ˜¯å‘½åå¯¼å‡ºã€‚äº‹å®žè¯æ˜Žï¼Œä½ å®žé™…ä¸Šå¯ä»¥åŒæ—¶ä½¿ç”¨å‘½åå¯¼å‡ºå’Œé»˜è®¤å¯¼å‡ºã€‚çœ‹çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼Œå‰é¢çš„ CommonJS æ¨¡å—ç”¨ ES6 æ¨¡å—çš„æ–¹å¼æ¥å†™ï¼š 12345678//------ underscore.js ------export default function (obj) &#123; ...&#125;;export function each(obj, iterator, context) &#123; ...&#125;export &#123; each as forEach &#125;; 123//------ main.js ------import _, &#123; each &#125; from 'underscore';... â€‹ æ³¨æ„ï¼ŒCommonJS çš„ç‰ˆæœ¬å’Œ ES6 çš„ç‰ˆæœ¬åªæ˜¯ç²—ç•¥çš„ç›¸ä¼¼ï¼ŒåŽè€…å…·æœ‰æ›´åŠ æ‰å¹³çš„ç»“æž„ï¼Œå‰è€…åˆ™æ˜¯åµŒå¥—çš„ã€‚æ›´åå‘å“ªç§é£Žæ ¼æ˜¯ä¸ªäººçš„å–œå¥½ï¼Œä½†æ˜¯æ‰å¹³é£Žæ ¼å…·æœ‰é™æ€æ£€æŸ¥çš„ä¼˜åŠ¿ï¼ˆä¸ºä»€ä¹ˆè¿™æ ·åšå¾ˆå¥½ï¼Œä¸‹é¢è§£é‡Šï¼‰ã€‚CommonJS é£Žæ ¼ä¼¼ä¹Žæ˜¯éƒ¨åˆ†å—åˆ°äº†å°†å¯¹è±¡ä½œä¸ºå‘½åç©ºé—´çš„éœ€æ±‚çš„é©±åŠ¨ï¼Œè¿™ç§éœ€æ±‚é€šå¸¸å¯ä»¥é€šè¿‡ ES6 æ¨¡å—å’Œå‘½åå¯¼å‡ºçš„æ–¹å¼æ¥å®žçŽ°ã€‚ é»˜è®¤å¯¼å‡ºåªæ˜¯å¦ä¸€ç§å½¢å¼çš„å‘½åå¯¼å‡ºâ€‹ é»˜è®¤å¯¼å‡ºå®žé™…ä¸Šæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‘½åä¸º default çš„å‘½åå¯¼å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„ä¸¤ç§è¡¨è¾¾æ˜¯ç­‰åŒçš„ï¼š 12import &#123; default as foo &#125; from 'lib';import foo from 'lib'; â€‹ ç±»ä¼¼çš„ï¼Œä¸‹é¢ä¸¤ä¸ªæ¨¡å—æœ‰ç›¸åŒçš„é»˜è®¤å¯¼å‡ºï¼š 123456//------ module1.js ------export default 123;//------ module2.js ------const D = 123;export &#123; D as default &#125;; æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å‘½åå¯¼å‡ºä½ å¯èƒ½æƒ³çŸ¥é“ â€” å¦‚æžœæˆ‘ä»¬å¯ä»¥ç®€å•åœ°é»˜è®¤å¯¼å‡ºå¯¹è±¡ï¼ˆåƒ CommonJS ä¸€æ ·ï¼‰ï¼Œä¸ºä»€ä¹ˆéœ€è¦å‘½åå¯¼å‡ºï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼Œä½ ä¸èƒ½é€šè¿‡å¯¹è±¡æ¥å¼ºè¡Œä½¿ç”¨é™æ€ç»“æž„ï¼Œè¿™ä¼šå¤±åŽ»æ‰€æœ‰ç›¸å…³çš„æœ‰ç‚¹ï¼ˆä¸‹ä¸€èŠ‚ä¸­è§£é‡Šï¼‰ã€‚ 4. è®¾è®¡ç›®æ ‡å¦‚æžœä½ æƒ³å¼„æ‡‚ ES6 æ¨¡å—ï¼Œç†è§£æ˜¯ä»€ä¹ˆæ ·çš„ç›®æ ‡å½±å“äº†è®¾è®¡å¯èƒ½ä¼šå¸®åˆ°ä½ ï¼Œä¸»è¦çš„ç›®æ ‡å°±æ˜¯ï¼š é»˜è®¤å¯¼å‡ºæ˜¯æœ‰åˆ©çš„ é™æ€æ¨¡å—ç»“æž„ åŒæ—¶æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥åŠ è½½ æ”¯æŒæ¨¡å—é—´å¾ªçŽ¯å¼•ç”¨ ä¸‹é¢çš„å°èŠ‚è§£é‡Šè¿™äº›ç›®æ ‡ã€‚ 4.1 é»˜è®¤å¯¼å‡ºæ˜¯æœ‰åˆ©çš„æ¨¡å—è¯­æ³•æš—ç¤ºäº†å°†é»˜è®¤å¯¼å‡ºå½“ä½œæ¨¡å—å¯èƒ½çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªï¼Œä½†æ˜¯å¦‚æžœä½ è€ƒè™‘åˆ°å…¶ä¸­ä¸€ä¸ªä¸»è¦ç›®æ ‡å°±æ˜¯è®©é»˜è®¤å¯¼å‡ºå°½å¯èƒ½æ–¹ä¾¿çš„è¯å°±èƒ½è¯´çš„é€šäº†ã€‚å¼•ç”¨ David Herman: ECMAScript 6 favors the single/default export style, and gives the sweetest syntax to importing the default. Importing named exports can and even should be slightly less concise. 4.2 é™æ€æ¨¡å—ç»“æž„â€‹ åœ¨çŽ°ä»£ JavaScript æ¨¡å—ç³»ç»Ÿä¸­ï¼Œä½ å¿…é¡»è¿è¡Œä»£ç æ‰èƒ½çŸ¥é“å¯¼å…¥å’Œå¯¼å‡ºçš„æ˜¯ä»€ä¹ˆã€‚è¿™å°±æ˜¯ ES6 æ‰“ç ´äº†è¿™äº›ç³»ç»Ÿçš„ä¸»è¦åŽŸå› ï¼šé€šè¿‡å°†æ¨¡å—ç³»ç»Ÿå»ºç«‹åˆ°è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥åœ¨è¯­æ³•ä¸Šå¼ºåˆ¶æ‰§è¡Œé™æ€æ¨¡å—ç»“æž„ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™æ„å‘³ç€ä»€ä¹ˆï¼Œå†çœ‹çœ‹å®ƒå¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„ï¼š â€‹ æ¨¡å—ç»“æž„æ˜¯é™æ€çš„æ„å‘³ç€ä½ å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼ˆé™æ€çš„ï¼‰å†³å®šå¯¼å…¥å’Œå¯¼å‡º â€” ä½ åªéœ€è¦çœ‹çœ‹æºç ï¼Œä¸å¿…æ‰§è¡Œå®ƒã€‚ä¸‹é¢ä¸ºä»€ä¹ˆ CommonJS ä¸å¯èƒ½åšåˆ°é™æ€æ£€æŸ¥çš„ç¤ºä¾‹ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½ å¿…é¡»è¿è¡Œä»£ç æ‰èƒ½çŸ¥é“å®ƒå¯¼å…¥äº†ä»€ä¹ˆï¼š 123456var mylib;if (Math.random()) &#123; mylib = require('foo');&#125; else &#123; mylib = require('bar');&#125; ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä½ å¿…é¡»è¿è¡Œä»£ç æ‰èƒ½çŸ¥é“å¯¼å‡ºäº†ä»€ä¹ˆï¼š 123if (Math.random()) &#123; exports.baz = ...;&#125; â€‹ ES6 æä¾›æ›´å°‘çš„çµæ´»æ€§ï¼Œå®ƒä¼šè¿«ä½¿ä½ ä¿æŒé™æ€ã€‚ä½ ä¹Ÿä¼šå› æ­¤å—ç›Š[2]ï¼Œä¸‹é¢ä»‹ç»ã€‚ å¥½å¤„ 1: æ›´å¿«é€Ÿçš„æŸ¥æ‰¾â€‹ å¦‚æžœä½ ç”¨ CommonJS require ä¸€ä¸ªç±»åº“ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª object ï¼š 12var lib = require('lib');lib.someFunc(); // property lookup â€‹ å› æ­¤ï¼Œé€šè¿‡ lib.someFunc è®¿é—®ä¸€ä¸ªå‘½åå¯¼å‡ºæ„å‘³ç€ä½ å¿…é¡»æ‰§è¡Œå±žæ€§æŸ¥è¯¢ï¼Œè¿™æ˜¯å¾ˆæ…¢çš„ï¼Œå› ä¸ºå®ƒæ˜¯åŠ¨æ€çš„ã€‚ â€‹ ç›¸åï¼Œå¦‚æžœä½ ç”¨ ES6 æ¨¡å—è¯­æ³• import ä¸€ä¸ªç±»åº“ï¼Œä½ å¯ä»¥é™æ€åœ°çŸ¥é“å…¶å†…å®¹å¹¶å¯ä»¥ä¼˜åŒ–è®¿é—®ï¼š 12import * as lib from 'lib';lib.someFunc(); // statically resolved å¥½å¤„ 2: å˜é‡æ£€æŸ¥â€‹ æœ‰äº†é™æ€æ¨¡å—ç»“æž„ï¼Œä½ å°±æ€»èƒ½é™æ€åœ°çŸ¥é“æ¨¡å—å†…ä»»æ„ä½ç½®çš„å“ªäº›å˜é‡æ˜¯å¯è§çš„ï¼š Global variables: increasingly, the only completely global variables will come from the language proper. Everything else will come from modules (including functionality from the standard library and the browser). That is, you statically know all global variables. Module imports: You statically know those, too. Module-local variables: can be determined by statically examining the module.This helps tremendously with checking whether a given identifier has been spelled properly. This kind of check is a popular feature of linters such as JSLint and JSHint; in ECMAScript 6, most of it can be performed by JavaScript engines. å¦å¤–ï¼Œä»»ä½•å¯¹å‘½åå¯¼å‡ºçš„è®¿é—®ï¼ˆä¾‹å¦‚ lib.fooï¼‰ä¹Ÿå¯ä»¥é™æ€æ£€æŸ¥ã€‚ å¥½å¤„3: å‡†å¤‡å¥½äº†å®â€‹ å®ä»ç„¶åœ¨ JavaScript æœªæ¥çš„æŠ€æœ¯è·¯çº¿å›¾ä¸­ã€‚å¦‚æžœ JavaScript å¼•æ“Žæ”¯æŒäº†å®ï¼Œä½ å°±å¯ä»¥é€šè¿‡ç±»åº“æ·»åŠ æ–°çš„è¯­æ³•ã€‚Sweet.js å°±æ˜¯ä¸€ä¸ªå®žéªŒæ€§çš„ JavaScript å®ç³»ç»Ÿã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¥è‡ª Sweet.js å®˜ç½‘çš„ç¤ºä¾‹ï¼šclass çš„å® 12345678910111213141516171819202122232425// Define the macromacro class &#123; rule &#123; $className &#123; constructor $cparams $cbody $($mname $mparams $mbody) ... &#125; &#125; =&gt; &#123; function $className $cparams $cbody $($className.prototype.$mname = function $mname $mparams $mbody; ) ... &#125;&#125;// Use the macroclass Person &#123; constructor(name) &#123; this.name = name; &#125; say(msg) &#123; console.log(this.name + " says: " + msg); &#125;&#125;var bob = new Person("Bob");bob.say("Macros are sweet!"); â€‹ å¯¹äºŽå®ï¼ŒJavaScript å¼•æ“Žåœ¨ç¼–è¯‘å‰ä¼šè¿›è¡Œä¸€ä¸ªé¢„å¤„ç†æ­¥éª¤ï¼šå¦‚æžœè§£æžå™¨ç”Ÿæˆçš„ token æµä¸­çš„ token åºåˆ—ä¸Žå®çš„æ¨¡å¼éƒ¨åˆ†åŒ¹é…ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«å®ä½“ç”Ÿæˆçš„ token æ›¿æ¢ã€‚é¢„å¤„ç†æ­¥éª¤åªåœ¨èƒ½å¤Ÿé™æ€æŸ¥æ‰¾åˆ°å®å®šä¹‰çš„æƒ…å†µä¸‹æœ‰æ•ˆã€‚æ‰€ä»¥å¦‚æžœä½ æƒ³é€šè¿‡æ¨¡å—å¼•å…¥å®ï¼Œé‚£ä¹ˆæ¨¡å—å¿…é¡»æ˜¯é™æ€ç»“æž„çš„ã€‚ å¥½å¤„4: å‡†å¤‡å¥½äº†ç±»åž‹â€‹ é™æ€ç±»åž‹æ£€æŸ¥å¼ºåŠ äº†ç±»ä¼¼äºŽå®çš„çº¦æŸï¼šå®ƒåœ¨å®šä¹‰èƒ½è¢«é™æ€åœ°æ‰¾åˆ°çš„æƒ…å†µä¸‹æœ‰ç”¨ã€‚åŒæ ·ï¼Œå¦‚æžœç±»åž‹å…·æœ‰é™æ€ç»“æž„ï¼Œåªèƒ½ä»Žæ¨¡å—å¯¼å…¥ã€‚ â€‹ ç±»åž‹å¾ˆæœ‰å¸å¼•åŠ›ï¼Œå› ä¸ºä»–ä»¬æ”¯æŒé™æ€ç±»åž‹çš„ JavaScript å¿«é€Ÿå˜ä½“ï¼Œå…¶ä¸­å¯ä»¥ç¼–å†™æ€§èƒ½å…³é”®ä»£ç ã€‚ä¸€ä¸ªè¿™æ ·çš„å˜ä½“å°±æ˜¯ Low-Level JavaScript (LLJS)ã€‚å®ƒçŽ°åœ¨è¢«ç¼–è¯‘åˆ°äº† asm.js å¥½å¤„ 5: æ”¯æŒå…¶ä»–è¯­è¨€â€‹ å¦‚æžœä½ æƒ³è¦æ”¯æŒå°†ä½¿ç”¨å®å’Œé™æ€ç±»åž‹çš„è¯­è¨€ç¼–è¯‘åˆ° JavaScript ä¸­ï¼ŒJavaScript çš„æ¨¡å—å°±åº”è¯¥æœ‰ä¸€ä¸ªé™æ€ç»“æž„ï¼Œè¿™åœ¨å‰é¢ä¸¤èŠ‚è®²è¿‡äº†ã€‚ åŒæ—¶æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥åŠ è½½â€‹ ES6 æ¨¡å—å¿…é¡»åœ¨ä¸è®ºå¼•æ“ŽåŒæ­¥ï¼ˆä¾‹å¦‚æœåŠ¡å™¨ç«¯ï¼‰è¿˜æ˜¯å¼‚æ­¥ï¼ˆä¾‹å¦‚æµè§ˆå™¨ä¸­ï¼‰åŠ è½½æ¨¡å—çš„æƒ…å†µä¸‹å·¥ä½œã€‚å®ƒçš„è¯­æ³•éžå¸¸é€‚åˆåŒæ­¥åŠ è½½ï¼Œå¼‚æ­¥åŠ è½½æ˜¯é€šè¿‡é™æ€ç»“æž„å®žçŽ°çš„ï¼šå› ä¸ºä½ å¯ä»¥é™æ€åœ°å†³å®šæ‰€æœ‰çš„å¯¼å…¥ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¯„ä¼°æ¨¡å—ä¸»é¢˜ä¹‹å‰å°±åŠ è½½ä»–ä»¬ï¼ˆä»¥ä¸€ç§ç±»ä¼¼ AMD æ¨¡å—çš„æ–¹å¼ï¼‰ 4.3 æ”¯æŒæ¨¡å—é—´çš„å¾ªçŽ¯å¼•ç”¨â€‹ å¦‚æžœ A ï¼ˆå¯èƒ½é—´æŽ¥/å¯ä¼ é€’åœ°ï¼‰å¯¼å…¥äº† Bï¼ŒåŒæ—¶ B å¯¼å…¥äº† Aï¼Œé‚£ä¹ˆæ¨¡å— A å’Œ B å°±å½¢æˆäº†å¾ªçŽ¯ä¾èµ–ã€‚å¦‚æžœå¯èƒ½ï¼Œåº”è¯¥å°½é‡é¿å…å¾ªçŽ¯ä¾èµ–ï¼Œå®ƒå¯¼è‡´äº† A å’Œ B çš„ç´§è€¦åˆ â€” å®ƒä»¬åªèƒ½åŒæ—¶å¼•å…¥å’Œä½¿ç”¨ã€‚ ä¸ºä»€ä¹ˆè¦æ”¯æŒå¾ªçŽ¯ä¾èµ–?â€‹ å¾ªçŽ¯ä¾èµ–æœ¬èº«å¹¶ä¸æ˜¯é‚ªæ¶çš„ã€‚ç‰¹åˆ«æ˜¯å¯¹äºŽå¯¹è±¡ï¼Œæœ‰æ—¶å€™ä½ ç”šè‡³éœ€è¦è¿™ç§ä¾èµ–ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€äº›æ ‘ï¼ˆä¾‹å¦‚ DOM æ–‡æ¡£æ ‘ï¼‰ä¸­ï¼Œçˆ¶äº²æŒ‡å‘å­©å­ï¼ŒåŒæ—¶å­©å­ä¹ŸæŒ‡å‘çˆ¶äº²ã€‚åœ¨ç±»åº“ä¸­ï¼Œä½ é€šå¸¸ä¼šé€šè¿‡ä»”ç»†çš„è®¾è®¡æ¥é¿å…å¾ªçŽ¯ä¾èµ–ã€‚åœ¨å¤§åž‹ç³»ç»Ÿä¸­ï¼Œè¿™ç§æƒ…å†µå¯èƒ½å‘ç”Ÿï¼Œå°¤å…¶æ˜¯åœ¨é‡æž„æœŸé—´ã€‚ç„¶åŽï¼Œå¦‚æžœæ¨¡å—ç³»ç»Ÿæ”¯æŒå¾ªçŽ¯å¼•ç”¨çš„è¯å°±éžå¸¸æœ‰ç”¨äº†ï¼Œå› ä¸ºé‡æž„æ—¶ä¸ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚ â€‹ Node.js æ–‡æ¡£ä¸­æ‰¿è®¤äº†å¾ªçŽ¯ä¾èµ–çš„é‡è¦æ€§[3] , Rob Sayre æä¾›äº†è¡¥å……è¯æ˜Žï¼š Data point: I once implemented a system like [ECMAScript 6 modules] for Firefox. I got asked for cyclic dependency support 3 weeks after shipping. That system that Alex Fritze invented and I worked on is not perfect, and the syntax isnâ€™t very pretty. But itâ€™s still getting used 7 years later, so it must have gotten something right. â€‹ æˆ‘ä»¬æ¥çœ‹çœ‹ CommonJS å’Œ ES6 å¦‚ä½•å¤„ç†å¾ªçŽ¯ä¾èµ–ã€‚ CommonJS ä¸­çš„å¾ªçŽ¯ä¾èµ–â€‹ åœ¨ CommonJS ä¸­ï¼Œå¦‚æžœæ¨¡å— B ä¾èµ–æ¨¡å— A , è€Œ A çš„ä¸»ä½“æ­£åœ¨è¯„ä¼°ä¸­ï¼Œé‚£ä¹ˆå®ƒå°†è¿”å›ž A åœ¨å½“å‰çŠ¶æ€ä¸­çš„å¯¼å‡ºå¯¹è±¡ï¼ˆä¸‹é¢ç¤ºä¾‹ä¸­çš„ç¬¬ä¸€è¡Œï¼‰ã€‚è¿™å°±å…è®¸ B å¼•ç”¨å…¶å¯¼å‡ºå†…å¯¹è±¡çš„å±žæ€§ï¼ˆç¬¬äºŒè¡Œï¼‰ã€‚è¿™äº›å±žæ€§åœ¨ B çš„è¯„ä¼°ç»“æŸåŽå¡«å……ï¼Œæ­¤æ—¶ B çš„å¯¼å‡ºå·¥ä½œæ­£å¸¸ã€‚ 1234567891011121314//------ a.js ------var b = require('b');exports.foo = function () &#123; ... &#125;;//------ b.js ------var a = require('a'); // (1)// Canâ€™t use a.foo in module body,// but it will be filled in laterexports.bar = function () &#123; a.foo(); // OK (2)&#125;;//------ main.js ------var a = require('a'); ä½œä¸ºä¸€èˆ¬è§„åˆ™ï¼Œéœ€è¦è®°ä½ï¼Œå¯¹äºŽå¾ªçŽ¯ä¾èµ–ï¼Œä½ æ— æ³•è®¿é—®æ¨¡å—æ­£æ–‡ä¸­çš„å¯¼å…¥ã€‚è¿™æ˜¯è¯¥çŽ°è±¡å›ºæœ‰çš„ï¼Œå¹¶ä¸èƒ½è¢« ES6 æ¨¡å—æ”¹å˜ã€‚ CommonJS çš„æ–¹å¼æœ‰ä¸€äº›é™åˆ¶ï¼š Node.js é£Žæ ¼çš„å•å€¼å¯¼å‡ºä¸èµ·ä½œç”¨ã€‚åœ¨ Node.js ä¸­ï¼Œä½ å¯ä»¥åƒè¿™æ ·å¯¼å‡ºå•ä¸ªå€¼è€Œä¸æ˜¯å¯¹è±¡ï¼š module.exports = function () { ... } å¦‚æžœä½ åœ¨æ¨¡å— A ä¸­è¿™æ ·åšäº†ï¼Œä½ å°±æ— æ³•åœ¨æ¨¡å— B ä¸­ä½¿ç”¨å¯¼å‡ºçš„æ–¹æ³•ï¼Œå› ä¸º B çš„å˜é‡ a ä»ç„¶æŒ‡å‘ A çš„åŽŸå§‹å¯¼å‡ºå¯¹è±¡ã€‚ ä½ ä¸èƒ½ç›´æŽ¥ä½¿ç”¨å‘½åå¯¼å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡å— B ä¸èƒ½åƒè¿™æ ·å¯¼å…¥ a.foo ï¼švar foo = require(&#39;a&#39;).foo; foo å°†ä¼šæ˜¯ undefinedã€‚æ¢å¥è¯è¯´ï¼Œä½ æ²¡æœ‰å…¶ä»–é€‰æ‹©ï¼Œåªèƒ½é€šè¿‡å¯¼å‡ºå¯¹è±¡ a æ¥å¼•ç”¨ fooã€‚ â€‹ CommonJS æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç‰¹ç‚¹ï¼šä½ å¯ä»¥åœ¨å¯¼å…¥ä¹‹å‰å¯¼å‡ºã€‚è¿™ç§å¯¼å‡ºä¿è¯å¯ä»¥åœ¨å¼•ç”¨çš„æ¨¡å—ä¸­è¢«è®¿é—®åˆ°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœ A è¿™æ ·åšäº†ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥åœ¨ B ä¸­è¢«è®¿é—®åˆ°ã€‚ç„¶è€Œåœ¨å¯¼å…¥å‰å¯¼å‡ºçš„ç‰¹æ€§å¾ˆå°‘æœ‰ç”¨ã€‚ ES6 ä¸­çš„å¾ªçŽ¯å¼•ç”¨ä¸ºäº†æ¶ˆé™¤ä¸Šè¿°çš„ä¸¤æ¡é™åˆ¶ï¼ŒES6 æ¨¡å—å¯¼å‡ºäº†ç»‘å®šè€Œä¸æ˜¯å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Žæ¨¡å—ä½“å†…å£°æ˜Žçš„å˜é‡çš„è¿žæŽ¥æ˜¯ä¿æŒé²œæ´»çš„ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­è¯æ˜Žï¼š 1234567891011//------ lib.js ------export let counter = 0;export function inc() &#123; counter++;&#125;//------ main.js ------import &#123; inc, counter &#125; from 'lib';console.log(counter); // 0inc();console.log(counter); // 1 â€‹ å› æ­¤ï¼Œå¯¹äºŽå¾ªçŽ¯ä¾èµ–ï¼Œä¸è®ºä½ æ˜¯ç›´æŽ¥è®¿é—®å‘½åå¯¼å‡ºè¿˜æ˜¯é€šè¿‡æ¨¡å—è®¿é—®éƒ½æ— å…³ç´§è¦ï¼šä¸¤ç§æƒ…å†µä¹‹é—´æœ‰é—´æŽ¥è”ç³»ï¼Œè€Œä¸”å§‹ç»ˆæœ‰æ•ˆã€‚ 5. å†è¯´ä¸€ç‚¹å¯¼å…¥å’Œå¯¼å‡º5.1 å¯¼å…¥â€‹ ES6æä¾›äº†ä¸‹é¢è¿™äº›æ–¹å¼çš„å¯¼å…¥: 1234567891011121314// Default exports and named exportsimport theDefault, &#123; named1, named2 &#125; from 'src/mylib';import theDefault from 'src/mylib';import &#123; named1, named2 &#125; from 'src/mylib';// Renaming: import named1 as myNamed1import &#123; named1 as myNamed1, named2 &#125; from 'src/mylib';// Importing the module as an object// (with one property per named export)import * as mylib from 'src/mylib';// Only load the module, donâ€™t import anythingimport 'src/mylib'; 5.2 å¯¼å‡ºâ€‹ æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å¯¼å‡ºå½“å‰æ¨¡å—ä¸­çš„ä¸œè¥¿ã€‚ä¸€ç§æ˜¯ä½ å¯ä»¥åœ¨å£°æ˜Žå‰æ·»åŠ  export å…³é”®å­—ã€‚ 12345678910111213export var myVar1 = ...;export let myVar2 = ...;export const MY_CONST = ...;export function myFunc() &#123; ...&#125;export function* myGeneratorFunc() &#123; ...&#125;export class MyClass &#123; ...&#125; â€‹ é»˜è®¤å¯¼å‡ºçš„æ“ä½œç¬¦æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆåŒ…æ‹¬å‡½æ•°è¡¨è¾¾å¼å’Œç±»è¡¨è¾¾å¼ï¼‰ã€‚ä¾‹å¦‚ï¼š 1234567891011export default 123;export default function (x) &#123; return x&#125;;export default x =&gt; x;export default class &#123; constructor(x, y) &#123; this.x = x; this.y = y; &#125;&#125;; â€‹ å¦ä¸€æ–¹é¢ï¼Œä½ å¯ä»¥å°†éœ€è¦å¯¼å‡ºçš„ä»»ä½•ä¸œè¥¿åˆ—åœ¨æ¨¡å—æœ«å°¾ã€‚ 123456const MY_CONST = ...;function myFunc() &#123; ...&#125;export &#123; MY_CONST, myFunc &#125;; â€‹ ä½ ä¹Ÿå¯ä»¥ç”¨ä¸åŒçš„åå­—å¯¼å‡ºï¼š 1export &#123; MY_CONST as THE_CONST, myFunc as theFunc &#125;; â€‹ æ³¨æ„ï¼Œä¸èƒ½ç”¨ä¿ç•™å­—ï¼ˆä¾‹å¦‚ï¼Œdefault å’Œ new ï¼‰ä½œä¸ºå˜é‡åï¼Œä½†æ˜¯ä½ å¯ä»¥ç”¨ä»–ä»¬ä½œä¸ºå¯¼å‡ºåç§°ï¼ˆä½ ä¹Ÿå¯ä»¥åœ¨ ES5 ä¸­ç”¨å®ƒä»¬ä½œä¸ºå±žæ€§åç§°ï¼‰ã€‚å¦‚æžœä½ æƒ³ç›´æŽ¥å¯¼å…¥è¿™æ ·å‘½åçš„å¯¼å‡ºï¼Œä½ å¿…é¡»è¦é‡å‘½åæˆåˆé€‚çš„åå­—ã€‚ 5.3 é‡å¯¼å‡ºâ€‹ é‡å¯¼å‡ºæ„æ€æ˜¯å°†å¦ä¸€ä¸ªæ¨¡å—çš„å¯¼å‡ºæ·»åŠ åˆ°å½“å‰æ¨¡å—çš„å¯¼å‡ºä¸­ã€‚ä½ è¦ä¹ˆå¯ä»¥æ·»åŠ å…¶ä»–æ¨¡å—çš„å…¨éƒ¨å¯¼å‡ºï¼š 1export * from 'src/other_module'; â€‹ è¦ä¹ˆå¯ä»¥æ›´æœ‰é€‰æ‹©æ€§ï¼ˆä¹Ÿå¯ä»¥é‡å‘½åï¼‰ï¼š 1234export &#123; foo, bar &#125; from 'src/other_module';// Export other_moduleâ€™s foo as myFooexport &#123; foo as myFoo, bar &#125; from 'src/other_module'; 6. eval() å’Œ æ¨¡å—â€‹ eval() ä¸æ”¯æŒæ¨¡å—è¯­æ³•ã€‚å®ƒæ ¹æ®è„šæœ¬çš„è¯­æ³•è§„åˆ™è§£æžä¼ å…¥çš„å‚æ•°ï¼Œè€Œè„šæœ¬ä¸æ”¯æŒæ¨¡å—è¯­æ³•ï¼ˆåŽé¢è§£é‡Šï¼‰ã€‚å¦‚æžœä½ æƒ³è¦è¯„ä¼°æ¨¡å—ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å—åŠ è½½ APIï¼ˆæŽ¥ä¸‹æ¥ä»‹ç»ï¼‰ 7. ES6 æ¨¡å—åŠ è½½ APIé™¤äº†ä½¿ç”¨æ¨¡å—çš„å£°æ˜Žå¼è¯­æ³•å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç¼–ç¨‹ APIï¼Œå®ƒå…è®¸ä½ ï¼š ç”¨ç¼–ç¨‹æ–¹å¼ä½¿ç”¨æ¨¡å—å’Œè„šæœ¬ é…ç½®æ¨¡å—åŠ è½½ â€‹ åŠ è½½å™¨å¤„ç†è§£æžæ¨¡å—æ ‡è¯†ç¬¦ï¼ˆä½äºŽimportâ€¦from åŽé¢çš„å­—ç¬¦ä¸² IDï¼‰ï¼ŒåŠ è½½æ¨¡å—ç­‰ã€‚ä»–ä»¬çš„æž„é€ å‡½æ•°æ˜¯ Reflect.Loader ã€‚æ¯ä¸ªå¹³å°éƒ½åœ¨å…¨å±€å˜é‡ Systemï¼ˆç³»ç»ŸåŠ è½½å™¨ï¼‰ä¸­ä¿ç•™ä¸€ä¸ªè‡ªå®šä¹‰å®žä¾‹ï¼Œå®žçŽ°å…¶ç‰¹å®šçš„æ¨¡å—åŠ è½½æ–¹å¼ã€‚ 7.1 å¼•å…¥æ¨¡å—å’ŒåŠ è½½è„šæœ¬ä½ å¯ä»¥é€šè¿‡åŸºäºŽ ES6 promise çš„ APIï¼Œç¼–ç¨‹åŒ–çš„å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼š 12 System.import() å…è®¸ä½ : ä½¿ç”¨å…ƒç´ å†…çš„æ¨¡å—ï¼ˆè¿™é‡Œä¸æ”¯æŒæ¨¡å—è¯­æ³•ï¼‰ æŒ‰æ¡ä»¶åŠ è½½æ¨¡å— System.import() èŽ·å–ä¸€ä¸ªæ¨¡å—, ä½ å¯ä»¥ç”¨ Promise.all() æ¥å¯¼å…¥å¤šä¸ªæ¨¡å—: 123456Promise.all( ['module1', 'module2', 'module3'] .map(x =&gt; System.import(x))).then(([module1, module2, module3]) =&gt; &#123; // Use module1, module2, module3&#125;); æ›´å¤šåŠ è½½å™¨æ–¹æ³•: System.module(source, options?) å°†sourceä¸­çš„ JavaScript ä»£ç è¯„ä¼°ä¸ºæ¨¡å—ï¼ˆè¿™ç§æ–¹å¼é€šè¿‡ promise å¼‚æ­¥ä¼ è¾“ï¼‰ System.set(name, module) è¿™ä¸ªæ–¹æ³•ç”¨äºŽæ³¨å†Œä¸€ä¸ªæ¨¡å—ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªä½ é€šè¿‡ System.module()åˆ›å»ºçš„æ¨¡å—ï¼‰ã€‚ System.define(name, source, options?) åŒæ—¶è¯„ä¼° source ä¸­çš„æ¨¡å—ä»£ç å’Œæ³¨å†Œç”Ÿæˆçš„æ¨¡å—ã€‚ 7.4 é…ç½®æ¨¡å—åŠ è½½æ¨¡å—åŠ è½½å™¨ API æœ‰å„ç§ç”¨äºŽé…ç½®çš„ hooksï¼ˆé’©å­ï¼‰ï¼Œå®ƒä»åœ¨è¿›è¡Œä¸­ã€‚ç¬¬ä¸€ä¸ªç”¨äºŽæµè§ˆå™¨çš„ç³»ç»ŸåŠ è½½å™¨ç›®å‰å·²ç»å®žçŽ°å¹¶é€šè¿‡æµ‹è¯•ã€‚ç›®æ ‡æ˜¯è¦å¼„æ¸…æ¥šå¦‚ä½•æœ€å¥½çš„å®žçŽ°æ¨¡å—åŠ è½½å¯é…ç½®åŒ–ã€‚ The loader API will permit many customizations of the loading process. For example: åŠ è½½å™¨ API å°†ä¼šå…è®¸è®¸å¤šåŠ è½½å¤„ç†è¿‡ç¨‹çš„è‡ªå®šä¹‰è®¾ç½®ã€‚ä¾‹å¦‚ï¼š å¯¼å…¥Lintæ¨¡å—(e.g. é€šè¿‡ JSLint è¿˜æ˜¯ JSHint). å¯¼å…¥è‡ªåŠ¨è½¬æ¤…æ¨¡å—(ä»£ç ä¸­å¯èƒ½åŒ…å« CoffeeScript æˆ–è€… TypeScript ä»£ç ). ä½¿ç”¨é—ç•™æ¨¡å—(AMD, Node.js). é…ç½®æ¨¡å—åŠ è½½åœ¨ CommonJS å’Œ Node.js ä¸­æ˜¯å—é™åˆ¶çš„]]></content>
      <categories>
        <category>FE</category>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¥žå¥‡çš„NaN]]></title>
    <url>%2F2018%2F11%2F13%2F%E7%A5%9E%E5%A5%87%E7%9A%84NaN%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯ä¸€ä¸ªå¤§çº¦éœ€è¦èŠ±10-15åˆ†é’Ÿçœ‹å®Œçš„æŠ€æœ¯è®²ä¹‰ï¼Œå…³äºŽ NaN æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä¼šåœ¨å“ªé‡Œå‡ºçŽ°ï¼Ÿä»¥åŠå¯¹äºŽå®ƒå¤§å®¶éœ€è¦çŸ¥é“äº›ä»€ä¹ˆï¼Ÿ è®²ä¹‰çš„ä½œè€…æ˜¯ Lewis J Ellisï¼Œæœ‰ä¸€ä»½è¿™ä¸ªè®²ä¹‰çš„æ¼”è®²è§†é¢‘å½•åƒï¼Œè¿˜å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°è¿™ä¸ªè®²ä¹‰çš„é¡¹ç›®ã€‚ â€œNaNâ€ çš„æ„æ€æ˜¯:Not a Number ä»€ä¹ˆä¸œè¥¿ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªNaN? ä»¤äººå¤´æ™•çš„æ•°å­¦è®¡ç®—123456console.log( 0 / 0, Infinity / Infinity, 0 * Infinity, Infinity - Infinity); 1&gt; NaN NaN NaN NaN å¤æ‚çš„æ•°å­—123456console.log( Math.sqrt(-1), Math.log(-1), Math.acos(2), Math.asin(2)); 1&gt; NaN NaN NaN NaN å°†å…¶ä»–ç±»åž‹è½¬æ¢ä¸ºæ•°å­—123456console.log( parseInt('hello'), parseFloat('world'), Number(undefined), Number(&#123;&#125;), +undefined, +&#123;&#125;, +new Date('hello')); 1&gt; NaN NaN NaN NaN NaN NaN NaN åœ¨ JavaScript ä¸­ï¼ŒNaN æ˜¯ä»€ä¹ˆ â€œNot a Numberâ€ æ˜¯â€¦1console.log(NaN); 1&gt; NaN â€¦ ä¸€ä¸ªç‰¹æ®Šçš„ JavaScript å€¼. (éžå¸¸ ç‰¹æ®Š) â€œNot a Numberâ€ æ˜¯â€¦1console.log(typeof NaN); 1&gt; number â€¦ä¸€ä¸ª Number. â€œNot a Numberâ€ æ˜¯â€¦1console.log(NaN === NaN); 1&gt; false â€¦ ä¸æ˜¯ä¸€ä¸ªâ€Not a Numberâ€. â€œNot a Numberâ€ æ˜¯â€¦12var assert = require('assert');assert.equal(NaN, NaN); 1&gt; AssertionError: NaN == NaN â€¦æ£˜æ‰‹çš„æµ‹è¯•. â€œNaNâ€ å®žé™…ä¸Šæ„æ€æ˜¯:Not a NaN æ‰€ä»¥æˆ‘ä»¬çŸ¥é“äº† NaN åœ¨ä»€ä¹ˆåœ°æ–¹å‡ºçŽ°, ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯ NaN ï¼Ÿæ”¾è½»æ¾ï¼åªéœ€è¦ä½¿ç”¨ isNaN æ–¹æ³•:1console.log(isNaN(NaN)); 1&gt; true ä¹Ÿè®¸å¯èƒ½ä¸æ˜¯â€¦1console.log(isNaN('foo'), isNaN(['bar']), isNaN(&#123;&#125;)); 1&gt; true true true 1console.log(typeof 'foo', typeof ['bar'], typeof &#123;&#125;); 1&gt; string object object æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­:123456function myIsNaN(x) &#123; return typeof x === 'number' &amp;&amp; isNaN(x);&#125;console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(isNaN));console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(myIsNaN)); 12&gt; true true true true&gt; true false false false æˆ–è€…æˆ‘ä»¬å¯ä»¥å›žè°ƒ â€œNot a NaNâ€:123456function myIsNaN(x) &#123; return x !== x;&#125;console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(isNaN));console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(myIsNaN)); 12&gt; true true true true&gt; true false false false è¿™ä¸ªæ–¹æ³•æœ‰ç”¨æ˜¯å› ä¸º NaN æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªç­‰å·æ“ä½œç¬¦æ˜¯éžè‡ªåçš„å€¼ã€‚ å¹¸è¿çš„æ˜¯, ES2015 ä¸­å¢žåŠ äº† Number.isNaN:12console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(isNaN));console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(Number.isNaN)); â€¦å®ƒæ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ–¹æ³•: 12&gt; true true true true&gt; true false false false æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥ ç”¨ Object.is:12console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(isNaN));console.log([NaN, 'foo', ['bar'], &#123;&#125;].map(n =&gt; Object.is(n, NaN))); 12&gt; true true true true&gt; true false false false è¿™ç§æ–¹æ³•ç”¨åˆ°äº† SameValue è¿™ä¸ªå†…éƒ¨æ“ä½œï¼Œå®ƒçš„å¯¹æ¯”æ–¹å¼ä¸Ž Set åŒºåˆ†å…ƒç´ çš„æ–¹æ³•ï¼ˆå¤§éƒ¨åˆ†ï¼‰ç›¸ä¼¼ã€‚ ä½†æ˜¯ NaN ä¸ä»…ä»…æ˜¯ JavaScript ä¸­æ‰æœ‰çš„ï¼ NaN å®žé™…ä¸Šæ˜¯åœ¨ IEEE 754 æµ®ç‚¹æ ‡å‡†ä¸­å®šä¹‰çš„ã€‚ å¦‚æžœä½ çŸ¥é“ NaN åœ¨ä¸€ç§è¯­è¨€ä¸­å¯èƒ½å‡ºçŽ°çš„åœ°æ–¹ï¼Œä»¥åŠå®ƒçš„è¡¨çŽ°ï¼Œé‚£ä¹ˆå®ƒåœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå¤§è‡´ç›¸ä¼¼ã€‚ IEEE 754 è§„èŒƒå®šä¹‰äº† pow æ–¹æ³•ï¼š1234pow(2, 3) -&gt; 8pow(-1, 1.5) -&gt; NaNpow(NaN, anything) -&gt; NaNpow(anything, NaN) -&gt; NaN If either input is NaN, or if the base is negative and the exponent is not an integer, the result is NaN. å¦‚æžœè¾“å…¥æ˜¯ NaN ï¼Œæˆ–è€…åŸºæ•°ä¸ºè´Ÿä¸”æŒ‡æ•°ä¸æ˜¯æ•´æ•°ï¼Œåˆ™ç»“æžœä¸º NaNã€‚ ä¸‰ç§ä¸æ˜Žç¡®çš„ pow:123pow(0, 0) -&gt; 1pow(Infinity, 0) -&gt; 1pow(1, Infinity) -&gt; 1 è¿™ç§è¡Œä¸º ç»§æ‰¿è‡ª C99 å’Œ POSIX 2001 å¤šæ•°è¯­è¨€éƒ½éµå¾ªè¿™ä¸€æ¡è§„åˆ™ è¿™æ˜¯ Python çš„è¡Œä¸º :1[0 ** 0, float("inf") ** 0, 1 ** float("inf")] 1&gt; [1 1.0 1.0] Ruby :1[0 ** 0, Float::INFINITY ** 0, 1 ** Float::INFINITY] 1&gt; [1 1.0 1.0] Lua :1print(math.pow(0, 0), math.pow(math.huge, 0), math.pow(1, math.huge)) 1&gt; 1 1 1 ä½†æ˜¯JavaScript? 1Math.pow(0, 0); 1Math.pow(0, 0); 1&gt; 1 1Math.pow(0, 0); 1&gt; 1 1Math.pow(Infinity, 0); 1Math.pow(0, 0); 1&gt; 1 1Math.pow(Infinity, 0); 1&gt; 1 1Math.pow(0, 0); 1&gt; 1 1Math.pow(Infinity, 0); 1&gt; 1 1Math.pow(1, Infinity); 1Math.pow(0, 0); 1&gt; 1 1Math.pow(Infinity, 0); 1&gt; 1 1Math.pow(1, Infinity); 1&gt; NaN ä¸ºä»€ä¹ˆï¼Ÿ ES1 å£°æ˜Žpow: 1997 C99 å£°æ˜Žpow: 1999 POSIX å£°æ˜Žpow: 2001 IEEE 754 å£°æ˜Žpow: 2008 å°±åƒå…³äºŽ JavaScript çš„å…¶ä»–é—®é¢˜ä¸€æ ·ï¼Œç­”æ¡ˆå°±æ˜¯â€¦ å‘åŽå…¼å®¹ æ‰€ä»¥ä¸è®ºå¦‚ä½•ï¼Œçœ‹çœ‹ IEEE 754 å‘Šè¯‰æˆ‘ä»¬è¦å¦‚ä½•è¡¨ç¤º NaNï¼Ÿ float32 ç±»åž‹å€¼çš„ bit è¡¨è¾¾æ–¹å¼ï¼š10 10000000 01000000000000000000000 1 ä½ç¬¦å· 8 ä½æŒ‡æ•°, åç§»é‡ 127 23 ä½æœ‰æ•ˆä½æ•° (å‰é¢çš„ç¬¬24ä½éšè—) (-1) ^ s * 2 ^ (exp - 127) * 1.significand ä¾‹å¦‚ float32 çš„å€¼:10 10000000 01000000000000000000000 (-1) ^ 0 = 1 2 ^ (10000000b - 127) = 2 1.01b = 1.25 1 * 2 * 1.25 = 2.5 ç‰¹æ®Šå€¼çš„ bit è¡¨è¾¾æ–¹å¼:120 11111111 00000000000000000000000 -&gt; Infinity1 11111111 00000000000000000000000 -&gt; -Infinity Infinity çš„å€¼æœ‰ä¸€ä¸ªæœ€å¤§çš„æŒ‡æ•°å’Œä¸€ä¸ªä¸ºé›¶çš„æœ‰æ•ˆä½æ•°ã€‚ ç‰¹æ®Šå€¼çš„ bit è¡¨è¾¾æ–¹å¼:10 11111111 10000000000000000000000 -&gt; NaN NaN çš„å€¼æœ‰ä¸€ä¸ªæœ€å¤§çš„æŒ‡æ•°å’Œä¸€ä¸ªéžé›¶çš„æœ‰æ•ˆä½æ•°ã€‚ è¿™äº›ä¹Ÿéƒ½æ˜¯ NaN:123451 11111111 10000000000000000000000 -&gt; NaN (quiet, negative)0 11111111 10000000000000000000001 -&gt; NaN (quiet, but different)0 11111111 00000000000000000000001 -&gt; NaN (signaling)0 11111111 00000000000000000000010 -&gt; NaN (signaling, but different)0 11111111 00000000000000000000011 -&gt; NaN (we can start counting!) è¿™äº›ä¹Ÿéƒ½æ˜¯ NaN:123451 11111111 10000000000000000000000 -&gt; NaN (quiet, negative)0 11111111 10000000000000000000001 -&gt; NaN (quiet, but different)0 11111111 00000000000000000000001 -&gt; NaN (signaling)0 11111111 00000000000000000000010 -&gt; NaN (signaling, but different)0 11111111 00000000000000000000011 -&gt; NaN (we can start counting!) ä¸€å…±æœ‰å¤šå°‘ä¸ªNaNï¼ŒçœŸçš„å—ï¼Ÿ 2^24 - 2 = 16,777,214 è¿™åªæ˜¯ç±»åž‹ä½ float32 çš„æƒ…å†µä¸‹!é‚£ä¹ˆå¦‚æžœæ˜¯ double64 å‘¢? 2^53 - 2 = 9,007,199,254,740,990 ä¹Ÿå°±æ˜¯ 9 * 10^15, æˆ–è€… 9 ä¸‡äº¿.9PBç›¸å½“äºŽå¯ä»¥æ’­æ”¾20000å¹´çš„éŸ³ä¹ å¦‚æžœæœ‰è¿™ä¹ˆå¤šå¯èƒ½çš„ NaN ï¼Œé‚£è¿™ä¸€åˆ‡æ‰çœ‹èµ·æ¥åˆç†äº†äº›â€¦ â€¦å°±æ˜¯è¯´ä¸€ä¸ªéšæœºçš„ NaN å‡ ä¹Žä¸å¯èƒ½ç­‰äºŽå¦ä¸€ä¸ªéšæœºçš„ NaNï¼ å› æ­¤, NaN !== NaN[^1].[^1]: With probability 1/9,007,199,254,740,990. ç›¸å…³é“¾æŽ¥ http://ariya.ofilabs.com/2014/05/the-curious-case-of-javascript-nan.html http://www.2ality.com/2012/02/nan-infinity.html https://en.wikipedia.org/wiki/NaN https://tc39.github.io/ecma262/#sec-applying-the-exp-operator]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»ŽJavaScriptæ•°ç»„ä¸­ç§»é™¤å…ƒç´ çš„å‡ ç§æ–¹æ³•]]></title>
    <url>%2F2018%2F11%2F13%2F%E4%BB%8EJavaScript%E6%95%B0%E7%BB%84%E4%B8%AD%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[â€‹ â€‹ JavaScript æ•°ç»„å…è®¸ä½ å¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„å’Œè¿­ä»£ï¼Œä½ å¯ä»¥ç”¨ä¸åŒçš„æ–¹å¼æ·»åŠ æˆ–è€…åˆ é™¤æ•°ç»„å…ƒç´ ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå´å¹¶æ²¡æœ‰ä¸€ä¸ªç®€å•çš„ Array.remove çš„æ–¹æ³•ã€‚ â€‹ JavaScript æ•°ç»„æœ‰å„ç§å„æ ·çš„æ–¹æ³•æ¥åˆ é™¤æ•°ç»„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç”¨ delete æ–¹æ³•ã€‚å¦‚æžœæˆ‘ä»¬ç”¨ delete arr[index]çš„æ–¹å¼åˆ é™¤äº†æ•°ç»„å…ƒç´ ï¼Œåˆ™åªæ˜¯å°†è¯¥æ•°ç»„ä¸­ç´¢å¼•å€¼ä¸º index çš„å…ƒç´ ç½®ä¸º undefined ï¼Œè¯¥ä½ç½®ä¸Šæ˜¯ä¸€ä¸ªç©ºå…ƒç´ ï¼Œå¹¶ä¸”æ•°ç»„é•¿åº¦ä¸ä¼šå‡å°‘ã€‚ â€‹ ä»Žæ•°ç»„å¤´éƒ¨åˆ é™¤å…ƒç´ ç”¨ shift ï¼Œä»Žå°¾éƒ¨åˆ é™¤å…ƒç´ ç”¨ pop ï¼Œä»Žä¸­é—´åˆ é™¤å…ƒç´ ç”¨ splice ï¼Œè¿˜å¯ä»¥ç”¨ filter æ–¹æ³•æ¥è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶å°†è¿™äº›å…ƒç´ è¿”å›žä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ç”¨æ³•ã€‚ ä»ŽJavaScript Array å°¾éƒ¨ç§»é™¤å…ƒç´ å¯ä»¥é€šè¿‡è®¾ç½®æ•°ç»„çš„ length å±žæ€§æ¥æ‰“åˆ°ç§»é™¤æœ«ç«¯å…ƒç´ çš„æ•ˆæžœï¼Œå½“æ–°è®¾ç½®çš„ length å±žæ€§çš„å€¼ï¼Œå°äºŽå½“å‰æ•°ç»„é•¿åº¦æ—¶ï¼Œç´¢å¼•å€¼å¤§äºŽæ–°çš„ length å±žæ€§çš„å…ƒç´ éƒ½ä¼šè‡ªåŠ¨è¢«åˆ é™¤ã€‚ 123var ar = [1, 2, 3, 4, 5, 6];ar.length = 4; // set length to remove elementsconsole.log( ar ); // [1, 2, 3, 4] pop æ–¹æ³•ç§»é™¤æ•°ç»„æœ«ç«¯çš„æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›žè¿™ä¸ªå…ƒç´ ï¼Œæ›´æ–° length å±žæ€§ã€‚ 123var ar = [1, 2, 3, 4, 5, 6];ar.pop(); // returns 6console.log( ar ); // [1, 2, 3, 4, 5] ä»ŽJavaScript Array å¤´éƒ¨ç§»é™¤å…ƒç´ shift æ–¹æ³•ä¼šåˆ é™¤æ•°ç»„ç´¢å¼•ä¸º 0 çš„å…ƒç´ ï¼Œè¿”å›žè¢«åˆ é™¤çš„å…ƒç´ ï¼Œåˆ é™¤åŽï¼Œå‰©ä½™å…ƒç´ ä¼šå‘ä¸‹ç§»åŠ¨ã€‚ 123var ar = ['zero', 'one', 'two', 'three'];ar.shift(); // returns "zero"console.log( ar ); // ["one", "two", "three"] å½“æ•°ç»„ä¸­å…ƒç´ ä¸ºç©ºï¼Œæˆ–è€… length ä¸º0æ—¶ï¼Œæ–¹æ³•è¿”å›ž undefined ç”¨ splice æ–¹æ³•ç§»é™¤ JavaScript Array å…ƒç´ splice æ–¹æ³•ç”¨äºŽåˆ é™¤æ•°ç»„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ–°å¢žå…ƒç´ ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå¢žåŠ æˆ–è€…åˆ é™¤çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šè¦ç§»é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°ä»¥åŠåŽç»­çš„å‚æ•°éƒ½æ˜¯å¯é€‰å‚æ•°ï¼›ä»–ä»¬æŒ‡å®šäº†è¦è¢«åŠ å…¥åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ã€‚ ä¸‹é¢çš„ä¾‹å­å°†ä»Žæ•°ç»„çš„ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹åˆ é™¤ä¸¤ä¸ªå…ƒç´ ï¼ˆæ•°ç»„ä»Ž0å¼€å§‹ï¼‰ 1234567var array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];var removed = array.splice(2,2);/*removed === [3, 4]array === [1, 2, 5, 6, 7, 8, 9, 0]*/ splice æ–¹æ³•è¿”å›žä¸€ä¸ªç”±è¢«åˆ é™¤å…ƒç´ ç»„æˆçš„æ•°ç»„ ç”¨ splice æ–¹æ³•åˆ é™¤ JavaScript Array ä¸­çš„ç‰¹å®šå€¼çš„å…ƒç´ å¦‚æžœçŸ¥é“æƒ³è¦ä»Žæ•°ç»„ä¸­åˆ é™¤çš„å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨ splice æ–¹æ³•ã€‚ä½†æ˜¯ä¹Ÿè¦å…ˆèŽ·å–ç›®æ ‡å…ƒç´ çš„ç´¢å¼•ï¼Œç„¶åŽç”¨æ ¹æ®ç´¢å¼•æ¥åˆ é™¤è¯¥å…ƒç´  123456789var array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];for( var i = 0; i &lt; array.length-1; i++)&#123; if ( array[i] === 5) &#123; arr.splice(i, 1); &#125;&#125;//=&gt; [1, 2, 3, 4, 6, 7, 8, 9, 0] è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå…ƒç´ éƒ½æ˜¯æ•´æ•°ã€‚å¦‚æžœæ•°ç»„å…ƒç´ æ˜¯ object ç±»åž‹ï¼Œé‚£ä¹ˆæ–¹æ³•å°±ä¼šå¤æ‚çš„å¤šäº†ã€‚ ç”¨ filter æ–¹æ³•ç§»é™¤ JavaScript Array ä¸­çš„ç‰¹å®šå€¼çš„å…ƒç´ ä¸åŒäºŽ splice æ–¹æ³•ï¼Œfilter ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå³ä¸ä¼šæ”¹å˜è°ƒç”¨ filter æ–¹æ³•çš„æ•°ç»„ï¼Œä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ã€‚ filter æ–¹æ³•åªæŽ¥æ”¶ä¸€ä¸ª callback æ–¹æ³•ä½œä¸ºå‚æ•°ã€‚å½“fulter æ–¹æ³•éåŽ†æ•°ç»„å…ƒç´ æ—¶è§¦å‘ callback æ–¹æ³•ã€‚callback æŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ çš„å€¼ï¼Œå½“å‰å…ƒç´ çš„ç´¢å¼•ï¼Œæ•´ä¸ªæ•°ç»„ã€‚ callback æ–¹æ³•è¿”å›ž true æˆ–è€… false ï¼Œå…ƒç´ è¿”å›ž true è¿˜æ˜¯ false ç”±ä½ å†³å®šï¼Œè¿”å›žä¸ºtrue çš„å…ƒç´ å°†è¢«åŠ å…¥åˆ° filter æ–¹æ³•çš„è¿”å›žæ•°ç»„ä¸­ã€‚ 1234567var array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];var filtered = array.filter(function(value, index, arr)&#123; return value &gt; 5;&#125;);//filtered =&gt; [6, 7, 8, 9]//array =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 0] Lodash Array åˆ é™¤æ–¹æ³•æœ‰æ—¶å€™ä½¿ç”¨çŽ°æˆçš„å·¥å…·åº“æ¥è§£å†³å¤æ‚é—®é¢˜æ˜¯æœ€ä½³çš„å®žè·µã€‚Lodash æä¾›äº†ä¸€å¥—ä¸°å¯Œçš„æ•°ç»„æ“ä½œæ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯ remove ã€‚Lodash çš„ remove æ–¹æ³•ä¸Ž JavaScript Array çš„ filter æ–¹æ³•éžå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä¸ä¼šä¿å­˜åŽŸå§‹æ•°ç»„ï¼Œå³ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œå®ƒä¼šåˆ é™¤åŒ¹é…å…ƒç´ ï¼Œå¹¶å°†åˆ é™¤çš„å…ƒç´ ä½œä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„è¿”å›ž 12345678var array = [1, 2, 3, 4];var evens = _.remove(array, function(n) &#123; return n % 2 === 0;&#125;);console.log(array);// =&gt; [1, 3]console.log(evens);// =&gt; [2, 4] æ‰‹å†™ä¸€ä¸ª Remove æ–¹æ³•åŽŸç”Ÿ JS æ²¡æœ‰æä¾› Array.removeæ–¹æ³•ã€‚Lodash çš„ remove æ–¹æ³•çš„ç¡®å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ€»æƒ³è¦åŽ»å¼•ç”¨ Lodash çš„ç±»åº“çš„ã€‚æˆ‘ä»¬å¯ä»¥æ‰‹å†™ä¸€ä¸ª remove æ–¹æ³•å‡ºæ¥ï¼Œè¿™ç¯‡æ–‡ç«  model to follow ç»™å‡ºäº†ä¸€ä¸ªä¾‹å­ï¼Œä½†æ˜¯å®ƒæ˜¯é€šè¿‡æ‰©å±• Array å¯¹è±¡çš„åŽŸåž‹æ¥å®žçŽ°çš„ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ ä¸‹é¢æ˜¯æˆ‘å®žçŽ°çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 1234567891011function arrayRemove(arr, value) &#123; return arr.filter(function(ele)&#123; return ele != value; &#125;);&#125;var result = arrayRemove(array, 6);// result = [1, 2, 3, 4, 5, 7, 8, 9, 0] ä½¿ç”¨ Delete æ“ä½œç¬¦æ˜¾ç¤ºåœ°åˆ é™¤æ•°ç»„å…ƒç´ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ delete è¿ç®—ç¬¦æ¥åˆ é™¤æ•°ç»„å…ƒç´  1234var ar = [1, 2, 3, 4, 5, 6];delete ar[4]; // delete element with index 4console.log( ar ); // [1, 2, 3, 4, undefined, 6]alert( ar ); // 1,2,3,4,,6 ä½¿ç”¨ delete æ“ä½œç¬¦ä¸ä¼šå½±å“æ•°ç»„çš„ length å±žæ€§ï¼Œä¹Ÿä¸ä¼šå½±å“åŽç»­å…ƒç´ çš„ç´¢å¼•å€¼ã€‚ä¼šå°†æ•°ç»„å˜æˆç¨€ç–æ•°ç»„ã€‚ delete æ“ä½œç¬¦æ˜¯è¢«è®¾è®¡ç”¨äºŽåˆ é™¤ JavaScript object ç±»åž‹å±žæ€§çš„ï¼Œæ•°ç»„ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„ object ç±»åž‹ã€‚ å…ƒç´ æ²¡æœ‰çœŸæ­£è¢«ä»Žæ•°ç»„ä¸­åˆ é™¤çš„åŽŸå› æ˜¯ delete æ“ä½œç¬¦çš„ä½œç”¨æ›´å¤šçš„æ˜¯é‡Šæ”¾å†…å­˜ï¼Œè€Œä¸æ˜¯åˆ é™¤å…ƒç´ ã€‚å½“ä¸å†æœ‰å¯¹è¿™ä¸ªå€¼çš„å¼•ç”¨æ—¶ï¼Œå†…å­˜å°±ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨æŽ’åºç®—æ³•]]></title>
    <url>%2F2018%2F11%2F08%2F%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[æŽ’åºç®—æ³•çš„å­¦ä¹ å’Œè®°å½• æ›´æ–°ä¸­ã€‚ã€‚ã€‚ å†’æ³¡æŽ’åº12345678910111213141516function bubble = (arr) =&gt; &#123; let n = arr.length,i,j,tmp,flag = true; let result = arr.slice(0); for(i = 0;i&lt;n &amp;&amp; flag;i++)&#123; flag = false; for(j=0;j&lt;n-i;j++)&#123; if(result[j]&gt;result[j+1])&#123; tmp = result[j]; result[j] = result[j+1]; result[j+1] = tmp; flag=true; &#125; &#125; &#125; return result;&#125; é€‰æ‹©æŽ’åº123456789101112131415161718function Selector = (arr) =&gt; &#123; let n = arr.length,i,j,min,tmp; let result = arr.slice(0); for(i=0;i&lt;n;i++)&#123; min = i; for(j=i+1;j&lt;n;j++)&#123; if(result[j] &lt; result[min])&#123; min = j; &#125; &#125; if(min !=i)&#123; tmp = result[i]; result[i] = result[min]; result[min] = tmp; &#125; &#125; return result;&#125; è®¡æ•°æŽ’åº12345678910111213141516const CountingSort = (arr)=&gt;&#123; let n = arr.length,i,tmp = []; for(i=0;i&lt;n;i++)&#123; var a = arr[i]; var b = tmp[a]; tmp[a] = b?++b:1; &#125; let result = []; for(i=0;i&lt;tmp.length;i++)&#123; while(tmp[i]&gt;0)&#123; result.push(i); tmp[i]--; &#125; &#125; return result;&#125; æ¡¶æŽ’åº1234567891011121314151617181920// å †æŽ’åºconst BucketSort = (arr) =&gt; &#123; let n = arr.length,i,j,tmp,result,D=[]; for(i = 0;i&lt;n;i++)&#123; tmp = arr[i]; j = Math.floor(tmp/10); if(!D[j])&#123; D[j] = []; &#125; D[j].push(tmp); &#125; result = []; for(i=0;i&lt;D.length;i++)&#123; if(!D[i])&#123; continue; &#125; result.push(...CountingSort(D[i])) &#125; return result;&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[CSS Layout]]></title>
    <url>%2F2018%2F11%2F05%2FCSS-Layout%2F</url>
    <content type="text"><![CDATA[æ°´å¹³å±…ä¸­æ°´å¹³å±…ä¸­å¸ƒå±€éœ€è¦çœ‹å­å…ƒç´ æ˜¯ block å…ƒç´ è¿˜æ˜¯ inline å…ƒç´ ï¼Œwidth æ˜¯å¦å›ºå®šã€‚å› æ­¤å½¢æˆä¸‹é¢å››ä¸ªä¾‹å­ã€‚ demo1 æ˜¯å­å…ƒç´ ä¸º inline ï¼Œå¯¹çˆ¶å…ƒç´ è®¾ç½® text-align:centerã€‚ demo2 ä¸­å­å…ƒç´ ä¸º block ï¼Œå®½åº¦å›ºå®šï¼Œåˆ™å¯¹å­å…ƒç´ è®¾ç½® margin:0 auto,å·¦å³å®½åº¦å›ºå®š demo3 ä¸­å­å…ƒç´ ä¸º block ï¼Œå®½åº¦ä¸å®šï¼Œåˆ™å­å…ƒç´  display:inline ,çˆ¶å…ƒç´  text-align:center demo4 ä¸­é‡‡ç”¨äº† flex å¸ƒå±€ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„æ–¹æ¡ˆï¼Œå¯¹ inline å’Œ block ä¸¤ç§å…ƒç´ å‡æœ‰æ•ˆï¼Œdisplay:flex ä¸»è½´å±…ä¸­å¯¹é½ justify-content:center; See the Pen æ°´å¹³å±…ä¸­å¸ƒå±€ by RedCorss (@redcorss) on CodePen. åž‚ç›´å±…ä¸­åž‚ç›´å±…ä¸­å¸ƒå±€åˆ™å› å­å…ƒç´ æ˜¯å•è¡Œå†…è”æ–‡æœ¬ï¼Œå¤šè¡Œå†…è”æ–‡æœ¬ä»¥åŠå—çº§å…ƒç´ è€Œå¼‚ demo1 çˆ¶å…ƒç´ é«˜åº¦å›ºå®šï¼Œå­å…ƒç´ ä¸ºå•è¡Œå†…è”æ–‡æœ¬ï¼Œè®¾ç½®çˆ¶å…ƒç´ è¡Œé«˜ä¸ºå­å…ƒç´ çš„ line-height demo2 çˆ¶å…ƒç´ é«˜åº¦å›ºå®šï¼Œå­å…ƒç´ ä¸ºå¤šè¡Œå†…è”æ–‡æœ¬ï¼Œè¿™æ—¶ç”¨ä¸Šé¢çš„æ–¹æ³•ä¼šå¯¼è‡´å­å…ƒç´ åªæœ‰ç¬¬ä¸€è¡Œåœ¨çˆ¶å…ƒç´ å†…éƒ¨ï¼Œå…¶ä»–è¡Œé£˜å‡ºåŽ»äº†ï¼ŒäºŽæ˜¯è¦æ¢ä¸€ç§æ€è·¯ï¼Œçˆ¶å…ƒç´ è®¾ç½® CSS display:table-cell; vertical-align:middle ï¼Œå¦‚æžœä¸æˆåŠŸï¼Œæ³¨æ„æ£€æŸ¥å¤–éƒ¨CSSæ±¡æŸ“ã€‚ demo3 å­å…ƒç´ æ˜¯å—çº§å…ƒç´ çš„æ—¶å€™ï¼Œä½¿ç”¨å®šä½+ä½ç§»çš„æ–¹å¼ï¼Œçˆ¶å…ƒç´ è®¾ç½®ä¸º static ä»¥å¤–çš„å€¼ï¼Œå­å…ƒç´  position:absolute; top:50%;transform:translateY(-50%); demo4 é€šç”¨æ–¹æ¡ˆï¼Œä½¿ç”¨ Flex å¸ƒå±€ï¼Œ display:flex; ,äº¤å‰è½´å±…ä¸­å¯¹é½ align-items:center; See the Pen åž‚ç›´å±…ä¸­å¸ƒå±€ by RedCorss (@redcorss) on CodePen. å·¦ä¸­å³å¸ƒå±€position + marginä½¿ç”¨ç»å¯¹å®šä½ï¼Œè®©å…ƒç´ è„±ç¦»åŽŸå§‹çš„æ–‡æ¡£æµï¼Œç„¶åŽä½¿ç”¨ top ï¼Œleftï¼Œrightå°†å·¦å³è¾¹æ åˆ†åˆ«å›ºå®šåœ¨å·¦ä¸Šï¼Œå³ä¸Šï¼Œä¸­é—´è‡ªé€‚åº”ä¸Šæµ®ã€‚æ³¨æ„ï¼Œä¸­é—´ä¸»é¢æ¿è¦ä½¿ç”¨å·¦å³marginï¼Œå€¼ä¸ºå·¦å³é¢æ¿çš„å®½åº¦ã€‚ ä¼˜ç‚¹æ˜¯ï¼Œè¿™ç§å†™æ³•ä¸é™åˆ¶ div çš„ä¹¦å†™é¡ºåºï¼Œå¯ä»¥å…ˆå†™ä¸»é¢æ¿ï¼Œè®©é‡è¦å†…å®¹ä¼˜å…ˆæ¸²æŸ“ã€‚ See the Pen position+margin-å¸ƒå±€ by RedCorss (@redcorss) on CodePen. float + è´Ÿmarginä¸‹é¢æ˜¯ä¼ ç»Ÿçš„ä½¿ç”¨ float + è´Ÿmarginçš„æ–¹å¼æ¥å®žçŽ°çš„åœ£æ¯å¸ƒå±€ï¼Œè¿™å‡ ç§æ–¹å¼çš„ HTML ä¸­ï¼Œéƒ½æ²¡æœ‰è€ƒè™‘ä¸»é¡µæ ï¼ˆclass=â€œmainâ€ï¼‰å†™åœ¨ä¾§è¾¹æ å‰é¢çš„é—®é¢˜ï¼Œè¿™æ ·èƒ½è®©æµè§ˆå™¨ä¸­ä¸»é¡µå†…å®¹åœ¨ä¾§è¾¹æ ä¹‹å‰åŠ è½½ã€‚ ç¬¬4ä¸ª demo ä½¿ç”¨çš„ çˆ¶å…ƒç´ å·¦å³ margin æ›¿ä»£çš„çˆ¶å…ƒç´ å·¦å³ padding ç¬¬5ä¸ª demo ä½¿ç”¨å­å…ƒç´  æµ®åŠ¨ï¼Œä¸»é¡µå…ƒç´ å·¦å³margin è‡ªåŠ¨ä¸Šæµ®ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å°† ä¸»é¡µå…ƒç´ å†™åœ¨ä¾§è¾¹æ ä¹‹åŽï¼Œå¯¼è‡´é¡µé¢åŠ è½½æ—¶ä¼šå…ˆåŠ è½½ä¾§è¾¹æ ï¼ŒåŽåŠ è½½ä¸»é¡µ See the Pen float +çˆ¶padding+ è´Ÿmargin åœ£æ¯å¸ƒå±€ by RedCorss (@redcorss) on CodePen. ä¼ ç»Ÿåœ£æ¯å¸ƒå±€å…³äºŽåœ£æ¯å¸ƒå±€çš„å‡ºå¤„å¯ä»¥çœ‹ è¿™é‡Œ åˆ›å»ºHTMLï¼Œè¦æŠŠä¸­é—´çš„divå†™åœ¨å·¦å³è¾¹æ çš„å‰é¢ï¼Œè®©å®ƒé¦–å…ˆæ¸²æŸ“ 12345&lt;div class="container"&gt; &lt;div class="center"&gt;&lt;/div&gt; &lt;div class="left"&gt;&lt;/div&gt; &lt;div class="right"&gt;&lt;/div&gt;&lt;/div&gt; å·¦å³å®šå®½ width:200px ï¼Œä¸­é—´100%å®½åº¦ï¼Œä¸‰æ åŒæ—¶å·¦æµ® float:left left å…ƒç´  margin-left:-100% , ä¸Šæµ®åˆ° center å…ƒç´ çš„å·¦ä¾§ï¼›right å…ƒç´  margin-left:-200px ï¼Œä¸Šæµ®åˆ°centerå…ƒç´ çš„å³ä¾§ï¼Œæ­¤æ—¶centerå…ƒç´ çš„å·¦å³ä¸¤è¾¹ä¸Ž left ï¼Œright å…ƒç´ æ˜¯å‘ç”Ÿé‡å çš„ çˆ¶å…ƒç´ container padding:0 200px;, leftå…ƒç´  position:relative;left:200px; ï¼Œright å…ƒç´  position:relative;right:200pxï¼Œè‡³æ­¤åœ£æ¯å¸ƒå±€å®Œæˆ See the Pen ä¼ ç»Ÿåœ£æ¯å¸ƒå±€ by RedCorss (@redcorss) on CodePen. Flex å¼¹æ€§ç›’å­å¸ƒå±€ See the Pen Responsive Holy Grail Layout using FlexBox by RedCorss (@redcorss) on CodePen.]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>Layout</tag>
        <tag>CSSå¸ƒå±€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS line-height]]></title>
    <url>%2F2018%2F11%2F02%2FCSS-line-height%2F</url>
    <content type="text"><![CDATA[â€‹ è®¤è¯† line-height ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€äº› CSS ä¸­ä¸ŽæŽ’ç‰ˆæœ‰å…³çš„æ¦‚å¿µã€‚ â€‹ leading ï¼Œè¿™ä¸ªæ¦‚å¿µï¼Œå¯¹åº”ä¸­æ–‡çš„æ„æ€åº”è¯¥æ˜¯â€œè¡Œè·â€ï¼Œå³æŽ’ç‰ˆä¸­ç›¸é‚»ä¸¤è¡Œä¹‹é—´çš„è·ç¦»ã€‚leadæœ‰é“…å—çš„æ„æ€ï¼Œåœ¨è¿‡åŽ»æ‰‹å·¥æŽ’ç‰ˆçš„æ—¶ä»£ï¼Œäººä»¬ä¼šå‘æ¨¡æ¿ä¸­æ’å…¥ç»†é“…æ¡æ¥å¢žåŠ ç±»åž‹çº¿ä¹‹é—´çš„è·ç¦»ã€‚çŽ°ä»£æŽ’ç‰ˆä¸­ï¼Œleading çš„ç¡®åˆ‡å®šä¹‰å·²ç»æ··æ·†ï¼Œå¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼š1.å…¶ä¸€æ˜¯æŒ‡ç›¸é‚»ä¸¤è¡Œ baseline ï¼ˆåŸºçº¿ï¼‰ä¹‹é—´çš„è·ç¦»ï¼›2.å…¶äºŒæ˜¯æŒ‡ä¸Šé¢ä¸€è¡Œçš„åº•éƒ¨è‡³ä¸‹é¢ä¸€è¡Œçš„é¡¶éƒ¨çš„è·ç¦»ï¼›å…¶å®žä¸¤ç§è¡¨ç¤ºçš„ç»“æžœä¸€è‡´ï¼Œä½†ä¸€èˆ¬ä½¿ç”¨å‰è€…å±…å¤šã€‚ baselineï¼Œ åŸºçº¿ï¼Œåœ¨ä¸€å¼€å§‹å­¦ä¹ è‹±è¯­çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šåœ¨å››çº¿æ ¼å­ä¸­ç»ƒä¹ è‹±æ–‡å­—æ¯çš„ä¹¦å†™ã€‚ä¸€èˆ¬æŠŠè‹±æ–‡å­—æ¯çºµå‘ç­‰åˆ†å››çº¿ä¸‰æ ¼ï¼Œç¬¬ä¸‰æ¡çº¿ç§°ä¸ºåŸºçº¿ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨CSSä¸­ï¼Œleading æŒ‡å†…å®¹é«˜åº¦ä¸Ž line-height å±žæ€§å€¼çš„å·®å¼‚ã€‚ leading çš„ä¸€åŠå«ä½œ half- leading ã€‚ç”¨æˆ·ä»£ç†é€šè¿‡å‘ inline box çš„é¡¶éƒ¨å’Œåº•éƒ¨å„æ·»åŠ ä¸€ä¸ª half-leading æ¥è®©å­—ä½“åž‚ç›´å±…ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœä¸€ä¸ªå­—ä½“æ˜¯ â€œ12ptâ€ é«˜ï¼Œline-height æ˜¯ â€œ14ptâ€ ï¼Œé‚£ä¹ˆå¤šå‡ºæ¥çš„ 2pt å°±ä¼šè¢«åŠ ä¸Šï¼š1pt åŠ åˆ°å­—ä½“é¡¶éƒ¨ï¼Œ1pt åŠ åˆ°å­—ä½“åº•éƒ¨ã€‚ï¼ˆè¿™ä¸ªç‰¹æ€§ä¹Ÿé€‚ç”¨äºŽç©ºç›’å­ï¼Œå°±åƒè¿™ä¸ªç©ºç›’å­åŒ…å«äº†ä¸€ä¸ªé«˜åº¦ä¸ºé›¶çš„å­—å¬ï¼‰ In CSS, leading refers to the difference between the content height and the value of the line-height property. Half the leading is called the half-leading. User agents center glyphs vertically in an inline box, which adds half-leading on the top and bottom. For example, if a piece of text is â€œ12ptâ€ high and the line-height value is â€œ14ptâ€, 2pt of extra space should be added: 1pt above and 1pt below the text (this applies to empty boxes as well, as if the empty box contained zero-height text). â€”â€”ç»´åŸºç™¾ç§‘ MDN ä¸­å¯¹ line-height çš„è§£é‡Šå¦‚ä¸‹ï¼š line-height CSS å±žæ€§ç”¨äºŽè®¾ç½®å¤šè¡Œå…ƒç´ çš„ç©ºé—´é‡ï¼Œæ¯”å¦‚æ–‡æœ¬ã€‚å¯¹äºŽå—çº§å…ƒç´ ï¼Œå®ƒæŒ‡å®šå…ƒç´ è¡Œç›’ï¼ˆline boxesï¼‰çš„æœ€å°é«˜åº¦ã€‚å¯¹äºŽéžæ›¿ä»£çš„inlineå…ƒç´ ï¼Œå®ƒç”¨äºŽè®¡ç®—è¡Œç›’ï¼ˆline boxï¼‰çš„é«˜åº¦ã€‚ â€‹ line-height å±žæ€§å®šä¹‰äº†å†…è”å…ƒç´ çš„é¡¶éƒ¨å’Œåº•éƒ¨çš„ç©ºé—´é‡ã€‚ä¹Ÿå°±æ˜¯é‚£äº›å±žæ€§ä¸º display:inline æˆ– dispaly:inline-block çš„å…ƒç´ ã€‚å®ƒå¯ä»¥æŽ¥æ”¶å…³é”®è¯ normal ï¼Œnone ä½œä¸ºå±žæ€§å€¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŽ¥æ”¶ æ•°å­—ï¼Œé•¿åº¦ä»¥åŠç™¾åˆ†æ¯”ã€‚ â€‹ æ ¹æ®è§„èŒƒï¼Œnormal çš„å€¼å¹¶ä¸æ˜¯ç›´æŽ¥åº”ç”¨äºŽå…ƒç´ çš„ä¸€ä¸ªå…·ä½“çš„å€¼ï¼Œè€Œæ˜¯æ ¹æ®å…ƒç´ è®¾ç½®ï¼ˆæˆ–ç»§æ‰¿ï¼‰ çš„å­—ä½“å¤§å°è®¡ç®—å‡ºçš„ åˆç†çš„ å€¼ï¼Œå–å†³äºŽå®¢æˆ·ç«¯ä»£ç†ä¸­å…ƒç´ åº”ç”¨çš„font-family ï¼Œæ¡Œé¢æµè§ˆå™¨ï¼ˆåŒ…æ‹¬Firefoxï¼‰é»˜è®¤å€¼å¤§çº¦ä¸º1.2ã€‚ â€‹ åœ¨ Chrome è°ƒè¯•å·¥å…·ä¸­æŸ¥çœ‹å…ƒç´ çš„è¡Œå·çš„è®¡ç®—å€¼ï¼Œåªèƒ½çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„ normal ï¼Œå¹¶ä¸èƒ½ç›´æŽ¥çœ‹å‡ºå®žé™…è¡Œé«˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Firefox æµè§ˆå™¨ä¸‹ä½¿ç”¨åŒæ ·çš„æ–¹å¼æŸ¥çœ‹ï¼ŒFirefox æµè§ˆå™¨ä¼šæ˜¾ç¤ºå‡ºè®¡ç®—å‡ºçš„å®žé™…è¡Œé«˜çš„åƒç´ å€¼ã€‚ â€‹ é•¿åº¦å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ CSS é•¿åº¦å•ä½ï¼ˆpxï¼Œemï¼Œremç­‰ï¼‰ã€‚ â€‹ ç™¾åˆ†æ¯”æ˜¯æŒ‡ï¼Œç”¨å­—ä½“å¤§å°ä¹˜ä»¥è¿™ä¸ªç™¾åˆ†æ¯”å€¼ï¼Œä¾‹å¦‚ï¼š See the Pen JejRVW by RedCorss (@redcorss) on CodePen. â€‹ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå››æ®µæ–‡å­—çš„ line-height åˆ†åˆ«è®¾ç½®ä¸º 150%ï¼Œ200%ï¼Œ250%ï¼Œnormalã€‚å­—ä½“å¤§å°éƒ½æ˜¯ 20pxã€‚æœ€ç»ˆè®¡ç®—å‡ºæ¥çš„è¡Œé«˜å°±åˆ†åˆ«æ˜¯ 30pxï¼Œ40pxï¼Œ50pxï¼Œnormalæœ€ç»ˆçš„è®¡ç®—è¡Œé«˜ä¸Ž font-familyï¼Œfont-sizeï¼Œæµè§ˆå™¨ç”šè‡³æ“ä½œç³»ç»Ÿæœ‰å…³ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç¡®åˆ‡çš„æ•°å€¼ã€‚ â€‹ è§„èŒƒæŽ¨èç”¨æ— å•ä½æ•°å­—ä½œä¸º line-height çš„å€¼ã€‚æ— å•ä½æ•°å­—å¯ä»¥æ˜¯ä»»æ„æ•°å­—ï¼ŒåŒ…æ‹¬ decimal ç±»åž‹ã€‚ â€‹ æŽ¨èæ— å•ä½æ•°å­—è¡Œé«˜ï¼Œæ˜¯å› ä¸ºå­å…ƒç´ ä¼šç»§æ‰¿æ— å•ä½æ•°å­—è¡Œé«˜ï¼Œè€Œä¸æ˜¯è¡Œé«˜çš„è®¡ç®—å€¼ï¼Œè¿™æ ·å­å…ƒç´ å¯ä»¥æ ¹æ®è‡ªå·±è®¡ç®—å‡ºçš„å­—ä½“å¤§å°æ¥è®¡ç®—å‡ºé€‚åˆè‡ªå·±çš„è¡Œé«˜ï¼Œè€Œä¸æ˜¯ç›´æŽ¥ä»Žçˆ¶å…ƒç´ ç»§æ‰¿ä¸€ä¸ªå›ºå®šçš„è¡Œé«˜ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS border-radius]]></title>
    <url>%2F2018%2F10%2F31%2FCSS-border-radius%2F</url>
    <content type="text"><![CDATA[â€‹ ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ª border-radius:50% å’Œ 100% æœ‰ä»€ä¹ˆä¸åŒ çš„é—®é¢˜ï¼ŒæŸ¥èµ„æ–™æ—¶åœ¨ YouTubeæ‰¾åˆ°äº†è¿™ä¸ªè§†é¢‘ï¼Œå…³äºŽ border-radius çš„è¿ç”¨ï¼Œé‡Œé¢æœ‰å¾ˆå¤šç²¾å½©çš„å†…å®¹ï¼Œæˆ‘å°†å­—å¹•ç¿»è¯‘æˆäº†ä¸­æ–‡ã€‚è§†é¢‘ä¸­çš„æ¼”è®²è€… @LeaVerou æ›¾ç»åœ¨ W3C å·¥ä½œï¼Œè¿™æ˜¯å¥¹åœ¨2014å¹´åšè¿‡çš„ä¸€ä¸ªæ¼”è®²ï¼Œé‚£æ—¶åº”è¯¥æ­£åœ¨ W3C å°±èŒã€‚ YouTube è§†é¢‘å’Œå­—å¹•ä¸‹è½½ è§†é¢‘å’Œå­—å¹•ä¸‹è½½ä½¿ç”¨ Chrome æµè§ˆå™¨ + Tampermonkey æ‰©å±• + YouTube Download + Youtube Subtitle Downloader v20 è„šæœ¬ å­—å¹•é»˜è®¤ä¸‹è½½ä¸º srt æ ¼å¼ï¼Œè¦åœ¨ HTML5 çš„ Videoæ ‡ç­¾å†…ä½¿ç”¨ track æ ‡ç­¾åµŒå…¥å­—å¹•ï¼Œéœ€è¦å°† srt è½¬æ¢ä¸º vtt æ ¼å¼ï¼Œä½¿ç”¨ åœ¨çº¿è½¬æ¢å·¥å…· ç¿»è¯‘å­—å¹•ï¼Œå› ä¸ºéžä¸“ä¸šä¹Ÿä¸æ˜¯ç»å¸¸å¹²è¿™ä¸ªï¼Œå°±ç”¨ notepad++ æ‰“å¼€åŽé€è¡Œç¿»è¯‘ï¼Œä¿å­˜ã€‚ ä¸Šä¼ è§†é¢‘å­—å¹•åˆ°CDNè§†é¢‘è¿™ç±»æ¯”è¾ƒå¤§çš„é™æ€èµ„æºæ–‡ä»¶å¦‚æžœç›´æŽ¥ä¸Šä¼ åˆ°ç«™ç‚¹æœåŠ¡å™¨ä¸Šï¼Œä¸€æ–¹é¢å¯èƒ½ä¼šåŠ è½½æ¯”è¾ƒæ…¢ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿä¼šå¢žåŠ åå‘ä»£ç†æœåŠ¡å™¨çš„æµé‡å¼€é”€ï¼Œæ‰€ä»¥åˆ©ç”¨äº† ä¸ƒç‰›äº‘ æ¯å¤©10Gæµé‡çš„å…è´¹ CDNï¼Œå°†è§†é¢‘å’Œå­—å¹•éƒ½ä¸Šä¼ åŽæ‹·è´å¤–é“¾ Markdown åµŒå…¥è§†é¢‘Markdownä¸­åµŒå…¥å¤æ‚å…ƒç´ æœ‰å¤šç§æ–¹æ¡ˆï¼Œå¯ä»¥å€ŸåŠ©ä¸€äº›ä¸“é—¨æ”¯æŒ video çš„ Hexo æ’ä»¶ï¼Œæˆ‘æ²¡æœ‰è£…è¿™ç§æ’ä»¶ï¼Œè€Œæ˜¯é€‰æ‹©ç”¨ å°† HTML ç›´æŽ¥æ³¨å…¥åˆ° Markdown æ–‡æ¡£ä¸­ï¼Œè¿™æ · Hexo åœ¨å°† md æ–‡æ¡£æ¸²æŸ“æˆ html æ—¶ä¼šå°†æ³¨å…¥çš„ HTML ä»£ç åŽŸæ ·è¾“å‡ºï¼Œä»Žè€Œè¾¾åˆ° HTML ä»£ç æ³¨å…¥çš„ç›®çš„ï¼Œä»£ç å¦‚ä¸‹ 123456789101112&#123;% raw %&#125;&lt;div style="width:1080px;margin:0 auto;"&gt;&lt;video controls mutedsrc="//phbiw9gl9.bkt.clouddn.com/video_sub.mp4"width="600"height="400"&gt;&lt;track label="English" kind="subtitles" srclang="en" src="//phbiw9gl9.bkt.clouddn.com/video.vtt" default&gt;&lt;/video&gt;&lt;/div&gt;&#123;% endraw %&#125; è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œä¸€å¼€å§‹ vtt å­—å¹•æ–‡ä»¶ä¼šåŠ è½½å¤±è´¥ï¼Œæµè§ˆå™¨æŽ§åˆ¶å°è¾“å‡º blocked:origin é”™è¯¯ï¼ŒçŒœæµ‹å¤§æ¦‚æ˜¯åŒæºç­–ç•¥å¯¼è‡´çš„ï¼Œå¯ä»¥åœ¨ Video æ ‡ç­¾çš„å±žæ€§ä¸­å¢žåŠ  ä¸€é¡¹crossorigin=&quot;anonymous&quot;ï¼Œ è¿™æ ·å°±å…è®¸å­—å¹•æ–‡ä»¶ä¸åŒæº å…è®¸è·¨åŸŸåŽå‘çŽ°å­—å¹•åŠ è½½åˆå¤±è´¥äº†ï¼Œå‡ºé”™ä¸º blocked:mixed-content ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºæˆ‘åœ¨ HTTPS çš„ç½‘ç«™ä¸­åŠ è½½äº†ä¸å®‰å…¨çš„ HTTP èµ„æºï¼Œæµè§ˆå™¨æ˜¯ä¸å…è®¸è¿™ç§æ“ä½œçš„ï¼Œæˆ‘çš„ä¸ƒç‰›äº‘åŸŸåç”¨çš„æµ‹è¯•åŸŸåï¼Œæ­£å¼åŸŸåè¿˜åœ¨å¤‡æ¡ˆï¼Œåªèƒ½ç”¨ HTTP ï¼ŒäºŽæ˜¯æˆ‘åªèƒ½å°† .vtt å­—å¹•æ–‡ä»¶ä¸Šä¼ åˆ°æˆ‘çš„ Github pages åšå®¢ä¸­ï¼Œæœ€ç»ˆçš„é…ç½®å°±å˜æˆäº† 123456789101112&#123;% raw %&#125;&lt;div style="width:1080px;"&gt;&lt;video style="margin:0 auto;display:inherit" controls mutedsrc="http://phbiw9gl9.bkt.clouddn.com/video_sub.mp4"crossorigin="anonymous"width="600"height="400"&gt;&lt;track label="English" kind="subtitles" srclang="en" src="https://kinboyw.github.io/fedemo/resume/video/video.vtt" crossorigin="anonymous" default&gt;&lt;/video&gt;&lt;/div&gt;&#123;% endraw %&#125; :sushi: å¤œæ·±äº†ï¼Œé¥¿]]></content>
      <categories>
        <category>FE</category>
        <category>blog</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Absolute, Relative, Fixed ,å‡ ç§CSSå®šä½æœ‰ä½•ä¸åŒ]]></title>
    <url>%2F2018%2F10%2F30%2FAbsolute-Relative-Fixed-%E5%87%A0%E7%A7%8DCSS%E5%AE%9A%E4%BD%8D%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C%2F</url>
    <content type="text"><![CDATA[â€‹ â€‹ é¦–å…ˆè¦ç†è§£çš„ä¸€ä¸ªéžå¸¸é‡è¦çš„æ¦‚å¿µå°±æ˜¯ï¼Œé¡µé¢ä¸Šçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå—ï¼ˆblockï¼‰ã€‚å­—é¢æ„æ€æ˜¯ä¸€ä¸ªåƒç´ çŸ©å½¢ã€‚å¦‚æžœä½ å°†å…ƒç´ è®¾ç½®ä¸º display:block; æˆ–è€…è¿™ä¸ªå…ƒç´ æœ¬èº«é»˜è®¤çš„å°±æ˜¯ display:block; ï¼›è¿™æ„å‘³ç€ä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„å®½é«˜ï¼Œè¿™ä¸ªå…ƒç´ ä¹Ÿä¼šéµå¾ªå®ƒã€‚ä½†æ˜¯é‚£äº›é»˜è®¤æ˜¯ display:inline; çš„å…ƒç´ ï¼Œå°±åƒé»˜è®¤æƒ…å†µä¸‹çš„ï¼Œä¹Ÿæ˜¯çŸ©å½¢ï¼Œä»–ä»¬åªæ˜¯ç”¨ä¸åŒçš„æ–¹å¼æµå…¥é¡µé¢ï¼Œå°½å¯èƒ½çš„æ¨ªå‘æŽ’åˆ—ã€‚ â€‹ æ—¢ç„¶ä½ çŽ°åœ¨å¯ä»¥å°†æ¯ä¸ªé¡µé¢å…ƒç´ éƒ½è§†ä½œä¸€ä¸ªåƒç´ å—äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥èŠä¸€èŠå¦‚ä½•ä½¿ç”¨å…ƒç´ å®šä½æ¥å°†è¿™äº›åƒç´ å—æ”¾ç½®åˆ°é¡µé¢ä¸Šæˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ã€‚è¿™é‡Œæˆ‘ä»¬å°†ä¸ä¼šå¯¹ç›’æ¨¡åž‹è¿›è¡Œä»»ä½•è®¨è®ºï¼Œä½†æ˜¯å®ƒåœ¨è¿™é‡Œç¡®å®žä¼šæœ‰å½±å“â€¦ Static ï¼šè¿™æ˜¯æ¯ä¸€ä¸ªé¡µé¢å…ƒç´ çš„é»˜è®¤è®¾ç½®ã€‚ä¸åŒç±»åž‹çš„å…ƒç´ çš„é»˜è®¤å®šä½éƒ½æ˜¯ static ã€‚Static æ²¡æœ‰åˆ«çš„æ„æ€ï¼Œå®ƒå°±æ˜¯è¯´è¿™ä¸ªå…ƒç´ ä¼šæµåˆ°é¡µé¢ä¸Šå®ƒæœ¬åº”è¯¥åœ¨çš„ä½ç½®ã€‚ä½ å°†å…ƒç´ è®¾ç½®ä¸º position:static; çš„å”¯ä¸€ç†ç”±å°±æ˜¯å¼ºåˆ¶æ¸…é™¤å…ƒç´ ä¸Šåœ¨å…¶ä»–åœ°æ–¹åº”ç”¨çš„å®šä½è®¾ç½®ã€‚è¿™ç§æƒ…å†µæžå°‘ï¼Œå› ä¸ºå®šä½å±žæ€§ä¸ä¼šç»§æ‰¿ã€‚ Relative ï¼šè¿™ç§å®šä½ç±»åž‹å¯èƒ½æ˜¯æœ€å®¹æ˜“æ··æ·†å’Œç”¨é”™çš„ã€‚å®ƒçœŸæ­£çš„æ„æ€æ˜¯â€œç›¸å¯¹è‡ªèº«â€ã€‚å¦‚æžœä½ åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šè®¾ç½®äº† position:relative; ä½†æ˜¯æ²¡æœ‰è®¾ç½®å…¶ä»–å®šä½å±žæ€§ï¼ˆtopï¼Œleftï¼Œbottomï¼Œæˆ–è€…rightï¼‰ï¼Œå°±å®Œå…¨ä¸ä¼šå½±å“è¿™ä¸ªå…ƒç´ çš„å®šä½ï¼Œå®ƒä¼šä¿æŒåœ¨åŽŸåœ°ï¼Œå°±åƒè®¾ç½®ä¸º position:absolute; ä¸€æ ·ã€‚ä½†æ˜¯å¦‚æžœä½ çš„ç¡®è®¾ç½®äº†ä¸€äº›å…¶ä»–çš„å®šä½å±žæ€§ï¼Œå‡å¦‚è¯´ï¼Œ top:10px; ,å®ƒä¼šä»Žè‡ªå·±å½“å‰çš„ä½ç½®å‘ä¸‹ç§»åŠ¨ 10 åƒç´ ã€‚æˆ‘ç¡®å®šä½ èƒ½æƒ³è±¡ï¼Œèƒ½å¤ŸåŸºäºŽå¸¸è§„ä½ç½®ç§»åŠ¨ä¸€ä¸ªå…ƒç´ éžå¸¸æœ‰ç”¨ã€‚æˆ‘è‡ªå·±ç»å¸¸ç”¨è¿™ä¸­æ–¹å¼æ¥æŽ’åˆ—é‚£äº›æ²¡æœ‰æŒ‰ç…§æˆ‘å¸Œæœ›çš„æ–¹å¼æŽ’åˆ—çš„è¡¨å•å…ƒç´ ã€‚ å½“ä½ åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šè®¾ç½® position:relative; çš„æ—¶å€™éœ€è¦æ³¨æ„å¦å¤–ä¸¤ä»¶äº‹ã€‚ä¸€ä¸ªæ˜¯ç›¸å¯¹å®šä½å¼•å…¥äº†åœ¨è¿™ä¸ªå…ƒç´ ä¸Šä½¿ç”¨ z-index çš„èƒ½åŠ›ï¼Œå³å…ƒç´ ä½¿ç”¨ç›¸å¯¹å®šä½ï¼Œä¸” z-index çš„å€¼ä¸ç­‰äºŽ auto çš„æ—¶å€™ ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰ ï¼Œè¿™åœ¨ç»å¯¹å®šä½çš„å…ƒç´ ä¸Šæ˜¯å¹¶ä¸çœŸæ­£èµ·ä½œç”¨çš„ã€‚ç”šè‡³å¦‚æžœä½ æ²¡æœ‰è®¾ç½®ä¸€ä¸ª z-index çš„å€¼ï¼Œè¿™ä¸ªå…ƒç´ ä¹Ÿä¼šå‡ºçŽ°åœ¨å…¶ä»–å†³å®šå¯¹ä½å…ƒç´ çš„é¡¶å±‚ã€‚å¦ä¸€ä»¶äº‹æ˜¯ ç›¸å¯¹å®šä½é™åˆ¶äº†ç»å¯¹å®šä½å­å…ƒç´ çš„ä½œç”¨èŒƒå›´ ã€‚ä»»ä½•ç›¸å¯¹å®šä½å…ƒç´ çš„å­å…ƒç´ éƒ½å¯ä»¥ç»å¯¹å®šä½åœ¨è¯¥å—çš„å†…éƒ¨ã€‚è¿™å¸¦æ¥äº†ä¸€äº›å¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘åœ¨è¿™é‡Œè¯´è¿‡ã€‚ See the Pen Relative positioning by RedCorss (@redcorss) on CodePen. Absoluteï¼šè¿™æ˜¯ä¸€ç§éžå¸¸å¼ºå¤§çš„å®šä½ç±»åž‹ï¼Œå…è®¸ä½ ç›´ç™½åœ°å°†ä»»ä½•é¡µé¢å…ƒç´ æ”¾ç½®åˆ°ä½ æƒ³è¦çš„ä½ç½®ã€‚ä½¿ç”¨ topï¼Œleftï¼Œbottomï¼Œå’Œ right æ¥è®¾å®šä½ç½®ã€‚è®°ä½ï¼Œè¿™äº›å€¼æ˜¯ç›¸å¯¹äºŽæœ€è¿‘çš„ä¸€ä¸ªå…·æœ‰ç›¸å¯¹ï¼ˆæˆ–è€…ç»å¯¹ï¼‰å®šä½çš„çˆ¶å…ƒç´ ã€‚å¦‚æžœæ²¡æœ‰è¿™æ ·çš„çˆ¶å…ƒç´ ï¼Œå®ƒå°±ä¼šé»˜è®¤çš„æ‰¾åˆ°æœ€å¤–å±‚çš„ &lt;html&gt; å…ƒç´ ï¼Œå°±æ˜¯è¯´ç›¸å¯¹äºŽæ•´ä¸ªç½‘é¡µç§»åŠ¨ã€‚ ä½¿ç”¨ç»å¯¹å®šä½éœ€è¦æƒè¡¡ï¼ˆä¹Ÿæ˜¯éœ€è¦è®°ä½çš„æœ€é‡è¦çš„ï¼‰çš„åœ°æ–¹æ˜¯è¿™äº›å…ƒç´ ä¼šä»Žé¡µé¢çš„æ–‡æ¡£æµä¸­è¢«ç§»é™¤ï¼ŒäºŽæ˜¯åŽç»­å…ƒç´ ä¼šè‡ªç„¶åœ°å°½å¯èƒ½å‘ä¸Šæµ®åŠ¨ã€‚ä¸€ä¸ªå…·æœ‰ç»å¯¹å®šä½çš„å…ƒç´ ä¸å—å…¶ä»–å…ƒç´ å½±å“ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–å…ƒç´ ã€‚è¿™æ˜¯ä¸€ä¸ªä½ æ¯æ¬¡ä½¿ç”¨ç»å¯¹å®šä½æ—¶éƒ½è¦è®¤çœŸæ€è€ƒçš„é—®é¢˜ã€‚æ»¥ç”¨å’Œé”™è¯¯åœ°ä½¿ç”¨ç»å¯¹å®šä½éƒ½ä¼šé™åˆ¶ä½ çš„ç½‘ç«™çš„çµæ´»æ€§ See the Pen Absolute positioning by RedCorss (@redcorss) on CodePen. Fixedï¼šè¿™ç§å®šä½éžå¸¸å°‘è§ï¼Œä½†æ˜¯ä¹Ÿæœ‰å®ƒçš„ä½œç”¨ã€‚å›ºå®šå®šä½å…ƒç´ æ˜¯ç›¸å¯¹äºŽè§†å£ï¼ˆviewportï¼‰ ï¼Œæˆ–è€…æµè§ˆå™¨çª—å£çš„ã€‚å½“çª—å£æ»šåŠ¨æ—¶è§†å£ä¸ä¼šæ”¹å˜ï¼Œæ‰€ä»¥å½“é¡µé¢æ»šåŠ¨æ—¶å›ºå®šå®šä½å…ƒç´ ä¼šä¿æŒåœ¨åŽŸä½ç½®ï¼Œåˆ¶é€ å‡ºä¸€ç§è¿‡åŽ»è€å¥—çš„ â€œå¸§â€ ä¸€æ ·çš„æ•ˆæžœã€‚è¿™ç§å®šä½çš„ä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®žçŽ°å¯¼èˆªæ ï¼Œé¡µé¢æ»šåŠ¨æ—¶ï¼Œå¯¼èˆªæ å›ºå®šå®šä½ï¼Œå§‹ç»ˆåœç•™åœ¨å½“å‰è§†å£ä¸­ï¼Œä¸ä¼šç§»å‡ºè§†çº¿ã€‚ç¼ºç‚¹æ˜¯ï¼Œè¿™ç§æ•ˆæžœå¯¹è®¾å¤‡çš„å…¼å®¹æ€§è¾ƒå·®ï¼Œåœ¨å°å±å¹•çš„ç¬”è®°æœ¬ï¼Œå¹³æ¿æˆ–è€…æ‰‹æœºä¸Šï¼Œä¾§è¾¹å¯¼èˆªæ çš„å†…å®¹å¯èƒ½ä¼šè¢«æˆªæ–­ï¼Œå½±å“ä½¿ç”¨ã€‚æ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆé…·çš„æ•ˆæžœï¼Œæœ‰å®ƒçš„ç”¨å¤„ï¼Œä½†æ˜¯ä½¿ç”¨æ—¶éœ€è¦å……åˆ†æµ‹è¯•ã€‚ See the Pen Fixed positioning by RedCorss (@redcorss) on CodePen. Stickyï¼šç›®å‰æ˜¯å®žéªŒå±žæ€§ï¼Œç²˜æ€§å®šä½å¯ä»¥è¢«è®¤ä¸ºæ˜¯ Relative å®šä½ä¸Ž Fixed å®šä½çš„æ··åˆä½“ã€‚ç²˜æ€§å®šä½åœ¨ç»™å®šçš„é˜ˆå€¼èŒƒå›´å†…éƒ½æ˜¯è¢«å½“æˆä¸€ä¸ªç›¸å¯¹å®šä½å…ƒç´ å¯¹å¾…ï¼Œç›´åˆ°ç§»åŠ¨å‡ºäº†çˆ¶å…ƒç´ è¾¹ç•Œå°±å˜æˆä¸€ä¸ªå›ºå®šå®šä½å…ƒç´ äº†ã€‚ See the Pen Sticky positioning by RedCorss (@redcorss) on CodePen.]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>CS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS Positioning]]></title>
    <url>%2F2018%2F10%2F30%2FCSS%20Positioning%2F</url>
    <content type="text"><![CDATA[1. position:staticposition:static æ˜¯æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å®šä½ï¼Œå°±æ˜¯è¯´å…ƒç´ æ²¡æœ‰å®šä½ï¼Œå‡ºçŽ°åœ¨æ–‡æ¡£ä¸­é€šå¸¸çš„ä½ç½®ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸ç”¨åŽ»æŒ‡å®šå®ƒï¼Œé™¤éžä½ éœ€è¦ç”¨å®ƒæ¥è¦†ç›–å‰é¢çš„å®šä½è®¾ç½®ã€‚ 123#div-1 &#123; position:static;&#125; å¦‚æžœæŒ‡å®šäº† position:relativeï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ top æˆ–è€… bottom , left æˆ–è€… right æ¥å°†å…ƒç´ ç§»åŠ¨åˆ°ä¸€ä¸ªç›¸å¯¹äºŽå®ƒåŽŸæ¥åœ¨æ–‡æ¡£ä¸­ä½ç½®çš„æ–°çš„ä½ç½®ã€‚ æˆ‘ä»¬æ¥å°† div-1 å‘ä¸‹ç§»åŠ¨ 20 åƒç´ ï¼Œå‘å·¦ç§»åŠ¨ 40 åƒç´ ï¼š 12345#div-1 &#123; position:relative; top:20px; left:-40px;&#125; æ³¨æ„ div-1 ç§»åŠ¨å‰åº”è¯¥åœ¨çš„ä½ç½®ï¼ŒçŽ°åœ¨æ˜¯ç©ºçš„äº†ã€‚å½“æˆ‘ä»¬ç§»åŠ¨ div-1 æ—¶ï¼Œ ç´§æŒ¨ç€çš„å…ƒç´ ï¼ˆdiv-afterï¼‰å¹¶æ²¡æœ‰éšä¹‹ç§»åŠ¨ã€‚é‚£æ˜¯å› ä¸º div-1 å³ä½¿æˆ‘ä»¬ç§»åŠ¨äº† div-1 ï¼Œå®ƒå®žé™…ä¸Šä»ç„¶å æ®ç€æ–‡æ¡£ä¸­åŽŸæ¥çš„ä½ç½®ã€‚ çœ‹ä¸ŠåŽ»ä¼¼ä¹Ž position:relative ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯åœ¨åŽé¢çš„æ•™ç¨‹ä¸­ï¼Œå®ƒä¼šæ‰®æ¼”ä¸€ä¸ªé‡è¦çš„è§’è‰²ã€‚ 3. position:absoluteå½“ä½ æŒ‡å®šäº† position:absolute, å…ƒç´ ä¼šä»Žå½“å‰æ–‡æ¡£ï¼ˆæµï¼‰ä¸­ç§»é™¤ï¼Œå¹¶ä¸”é‡æ–°è¢«æ”¾ç½®åˆ°ä½ æŒ‡å®šçš„ä½ç½®ã€‚ è®©æˆ‘ä»¬ç§»åŠ¨ div-1 åˆ°é¡µé¢çš„å³ä¸Šè§’ï¼š 123456#div-1a &#123; position:absolute; top:0; right:0; width:200px;&#125; è¿™æ¬¡è¦æ³¨æ„ï¼Œå› ä¸º idv-1a ä»Žå½“å‰æ–‡æ¡£ï¼ˆæµï¼‰ä¸­è¢«ç§»é™¤äº†ï¼Œæ‰€ä»¥é¡µé¢ä¸Šå…¶ä»–å…ƒç´ çš„å®šä½ä¹Ÿå› æ­¤å‘ç”Ÿäº†å˜åŒ–ï¼šdiv-1bï¼Œdiv-1cï¼Œå’Œ div-after éƒ½å‘ä¸Šç§»åŠ¨äº†ï¼Œå› ä¸º div-1a å·²ç»ä¸åœ¨é‚£é‡Œäº†ã€‚ ä¹Ÿè¦æ³¨æ„ div-1a å®šä½åˆ°äº†é¡µé¢çš„å³ä¸Šè§’ã€‚è™½ç„¶èƒ½å¤Ÿç›´æŽ¥åœ¨é¡µé¢ä¸Šå®šä½å…ƒç´ å¾ˆä¸é”™ï¼Œä½†æ˜¯è¿™æ ·åšçš„ç”¨å¤„ä¹Ÿå¾ˆæœ‰é™ã€‚ æˆ‘çœŸæ­£éœ€è¦çš„æ˜¯è®© div-1a ç›¸å¯¹äºŽ div-1 å®šä½ã€‚è¿™é‡Œå°±éœ€è¦ç›¸å¯¹å®šä½çš„åŠ å…¥äº†ã€‚ å¤‡æ³¨ï¼š åœ¨Windows çš„ IE æµè§ˆå™¨ä¸­æœ‰ä¸€ä¸ª bug ï¼šå¦‚æžœä½ æŒ‡å®šä¸€ä¸ªç›¸å¯¹å®½åº¦ï¼ˆä¾‹å¦‚ï¼Œâ€width:50%â€ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå®½åº¦å°†ä¼šæ˜¯åŸºäºŽçˆ¶å…ƒç´ çš„ï¼Œè€Œä¸æ˜¯å‘ç”Ÿå®šä½çš„å…ƒç´ ã€‚ 4. position:relative + position:absoluteå¦‚æžœæˆ‘ä»¬åœ¨ div-1 ä¸Šé¢è®¾ç½®äº† relative å®šä½ï¼Œé‚£ä¹ˆ div-1 å†…éƒ¨çš„ä»»ä½•å…ƒç´ çš„å®šä½éƒ½å°†æ˜¯ç›¸å¯¹ä¸Ž div-1 çš„ã€‚å¦‚æžœæˆ‘ä»¬åœ¨ div-1a ä¸Šè®¾ç½®äº†ç»å¯¹å®šä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°† div-1a ç§»åŠ¨åˆ° div-1 çš„å³ä¸Šè§’åŽ»äº†ã€‚ 123456789#div-1 &#123; position:relative;&#125;#div-1a &#123; position:absolute; top:0; right:0; width:200px;&#125; 5. two column absoluteçŽ°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨ç›¸å¯¹å®šä½å’Œç»å¯¹å®šä½æ¥åˆ¶ä½œä¸¤æ å¸ƒå±€ï¼ˆä¸¤åˆ—å¸ƒå±€ï¼‰äº†ï¼ 123456789101112131415#div-1 &#123; position:relative;&#125;#div-1a &#123; position:absolute; top:0; right:0; width:200px;&#125;#div-1b &#123; position:absolute; top:0; left:0; width:200px;&#125; ä½¿ç”¨ç»å¯¹å®šä½çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…ƒç´ ä»¥ä»»æ„é¡ºåºå®šä½åœ¨é¡µé¢ä¸Šï¼Œä¸ç”¨ç®¡ä»–ä»¬å‡ºçŽ°åœ¨ HTML ä¸­çš„é¡ºåºã€‚æ‰€ä»¥æˆ‘å°† div-1b æ”¾åœ¨äº† div-1a çš„å‰é¢äº†ã€‚ ä¸è¿‡ç­‰ç­‰ - å…¶ä»–å…ƒç´ éƒ½åˆ°å“ªé‡ŒåŽ»äº†ï¼Ÿä»–ä»¬è¢«ç»å¯¹å®šä½çš„å…ƒç´ é®ä½äº†ã€‚ 6. two column absolute heightä¸€ä¸ªè§£å†³åŠžæ³•æ˜¯ç»™è¢«é®ç›–çš„å…ƒç´ ä¸€ä¸ªå›ºå®šçš„é«˜åº¦ã€‚ ä½†æ˜¯åœ¨å¤šæ•°è®¾è®¡ä¸­è¿™ç§æ–¹æ¡ˆæ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸å¹¶ä¸çŸ¥é“è¢«éšè—çš„å…ƒç´ ä¸­å°†ä¼šæœ‰å¤šå°‘æ–‡å­—ï¼Œä¹Ÿä¸çŸ¥é“è¿™äº›æ–‡å­—ç¡®åˆ‡çš„å­—ä½“å¤§å°ã€‚ 12345678910111213141516#div-1 &#123; position:relative; height:250px;&#125;#div-1a &#123; position:absolute; top:0; right:0; width:200px;&#125;#div-1b &#123; position:absolute; top:0; left:0; width:200px;&#125; 7. floatå¯¹äºŽå¯å˜é«˜åº¦çš„åˆ—ï¼Œç»å¯¹å®šä½ä¸èµ·ä½œç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥å°è¯•å¦ä¸€ç§è§£å†³åŠžæ³•ã€‚ æˆ‘ä»¬å¯ä»¥è®©å…ƒç´  â€œæµ®åŠ¨â€ ï¼Œå°†å®ƒæŽ¨åˆ°å°½å¯èƒ½å·¦æˆ–è€…å³çš„ä½ç½®ï¼Œå¹¶å…è®¸æ–‡å­—çŽ¯ç»•å®ƒã€‚è¿™ç§æµ®åŠ¨é€šå¸¸æ˜¯ç”¨äºŽå›¾ç‰‡å…ƒç´ çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å°†å®ƒç”¨äºŽæ›´åŠ å¤æ‚çš„å¸ƒå±€ä»»åŠ¡ï¼ˆå› ä¸ºè¿™æ˜¯æˆ‘ä»¬å”¯ä¸€å¯ç”¨çš„å·¥å…·ï¼‰ã€‚ 1234#div-1a &#123; float:left; width:200px;&#125; 8. float columnså¦‚æžœæµ®åŠ¨ä¸€åˆ—åˆ°å·¦ä¾§ï¼Œå¦ä¸€åˆ—ä¹Ÿæµ®åŠ¨åˆ°å·¦ä¾§ï¼Œä»–ä»¬ä¼šå°½å¯èƒ½å¹¶æŽ’æµ®åŠ¨åˆ°é¡¶ç«¯ã€‚ 12345678#div-1a &#123; float:left; width:150px;&#125;#div-1b &#123; float:left; width:150px;&#125; 9. float columns with clearç„¶åŽåœ¨æµ®åŠ¨å…ƒç´ çš„åŽé¢ï¼Œæˆ‘ä»¬å¯ä»¥ â€œæ¸…é™¤â€ æµ®åŠ¨æ•ˆæžœï¼Œæ¥å°†ä½™ä¸‹çš„å†…å®¹æŒ‰ä½ï¼Œä¸è®©ä»–ä»¬æµ®ä¸Šæ¥ã€‚ 1234567891011#div-1a &#123; float:left; width:190px;&#125;#div-1b &#123; float:left; width:190px;&#125;#div-1c &#123; clear:both;&#125; 10. å…è´£å£°æ˜Žè¿™äº›ç¤ºä¾‹éƒ½åŠå…¶ç®€å•ï¼Œæ—¨åœ¨ç®€å•å®žçŽ°æ•ˆæžœä»¥ä»‹ç»å‡ ä¸ªå®šä½çš„åŠŸèƒ½ï¼Œå¹¶ä¸ä¼šè§¦å‘ä¸€äº› Windows IE æµè§ˆå™¨ä¸­çš„ CSS bugï¼ˆå®žé™…ä¸Šæœ‰å¾ˆå¤šï¼‰ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>CSS</tag>
        <tag>Element-Position</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•é˜…è¯»W3Cè§„èŒƒ]]></title>
    <url>%2F2018%2F10%2F29%2F%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BBW3C%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[å¦‚ä½•é˜…è¯»W3Cè§„èŒƒï¼Ÿ â€‹ çœ‹åˆ°è¿™æ ·ä¸€ç¯‡æ–‡ç« ï¼Œä½œè€…æ˜¯ J. David Eisenberg ï¼ŒäºŽ 2001å¹´9æœˆ28æ—¥å‘è¡¨äºŽ CSS, HTMLã€‚ â€‹ J. David Eisenberg æ˜¯ä¸€ä½ç¨‹åºå‘˜å…¼æ•™å¸ˆï¼Œå’Œä»–çš„çŒ«, Marco Polo å’Œ Big Tonyä¸€èµ·ç”Ÿæ´»åœ¨ San Jose, CA ã€‚å†™è¿‡ä¸€æœ¬å…³äºŽ Scalable Vector Graphicsï¼ˆSVGï¼‰çš„ä¹¦ã€‚å¯¹ OpenDocument Format å’Œ å­¦å¤–è¯­æ„Ÿå…´è¶£ã€‚ â€‹ æˆ‘å°†ä¸»é¢˜å†…å®¹åŠè¦ç‚¹ç¿»è¯‘å¹¶ç½—åˆ—å¦‚ä¸‹ï¼ŒåŽŸæ–‡è¯·çœ‹ How to Read W3C Specsã€‚ â€‹ World Wide Web Consoritiumï¼ˆW3Cï¼‰æ˜¯æ‰€æœ‰ç½‘ç»œæŠ€æœ¯è§„èŒƒçš„å®ˆæŠ¤è€…ã€‚ä½œä¸º web è®¾è®¡è€…ï¼Œä½ åº”è¯¥è®¿é—®è¿‡ä»–ä»¬çš„ç½‘ç«™(w3.org) æ¥å¯»æ‰¾å…³äºŽ XHTML çš„é—®é¢˜çš„ç­”æ¡ˆï¼Œæˆ–è€…å…³äºŽä¸€äº›æ›´æ–°çš„æŠ€æœ¯ï¼Œä¾‹å¦‚ XSL Formatting Objects æˆ–è€… Scalable Vector Graphicsã€‚ï¼ˆæ–‡ç« å‘è¡¨æ—¶é—´è¾ƒæ—©ï¼ŒHTML5 è¿˜æ²¡è¯žç”Ÿï¼‰ â€‹ ä½ è·‘åŽ»çœ‹è§„èŒƒï¼Œç„¶åŽç«‹åˆ»é™·å…¥æ··ä¹±ï¼Œè¯´ï¼šâ€œè¿™æ ¹æœ¬æ²¡æ³•çœ‹ï¼â€ã€‚å®žé™…ä¸Šï¼Œå®ƒæ˜¯å¯è¯»çš„ï¼Œåªè¦ä½ ç†è§£äº†ä¸€ç‚¹å…³é”®ä¿¡æ¯ è§„èŒƒä¸æ˜¯ç”¨æˆ·æ‰‹å†Œ The Bible was not meant to be read, but interpreted. â€”â€”attribution unknown â€‹ å½“ä½ å¯»æ‰¾ç­”æ¡ˆçš„æ—¶å€™ï¼Œä½ å…¶å®žéœ€è¦çš„æ˜¯ç”¨æˆ·æ‰‹å†Œæˆ–è€…æŒ‡å—ï¼Œä½ æƒ³ä½¿ç”¨è¿™é¡¹æŠ€æœ¯ã€‚è€Œè¿™å¹¶ä¸æ˜¯ W3C è§„èŒƒçš„ç›®çš„ã€‚â€œspecâ€ çš„ç›®çš„æ˜¯å‘Šè¯‰é‚£äº›è¦å®žçŽ°è¿™ä¸ªè§„èŒƒçš„ç¨‹åºå‘˜ï¼Œå¿…é¡»è¦æœ‰å“ªäº›ç‰¹æ€§ï¼Œä»¥åŠå¦‚ä½•å®žçŽ°è¿™äº›ç‰¹æ€§ã€‚ â€‹ å½“ä½ åœ¨ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯æ—¶ï¼Œå¯èƒ½æ²¡æœ‰ä»»ä½•ç”¨æˆ·å‚è€ƒæ‰‹å†Œï¼›å”¯ä¸€å¯ç”¨çš„æ–‡æ¡£å°±æ˜¯æŠ€æœ¯è§„èŒƒã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå­¦ä¹ é˜…è¯»è§„èŒƒå°±æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¥¢ä¾ˆçš„äº‹æƒ…äº†ã€‚ è§„èŒƒçš„ç»“æž„â€‹ å¤§éƒ¨åˆ†è§„èŒƒéƒ½æœ‰ä¸€ä¸ªæè¿°æ–‡æ¡£è‡ªèº«çš„ç« èŠ‚ã€‚ä¾‹å¦‚ HTML å’Œ CSS è§„èŒƒçš„ç¬¬ä¸€èŠ‚å°±æ˜¯å‘Šè¯‰ä½ è§„èŒƒçš„å„ä¸ªéƒ¨åˆ†æ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®é˜…è¯»è§„èŒƒã€‚ åŸºæœ¬æ¦‚å¿µ I hate definitions. â€”â€”Benjamin Disraeli W3C è§„èŒƒæ˜¯ç”¨æ—¥æœ¬æ­Œèˆžä¼Žå‰§ä¸­çš„ä»ªå¼åŒ–å½¢å¼ç¼–å†™çš„ï¼Œå½“ä½ é˜…è¯»è§„èŒƒæ—¶ï¼Œä½ å°†ä¼šé‡åˆ°è¿™äº›è¯è¯­ normative â€œthis section is normativeâ€ æ„å‘³ç€ä½ å°†é˜…è¯»çš„å†…å®¹æ˜¯å®žçŽ°è€…åº”è¯¥éµå¾ªçš„ç»†èŠ‚ï¼Œè¿™éƒ¨åˆ†ä¸€èˆ¬ä¼šåŒ…å«ç¤ºä¾‹å’Œè§£é‡Šã€‚ user agent ä¸€èˆ¬æ˜¯æŒ‡ç”¨æˆ·ç”¨äºŽè®¿é—®è¯¥æŠ€æœ¯çš„ç¨‹åºçš„ä»£åè¯ã€‚å¯¹äºŽ HTML æ¥è¯´ï¼Œuser agent å°±æ˜¯æŒ‡æµè§ˆå™¨ï¼›å¯¹ Scalable Vector Graphicsï¼ˆSVGï¼‰æ¥è¯´ï¼Œå®ƒå¯èƒ½æ˜¯åƒ Batik è¿™æ ·çš„ç¨‹åº æˆ–è€… Adobeâ€™s SVG viewer è¿™æ ·çš„æ’ä»¶ã€‚ RFC Request For Comment, ä¸€ä¸ªä»£è¡¨äº†äº’è”ç½‘æ ‡å‡†çš„æ–‡æ¡£ã€‚ helping verbs å¦‚æžœä¸€ä¸ªè§„èŒƒè¯´å®ƒéµå¾ªäº† RFC2119 ï¼Œåˆ™æŸäº›åŠ©åŠ¨è¯å°±å…·æœ‰æ­£å¼çš„å«ä¹‰ã€‚must è¡¨ç¤ºå®šä¹‰æ˜¯ç»å¯¹çš„è¦æ±‚ï¼Œmust not è¡¨ç¤ºå®šä¹‰æ˜¯ç»å¯¹çš„ç¦æ­¢ï¼Œshould è¡¨ç¤ºä¸€é¡¹ç‰¹æ€§å¯ä»¥å®žçŽ°ä¹Ÿå¯ä»¥ä¸å®žçŽ°ï¼Œä½†æ˜¯å¦‚æžœä½ ä¸å®žçŽ°å®ƒï¼Œæœ€å¥½è¦æœ‰å……åˆ†çš„ç†ç”±ï¼Œ should not æ„å‘³ç€å¦‚æžœä½ è¦åŠ å…¥ä¸€ä¸ªç‰¹æ€§ï¼Œæœ€å¥½è¦æœ‰å……åˆ†çš„ç†ç”±ã€‚ ç•¥è¯» Dear Aunt Martha: Thank you for the book on elephants. It told me more about elephants than I wanted to know. â€”â€”A childâ€™s thank-you letter â€‹ ä¸å¿…ä»”ç»†é˜…è¯»è§„èŒƒçš„æ¯ä¸€ä¸ªå•è¯ï¼Œå¦‚æžœä½ å‘çŽ°è‡ªå·±å¤„äºŽä¸€ä¸ªå®Œå…¨æ²¡æœ‰ä»»ä½•æœ¯è¯­ç´¢å¼•æ ‡ç­¾çš„åŒºåŸŸï¼Œåˆçœ‹èµ·æ¥åƒæ³•å¾‹æ–‡ä¹¦æˆ–è€…è®¡ç®—æœºç§‘å­¦æ–‡ç« ä¸€æ ·ï¼Œé‚£ä¹ˆå°±ç®€å•çž¥ä¸€çœ¼å°±å¤Ÿäº†ã€‚ â€‹ æ¯”å¦‚åƒä¸‹é¢çš„ XLS:FO è§„èŒƒè¿™äº›éƒ¨åˆ†å°±å®Œå…¨æ˜¯å¯ä»¥è·³è¿‡çš„ã€‚ï¼ˆå®žé™…ä¸Šï¼Œä½œä¸ºä¸€ä¸ªç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªè§„èŒƒçœŸæ­£éœ€è¦ä»”ç»†é˜…è¯»çš„éƒ¨åˆ†åœ¨ç¬¬å…­ç« ä¹‹å‰éƒ½ä¸ä¼šåˆ°æ¥ã€‚ï¼‰ 4.2.5 Stacking Constraints: This section defines the notion of block-stacking constraints and inline-stacking constraints involving areas. These are defined as ordered relations, i.e., if A and B have a stacking constraint it does not necessarily mean thatâ€¦ Hey! Are you ready to skim yet?! â€‹ å¦ä¸€æ–¹é¢ï¼Œæœ‰äº›åœ°æ–¹ä½ åº”è¯¥æ…¢ä¸‹æ¥è®¤çœŸçœ‹ã€‚å¦‚æžœä½ çœ‹åˆ°æ’å›¾ï¼Œè¦çœ‹ä¸€ä¸‹æ ‡ç­¾æˆ–è€…æ ‡æ³¨ã€‚ä»–ä»¬é€šå¸¸ä¼šæåˆ°é‡è¦çš„ä¿¡æ¯ï¼Œå¦‚æžœçœ‹åˆ°å¸¦æœ‰ç¤ºä¾‹çš„éƒ¨åˆ†ï¼Œä¹Ÿè¦æ”¾æ…¢èŠ‚å¥ä»”ç»†é˜…è¯»ã€‚ å‘½åç©ºé—´â€‹ åœ¨ XML æœ¯è¯­ä¸­ï¼Œå‘½åç©ºé—´ ä½¿ç”¨æ¥å°†ä¸åŒæ ‡è®°è¯­è¨€æ··åˆåœ¨æ–‡æ¡£ä¸­çš„æœºåˆ¶ã€‚ä¾‹å¦‚æˆ‘æƒ³åœ¨ HTML æ–‡æ¡£ä¸­å¼•å…¥ æ•°å­¦æ ‡è®°è¯­è¨€ï¼ˆMath Markup Languageï¼‰ï¼Œæˆ‘å°±å¿…é¡»åœ¨æ–‡æ¡£çš„é¡¶éƒ¨å…ƒç´ ä¸­æ”¾å…¥é¢å¤–çš„å£°æ˜Žï¼Œç„¶åŽåœ¨æ•°å­¦å…ƒç´ å‰é¢æ·»åŠ  ml: å‰ç¼€ Here is Einsteinâ€™s famous equation, E = MC2, with which we all are familiar. â€‹ æœ€å¥½éµå¾ªä½ åœ¨ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ä»»ä½•å‘½åç©ºé—´å‰ç¼€ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¦‚æžœä½ é‡åˆ°äº†ä¸€ä¸ªå…³äºŽæŸé¡¹ XML æŠ€æœ¯æ˜¯ â€œå‘½åç©ºé—´æ„ŸçŸ¥â€ çš„å¤§ç¯‡å¹…è®¨è®ºï¼Œä½ å¯ä»¥å®‰å…¨åœ°è·³è¿‡äº†ã€‚ å­¦ä¼šé˜…è¯» BNFâ€‹ BNF ä»£è¡¨ Backus Naur Form, æˆ–è€… Backus Normal Formã€‚å®ƒæ˜¯ä¸€ç§è¡¨è¾¾è®¡ç®—æœºè¯­è¨€è¯­æ³•çš„ç´§å‡‘æ–¹å¼ï¼Œä¸€ç›´å­˜åœ¨ï¼Œå¹¶å°†æ°¸è¿œå­˜åœ¨ã€‚ä¸åŒçš„å£°æ˜Žä½¿ç”¨ä¸åŒé£Žæ ¼çš„ BNF, ä½†æ˜¯ä»–ä»¬éƒ½ä¼šå°†å†—é•¿çš„è‹±è¯­æè¿°ç¿»è¯‘æˆç¬¦å·æ ¼å¼ã€‚ä»¥ä¸‰æ˜Žæ²»çš„æž„æˆä¸ºä¾‹ï¼š A sandwich consists of a lower slice of bread, mustard or mayonnaise; optional lettuce, an optional slice of tomato; two to four slices of either bologna, salami, or ham (in any combination); one or more slices of cheese, and a top slice of bread. sandwich ::= lower_slice [ mustard | mayonnaise ] lettuce? tomato? [ bologna | salami | ham ] {2,4} cheese+ top_slice â€‹ å®šä¹‰çš„çš„ç»„æˆéƒ¨åˆ†éƒ½æ˜¯é¡ºåºæŽ’åˆ—ï¼Œç©ºæ ¼åˆ†éš”çš„ã€‚æ–¹æ‹¬å·è¡¨ç¤ºåˆ†ç»„ï¼Œåˆ†ç»„å†…çš„é€‰é¡¹ç”¨ç«–çº¿åˆ†éš”ã€‚ â€‹ å¦‚æžœä¸€ä¸ªé¡¹ç›®åŽé¢è·Ÿç€ä¸€ä¸ªé—®å·ï¼ˆï¼Ÿï¼‰ï¼Œè¡¨ç¤ºâ€œä¸€ä¸ªæˆ–è€…æ²¡æœ‰â€ï¼›å¦‚æžœåŽé¢è·Ÿç€åŠ å·ï¼ˆ+ï¼‰ï¼Œè¡¨ç¤ºâ€œä¸€ä¸ªæˆ–è€…å¤šä¸ªâ€ï¼›å¦‚æžœåŽé¢æ˜¯æ˜Ÿå·ï¼ˆ*ï¼‰ï¼Œè¡¨ç¤ºâ€œé›¶ä¸ªæˆ–è€…å¤šä¸ªâ€ï¼›å¦‚æžœåŽé¢è·Ÿç€å¤§æ‹¬å·å†…çš„æ•°å­—ï¼Œå®ƒå°±ç»™å‡ºäº†è¿™ä¸ªé¡¹ç›®å¯ä»¥å‡ºçŽ°çš„æœ€å°‘å’Œæœ€å¤šçš„æ¬¡æ•°é™åˆ¶ã€‚ â€‹ æ‹¬å¼§æˆ–è€…å¤šç»„æ–¹æ‹¬å·ç”¨æ¥å°†æ›´åŠ å¤æ‚çš„å®šä¹‰ä¸­çš„é¡¹ç›®åˆ†ç»„ã€‚æœ‰æ—¶å€™é€šç”¨é¡¹ç›®ï¼ˆä¾‹å¦‚â€œcolorâ€ï¼‰åŒ…å«åœ¨ &lt; å’Œ &gt; ä¸­ï¼Œæˆ–è€…å›ºå®šé¡¹ç›®å°†åŒ…å«åœ¨å¼•å·ä¸­ã€‚ å­¦ä¼šé˜…è¯»æ–‡æ¡£ç±»åž‹å®šä¹‰ The Grolier EncyclopediaÂ® is the source authority for all answers and questions asked on JeopardyÂ®. â€”â€”Credit on TV game show â€‹ æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨æ–‡æ¡£ä¸­æ·»åŠ  &lt;!DOCTYPE â€¦&gt; æ ‡ç­¾å£°æ˜Žæ¥å‘Šè¯‰æµè§ˆå™¨ä½ ç”¨çš„æ˜¯ HTML æˆ–è€… XHTML çš„å“ªä¸ªç‰ˆæœ¬ã€‚è¿™äº›å£°æ˜Žå°±æ˜¯æ–‡æ¡£ç±»åž‹å£°æ˜Žï¼ˆDocument Type Definitionï¼‰ï¼Œæˆ–è€… DTDï¼Œå®šä¹‰äº†æ–‡æ¡£ä¸­åˆæ³•çš„å…ƒç´ ç»„åˆã€‚ â€‹ é˜…è¯» DTD æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œä½†ä¹Ÿä¸æ˜¯ä¸å¯èƒ½ã€‚å¹¶ä¸”å®ƒæ˜¯å€¼å¾—ä¸€è¯»çš„ï¼Œå› ä¸º DTD æ˜¯åˆ¤æ–­åœ¨ç‰¹å®šçš„æ ‡è®°è¯­è¨€ä¸­è¯­æ³•æ­£ç¡®æ€§çš„æœ€é«˜æƒå¨ã€‚ â€‹ å…³äºŽå¦‚ä½•é˜…è¯» DTD æ–‡æ¡£çš„å®Œæ•´è§£é‡Šä¸åœ¨æœ¬æ–‡èŒƒå›´å†…ï¼Œä½†æ˜¯å¯ä»¥åœ¨Elizabeth Castro çš„ XML for the World Wide Web è§†è§‰å¿«é€Ÿå…¥é—¨æŒ‡å—ï¼Œæˆ–è€… Erik Rayçš„ Learning XML ä¸­è¯»åˆ°ã€‚è¿™é‡Œæœ‰ä¸€äº›ä½ å¯èƒ½åœ¨ DTD ä¸­çœ‹åˆ°çš„ç®€çŸ­ç¤ºä¾‹ï¼š 1234&lt;!ENTITY %fontstyle &quot;(tt | i | b)&quot;&gt; &lt;!ENTITY %inline &quot;(#PCDATA | %fontstyle;)&quot;&gt; &lt;!ELEMENT div (p | %inline;)+&gt; &lt;!ATTLIST div align (left | right | center) #IMPLIED&gt; è¿™é‡Œæ˜¯ä»–ä»¬çš„è‹±æ–‡è§£é‡Šï¼š The font style elements are &lt;code&gt;, &lt;i&gt;, and &lt;b&gt;. Inline elements consist of text or font style elements. A &lt;div&gt; can contain one or more &lt;p&gt; or inline elements in any order. A &lt;div&gt; has an optional align attribute with values of left, right, or center. IDLE PAST IDL, BE BOUND BY BINDINGSâ€‹ ä¸€äº› XML æŠ€æœ¯ï¼Œä¾‹å¦‚ SVN å’Œ SMIL ï¼Œå…è®¸ç”¨æˆ·ç¼–å†™ç¨‹åºæ¥åŠ¨æ€æŽ§åˆ¶æ–‡æ¡£ï¼Œå°±åƒ JavaScript è®©ä½ å¯ä»¥æŽ§åˆ¶ HTML æ–‡æ¡£ä¸€æ ·ã€‚ä»–ä»¬çš„è§„èŒƒä¸­ä¼šæœ‰ä¸€äº›ç« èŠ‚æè¿°è„šæœ¬æ˜¯å¦‚ä½•ä¸Ž Document Object Model å·¥ä½œçš„ã€‚è¿™éƒ¨åˆ†ç”¨ IDL æ¥æè¿°æŽ¥å£ï¼ŒInterface Definition Languageã€‚ â€‹ IDL æ˜¯ä¸€ç±»é€šç”¨ç¬¦å·ï¼Œç”¨äºŽæè¿°ç”¨æˆ·ä»£ç†ç”¨æ¥è®¿é—®ç¼–ç¨‹çŽ¯å¢ƒçš„ä¿¡æ¯ï¼Œå³æè¿°è½¯ä»¶ç¼–ç¨‹æŽ¥å£ï¼ˆAPIï¼‰çš„è¯­è¨€ã€‚IDL ä¸æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼›å®ƒæ˜¯ç”¨ä¸€ç§ç´§å‡‘çš„æ–¹å¼æ¥æè¿°æŽ¥å£çš„ç¬¦å·ç³»ç»Ÿã€‚IDL æŽ¥å£å®šä¹‰å¾ˆå¯èƒ½ä¸æ˜¯ä½ è¦æ‰¾çš„ä¸œè¥¿ã€‚ â€‹ ä½ éœ€è¦çš„ä¸œè¥¿ï¼Œå†³å®šäºŽä½ é€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¯ Java binding è¿˜æ˜¯ ECMAScript bindings ã€‚ â€‹ Bindings æ˜¯è„šæœ¬ä¸­å¯ç”¨çš„å¯¹è±¡ï¼Œå±žæ€§ï¼Œå’Œæ–¹æ³•åˆ—è¡¨çš„å¥‡ç‰¹çš„æœ¯è¯­ã€‚ECMAScript æ˜¯ European Computer Manufacturerâ€™s Association standard version of JavaScriptã€‚ â€‹ å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯ä¸€äº›å…¶ä»–çš„åƒ Perl æˆ–è€… Python è¿™æ ·çš„è¯­è¨€ï¼Œä½ å°±è¦åŽ»å…¶ä»–åœ°æ–¹çœ‹çœ‹ç›¸å…³çš„èµ„æ–™ï¼Œä¾‹å¦‚ Comprehensive Perl Archive Network æˆ–è€… Python XML Special Interest Group. æ€»ç»“ ç†è§£ W3C è§„èŒƒæ˜¯å†™ç»™å®žçŽ°è€…çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ã€‚ è®¸å¤šè§„èŒƒéƒ½æœ‰ä¸€ä¸ªç« èŠ‚ä¼šå‘Šè¯‰ä½ è§„èŒƒæ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Œä»¥åŠä½ åº”è¯¥å¦‚ä½•é˜…è¯» äº†è§£è§„èŒƒä½¿ç”¨çš„è¯æ±‡è¡¨ è®°ä½ä½ ä¸å¿…è¯»æ‡‚æ¯ä¸€ä¸ªå•è¯ï¼Œè·³è¿‡é‚£äº›è¯»ä¸é€šçš„éƒ¨åˆ† é¿å¼€å…³äºŽå‘½åç©ºé—´çš„è®¨è®º å­¦ä¼šé˜…è¯» BNFâ€”â€”å®ƒåœ¨è®¸å¤šåœ°æ–¹ç”¨åˆ° å­¦ä¼šé˜…è¯» DTDæ¥è§£ç­”è¯­æ³•é—®é¢˜ å¦‚æžœæŠ€æœ¯æ˜¯å¯ä»¥ç¼–å†™è„šæœ¬çš„ï¼Œåˆ™ä¿¡æ¯åœ¨ binding ä¸­ã€‚ åªè¦è€å¿ƒå’ŒåšæŒï¼Œä½ å°±ä¼šæƒŠè®¶ä¸Žä½ å¯ä»¥ä»Ž W3C è§„èŒƒä¸­èŽ·å¾—çš„ä¿¡æ¯é‡ã€‚ ä½œè€…çš„å…¶ä»–æ–‡ç«  Using XML Get Ready for HTML 5 â€œForgivingâ€ Browsers Considered Harmful DOM Design Tricks]]></content>
      <categories>
        <category>FE</category>
        <category>W3C</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>W3C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SEOä¸­çš„å‡ ä¸ªé‡è¦çš„ META tag]]></title>
    <url>%2F2018%2F10%2F29%2FSEO%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84-META-tag%2F</url>
    <content type="text"><![CDATA[â€‹ Meta tags ä½œä¸ºæè¿°ç½‘é¡µå†…å®¹çš„æ–‡æœ¬ç‰‡æ®µï¼Œå®ƒä¸ä¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œåªä¼šå­˜åœ¨ä¸Žé¡µé¢ä»£ç ä¸­ã€‚ä¸åŒç½‘ç«™çš„ Meta tags æˆ–å¤šæˆ–å°‘éƒ½æœ‰ç‚¹ç›¸ä¼¼ï¼Œä¸€äº›å†…å®¹æè¿°ç¬¦ï¼Œå‘Šè¯‰æœç´¢å¼•æ“Žç½‘é¡µçš„å†…å®¹ã€‚Meta tags åªä¼šå‡ºçŽ°åœ¨é¡µé¢ â€œheadâ€ æ ‡ç­¾å†…ï¼Œåªå¯¹æœç´¢å¼•æ“Žå¯è§ã€‚ç„¶è€Œï¼Œå®ƒæ˜¯ SEO çš„é‡è¦æ‰‹æ®µã€‚ â€‹ æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ SEO ä¸­çš„ 8 ä¸ªé‡è¦çš„ Meta tagï¼š Title tag, Meta description, Canonical Tag, Alternative text (Alt) Tag, Robots meta tag, Social Media Meta Tags (Open Graph and Twitter Cards), Header tags, Responsive Design Meta Tag TITLE TAGâ€‹ ä¸è®ºå¯¹è®¿é—®è€…è¿˜æ˜¯æœç´¢å¼•æ“Žæ¥è¯´ï¼ŒTitle tag éƒ½æ˜¯ç¬¬ä¸€ä¸ªå‡ºçŽ°çš„å¯¹ç½‘é¡µä½œå‡ºå£°æ˜Žçš„ HTML å…ƒç´ ã€‚ æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒä¼ è¿™ä¸ªæ ‡ç­¾ï¼ŒåŒ…æ‹¬ Chrome, Firefox, Safari ç­‰. â€‹ å§‹ç»ˆè¦åœ¨ç½‘ç«™é¡µé¢çš„ &lt;head&gt; åŒºåŸŸæ·»åŠ  Title tagã€‚ 123&lt;head&gt; &lt;title&gt;This is Title Sample&lt;/title&gt;&lt;/head&gt; â€‹ Title tag ä¼˜åŒ–çš„é•¿åº¦: Google é€šå¸¸æ˜¾ç¤º 55â€“64 ä¸ªå­—ç¬¦ (ä¿æŒ 60 å­—ç¬¦ä»¥å†…). â€‹ Title tags å¯¹ SEO å’Œæ¥è®¿è€…éƒ½å¾ˆé‡è¦ï¼Œå®ƒä¼šæ˜¾ç¤ºåœ¨ SERP ï¼ˆSearch Engine Result Pageï¼‰å’Œ æµè§ˆå™¨æ ‡é¢˜æ ä¸­ã€‚ æµè§ˆå™¨æ ‡é¢˜æ æ˜¾ç¤ºå¦‚ä¸‹: SERP æ ‡é¢˜æ˜¾ç¤ºå¦‚ä¸‹: Title tags æ˜¯ SEO ä¸­ä»…æ¬¡äºŽå†…å®¹çš„æœ€é‡è¦çš„çš„é¡µé¢å› ç´ ã€‚â€” Source: MOZ ä½ ä¸èƒ½åœ¨ä½ çš„é¡µé¢ä¸Šæ·»åŠ å¤šäºŽä¸€ä¸ªçš„ &lt;title&gt; å…ƒç´ ã€‚ â€” Source: w3schools å¥½çš„ Title tags çš„å‡ ä¸ªè¦ç‚¹: åœ¨ title tag ä¸­æ·»åŠ ä¿®é¥°è¯ (How to |The current year | Review |Best | Tips | Top |Find | Buy | Easy) åœ¨ title tag ä¸­è¿å…¥é•¿å°¾å…³é”®è¯ åœ¨æ ‡é¢˜ä¸­æ·»åŠ æ•°å­— (ä¾‹å¦‚ï¼š9 ä¸ªé‡è¦çš„ HTML æ ‡ç­¾å¸®åŠ©ä½ çš„ç½‘ç«™ä¼˜åŒ– SEO) title tag ä¸­æŒ‰é‡è¦æ€§æŽ’åºï¼Œé‡è¦å…³é”®è¯å‰ç½® ä¸è¦ä¸åœ¨ä¹Žå…³é”®è¯ æ¯ä¸ªé¡µé¢ä½¿ç”¨å”¯ä¸€çš„ title tag META DESCRIPTIONâ€‹ Meta Description æ˜¯ç»¼è¿°ç½‘é¡µçš„ HTML å…ƒç´ ã€‚æœç´¢å¼•æ“Žé€šå¸¸åœ¨æœç´¢ç»“æžœçš„æ ‡é¢˜ä¸‹æ–¹æ˜¾ç¤º Meta descriptionã€‚ ä»£ç ç¤ºä¾‹ 123&lt;head&gt;&lt;meta name=â€descriptionâ€ content=â€This is a meta description sample. We can add up to 160 characters.â€&gt;&lt;/head&gt; â€‹ Google does not use the Meta description as a ranking signal; still, it has a massive effect on your page CTR because it shows up in search results. â€‹ Google ä¸ä½¿ç”¨ Meta description ä½œä¸ºæœç´¢æŽ’åçš„æŒ‡æ ‡ï¼›ä½†æ˜¯ï¼Œå®ƒå¯¹ä½ çš„ç½‘é¡µ CTRï¼ˆClickThrough Rate ï¼‰æœ‰é‡è¦å½±å“ï¼Œå› ä¸ºå®ƒä¼šæ˜¾ç¤ºåœ¨æœç´¢ç»“æžœä¸­ã€‚ â€‹ åœ¨2017å¹´12æœˆ, Google å¢žåŠ äº†æœç´¢ç»“æžœç‰‡æ®µçš„é•¿åº¦ã€‚çŽ°åœ¨ Google ç¡®è®¤äº†åœ¨åŽ»å¹´12æœˆæ‰©å¤§é•¿åº¦åŽå†æ¬¡ ç¼©çŸ­äº†æœç´¢ç»“æžœç‰‡æ®µã€‚ â€‹ Meta description çš„è¾ƒä¼˜é•¿åº¦æ˜¯å¤šå°‘? â€œè¿™äº›ç‰‡æ®µæ²¡æœ‰å›ºå®šçš„é•¿åº¦ï¼Œé•¿åº¦å› æˆ‘ä»¬çš„ç³»ç»Ÿè®¤ä¸ºè®¤ä¸ºçš„æœ€ä¼˜è€Œä¸åŒâ€ ä»–è¡¥å……è¯´, â€œGoogle ä¸ä¼šç»™å‡ºç‰‡æ®µçš„æœ€å¤§é•¿åº¦ï¼Œå› ä¸ºè¿™äº›ç‰‡æ®µéƒ½æ˜¯åŠ¨æ€ç”Ÿæˆçš„â€ Source, Danny Sullivan â€‹ åœ¨æ¡Œé¢ç«¯æµè§ˆå™¨ä¸­æè¿°ç‰‡æ®µçš„å¹³å‡é•¿åº¦å¤§çº¦ä»ŽåŽŸæ¥çš„ 300+ å­—ç¬¦ å‡å°‘åˆ°å¤§çº¦ 160 å­—ç¬¦ã€‚ â€‹ ç§»åŠ¨ç«¯æœç´¢ç»“æžœçŽ°åœ¨ä¸‹é™åˆ°å¹³å‡ 130 å­—ç¬¦ã€‚ Goolge ç”Ÿæˆçš„æœç´¢ç»“æžœæè¿° ä¼˜è´¨ Description tag çš„å‡ é¡¹è¦ç‚¹ Donâ€™t put emphasis on the number of characters, as Google might pull Meta description text from your content based on a userâ€™s query. ä¸è¦è¿‡åˆ†å¼ºè°ƒå­—æ•°ï¼Œå› ä¸º Google å¯èƒ½ä¼šåœ¨ç”¨æˆ·è¯·æ±‚ä¸‹ï¼Œä»Žä½ çš„ç½‘é¡µä¸Šæ‹‰å– Meta æè¿°ä¿¡æ¯çš„æ–‡æœ¬ã€‚ Do not add duplicate Meta Descriptions Add clear Call-to-action (CTA) in your descriptions like Apply today, Check-out, Contact us today etc. See these CTA keywords for marketing campaigns Add your targeted keywords in descriptions Strategically provide solutions to a problem Write for your users and encourage them to click with specific and relevant content Add any discounts or offers youâ€™ve going on Show empathy while writing your Meta Descriptions CANONICAL TAG The Canonical tag is an HTML link tag with â€œrel=canonicalâ€ attribute that is used if you have a single page URL that has the same content with other multiple page URLs. By implementing the Canonical tag in the code, we are telling search engines that this URL is the main page and avoid indexing other duplicate page URLs. A canonical tag Syntax: &lt;link rel=â€canonicalâ€ href=â€http://example.com/â€ /&gt; Where should we choose a canonical URL? Multiple URLs: http://www.example.com https://www.example.com http://example.com http://example.com/index.php Google sees all the above URLs as duplicate versions of the Homepage. And to fix this problem, the canonical tag (rel=canonical) was invented. Session ID URLs: These are the automatic system-generated URLs and commonly generated due to the tracking URLs, breadcrumb links and permalinks in CMS http://example.com/properties/villa-331-luxury-rental?partnerID=18 http://example.com/target.php?session_id=rj3ids98dhpa0mcf3jc89mq1t0 Mobile URL: When using a special URL (m. example.com) for the mobile version of your website. SEMrush itself has 2 versions â€” one is a mobile version and the other is a desktop version. For the mobile and desktop version, SEMrush is using the following canonical tag: &lt;link rel=â€canonicalâ€ href=â€https://www.semrush.com/â€ /&gt; ALTERNATIVE TEXT (ALT) TAGThe Alt tag is important for any images, as search engines cannot read them, so you need to add proper Alt text to the images so the search engine can consider them. Syntax for Alt Text: &lt;img src=â€http://example.com/xyz.jpgâ€ alt=â€xyzâ€ /&gt; Key points to consider while creating alt-tags for images: All images should have informative filenames Alt text needs to be short clear and to the point Always use the original, right type of image, as this is an essential step towards success Create an image sitemap Use 50â€“55 characters (up to 16 words) in the alt text Use an optimal file size without degrading its quality for faster page loading speed â€œAdding an alt tag is very easy to do and you should pretty much do it on all of your images. It helps your accessibility and it can help us understand whatâ€™s going on in your image.â€ Source ROBOTS META TAGThe Robots Meta tag is an HTML tag that provides instructions to web crawlers on whether to index or noindex a web page. The Robots Meta tag has four main values for search engine crawlers: FOLLOW â€“The search engine crawler will follow all the links in that web page INDEX â€“The search engine crawler will index the whole web page NOFOLLOW â€” The search engine crawler will NOT follow the page and any links in that web page NOINDEX â€” The search engine crawler will NOT index that web page The Robots Meta tag syntax: â€” Means not to index or not to follow this web page. â€” Means index and follow this web page. Note: The robots Meta tag should be placed in the section of your web page. SOCIAL MEDIA META TAGS (OPEN GRAPH AND TWITTER CARDS)Open Graph Tags: Open Graph Meta tags are designed to promote integration between Facebook, LinkedIn, Google and the website URLs that you shared on these platforms. Here is a sample of how Open Graph tags look like in standard HTML: Twitter Cards: Twitter cards work in a similar way to Open Graph, except you add these special Meta tags only for Twitter. Twitter will use these tags to enhance the display of your page when shared on their platform. Here is a sample of how a Twitter card looks like in standard HTML: How both Social Media Meta Tags look like: Head over to this post if you want to know everything about these tags. HEADER TAGSA Header tag is used for headings creations, i.e. by using these we can apply font changes. The heading elements are H1, H2, H3, H4, H5, and H6 with H1 being the highest (or most important) level and H6 the least. Here is an example of how we can use header tags taken from SEMrush: 9 Tips for Boosting the Speed of your Shopify Website Paragraph of content another paragraph of content Performance Analysis Paragraph of content Analyzes the Mobile and Desktop Performance with PageSpeed Insights Important Point to consider: Use as Many H1 Tags as You Want Source: Search Engine Roundtable RESPONSIVE DESIGN META TAGThe final important Meta tag is the Responsive Design Meta tag, which we call â€œViewport Meta Elementâ€. By using the viewport meta tag we can control layout for web pages on mobile browsers. This viewport element is included in the head section of your web page. Syntax: If you want to learn more about this responsive design Meta tags, head over to this nicely written post. Note: Do not use this responsive Meta tag if your website pages are not responsive, as it will make the user experience worse. Meta Tags to ignoreFinally, there are a few tags â€” we can call them bad Meta tags and we should simply ignore them: Keywords tagâ€“ Google does not use the keywords Meta tag in web ranking. â€” Source Revisit after â€” This HTML tag is a command to robots to return to a page after a specific period. This tag is not followed by any major search engine and has no value in SEO. It is better to avoid this tag and leave it to the search engines to decide how to crawl your website. Syntax: Expiration/date â€” This tag defines the expiration date of your page. Personally I would not recommend this, just remove this if you are using it. Syntax: Site verificationâ€“ Just ignore this. You can verify your site using Google Search Console and Bing Webmaster tool. Copyrightâ€“ Every site puts their copyright in the footer, so you donâ€™t need a separate tag. A big NO for this tag. Distribution â€” The â€œdistributionâ€ value is supposedly used to control who can access the document, typically set to â€œglobalâ€. Itâ€™s inherently implied that if the page is open (not password-protected, like on an intranet) that itâ€™s meant for the world. Go with it, and leave the tag off the page. â€” Source Generator â€” Useless tag. Cache control â€“This tag allows web publishers to define how often a page is cached. Generally, these are not required; we can simply use the HTTP header instead of this HTML tag. The ODP Robots Meta Tag â€” Google no longer follows this Meta tag. â€“Source Geo Meta Tag â€” Google does not use Geo Meta tags to rank pages. â€” Source So these are the few HTML tags which we should consider or simply ignore. Now you can easily use the relevant HTML Meta tags intelligently. Donâ€™t forget to comment below and share your views on HTML Tags. Thanks for reading! Originally published at advancedwebranking.com SEO Meta Tags In 2018 Meta Tags Searchengineoptimization]]></content>
      <categories>
        <category>FE</category>
        <category>SEO</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>SEO</tag>
        <tag>META tags</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo NexT å¼€å¯ emoji]]></title>
    <url>%2F2018%2F10%2F29%2FHexo-NexT-%E5%BC%80%E5%90%AF-emoji%2F</url>
    <content type="text"><![CDATA[Hexo å¼€å¯æ¬¢ä¹çš„ emoji ä¹‹æ—… ðŸ’› Hexo é»˜è®¤çš„ markdown æ¸²æŸ“å¼•æ“Žä¸æ”¯æŒå°† Github emoji æ¸²æŸ“åˆ°é™æ€çš„ html é¡µé¢ä¸­ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªæ”¯æŒ emoji çš„å¼•æ“Žï¼Œå†å¢žåŠ ä¸€ä¸ª emoji æ’ä»¶å³å¯. å®‰è£…å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š 123npm un hexo-renderer-marked --savenpm i hexo-renderer-markdown-it --savenpm install markdown-it-emoji --save Tipsï¼šæ®è¯´ hexo-renderer-markdown-it çš„é€Ÿåº¦è¦æ¯” Hexo åŽŸè£…æ’ä»¶è¦å¿«ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¤š é…ç½®å®Œæˆæ’ä»¶å®‰è£…åŽè¿˜éœ€è¦ä¿®æ”¹ Hexo ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.ymlï¼ˆä¸æ˜¯ä¸»é¢˜é…ç½®å“¦ï¼‰ 123456789101112131415161718192021## markdown æ¸²æŸ“å¼•æ“Žé…ç½®ï¼Œé»˜è®¤æ˜¯hexo-renderer-markedï¼Œè¿™ä¸ªæ’ä»¶æ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼Œä¸”æœ‰æ–°ç‰¹æ€§markdown: render: html: true xhtmlOut: false breaks: true linkify: true typographer: true quotes: 'â€œâ€â€˜â€™' plugins: - markdown-it-footnote - markdown-it-sup - markdown-it-sub - markdown-it-abbr - markdown-it-emoji anchors: level: 2 collisionSuffix: 'v' permalink: true permalinkClass: header-anchor permalinkSymbol: Â¶ è¿™é‡Œéœ€è¦æ³¨æ„ render: ä¸‹çš„ html: é…ç½®é¡¹ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŽ§åˆ¶ Markdown æ¸²æŸ“å¼•æ“Žæ˜¯å¦è½¬ä¹‰æ–‡æ¡£ä¸­å‡ºçŽ°çš„ html æ ‡ç­¾ï¼Œé»˜è®¤ä¸º false ï¼Œè¿™é‡Œè¦è®¾ç½®ä¸º trueï¼Œå¦åˆ™å›žå¯¼è‡´ &lt;!--more--&gt; æ¸²æŸ“å¤±è´¥ã€‚ 123html: true # ä¸è½¬ä¹‰ HTML å†…å®¹ï¼Œå³å…è®¸ HTML ## ORhtml: false # è½¬ä¹‰ HTMLï¼Œ&lt; &gt; å°–æ‹¬å·ä¼šè¢«è½¬ä¹‰æˆ &amp;lt; &amp;gt;ç­‰ plugins: ä¸­çš„æœ€åŽä¸€é¡¹ - markdown-it-emojiæ˜¯æ‰‹åŠ¨æ·»åŠ çš„ï¼Œå®˜æ–¹ Github Wiki ä¸­ç»™å‡ºçš„é…ç½®ä¸åŒ…å«è¿™ä¸€é¡¹ï¼Œå…¶ä»–é…ç½®å‚ç…§çš„ Github Wiki ä¸­çš„é»˜è®¤é…ç½®ï¼Œhexo-renderer-markdown-it æä¾›çš„å…¶ä»–æ–°ç‰¹æ€§è¿˜æ²¡æœ‰ä¸€ä¸€å°è¯•ï¼Œæš‚æ—¶åªæƒ³ç”¨å®ƒçš„ emoji åŠŸèƒ½ã€‚:v: ä½¿ç”¨æ–¹æ³• åœ¨ Emoji ä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„è¡¨æƒ…ï¼Œç„¶åŽç‚¹å‡»å¤åˆ¶ç²˜è´´ã€‚ å¸¸ç”¨çš„emojiå¯ä»¥è®°ä¸‹å®ƒçš„ç¼–ç ï¼Œç›´æŽ¥è¾“å…¥ï¼Œä¾‹å¦‚ç›´æŽ¥è¾“å…¥ç¬‘è„¸å¯¹åº”çš„ emoji ç¼–ç  :smile: å°±å¯ä»¥å¾—åˆ° ðŸ˜„ ã€‚]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Emmet Cheat Sheet]]></title>
    <url>%2F2018%2F10%2F28%2FEmmet-Cheat-Sheet%2F</url>
    <content type="text"><![CDATA[â€‹ ä¹‹å‰ä¸€ç›´æ‰‹æ•²HTMLæ ‡ç­¾ðŸ˜…ï¼Œæœ€è¿‘çŸ¥é“äº† Emmet è¿™ä¸ªç¥žå¥‡çš„ä¸œè¥¿ï¼Œå¯ä»¥ç”¨çŸ­çŸ­ä¸€è¡Œä»£ç ç”Ÿæˆå¤æ‚çš„æ ‘ç»“æž„ï¼ŒåŒæ—¶ç»‘å®šå±žæ€§ï¼Œè¿˜å…·æœ‰è‡ªåŠ¨ç¼–å·ç­‰å¼ºå¤§åŠŸèƒ½ã€‚äºŽæ˜¯ä¸Šå®˜ç½‘æŠŠ Cheat Sheet éƒ½æ‰‹æ•²äº†ä¸€éï¼Œç„¶åŽè®°å½•ä¸€ä¸‹ï¼Œæ·»åŠ äº†ä¸€äº›æ³¨è§£ï¼Œæ–¹ä¾¿è‡ªå·±è®°å¿†æŸ¥é˜…ï¼ŒåŽŸæ–‡ã€‚ Child: &gt;nav&gt;ul&gt;li 12345&lt;nav&gt; &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/nav&gt; Sibling: +div+p+bq 123&lt;div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;/blockquote&gt; Climb-up: ^div+div&gt;p&gt;span+em^bq 12345&lt;div&gt;&lt;/div&gt;&lt;div&gt; &lt;p&gt;&lt;span&gt;&lt;/span&gt;&lt;em&gt;&lt;/em&gt;&lt;/p&gt; &lt;blockquote&gt;&lt;/blockquote&gt;&lt;/div&gt; div+div&gt;p&gt;span+em^^bq 12345&lt;div&gt;&lt;/div&gt;&lt;div&gt; &lt;p&gt;&lt;span&gt;&lt;/span&gt;&lt;em&gt;&lt;/em&gt;&lt;/p&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;/blockquote&gt; Grouping: ()div&gt;(header&gt;ul&gt;li*2&gt;a)+footer&gt;p 1234567891011&lt;div&gt; &lt;header&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=""&gt;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=""&gt;&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/header&gt; &lt;footer&gt; &lt;p&gt;&lt;/p&gt; &lt;/footer&gt;&lt;/div&gt; (div&gt;dl&gt;(dt+dd)*3)+footer&gt;p 12345678910111213&lt;div&gt; &lt;dl&gt; &lt;dt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;/dd&gt; &lt;dt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;/dd&gt; &lt;dt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;/dd&gt; &lt;/dl&gt;&lt;/div&gt;&lt;footer&gt; &lt;p&gt;&lt;/p&gt;&lt;/footer&gt; Multiplication: *ul&gt;li*5 1234567&lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt;&lt;/ul&gt; li*2 ä¼šä½¿ åŒä¸€åˆ†ç»„ä¸‹ ä¹‹åŽçš„å…ƒç´ åˆ†åˆ« *2 ï¼Œä¾‹å¦‚ li*2&gt;a+span ç”Ÿæˆçš„htmlæ˜¯è¿™æ ·çš„ 12&lt;li&gt;&lt;a href=""&gt;&lt;/a&gt;&lt;span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=""&gt;&lt;/a&gt;&lt;span&gt;&lt;/span&gt;&lt;/li&gt; Item numbering: $ul&gt;li.item$*5 ç¼–å· 1234567&lt;ul&gt; &lt;li class="item1"&gt;&lt;/li&gt; &lt;li class="item2"&gt;&lt;/li&gt; &lt;li class="item3"&gt;&lt;/li&gt; &lt;li class="item4"&gt;&lt;/li&gt; &lt;li class="item5"&gt;&lt;/li&gt;&lt;/ul&gt; h$[title=item$]{Header $}*3 ä»»æ„ä½ç½®éƒ½å¯ä»¥å†™ 123&lt;h1 title="item1"&gt;Header 1&lt;/h1&gt;&lt;h2 title="item2"&gt;Header 2&lt;/h2&gt;&lt;h3 title="item3"&gt;Header 3&lt;/h3&gt; ul&gt;li.item$$$*5 å¤šä½æ•°ç¼–å· 1234567&lt;ul&gt; &lt;li class="item001"&gt;&lt;/li&gt; &lt;li class="item002"&gt;&lt;/li&gt; &lt;li class="item003"&gt;&lt;/li&gt; &lt;li class="item004"&gt;&lt;/li&gt; &lt;li class="item005"&gt;&lt;/li&gt;&lt;/ul&gt; ul&gt;li.item$@-*5 å€’åº 1234567&lt;ul&gt; &lt;li class="item5"&gt;&lt;/li&gt; &lt;li class="item4"&gt;&lt;/li&gt; &lt;li class="item3"&gt;&lt;/li&gt; &lt;li class="item2"&gt;&lt;/li&gt; &lt;li class="item1"&gt;&lt;/li&gt;&lt;/ul&gt; ul&gt;li.item$@3*5 ä»ŽæŒ‡å®šæ•°å€¼å¼€å§‹ç¼–å· 12345678&lt;ul&gt; &lt;li class="item3"&gt;&lt;/li&gt; &lt;li class="item4"&gt;&lt;/li&gt; &lt;li class="item5"&gt;&lt;/li&gt; &lt;li class="item6"&gt;&lt;/li&gt; &lt;li class="item7"&gt;&lt;/li&gt;&lt;/ul&gt;ID and CL ID and CLASS attributes#header 1&lt;div id="header"&gt;&lt;/div&gt; .title 1&lt;div class="title"&gt;&lt;/div&gt; form#search.wide 1&lt;form id="search" class="wide"&gt;&lt;/form&gt; p.class1.class2.class3 1&lt;p class="class1 class2 class3"&gt;&lt;/p&gt; Custom attributes è‡ªå®šä¹‰å±žæ€§p[title=â€Hello Worldâ€] å±žæ€§å€¼å¯ä»¥ä¸åŠ å¼•å·ï¼Œä½†æ˜¯å¦‚æžœåŒ…å«ç©ºæ ¼ï¼Œåˆ™è¦åŠ ä¸Šï¼Œå¦åˆ™ï¼ŒWorld ä¼šè¢«å½“ä½œå¦ä¸€ä¸ªå±žæ€§åç§° 1&lt;p title="Hello world"&gt;&lt;/p&gt; td[rowspan=2 colspan=3 title] 1&lt;td rowspan="2" colspan="3" title=""&gt;&lt;/td&gt; [a=â€™value1â€™ b=â€™value2â€™] è‡ªå®šä¹‰å±žæ€§ï¼Œå±žæ€§å€¼å¯ä»¥ä¸åŠ å¼•å· 1&lt;div a="value1" b="value2"&gt;&lt;/div&gt; Text: {} æ’å…¥æ–‡æœ¬å†…å®¹a{Click me} 1&lt;a href=""&gt;Click me&lt;/a&gt; p&gt;{Click }+a{here}+{ to continue} ç­‰æ•ˆäºŽ p{Click}&gt;a{here}+{to continue} 1&lt;p&gt;Click &lt;a href=""&gt;here&lt;/a&gt; to continue&lt;/p&gt; Implicit tag names éšå¼æ ‡ç­¾å£°æ˜Žä¸€ä¸ªå¸¦classçš„div å¯ä»¥ä¸ç”¨è¾“å…¥divï¼›.header+.footer åˆ™ç”Ÿæˆ: 12&lt;div class="header"&gt;&lt;/div&gt;&lt;div class="footer"&gt;&lt;/div&gt; Emmet è¿˜ä¼šæ ¹æ®çˆ¶æ ‡ç­¾è¿›è¡Œåˆ¤å®šä¾‹å¦‚è¾“å…¥ul&gt;.item*3 åˆ™ç”Ÿæˆï¼š 12345&lt;ul&gt; &lt;li class="item"&gt;&lt;/li&gt; &lt;li class="item"&gt;&lt;/li&gt; &lt;li class="item"&gt;&lt;/li&gt;&lt;/ul&gt; ä¸‹é¢æ˜¯æ‰€æœ‰çš„éšå¼æ ‡ç­¾åç§°ï¼š liï¼šç”¨äºŽ ul å’Œ ol ä¸­ trï¼šç”¨äºŽ tableã€tbodyã€thead å’Œ tfoot ä¸­ tdï¼šç”¨äºŽ tr ä¸­ optionï¼šç”¨äºŽ select å’Œ optgroup ä¸­]]></content>
      <categories>
        <category>FE</category>
        <category>Emmet</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>Emmet</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS3é€‰æ‹©å™¨ Selector Level 3]]></title>
    <url>%2F2018%2F10%2F27%2FCSS3%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[é˜…è¯» W3C 2018å¹´9æœˆ11æ—¥å‘å¸ƒçš„ Selectors Level 3 æè®®çš„ä¸€äº›ç¿»è¯‘å’Œè®°å½•ï¼Œæ–‡æ¡£ä¸­è¯´ï¼Œè¿™ä»½æè®®è¿˜åªæ˜¯è‰ç¨¿ï¼Œä¸å±žäºŽè§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚ æ¦‚è¦â€‹ é€‰æ‹©å™¨ï¼ˆSelectors ï¼‰æ˜¯ä¸€ç§ç”¨æ¥åŒ¹é…æ ‘èŠ‚ç‚¹å…ƒç´ çš„æ¨¡å¼ï¼Œå› æ­¤ä¸€ç§å¯ä»¥ç”¨æ¥é€‰æ‹©XMLæ–‡æ¡£èŠ‚ç‚¹çš„æŠ€æœ¯ã€‚é€‰æ‹©å™¨å·²ç»é’ˆå¯¹ HTML å’Œ XML è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ—¨åœ¨ç”¨äºŽæ€§èƒ½è‹›åˆ»çš„ä»£ç ã€‚ â€‹ CSS (Cascading Style Sheets) æ˜¯ä¸€ç§ç”¨äºŽæè¿°åœ¨æ˜¾ç¤ºå™¨ã€çº¸å¼ å’Œè¯­éŸ³ç­‰ä¸­æ¸²æŸ“å’Œå‘ˆçŽ° HTML å’Œ XML æ–‡ æ¡£çš„è¯­è¨€ã€‚CSS ç”¨é€‰æ‹©å™¨å°†æ ·å¼å±žæ€§ç»‘å®šåˆ°æ–‡æ¡£çš„å…ƒç´ ã€‚ â€‹ åœ¨ CSS1 å’Œ CSS2 ä¸­å·²ç»æœ‰äº†é€‰æ‹©å™¨ï¼Œä¸‹é¢ä»‹ç» CSS3 ä»¥åŠå…¶ä»–è¯­è¨€å¯èƒ½éœ€è¦ç”¨åˆ°çš„é€‰æ‹©å™¨ã€‚ â€‹ é€‰æ‹©å™¨å®šä¹‰äº†ä¸‹é¢çš„æ–¹æ³•ï¼š 1expression * element -&gt; boolean â€‹ å°±æ˜¯è¯´ï¼Œç»™å®šä¸€ä¸ªå…ƒç´ å’Œä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè§„èŒƒå®šä¹‰æ”¹å…ƒç´ æ˜¯å¦ä¸Žé€‰æ‹©å™¨åŒ¹é…ã€‚ é€šè¿‡å¯¹ä¸€ä¸ªå­æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œè¡¨è¾¾å¼è¯„ä¼°ï¼Œè¿™äº›è¡¨è¾¾å¼è¿˜å¯ä»¥è¢«ç”¨äºŽé€‰æ‹©ä¸€äº›å…ƒç´ é›†åˆï¼Œæˆ–è€…ä»Žå…ƒç´ é›†åˆä¸­é€‰æ‹©ä¸€ä¸ªå…ƒç´ ã€‚ ä»‹ç»ä¸€çº§é€‰æ‹©å™¨ï¼ˆSelector Level 1ï¼‰å’ŒäºŒçº§é€‰æ‹©å™¨ï¼ˆSelector Level 2ï¼‰å·²ç»åˆ†åˆ«è¢«å®šä¹‰ä¸º CSS1 å’Œ CSS2.1è§„èŒƒä¸­å®šä¹‰çš„é€‰æ‹©å™¨åŠŸèƒ½çš„å­é›†ã€‚ ç›¸å¯¹ CSS2 çš„å˜åŒ– ä¸€äº›åŸºæœ¬çš„å®šä¹‰ï¼ˆselectorï¼Œgroup of selector,simple selectorç­‰ï¼‰å‘ç”Ÿäº†å˜åŒ–ï¼›å°¤å…¶æ˜¯ï¼Œåœ¨ CSS2 ä¸­çš„ç®€å•é€‰æ‹©å™¨çŽ°åœ¨ç§°ä¸ºç®€å•é€‰æ‹©å™¨åºåˆ—ï¼ˆsequence of simple selectorsï¼‰,æœ¯è¯­â€œç®€å•é€‰æ‹©å™¨â€ çŽ°åœ¨è¢«ç”¨äºŽè¯¥åºåˆ—çš„ç»„ä»¶ã€‚ å¯é€‰çš„å‘½åç©ºé—´ç»„ä»¶çŽ°åœ¨å¯ä»¥è¢«ç”¨äºŽå…ƒç´ ç±»åž‹é€‰æ‹©å™¨ï¼Œé€šç”¨é€‰æ‹©å™¨å’Œå±žæ€§é€‰æ‹©å™¨ã€‚ å¼•å…¥äº†æ–°çš„ç»„åˆå™¨â€”â€”åŽç»­å…„å¼Ÿç»„åˆï¼ˆSubsequent-sibling combinatorï¼‰ æ–°çš„ç®€å•é€‰æ‹©å™¨ï¼ŒåŒ…æ‹¬å­ä¸²åŒ¹é…å±žæ€§é€‰æ‹©å™¨ï¼ˆsubstring matching attributeï¼‰å’Œæ–°çš„ä¼ªç±»ï¼ˆpseudo-classesï¼‰ æ–°çš„ä¼ªå…ƒç´ ï¼Œä»¥åŠä¼ªå…ƒç´ çš„ â€œ::â€ çº¦å®šçš„å¼•å…¥ã€‚ è¯­æ³•è¢«é‡å†™ é€‰æ‹©å™¨çŽ°åœ¨æ˜¯ CSS3 çš„æ¨¡å—ï¼Œæœ‰ç‹¬ç«‹çš„å£°æ˜Žï¼Œå…¶ä»–é€‰æ‹©å™¨å¯ä»¥ç‹¬ç«‹äºŽ CSS å‚è€ƒæœ¬é€‰æ‹©å™¨çš„æ–‡æ¡£ã€‚ é€‰æ‹©å™¨ï¼ˆSelectorï¼‰ä¸‹é¢æ˜¯é€‰æ‹©å™¨è¯­æ³•çš„æ€»ç»“ Pattern Represents Description Level * any element Universal selector 2 E an element of type E Type selector 1 E[foo] an E element with a â€œfooâ€ attribute Attribute selectors 2 E[foo=â€barâ€] an E element whose â€œfooâ€ attribute value is exactly equal to â€œbarâ€ Attribute selectors 2 E[foo~=â€barâ€] an E element whose â€œfooâ€ attribute value is a list of whitespace-separated values, one of which is exactly equal to â€œbarâ€ Attribute selectors 2 E[foo^=â€barâ€] an E element whose â€œfooâ€ attribute value begins exactly with the string â€œbarâ€ Attribute selectors 3 E[foo$=â€barâ€] an E element whose â€œfooâ€ attribute value ends exactly with the string â€œbarâ€ Attribute selectors 3 E[foo*=â€barâ€] an E element whose â€œfooâ€ attribute value contains the substring â€œbarâ€ Attribute selectors 3 E[foo\ =â€enâ€] an E element whose â€œfooâ€ attribute has a hyphen-separated list of values beginning (from the left) with â€œenâ€ Attribute selectors 2 E:root an E element, root of the document Structural pseudo-classes 3 E:nth-child(n) an E element, the n-th child of its parent Structural pseudo-classes 3 E:nth-last-child(n) an E element, the n-th child of its parent, counting from the last one Structural pseudo-classes 3 E:nth-of-type(n) an E element, the n-th sibling of its type Structural pseudo-classes 3 E:nth-last-of-type(n) an E element, the n-th sibling of its type, counting from the last one Structural pseudo-classes 3 E:first-child an E element, first child of its parent Structural pseudo-classes 2 E:last-child an E element, last child of its parent Structural pseudo-classes 3 E:first-of-type an E element, first sibling of its type Structural pseudo-classes 3 E:last-of-type an E element, last sibling of its type Structural pseudo-classes 3 E:only-child an E element, only child of its parent Structural pseudo-classes 3 E:only-of-type an E element, only sibling of its type Structural pseudo-classes 3 E:empty an E element that has no children (including text nodes) Structural pseudo-classes 3 E:link E:visited an E element being the source anchor of a hyperlink of which the target is not yet visited (:link) or already visited (:visited) The link pseudo-classes 1 E:active E:hover E:focus an E element during certain user actions The user action pseudo-classes 1 and 2 E:target an E element being the target of the referring URI The target pseudo-class 3 E:lang(fr) an element of type E in language â€œfrâ€ (the document language specifies how language is determined) The :lang() pseudo-class 2 E:enabled E:disabled a user interface element E which is enabled or disabled The UI element states pseudo-classes 3 E:checked a user interface element E which is checked (for instance a radio-button or checkbox) The UI element states pseudo-classes 3 E::first-line the first formatted line of an E element The ::first-line pseudo-element 1 E::first-letter the first formatted letter of an E element The ::first-letter pseudo-element 1 E::before generated content before an E element The ::before pseudo-element 2 E::after generated content after an E element The ::after pseudo-element 2 E.warning an E element whose class is â€œwarningâ€ (the document language specifies how class is determined). Class selectors 1 E#myid an E element with ID equal to â€œmyidâ€. ID selectors 1 E:not(s) an E element that does not match simple selector s Negation pseudo-class 3 E F an F element descendant of an E element Descendant combinator 1 E &gt; F an F element child of an E element Child combinator 2 E + F an F element immediately preceded by an E element Next-sibling combinator 2 E ~ F an F element preceded by an E element Subsequent-sibling combinator 3 åŒºåˆ†å¤§å°å†™æ‰€æœ‰çš„é€‰æ‹©å™¨è¯­æ³•éƒ½æ˜¯åœ¨ ASCII èŒƒå›´å†…ä¸”å¤§å°ä¸å†™æ•æ„Ÿçš„ï¼ˆä¾‹å¦‚ [a-z] å’Œ [A-Z]æ˜¯ç­‰åŒçš„ï¼‰ï¼Œé™¤äº†ä¸å—é€‰æ‹©å™¨æŽ§åˆ¶çš„éƒ¨åˆ†ã€‚åœ¨é€‰æ‹©å™¨ä¸­çš„æ–‡æ¡£è¯­è¨€å…ƒç´ åç§°ï¼Œå±žæ€§åç§°å’Œå±žæ€§å€¼çš„æ˜¯å¦åŒºåˆ†å¤§å°å†™è¦å–å†³äºŽæ–‡æ¡£è¯­è¨€æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œåœ¨ HTML ä¸­ï¼Œå…ƒç´ åæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œä½†æ˜¯ XML ä¸­åŒºåˆ†å¤§å°å†™ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨HTMLæ ‡ç­¾å½’çº³]]></title>
    <url>%2F2018%2F10%2F26%2F%E5%B8%B8%E7%94%A8HTML%E6%A0%87%E7%AD%BE%E5%BD%92%E7%BA%B3%2F</url>
    <content type="text"><![CDATA[HTMLå¸¸ç”¨æ ‡ç­¾divdivæ ‡ç­¾ç”¨äºŽç»„åˆå…¶ä»–HTMLå…ƒç´ ï¼Œæœ¬èº«æ— å®žåœ¨æ„ä¹‰ã€‚å¸¸ç”¨äºŽé¡µé¢çš„å¸ƒå±€ï¼Œæ¯”å¦‚ä¸€ä¸ªå±•å¼€å¼çš„å¹¿å‘Šé¡µé¢æ¡†æž¶å¤§è‡´å¦‚ä¸‹ï¼š 123456&lt;body&gt; &lt;div id=&quot;wrap-container&quot;&gt; &lt;div id=&quot;collapsed-container&quot;&gt;&lt;/div&gt; &lt;div id=&quot;expanded-container&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt; h1~h6, p, span, strong, emâ€¦æ­¤ç±»æ ‡ç­¾ç”¨äºŽè®¾ç½®æ–‡æœ¬ï¼Œå¸¸è§çš„ä½¿ç”¨æ–¹å¼æ˜¯å¡«å……æ®µè½ï¼Œæ¯”å¦‚å¼¹å‡ºçš„legalæ¡†æ–‡å­—HTMLç»“æž„å¦‚ä¸‹: 12345&lt;div id=&quot;legal-window&quot;&gt; &lt;h4&gt;LEGAL&lt;/h4&gt; &lt;img id=&quot;legal-close&quot; src=&quot;img/embed/legal-close.png&quot; alt=&quot;close window&quot;&gt; &lt;p&gt;*Requires a system with Intel&lt;sup&gt;&amp;reg;&lt;/sup&gt; Turbo Boost Technology. Intel&lt;sup&gt;&amp;reg;&lt;/sup&gt; Turbo Boost Technology and Intel&lt;sup&gt;&amp;reg;&lt;/sup&gt; Turbo Boost Technology 2.0 are only available on select Intel&lt;sup&gt;&amp;reg;&lt;/sup&gt; processors. Consult your PC manufacturer. Performance varies depending on hardware, software, and system configuration. For more information, visit http://www.intel.com/go/turbo. Copyright &amp;copy; 2014 Intel Corporation. All rights reserved. Intel, the Intel logo, Intel Core, Look Inside, Intel Inside, and Pentium are trademarks of Intel Corporation in the U.S. and/or other countries. Other names and brands may be claimed as the property of others.&lt;/p&gt;&lt;/div&gt; ul, li, ol, dl, dt, ddæ­¤ç±»æ ‡ç­¾ç”¨äºŽè®¾ç½®å¸¦æœ‰åˆ—è¡¨å†…å®¹çš„ï¼Œæ¯”å¦‚å¯¼èˆªæ çš„ä¸‹æ‹‰èœå•ï¼Œå¤šè§†é¢‘çš„ç¼©ç•¥å›¾ç­‰ï¼š 1234567891011121314151617181920212223242526&lt;ul class=&quot;nav-tools-list&quot;&gt; &lt;li&gt; &lt;div&gt; &lt;img src=&quot;shoppingtools-icon-1.png&quot; alt=&quot;&quot;&gt; &lt;span&gt;Build &amp; Price&lt;/span&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;div&gt; &lt;img src=&quot;shoppingtools-icon-2.png&quot; alt=&quot;&quot;&gt; &lt;span&gt;Incentives &amp; Offers&lt;/span&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;div&gt; &lt;img src=&quot;shoppingtools-icon-3.png&quot; alt=&quot;&quot;&gt; &lt;span&gt;Request a Local Quote&lt;/span&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;div&gt; &lt;img src=&quot;shoppingtools-icon-4.png&quot; alt=&quot;&quot;&gt; &lt;span&gt;Search Dealer Inventory&lt;/span&gt; &lt;/div&gt; &lt;/li&gt;&lt;/ul&gt; formè¡¨å•ç›¸å…³é¡µé¢ä¸­æ¶‰åŠåˆ°è¡¨å•æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨åˆ°formç›¸å…³æ ‡ç­¾ï¼š 1234567&lt;form name=&quot;frm-sample&quot; class=&quot;frm-sample&quot; action=&quot;try&quot; method=&quot;post&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Name&quot;&gt; &lt;div id=&quot;status-message&quot;&gt;&lt;/div&gt; &lt;div id=&quot;sample-captcha&quot;&gt;&lt;/div&gt; &lt;a id=&quot;check-is-filled&quot; class=&quot;info-btn&quot;&gt;Check if visualCaptcha is filled&lt;/a&gt; &lt;button type=&quot;submit&quot; name=&quot;submit-bt&quot; class=&quot;submit&quot;&gt;Submit form&lt;/button&gt;&lt;/form&gt; tableè¡¨æ ¼ç›¸å…³é¡µé¢ä¸­æ¶‰åŠåˆ°tableç»“æž„ï¼Œéœ€è¦ä½¿ç”¨åˆ°tableç›¸å…³æ ‡ç­¾: 1&lt;talbe&gt;&lt;/talbe&gt; img, canvasç”¨äºŽå›¾åƒæ˜¾ç¤ºã€‚ä¸€èˆ¬ä¸ç›´æŽ¥æ“ä½œimg,canvaså…ƒç´ ï¼Œè€Œæ˜¯åœ¨å®ƒçš„å¤–å±‚åŒ…è£¹ä¸€å±‚çˆ¶çº§å…ƒç´ ï¼ˆå¯ä»¥ä¸ºspan,divç­‰)ï¼Œå¯¹çˆ¶çº§å…ƒç´ è¿›è¡Œæ“ä½œï¼š 1234567&lt;div class=&quot;preload&quot; data-src=&quot;CheddarBacon.png&quot;&gt; &lt;img src=&quot;CheddarBacon.png&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;!-- or --&gt;&lt;div id=&quot;sprite-car&quot; class=&quot;cw-sprite sprite-car&quot; cw-interval=&quot;30&quot; cw-loops=&quot;1&quot; cw-auto-play=&quot;false&quot; cw-texture=&quot;images/sprites/expanded/car-texture.png&quot; cw-mapper=&quot;car&quot;&gt; &lt;canvas class=&quot;cw-renderer&quot; width=&quot;460&quot; height=&quot;130&quot;&gt;&lt;/canvas&gt;&lt;/div&gt; aaæ ‡ç­¾ç”¨äºŽæ‰“å¼€é“¾æŽ¥ï¼Œå‘é€é‚®ä»¶ï¼Œæ®µè½è·³è½¬ç­‰åŠŸèƒ½ã€‚ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„é˜»æ­¢æŽ‰æ ‡ç­¾çš„é»˜è®¤äº‹ä»¶ã€‚ é“¾æŽ¥è·³è½¬ï¼Œå¸¸è§çš„å…³äºŽåˆ†äº«æŒ‰é’®çš„HTMLç»“æž„å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425&lt;div id=&quot;shareBox&quot;&gt; &lt;ul&gt; &lt;li id=&quot;facebook&quot;&gt; &lt;a target=&quot;_blank&quot; rel=&quot;nofollow&quot; data-shareWay=&quot;facebook&quot;&gt; &lt;img alt=&quot;Post on Facebook&quot; src=&quot;img/embed/f4Icon3.png&quot; alt=&quot;Facebook&quot; /&gt; &lt;/a&gt; &lt;/li&gt; &lt;li id=&quot;twitter&quot;&gt; &lt;a target=&quot;_blank&quot; rel=&quot;nofollow&quot; data-shareWay=&quot;twitter&quot;&gt; &lt;img alt=&quot;Tweet this&quot; src=&quot;img/embed/f4Icon4.png&quot; /&gt; &lt;/a&gt; &lt;/li&gt; &lt;li id=&quot;pinterest&quot;&gt; &lt;a data-pin-do=&quot;buttonPin&quot; data-pin-config=&quot;none&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot; data-shareWay=&quot;pinterest&quot;&gt; &lt;img alt=&quot;Pin it&quot; src=&quot;img/embed/f4Icon5.png&quot; /&gt; &lt;/a&gt; &lt;/li&gt; &lt;li id=&quot;email&quot;&gt; &lt;a target=&quot;_blank&quot; rel=&quot;nofollow&quot; data-shareWay=&quot;email&quot;&gt; &lt;img src=&quot;img/embed/f4Icon6.png&quot; /&gt; &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt; å‘é€é‚®ä»¶çš„ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š 123&lt;div class=&quot;button&quot;&gt; &lt;a class=&quot;mail&quot; data-img=&quot;mail.png&quot; href=&quot;mailto:example@gmail.com?subject=xxx&amp;body=xxx&quot;&gt;&lt;/a&gt;&lt;/div&gt; æ®µè½è·³è½¬ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š 12&lt;div id=&quot;html5&quot;&gt;&lt;/div&gt;&lt;a name=&quot;user-content-html5&quot; href=&quot;#html5&quot; class=&quot;headeranchor-link&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;headeranchor&quot;&gt;&lt;/span&gt;&lt;/a&gt; HTML5æ ‡ç­¾æŸ¥è¯¢W3School: ç‚¹å‡»æŸ¥è¯¢]]></content>
      <categories>
        <category>FE</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽHTTPçš„è¯·æ±‚ã€å“åº”ä»¥åŠ CURL å·¥å…·ä»‹ç»]]></title>
    <url>%2F2018%2F10%2F23%2F%E5%85%B3%E4%BA%8EHTTP%E7%9A%84%E8%AF%B7%E6%B1%82%E3%80%81%E5%93%8D%E5%BA%94%E4%BB%A5%E5%8F%8A%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[åœ¨åƒ HTTP è¿™æ ·çš„å®¢æˆ·ç«¯ - æœåŠ¡å™¨åè®®ä¸­ï¼Œä¼šè¯ä¸€èˆ¬åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š å®¢æˆ·ç«¯å»ºç«‹ TCP è¿žæŽ¥ï¼ˆæˆ–è€…å¦‚æžœä¼ è¾“å±‚ä¸æ˜¯ TCP çš„è¯å°±æ˜¯æŸç§é€‚å½“çš„è¿žæŽ¥ï¼‰ã€‚ å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œå¹¶ç­‰å¾…æœåŠ¡å™¨åº”ç­” æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œå›žé€åº”ç­”ï¼Œæä¾›çŠ¶æ€ç å’Œé€‚å½“çš„æ•°æ®ã€‚ å¯¹äºŽ HTTP/1.1æ¥è¯´ï¼Œåœ¨å®Œæˆç¬¬ä¸‰æ­¥ä»¥åŽï¼Œè¿žæŽ¥ä¸å†è¢«å…³é—­ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç«‹åˆ»å‘èµ·è¿›ä¸€æ­¥çš„è¯·æ±‚ï¼šè¿™æ„å‘³ç€ç¬¬äºŒã€ä¸‰ä¸¤æ­¥çŽ°åœ¨å¯ä»¥æ‰§è¡Œä»»æ„æ¬¡ã€‚å³è¿žæŽ¥çš„å¤ç”¨ã€‚ å»ºç«‹è¿žæŽ¥åœ¨å®¢æˆ·ç«¯ - æœåŠ¡å™¨åè®®ä¸­ ï¼Œæ˜¯å®¢æˆ·ç«¯å»ºç«‹è¿žæŽ¥ã€‚æ‰“å¼€ä¸€ä¸ª HTTP è¿žæŽ¥æ„å‘³ç€åœ¨åº•å±‚ä¼ è¾“å±‚ä¸­å¯åŠ¨è¿žæŽ¥ï¼Œé€šå¸¸è¿™å±‚ä¼ è¾“å±‚æ˜¯ TCPã€‚ å¯¹äºŽ TCP ï¼Œé»˜è®¤ç«¯å£ï¼ˆå¯¹äºŽè®¡ç®—æœºä¸Šçš„ HTTP æœåŠ¡å™¨ï¼‰æ˜¯ç«¯å£80ã€‚å…¶ä»–çš„ç«¯å£ä¹Ÿå¯ä»¥ ä½¿ç”¨ï¼Œåƒ 8000 æˆ–è€…8080 è¿™äº›ã€‚èŽ·å–ä¸€ä¸ªé¡µé¢çš„ URL åŒ…å«äº†åŸŸåå’Œç«¯å£å·ï¼Œå¦‚æžœåŽè€…æ˜¯80ç«¯å£åˆ™é€šå¸¸å¯ä»¥å¿½ç•¥ã€‚ æ³¨æ„ï¼šå®¢æˆ·ç«¯ - æœåŠ¡å™¨æ¨¡åž‹ä¸å…è®¸æœåŠ¡å™¨åœ¨æ²¡æœ‰æ˜Žç¡®çš„è¯·æ±‚çš„æƒ…å†µä¸‹å‘é€æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒWeb å¼€å‘è€…ä»¬ä½¿ç”¨äº†ä¸€äº›æŠ€æœ¯ï¼šç”¨ XMLHTTPRequest è½®è¯¢æœåŠ¡å™¨ï¼Œä½¿ç”¨ Fetch APIï¼Œä½¿ç”¨ WebSockets API ï¼Œæˆ–è€…ç›¸ä¼¼çš„åè®®ã€‚ å‘é€å®¢æˆ·ç«¯è¯·æ±‚ä¸€æ—¦è¯·æ±‚å»ºç«‹ï¼Œç”¨æˆ·ä»£ç†å°±å¯ä»¥å‘é€è¯·æ±‚ï¼ˆç”¨æˆ·ä»£ç†é€šå¸¸æ˜¯æµè§ˆå™¨ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„ä¸œè¥¿ï¼Œä¾‹å¦‚ï¼Œçˆ¬è™«ï¼‰ã€‚å®¢æˆ·ç«¯è¯·æ±‚ä¸­åŒ…å«äº†ä¸€äº›ç”¨ CRLF ï¼ˆå›žè½¦æ¢è¡Œï¼‰åˆ†éš”å¼€çš„æ–‡æœ¬æŒ‡ä»¤ï¼Œå¯åˆ’åˆ†ä¸‰ä¸ªå—ï¼š ç¬¬ä¸€è¡ŒåŒ…å«äº†ä¸€ä¸ªè¯·æ±‚æ–¹æ³•ï¼ŒåŽè·Ÿå…¶å‚æ•°ï¼š æ–‡æ¡£è·¯å¾„ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªä¸åŒ…å«åè®®æˆ–è€…åŸŸåçš„ç»å¯¹è·¯å¾„ã€‚ HTTP åè®®ç‰ˆæœ¬ åŽç»­è¡Œä»£è¡¨è¯·æ±‚å¤´éƒ¨ï¼ŒåƒæœåŠ¡å™¨æä¾›æœ‰å…³é€‚åˆçš„æ•°æ®ç±»åž‹çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œä»€ä¹ˆè¯­è¨€ï¼ŒMIME ç±»åž‹ï¼‰ï¼Œæˆ–è€…å…¶ä»–æ”¹å˜å…¶è¡Œä¸ºçš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œå¦‚æžœå·²ç»ç¼“å­˜å°±ä¸å‘é€åº”ç­”ï¼‰ã€‚è¿™äº› HTTP å¤´ç»„æˆäº†ä¸€ä¸ªåŒºå—ï¼Œè¿™ä¸ªåŒºå—ä»¥ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚ æœ€åŽä¸€ä¸ªåŒºå—æ˜¯ä¸€ä¸ªå¯é€‰çš„æ•°æ®å—ï¼Œå¯èƒ½åŒ…å«äº†ä¸€äº›ä¸»è¦è¢« POST æ–¹æ³•ä½¿ç”¨çš„æ•°æ®ã€‚ ç¤ºä¾‹è¯·æ±‚èŽ·å– developer.mozilla.orgçš„æ ¹é¡µé¢ï¼Œä¾‹å¦‚ï¼Œhttp://developer.mozilla.org/ ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨ï¼Œå¦‚æžœå¯èƒ½ï¼Œå®¢æˆ·ç«¯å°†æ›´å–œæ¬¢æ³•è¯­é¡µé¢ï¼š 1234GET / HTTP/1.1Host: developer.mozilla.orgAccept-Language: fr&lt;!--empty line--&gt; æ³¨æ„è§‚å¯Ÿæœ€åŽçš„ â€œempty lineâ€ï¼Œå®ƒå°†æ•°æ®æ•°å—ä»Žå¤´éƒ¨åŒºå—åˆ†ç¦»å¼€äº†ã€‚ç”±äºŽ HTTP å¤´éƒ¨æ²¡æœ‰æä¾› Content-Length ï¼Œå› æ­¤æ•°æ®åŒºå—æ˜¾ç¤ºä¸ºç©ºï¼Œæ ‡è®°äº†è¯·æ±‚å¤´éƒ¨çš„æœ«å°¾ï¼Œå…è®¸æœåŠ¡å™¨åœ¨æŽ¥æ”¶åˆ°è¿™ä¸ªç©ºè¡Œæ—¶å¤„ç†è¯¥è¯·æ±‚ã€‚ ä¾‹å¦‚ï¼Œå‘é€ä¸€ä¸ªè¡¨å•çš„ç»“æžœï¼š 123456POST /contact_form.php HTTP/1.1Host: developer.mozilla.orgContent-Length: 64Content-Type: application/x-www-form-urlencodedname=Joe%20User&amp;request=Send%20me%20one%20of%20your%20catalogue è¯·æ±‚æ–¹æ³•HTTP å®šä¹‰äº†ä¸€ç»„ è¯·æ±‚æ–¹æ³• ï¼ŒæŒ‡ç¤ºè¦å¯¹èµ„æºæ‰§è¡Œçš„æ“ä½œã€‚å°½ç®¡å®ƒä»¬ä¹Ÿèƒ½æ˜¯åè¯ï¼Œè¿™äº›è¯·æ±‚æ–¹æ³•æœ‰æ—¶è¢«ç§°ä½œ HTTP åŠ¨è¯ã€‚æœ€å¸¸è§çš„è¯·æ±‚æ˜¯ GET å’Œ POST ï¼š GET æ–¹æ³•è¯·æ±‚ä¸€ä¸ªä»£è¡¨æŒ‡å®šèµ„æºçš„æ•°æ®ã€‚ä½¿ç”¨ GET æ–¹æ³•çš„è¯·æ±‚åº”è¯¥åªæ£€ç´¢æ•°æ®ã€‚ POST æ–¹æ³•å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œæ‰€ä»¥å®ƒèƒ½æ”¹å˜æœåŠ¡å™¨çŠ¶æ€ã€‚è¿™åœ¨ HTML è¡¨å• ä¸­ç»å¸¸ç”¨åˆ°ã€‚ æœåŠ¡å™¨å“åº”çš„ç»“æž„ç”¨æˆ·ä»£ç†è¿žæŽ¥å¹¶å‘é€æ•°æ®åŽï¼ŒæœåŠ¡å™¨ä¼šå¤„ç†è¯·æ±‚å’Œæ•°æ®ï¼Œæœ€ç»ˆè¿”å›žä¸€ä¸ªå“åº”ã€‚ä¸Ž å®¢æˆ·ç«¯è¯·æ±‚ ç±»ä¼¼ï¼ŒæœåŠ¡å™¨å“åº”ä¹Ÿæ˜¯ç”±ä¸€äº›ä»¥ CRLF åˆ†éš”çš„æ–‡æœ¬æŒ‡ä»¤ç»„æˆï¼Œå¯åˆ’åˆ†ä¸ºä¸‰ä¸ªåŒºå—ï¼š ç¬¬ä¸€è¡Œï¼ŒçŠ¶æ€è¡Œï¼ŒåŒ…å«äº†ä½¿ç”¨çš„ HTTP ç‰ˆæœ¬ï¼Œè·Ÿç€æ˜¯ä¸€ä¸ªçŠ¶æ€è¯·æ±‚ï¼ˆåŠå…¶äººç±»å¯è¯»çš„ç®€è¦å«ä¹‰ï¼‰ã€‚ æŽ¥ä¸‹æ¥çš„å‡ è¡Œä»£è¡¨äº†ç‰¹å®šçš„ HTTP å¤´éƒ¨ï¼Œå‘å®¢æˆ·ç«¯æä¾›äº†å…³äºŽè¿”å›žæ•°æ®çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œç±»åž‹ï¼Œæ•°æ®å¤§å°ï¼Œä½¿ç”¨çš„åŽ‹ç¼©ç®—æ³•ï¼Œå…³äºŽç¼“å­˜çš„æç¤ºï¼‰ã€‚ä¸Ž å®¢æˆ·ç«¯è¯·æ±‚çš„ HTTP å¤´éƒ¨åŒºå—ä¸€æ ·ï¼Œè¿™äº›å“åº” HTTP å¤´éƒ¨ä¹Ÿæ˜¯ä»¥ç©ºè¡Œç»“å°¾ç»„æˆä¸€ä¸ªåŒºå—ã€‚ æœ€åŽä¸€ä¸ªåŒºå—æ˜¯æ•°æ®å—ï¼ŒåŒ…å«äº†å¯é€‰çš„æ•°æ®ã€‚ ç¤ºä¾‹å“åº”æˆåŠŸçš„åº”ç”¨å“åº”ï¼š 12345678910HTTP/1.1 200 OKDate: Sat, 09 Oct 2010 14:28:02 GMTServer: ApacheLast-Modified: Tue, 01 Dec 2009 20:18:22 GMTETag: "51142bc1-7449-479b075b2891b"Accept-Ranges: bytesContent-Length: 29769Content-Type: text/html&lt;!DOCTYPE html... (here comes the 29769 bytes of the requested web page) è¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…è½¬ç§»çš„é€šçŸ¥ï¼š 12345678910111213141516171819202122HTTP/1.1 301 Moved PermanentlyServer: Apache/2.2.3 (Red Hat)Content-Type: text/html; charset=iso-8859-1Date: Sat, 09 Oct 2010 14:30:24 GMTLocation: https://developer.mozilla.org/ (this is the new link to the resource; it is expected that the user-agent will fetch it)Keep-Alive: timeout=15, max=98Accept-Ranges: bytesVia: Moz-Cache-zlb05Connection: Keep-AliveX-Cache-Info: cachingX-Cache-Info: cachingContent-Length: 325 (the content contains a default page to display if the user-agent is not able to follow the link)&lt;!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;301 Moved Permanently&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Moved Permanently&lt;/h1&gt;&lt;p&gt;The document has moved &lt;a href="https://developer.mozilla.org/"&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;hr&gt;&lt;address&gt;Apache/2.2.3 (Red Hat) Server at developer.mozilla.org Port 80&lt;/address&gt;&lt;/body&gt;&lt;/html&gt; è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨çš„é€šçŸ¥ï¼š 12345678910HTTP/1.1 404 Not FoundDate: Sat, 09 Oct 2010 14:33:02 GMTServer: ApacheLast-Modified: Tue, 01 May 2007 14:24:39 GMTETag: "499fd34e-29ec-42f695ca96761;48fe7523cfcc1"Accept-Ranges: bytesContent-Length: 10732Content-Type: text/html&lt;!DOCTYPE html... (contains a site-customized page helping the user to find the missing resource) å“åº”çŠ¶æ€ç HTTP å“åº”çŠ¶æ€ç  æŒ‡ç¤ºäº†ä¸€ä¸ª HTTP è¯·æ±‚æ˜¯å¦æˆåŠŸæ‰§è¡Œã€‚å“åº”è¢«åˆ†æˆäº†5ç±»ï¼šé€šçŸ¥ç±»å“åº”ï¼ŒæˆåŠŸå“åº”ï¼Œé‡å®šå‘ï¼Œå®¢æˆ·ç«¯é”™è¯¯ï¼ŒæœåŠ¡ç«¯é”™è¯¯ã€‚ 200: OKã€‚è¯·æ±‚æˆåŠŸã€‚ 301: æ°¸ä¹…è½¬ç§»ã€‚è¿™ä¸ªè¿”å›žç æ„å‘³ç€è¯·æ±‚çš„èµ„æºçš„ URI å‘ç”Ÿäº†æ”¹å˜ã€‚ 404: æœªæ‰¾åˆ°ã€‚æœåŠ¡å™¨æ²¡æ‰¾åˆ°è¯·æ±‚çš„èµ„æºã€‚ curl åº”ç”¨curl æ˜¯ä¸€ä¸ªç”¨äºŽåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å‘é€æ•°æ®çš„å·¥å…·ï¼Œæ”¯æŒå¾ˆå¤šç§åè®®ï¼ˆDICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET and TFTPï¼‰ã€‚è¯¥å·¥å…·æä¾›çš„åŠŸèƒ½ç±»ä¼¼æµè§ˆå™¨ï¼Œå¯ä»¥ä½œä¸ºç”¨æˆ·ä»£ç†å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä½†æ˜¯è¢«è®¾è®¡ç”¨äºŽæ— ç”¨æˆ·äº¤äº’çŽ¯å¢ƒä¸‹ä½¿ç”¨ã€‚ curl å‘èµ·ä¸€ä¸ª GET è¯·æ±‚ 1curl -s -v -H "Name: kinboy" -- "http://example.org" å‚æ•°é€‰é¡¹çš„å«ä¹‰å¯ä»¥ä½¿ç”¨å‘½ä»¤ man curl æŸ¥è¯¢ï¼Œæˆ–è€…å°†å‘½ä»¤ç›´æŽ¥ç²˜è´´åˆ° https://explainshell.com/# é¡µé¢çš„æœç´¢æ å°±å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°æ¯ä¸ªé€‰é¡¹çš„å«ä¹‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475* Rebuilt URL to: http://example.org/* Trying 93.184.216.34...* TCP_NODELAY set* Connected to example.org (93.184.216.34) port 80 (#0)&gt; GET / HTTP/1.1&gt; Host: example.org&gt; User-Agent: curl/7.58.0&gt; Accept: */*&gt; Name: kinboy&gt;* HTTP 1.0, assume close after body&lt; HTTP/1.0 200 OK&lt; Cache-Control: max-age=604800&lt; Content-Type: text/html; charset=UTF-8&lt; Date: Tue, 23 Oct 2018 17:18:21 GMT&lt; Etag: "1541025663+ident"&lt; Expires: Tue, 30 Oct 2018 17:18:21 GMT&lt; Last-Modified: Fri, 09 Aug 2013 23:54:35 GMT&lt; Server: ECS (sjc/4FC1)&lt; Vary: Accept-Encoding&lt; X-Cache: HIT&lt; Content-Lengti: 1270&lt; Connection: close&lt;&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Example Domain&lt;/title&gt; &lt;meta charset="utf-8" /&gt; &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt; &lt;style type="text/css"&gt; body &#123; background-color: #f0f0f2; margin: 0; padding: 0; font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; &#125; div &#123; width: 600px; margin: 5em auto; padding: 50px; background-color: #fff; border-radius: 1em; &#125; a:link, a:visited &#123; color: #38488f; text-decoration: none; &#125; @media (max-width: 700px) &#123; body &#123; background-color: #fff; &#125; div &#123; width: auto; margin: 0 auto; border-radius: 0; padding: 1em; &#125; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt; &lt;h1&gt;Example Domain&lt;/h1&gt; &lt;p&gt;This domain is established to be used for illustrative examples in documents. You may use this domain in examples without prior coordination or asking for permission.&lt;/p&gt; &lt;p&gt;&lt;a href="http://www.iana.org/domains/example"&gt;More information...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;* Closing connection 0 curl å‘èµ·ä¸€ä¸ª POST è¯·æ±‚ 1curl -X POST -d "some data transfer to server" -s -v -H "name: kinboy" -- "http://example.org" å“åº”å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576* Rebuilt URL to: http://example.org/* Trying 93.184.216.34...* TCP_NODELAY set* Trying 2606:2800:220:1:248:1893:25c8:1946...* TCP_NODELAY set* connect to 2606:2800:220:1:248:1893:25c8:1946 port 80 failed: Connection refused* Connected to example.org (93.184.216.34) port 80 (#0)&gt; POST / HTTP/1.1&gt; Host: example.org&gt; User-Agent: curl/7.58.0&gt; Accept: */*&gt; name: kinboy&gt; Content-Length: 28&gt; Content-Type: application/x-www-form-urlencoded&gt;* upload completely sent off: 28 out of 28 bytes&lt; HTTP/1.1 200 OK&lt; Accept-Ranges: bytes&lt; Cache-Control: max-age=604800&lt; Content-Type: text/html; charset=UTF-8&lt; Date: Tue, 23 Oct 2018 17:23:42 GMT&lt; Etag: "1541025663"&lt; Expires: Tue, 30 Oct 2018 17:23:42 GMT&lt; Last-Modified: Fri, 09 Aug 2013 23:54:35 GMT&lt; Server: EOS (vny006/044F)&lt; Content-Length: 1270&lt;&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Example Domain&lt;/title&gt; &lt;meta charset="utf-8" /&gt; &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt; &lt;style type="text/css"&gt; body &#123; background-color: #f0f0f2; margin: 0; padding: 0; font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; &#125; div &#123; width: 600px; margin: 5em auto; padding: 50px; background-color: #fff; border-radius: 1em; &#125; a:link, a:visited &#123; color: #38488f; text-decoration: none; &#125; @media (max-width: 700px) &#123; body &#123; background-color: #fff; &#125; div &#123; width: auto; margin: 0 auto; border-radius: 0; padding: 1em; &#125; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt; &lt;h1&gt;Example Domain&lt;/h1&gt; &lt;p&gt;This domain is established to be used for illustrative examples in documents. You may use this domain in examples without prior coordination or asking for permission.&lt;/p&gt; &lt;p&gt;&lt;a href="http://www.iana.org/domains/example"&gt;More information...&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;]]></content>
      <categories>
        <category>FE</category>
        <category>HTTP</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTP Request]]></title>
    <url>%2F2018%2F10%2F23%2FHTTP-Request%2F</url>
    <content type="text"><![CDATA[ç¿»è¯‘åŽŸæ–‡ï¼šRequest RequestA request message from a client to a server includes, within the first line of that message, the method to be applied to the resource, the identifier of the resource, and the protocol version in use. ä¸€ä¸ªä»Žå®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚æ¶ˆæ¯çš„è¡Œé¦–ï¼ˆè¯·æ±‚çš„ç¬¬ä¸€è¡Œï¼‰ä¸­åŒ…æ‹¬äº†ï¼Œæ“ä½œèµ„æºçš„methodæ–¹æ³•ï¼ˆGET/POST/PUTç­‰ï¼‰ï¼Œèµ„æºæ ‡è¯†ç¬¦ï¼ˆå³URIï¼‰ï¼Œä»¥åŠä½¿ç”¨çš„åè®®ç‰ˆæœ¬ï¼ˆHTTP/1.1,HTTP/1.2ç­‰ï¼‰ã€‚ å®Œæ•´çš„è¯·æ±‚æ¶ˆæ¯ç»“æž„å¦‚ä¸‹ï¼ŒåŒ…å«äº†4ä¸ªéƒ¨åˆ†ï¼šè¡Œé¦–ï¼Œè¯·æ±‚å¤´ï¼Œæ¢è¡Œï¼Œæ¶ˆæ¯ä½“ 123456Request = Request-Line ; è¡Œé¦–ï¼ˆ1ï¼‰ *(( general-header ; é€šç”¨å¤´éƒ¨ï¼ˆ2ï¼‰ | request-header ; è¯·æ±‚å¤´éƒ¨ï¼ˆ2ï¼‰ | entity-header ) CRLF) ; å®žä½“å¤´éƒ¨ï¼ˆ2ï¼‰ CRLF ; è¯·æ±‚å¤´ä¸Žæ¶ˆæ¯ä½“ä¹‹é—´æœ‰æ¢è¡Œï¼ˆ3ï¼‰ [ message-body ] ; æ¶ˆæ¯ä½“ï¼ˆ4ï¼‰ 5.1 Request-LineThe Request-Line begins with a method token, followed by the Request-URI and the protocol version, and ending with CRLF. The elements are separated by SP characters. No CR or LF is allowed except in the final CRLF sequence. è¯·æ±‚çš„é¦–è¡Œä»¥æ–¹æ³•åç§°ï¼ˆMethodï¼‰å¼€å¤´ï¼ŒæŽ¥ç€æ˜¯è¯·æ±‚åœ°å€ï¼ˆRequest-URIï¼‰ï¼Œåè®®ç‰ˆæœ¬ï¼Œä»¥CRLFç»“å°¾ã€‚è¿™äº›å…ƒç´ ä»¥ç©ºæ ¼åˆ†éš”ï¼Œæœ«å°¾åªèƒ½æ˜¯CRLFï¼Œä¸å¯èƒ½æ˜¯CR æˆ–è€… LFã€‚ 1Request-Line = Method SP Request-URI SP HTTP-Version CRLF 5.1.1 MethodThe Method token indicates the method to be performed on the resource identified by the Request-URI. The method is case-sensitive. æ–¹æ³•åç§°ï¼ˆMethodï¼‰æŒ‡å®šäº†å½“å‰è¯·æ±‚å¯¹è¯·æ±‚åœ°å€ï¼ˆRequest-URIï¼‰æ‰€æŒ‡å‘çš„æœåŠ¡å™¨èµ„æºå°†è¦æ‰§è¡Œçš„æ“ä½œæ–¹æ³•ã€‚ 12345678910Method = &quot;OPTIONS&quot; ; Section 9.2 | &quot;GET&quot; ; Section 9.3 | &quot;HEAD&quot; ; Section 9.4 | &quot;POST&quot; ; Section 9.5 | &quot;PUT&quot; ; Section 9.6 | &quot;DELETE&quot; ; Section 9.7 | &quot;TRACE&quot; ; Section 9.8 | &quot;CONNECT&quot; ; Section 9.9 | extension-methodextension-method = token The list of methods allowed by a resource can be specified in an Allow header field (section 14.7). The return code of the response always notifies the client whether a method is currently allowed on a resource, since the set of allowed methods can change dynamically. An origin server SHOULD return the status code 405 (Method Not Allowed) if the method is known by the origin server but not allowed for the requested resource, and 501 (Not Implemented) if the method is unrecognized or not implemented by the origin server. The methods GET and HEAD MUST be supported by all general-purpose servers. All other methods are OPTIONAL; however, if the above methods are implemented, they MUST be implemented with the same semantics as those specified in section 9. å¯ä»¥åœ¨ Allow å¤´éƒ¨å­—æ®µä¸­æŒ‡å®šèµ„æºå…è®¸çš„æ–¹æ³•åˆ—è¡¨ã€‚å› ä¸ºå…è®¸æ“ä½œçš„æ–¹æ³•é›†åˆå¯ä»¥åŠ¨æ€ä¿®æ”¹ï¼Œæ‰€ä»¥å“åº”çš„è¿”å›žç å§‹ç»ˆä¼šé€šçŸ¥å®¢æˆ·ç«¯æ˜¯å¦å…è®¸åœ¨èµ„æºä¸Šä½¿ç”¨å½“å‰æ–¹æ³•ã€‚å¦‚æžœæœåŠ¡å™¨ç†è§£å½“å‰æ–¹æ³•ä½†æ˜¯ä¸å…è®¸åœ¨è¯·æ±‚çš„èµ„æºä¸Šæ‰§è¡Œåˆ™æºæœåŠ¡å™¨åº”è¯¥è¿”å›žçŠ¶æ€ç  405 ï¼ˆæ–¹æ³•ä¸è¢«å…è®¸ï¼‰ã€‚å¦‚æžœæ–¹æ³•æœªæºæœåŠ¡å™¨è¯†åˆ«æˆ–è€…ä¸æ”¯æŒåˆ™è¿”å›ž 501 ï¼ˆä¸æ”¯æŒï¼‰ã€‚æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½ å¿…é¡» æ”¯æŒ GET å’Œ POST æ–¹æ³•ã€‚æ‰€æœ‰å…¶ä»–æ–¹æ³•éƒ½æ˜¯å¯é€‰çš„ï¼›ä½†æ˜¯ï¼Œå¦‚æžœæœåŠ¡å™¨è¦å®žçŽ°ä¸Šé¢çš„æ–¹æ³•ï¼Œåˆ™å¿…é¡»ç”¨ section 9 ä¸­æŒ‡å®šçš„è¯­ä¹‰ç›¸åŒçš„è¯­ä¹‰å®žçŽ°å®ƒä»¬ã€‚ 5.1.2 Request-URIThe Request-URI is a Uniform Resource Identifier (section 3.2) and identifies the resource upon which to apply the request. Request-URI æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª URIï¼ˆUniform Resource Identifierï¼Œsection 3.2ï¼‰ï¼Œç”¨æ¥æ ‡è¯†è¯·æ±‚æ‰€æŒ‡å‘çš„èµ„æºã€‚ 1Request-URI = &quot;*&quot; | absoluteURI | abs_path | authority The four options for Request-URI are dependent on the nature of the request. The asterisk â€œ*â€ means that the request does not apply to a particular resource, but to the server itself, and is only allowed when the method used does not necessarily apply to a resource. One example would be Request-URI çš„å››ä¸ªé€‰é¡¹å–å†³äºŽè¯·æ±‚çš„æ€§è´¨ã€‚æ˜Ÿå· â€*â€œ è¡¨ç¤ºè¯·æ±‚ä¸é€‚ç”¨äºŽç‰¹å®šèµ„æºï¼Œè€Œæ˜¯é€‚ç”¨äºŽæœåŠ¡å™¨æœ¬èº«ï¼Œå¹¶ä¸”ä»…åœ¨ä½¿ç”¨çš„æ–¹æ³•ä¸ä¸€å®šé€‚ç”¨äºŽèµ„æºçš„æ—¶å€™æ‰å…è®¸ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š 1OPTIONS * HTTP/1.1 The absoluteURI form is REQUIRED when the request is being made to a proxy. The proxy is requested to forward the request or service it from a valid cache, and return the response. Note that the proxy MAY forward the request on to another proxy or directly to the server specified by the absoluteURI. In order to avoid request loops, a proxy MUST be able to recognize all of its server names, including any aliases, local variations, and the numeric IP address. An example Request-Line would be: åœ¨å‘ä»£ç†å‘å‡ºè¯·æ±‚çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨absoluteURIï¼ˆç»å¯¹URIï¼‰ ã€‚ä»£ç†ä¼šè½¬å‘è¯·æ±‚æˆ–è€…æä¾›æœ‰æ•ˆçš„ç¼“å­˜ï¼Œç„¶åŽè¿”å›žå“åº”ã€‚è¦çŸ¥é“ä»£ç†å¯èƒ½è½¬å‘è¯·æ±‚ç»™å¦ä¸€ä¸ªä»£ç†æˆ–è€…ç›´æŽ¥è½¬å‘ç»™æœåŠ¡å™¨ï¼Œç”± absoluteURI æŒ‡å®šã€‚ä¸ºäº†é¿å…è¯·æ±‚å¾ªçŽ¯ï¼Œä»£ç† å¿…é¡» èƒ½å¤Ÿè¯†åˆ«æ‰€æœ‰çš„æœåŠ¡å™¨åç§°ï¼ŒåŒ…æ‹¬ä»»ä½•åˆ«åï¼Œæœ¬åœ°å˜ä½“ï¼Œä»¥åŠ IP åœ°å€ã€‚ä¸€ä¸ª Request-URI çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š 1GET http://www.w3.org/pub/WWW/TheProject.html HTTP/1.1 To allow for transition to absoluteURIs in all requests in future versions of HTTP, all HTTP/1.1 servers MUST accept the absoluteURI form in requests, even though HTTP/1.1 clients will only generate them in requests to proxies. ä¸ºäº†åœ¨æœªæ¥çš„ç‰ˆæœ¬çš„ HTTP ä¸­å…è®¸å°†æ‰€æœ‰è¯·æ±‚è½¬æ¢ä¸º absoluteURI ï¼Œæ‰€æœ‰ HTTP/1.1 æœåŠ¡å™¨å¿…é¡»åœ¨è¯·æ±‚ä¸­æŽ¥å— absoluteURI ï¼Œå°½ç®¡ HTTP/1.1 å®¢æˆ·ç«¯åªèƒ½åœ¨å‘ä»£ç†å‘å‡ºè¯·æ±‚æ—¶ç”Ÿæˆè¿™äº› absoluteURIã€‚ The authority form is only used by the CONNECT method (section 9.9). æƒé™ï¼ˆauthorityï¼‰ä»…ç”± CONNECT æ–¹æ³•ä½¿ç”¨ (section 9.9)ã€‚ The most common form of Request-URI is that used to identify a resource on an origin server or gateway. In this case the absolute path of the URI MUST be transmitted (see section 3.2.1, abs_path) as the Request-URI, and the network location of the URI (authority) MUST be transmitted in a Host header field. For example, a client wishing to retrieve the resource above directly from the origin server would create a TCP connection to port 80 of the host â€œwww.w3.org&quot; and send the lines: æœ€å¸¸ç”¨çš„ Request-URI æ ¼å¼æ˜¯ç”¨äºŽæ ‡è¯†æºæœåŠ¡å™¨æˆ–è€…ç½‘å…³ä¸Šçš„ä¸€ä¸ªèµ„æºã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒURIçš„ç»å¯¹è·¯å¾„å¿…é¡»ä½œä¸º Request-URI ä¼ é€ (å‚è§ç¬¬ 3.2.1èŠ‚, abs_path)ï¼Œå¹¶ä¸” URIï¼ˆæƒé™ï¼‰çš„ç½‘ç»œä½ç½®å¿…é¡»åœ¨ Host å¤´éƒ¨å­—æ®µä¸­ä¼ è¾“ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæƒ³è¦ç›´æŽ¥ä»ŽæºæœåŠ¡å™¨ä¸Šæ£€ç´¢ä¸Šè¿°èµ„æºçš„å®¢æˆ·ç«¯å°†ä¼šåˆ›å»ºä¸€ä¸ªåˆ°ä¸»æœº â€œwww.w3.orgâ€ çš„ç«¯å£ 80 çš„ TCP è¿žæŽ¥ï¼Œå¹¶å‘é€ä»¥ä¸‹è¡Œï¼š 12GET /pub/WWW/TheProject.html HTTP/1.1Host: www.w3.org followed by the remainder of the Request. Note that the absolute path cannot be empty; if none is present in the original URI, it MUST be given as â€œ/â€œ (the server root). ç„¶åŽæ˜¯è¯·æ±‚çš„å…¶ä½™éƒ¨åˆ†ã€‚è¦æ³¨æ„ç»å¯¹è·¯å¾„ä¸èƒ½ä¸ºç©ºï¼›å¦‚æžœæº URI ä¸­ä¸å­˜åœ¨ï¼Œåˆ™å¿…é¡»ä»¥ â€œ/â€ï¼ˆæœåŠ¡å™¨æ ¹ç›®å½•ï¼‰ç»™å‡ºã€‚ The Request-URI is transmitted in the format specified in section 3.2.1. If the Request-URI is encoded using the â€œ% HEX HEXâ€ encoding [42], the origin server MUST decode the Request-URI in order to properly interpret the request. Servers SHOULD respond to invalid Request-URIs with an appropriate status code. Request-URI ä»¥ç¬¬ 3.2.1 èŠ‚ä¸­å£°æ˜Žçš„æ ¼å¼ä¼ è¾“ã€‚å¦‚æžœ Request-URI ä½¿ç”¨ â€œ% HEX HEXâ€ç¼–ç  [42] è¿›è¡Œç¼–ç ï¼Œåˆ™æºæœåŠ¡å™¨å¿…é¡»è§£ç  Request-URI ä»¥æ­£ç¡®è§£é‡Šè¯·æ±‚ã€‚å¯¹äºŽæ— æ•ˆ Request-URI æœåŠ¡å™¨åº”è¯¥è¿”å›žåˆé€‚çš„çŠ¶æ€ç ã€‚ A transparent proxy MUST NOT rewrite the â€œabs_pathâ€ part of the received Request-URI when forwarding it to the next inbound server, except as noted above to replace a null abs_path with â€œ/â€œ. é€æ˜Žä»£ç†åœ¨å°†è¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ªå…¥ç«™æœåŠ¡å™¨æ—¶ä¸å¾—é‡å†™æŽ¥å—åˆ°çš„ Request-URI çš„ â€œabs_pathâ€ éƒ¨åˆ†ï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„ç”¨ â€/â€œ æ›¿æ¢ null abs_pathã€‚ 12345Note: The &quot;no rewrite&quot; rule prevents the proxy from changing themeaning of the request when the origin server is improperly usinga non-reserved URI character for a reserved purpose. Implementorsshould be aware that some pre-HTTP/1.1 proxies have been known torewrite the Request-URI. 5.2 The Resource Identified by a RequestThe exact resource identified by an Internet request is determined by examining both the Request-URI and the Host header field. é€šè¿‡æ£€æŸ¥ Request-URI å’Œ Host å¤´éƒ¨å­—æ®µæ¥ç¡®å®šç½‘ç»œè¯·æ±‚æŒ‡å®šçš„ç¡®åˆ‡èµ„æºã€‚ An origin server that does not allow resources to differ by the requested host MAY ignore the Host header field value when determining the resource identified by an HTTP/1.1 request. (But see section 19.6.1.1 for other requirements on Host support in HTTP/1.1.) åœ¨ç¡®å®šç”± HTTP/1.1 è¯·æ±‚æ ‡è¯†çš„èµ„æºæ—¶ï¼Œä¸å…è®¸èµ„æºå› æœåŠ¡å™¨è€Œä¸åŒçš„æºæœåŠ¡å™¨å¯èƒ½ä¼šå¿½ç•¥ Host å¤´éƒ¨å­—æ®µå€¼ã€‚ï¼ˆä½†æœ‰å…³HTTP / 1.1ä¸­ä¸»æœºæ”¯æŒçš„å…¶ä»–è¦æ±‚ï¼Œè¯·å‚é˜…ç¬¬ 19.6.1.1 èŠ‚ã€‚ï¼‰ An origin server that does differentiate resources based on the host requested (sometimes referred to as virtual hosts or vanity host names) MUST use the following rules for determining the requested resource on an HTTP/1.1 request: æ ¹æ®è¯·æ±‚çš„ä¸»æœºï¼ˆæœ‰æ—¶ä¹Ÿå«ä½œ è™šæ‹Ÿä¸»æœº æˆ–è€… è™šè£ä¸»æœºåï¼‰åŒºåˆ†èµ„æºçš„æºæœåŠ¡å™¨å¿…é¡»ç”¨ä¸‹é¢çš„è§„åˆ™æ¥ç¡®å®š HTTP/1.1 è¯·æ±‚ä¸Šè¯·æ±‚çš„èµ„æºï¼š \1. If Request-URI is an absoluteURI, the host is part of the Request-URI. Any Host header field value in the request MUST be ignored. å¦‚æžœ Request-URI æ˜¯ä¸€ä¸ªabsoluteURIï¼Œä¸»æœºæ˜¯ Request-URI çš„ä¸€éƒ¨åˆ†ã€‚å¿…é¡»å¿½ç•¥è¯·æ±‚ä¸­ä»»ä½• Host å¤´éƒ¨å­—æ®µçš„å€¼ã€‚ \2. If the Request-URI is not an absoluteURI, and the request includes a Host header field, the host is determined by the Host header field value. å¦‚æžœ Request-URI ä¸æ˜¯ absoluteURIï¼Œè¯·æ±‚ä¸­åŒ…å«ä¸€ä¸ª Host è¯·æ±‚å¤´å­—æ®µï¼Œä¸»æœºæœ‰ Host å¤´éƒ¨å­—æ®µçš„å€¼å†³å®šã€‚ \3. If the host as determined by rule 1 or 2 is not a valid host on the server, the response MUST be a 400 (Bad Request) error message. å¦‚æžœæ ¹æ®è§„åˆ™ 1 æˆ–è€… 2 ç¡®å®šçš„ä¸»æœºä¸æ˜¯æœåŠ¡å™¨ä¸Šçš„æœ‰æ•ˆä¸»æœºï¼Œå“åº”å¿…é¡»æ˜¯ 400 ï¼ˆBad Requestï¼‰é”™è¯¯æ¶ˆæ¯ã€‚ Recipients of an HTTP/1.0 request that lacks a Host header field MAY attempt to use heuristics (e.g., examination of the URI path for something unique to a particular host) in order to determine what exact resource is being requested. ç¼ºå°‘ Host å¤´å­—æ®µçš„ HTTP/1.0 è¯·æ±‚çš„æŽ¥æ”¶è€…å¯ä»¥å°è¯•å¯å‘ç®—æ³•ï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥ URI è·¯å¾„ä»¥å¯»æ‰¾ç‰¹å®šä¸»æœºç‰¹æœ‰çš„ä¸œè¥¿ï¼‰ï¼Œä»¥ç¡®å®šæ­£åœ¨è¯·æ±‚çš„èµ„æºã€‚ 5.3 Request Header FieldsThe request-header fields allow the client to pass additional information about the request, and about the client itself, to the server. These fields act as request modifiers, with semantics equivalent to the parameters on a programming language method invocation. è¯·æ±‚å¤´å­—æ®µå…è®¸å®¢æˆ·ç«¯å°†æœ‰å…³è¯·æ±‚ä»¥åŠå®¢æˆ·ç«¯æœ¬èº«çš„å…¶ä»–ä¿¡æ¯ä¼ é€’ç»™æœåŠ¡å™¨ã€‚è¿™äº›å­—æ®µå……å½“è¯·æ±‚ä¿®é¥°ç¬¦ï¼Œå…¶è¯­ä¹‰ç­‰åŒäºŽç¼–ç¨‹è¯­è¨€è°ƒç”¨æ–¹æ³•çš„å‚æ•°ã€‚ 12345678910111213141516171819request-header = Accept ; Section 14.1 | Accept-Charset ; Section 14.2 | Accept-Encoding ; Section 14.3 | Accept-Language ; Section 14.4 | Authorization ; Section 14.8 | Expect ; Section 14.20 | From ; Section 14.22 | Host ; Section 14.23 | If-Match ; Section 14.24 | If-Modified-Since ; Section 14.25 | If-None-Match ; Section 14.26 | If-Range ; Section 14.27 | If-Unmodified-Since ; Section 14.28 | Max-Forwards ; Section 14.31 | Proxy-Authorization ; Section 14.34 | Range ; Section 14.35 | Referer ; Section 14.36 | TE ; Section 14.39 | User-Agent ; Section 14.43 Request-header field names can be extended reliably only in combination with a change in the protocol version. However, new or experimental header fields MAY be given the semantics of request- header fields if all parties in the communication recognize them to be request-header fields. Unrecognized header fields are treated as entity-header fields. è¯·æ±‚å¤´å­—æ®µçš„åç§°åªèƒ½ä¸Žåè®®ç‰ˆæœ¬çš„æ›´æ”¹ä¸€èµ·å¯é åœ°æ‰©å±•ã€‚ä½†æ˜¯å¦‚æžœé€šä¿¡ä¸­çš„å„æ–¹éƒ½èƒ½è¯†åˆ«æ–°å¢žæˆ–è€…å®žéªŒæ€§çš„è¯·æ±‚å¤´å­—æ®µï¼Œåˆ™å¯ä»¥ä¸ºå®ƒä»¬èµ‹äºˆè¯·æ±‚å¤´å­—æ®µçš„è¯­ä¹‰ã€‚æ— æ³•è¯†åˆ«çš„å¤´éƒ¨å­—æ®µè¢«è§†ä¸ºå®žä½“è¯·æ±‚å¤´å­—æ®µã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>HTTP</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>ç¿»è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ª JavaScript å¯é€‰å‚æ•°çš„å®‰å…¨éšæ‚£]]></title>
    <url>%2F2018%2F10%2F19%2F%E4%B8%80%E4%B8%AA-JavaScript-%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0%E7%9A%84%E5%AE%89%E5%85%A8%E9%9A%90%E6%82%A3%2F</url>
    <content type="text"><![CDATA[â€‹ è¿™æ˜¾ç„¶æ˜¯ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œå¯èƒ½å¤§å¤šæ•°ç¨‹åºå‘˜ä¼šè®¤ä¸ºè¿™ä¸ªè¡¨è¾¾å¼ä¼šè¿”å›žä¸€ä¸ªç±»ä¼¼ [1ï¼Œ2ï¼Œ3] çš„æ•°ç»„ï¼Œå¦‚æžœä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸Šé¢çš„è¡¨è¾¾å¼å›žè½¦åŽï¼Œå°±ä¼šçœ‹åˆ°å®žé™…è¿”å›žçš„æ˜¯ [1, NaN, NaN] ã€‚ â€‹ è§£é‡Šå¦‚ä¸‹ï¼ŒparseInt ä½œä¸º JavaScript çš„å†…ç½®å‡½æ•°ï¼Œè¯•å›¾å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ï¼Œå¹¶è¿”å›žè¯¥æ•°å€¼ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªè¿™æ ·çš„è°ƒç”¨ï¼š 1const n = parseInt('123'); â€‹ åº”è¯¥å°†æ•°å€¼ 123 èµ‹ç»™å˜é‡ nã€‚ â€‹ ä½ åº”è¯¥çŸ¥é“ï¼Œå½“é‡åˆ°å­—ç¬¦ä¸²æ— æ³•è½¬æ¢ä¸ºæ•°å€¼çš„æ—¶å€™ï¼ŒparseInt æ–¹æ³•ä¼šè¿”å›ž NaN ï¼ŒNaN æ˜¯ Not a Number çš„ç¼©å†™ï¼Œé€šå¸¸æ„å‘³ç€å‡ºçŽ°äº†æŸç§æ•°å€¼è®¡ç®—é”™è¯¯ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªè¿™æ ·çš„è¡¨è¾¾å¼ï¼š 1const x = parseInt('xyz'); â€‹ ä¼šå°† NaN èµ‹å€¼ç»™å˜é‡ xã€‚ â€‹ map æ˜¯ ECMAScript5 ä¸­çš„å†…ç½®å‡½æ•°ï¼Œè®¸å¤šæµè§ˆå™¨ä¸­éƒ½å·²æ”¯æŒã€‚map ä»¥ä¸€ä¸ª function å¯¹è±¡ä½œä¸ºå‚æ•°ï¼ŒéåŽ†æ•´ä¸ªæ•°ç»„ï¼Œå¹¶å¯¹æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ è°ƒç”¨è¯¥å‚æ•° functionï¼Œå°†å…ƒç´ ä½œä¸ºå‚æ•°ä¼ å…¥è¯¥ functionã€‚ç„¶åŽå°†è¿™äº› function è°ƒç”¨çš„è¿”å›žå€¼ç»„æˆä¸€ä¸ªæ–°çš„æ•°ç»„è¿”å›žã€‚å‚è€ƒä¸‹é¢çš„ä¾‹å­ 1[1ï¼Œ2ï¼Œ3].map(function(value) &#123;return value + 1&#125;); â€‹ è¿™ä¸ªè¡¨è¾¾å¼æ‰§è¡ŒåŽä¼šè¿”å›žä¸€ä¸ªå€¼ä¸º [2ï¼Œ3ï¼Œ4] çš„æ•°ç»„ã€‚æœ€å¸¸è§çš„æ˜¯ä¼ é€’ä¸€ä¸ªè¯¸å¦‚æ­¤ç±»çš„å‡½æ•°è¡¨è¾¾å¼æˆ–è€… lambda è¡¨è¾¾å¼ç»™ map ï¼Œä½†æ˜¯ä¼ é€’ä¸€ä¸ªå·²æœ‰çš„å‡½æ•°å¯¹è±¡ parseInt ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚ â€‹ äº†è§£äº† parseInt å’Œ map çš„åŸºæœ¬æ¦‚å¿µåŽï¼Œæ–‡ç« å¼€å¤´çš„è¡¨è¾¾å¼å°±å¾ˆå¥½ç†è§£äº†ï¼Œå®ƒè¯•å›¾å°†ä¸€ä¸ªæ•°å€¼å­—ç¬¦ä¸²çš„æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«äº†æ¯ä¸ªå­—ç¬¦ä¸²å¯¹åº”æ•°å€¼çš„æ•°ç»„ã€‚ä¸ºä»€ä¹ˆä¸æˆåŠŸå‘¢ï¼Ÿä¸ºäº†æ‰¾åˆ°ç­”æ¡ˆï¼Œæˆ‘ä»¬å°±è¦ç»§ç»­æ·±å…¥äº†è§£ä¸€ä¸‹ parseInt å’Œ map çš„å®šä¹‰äº†ã€‚ â€‹ çœ‹çœ‹ parseInt çš„å®šä¹‰ ï¼Œä½ ä¼šæ³¨æ„åˆ°å®ƒæŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¢«è½¬æ¢çš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦è¢«è½¬æ¢æˆçš„æ•°å€¼çš„åŸºæ•°ï¼Œæ‰€ä»¥ parseInt(&#39;ffff&#39;,16)ä¼šè¿”å›ž 65535 ï¼Œç„¶è€Œ parseInt(&#39;ffff&#39;,8) å°±ä¼šè¿”å›ž NaNã€‚å› ä¸º ffff ä¸èƒ½è½¬æ¢ä¸ºä¸€ä¸ªå…«è¿›åˆ¶æ•°ã€‚å¦‚æžœç¬¬äºŒä¸ªå‚æ•°ç¼ºå¤±æˆ–è€…ä¸º 0 ï¼Œé‚£ä¹ˆé»˜è®¤å€¼å°†æ˜¯ 10 ï¼Œæ‰€ä»¥ parseInt(&#39;12&#39;,10) ï¼ŒparseInt(&#39;12&#39;,0) ä»¥åŠ parseInt(&#39;12&#39;) éƒ½ä¼šè¿”å›žæ•°å€¼ 12ã€‚ â€‹ çŽ°åœ¨ä»”ç»†çœ‹çœ‹ map æ–¹æ³•çš„å£°æ˜Ž ã€‚å®ƒæŒ‡å‡º callbackfn æ˜¯ç¬¬ä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ å…¥ map çš„ function ï¼Œå®šä¹‰ä¸­è¯´ â€œthe callbackfn is called with three arguments: the value of the element, the index of the element, and the object that is being traversed.â€ ï¼ˆä½¿ç”¨ä¸‰ä¸ªå‚æ•°è°ƒç”¨ callbackfn å‡½æ•°ï¼šå…ƒç´ å€¼ï¼Œå…ƒç´ ç´¢å¼•ï¼Œå’Œè¢«éåŽ†çš„å¯¹è±¡ï¼‰ã€‚ä»”ç»†é˜…è¯»è¿™å¥è¯ã€‚å®ƒçš„æ„æ€æ˜¯ï¼Œå¹¶ä¸æ˜¯åƒä¸‹é¢è¿™æ ·è°ƒç”¨äº†ä¸‰æ¬¡ parseIntï¼š 123parseInt("1")parseInt("2")parseInt("3") â€‹ æˆ‘ä»¬å®žé™…ä¸Šæ˜¯æœ‰ä¸‰æ¬¡è¿™æ ·çš„è°ƒç”¨ï¼š 123parseInt('1', 0, theArray);parseInt('2', 1, theArray);parseInt('3', 2, theArray); â€‹ ä¸Šé¢çš„ theArray å°±æ˜¯åŽŸå§‹æ•°ç»„ [&#39;1&#39;,&#39;2&#39;,&#39;3&#39;] ã€‚ â€‹ JavaScript æ–¹æ³•é€šå¸¸ä¼šå¿½ç•¥å¤šä½™çš„å‚æ•°ï¼Œè€Œ parseInt å‡½æ•°åªéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒä¸Šé¢è¿™äº›è°ƒç”¨ä¸­çš„ theArray å‚æ•°ã€‚ä½†æ˜¯ç¬¬äºŒä¸ªå‚æ•°å‘¢ï¼Ÿç¬¬ä¸€ä¸ªè°ƒç”¨çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ 0 ï¼Œæˆ‘ä»¬å·²çŸ¥è¿™é‡Œé»˜è®¤åŸºæ•°æ˜¯ 10ï¼Œæ‰€ä»¥ parseInt(&#39;1&#39;,0) ä¼šè¿”å›ž 1ã€‚ç¬¬äºŒæ¬¡è°ƒç”¨ä¼ å…¥ 1 ä½œä¸ºåŸºæ•°å‚æ•°ã€‚å®šä¹‰ä¸­éžå¸¸æ¸…æ™°çš„è¯´æ˜Žäº†è¿™ç§æƒ…å†µä¼šå‘ç”Ÿä»€ä¹ˆã€‚å¦‚æžœåŸºæ•°éžé›¶ä¸”å°äºŽ2ï¼Œåˆ™æ–¹æ³•ç›´æŽ¥è¿”å›ž NaN ç”šè‡³ä¸ç”¨è¯»å–å­—ç¬¦ä¸²ã€‚ â€‹ ç¬¬ä¸‰æ¬¡è°ƒç”¨ä¼ å…¥äº† 2 ä½œä¸ºåŸºæ•°ã€‚è¿™æ„å‘³ç€å¸¦è½¬æ¢çš„å­—ç¬¦ä¸²åº”è¯¥æ˜¯ä»…ç”±æ•°å­—å­—ç¬¦ &quot;0&quot; å’Œ &quot;1&quot; ç»„æˆçš„äºŒè¿›åˆ¶æ•°ã€‚ parseInt çš„å®šä¹‰ä¸­ï¼ˆç¬¬11æ­¥ï¼‰è¯´ï¼Œå®ƒåªè½¬æ¢å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸æ˜¯ä¼ å…¥åŸºæ•°çš„æœ‰æ•ˆæ•°å­—çš„å­—ç¬¦å·¦ä¾§çš„å­å­—ç¬¦ä¸²ã€‚ç¬¬ä¸‰æ¬¡è°ƒç”¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ &quot;3&quot; ï¼Œä¸æ˜¯ä»¥æ•°å­— 2 ä¸ºåŸºæ•°çš„æœ‰æ•ˆæ•°å­—ï¼Œæ‰€ä»¥è¦è½¬æ¢çš„å­å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚æ­¥éª¤12è¯´åˆ°ï¼Œå¦‚æžœå­å­—ç¬¦ä¸²æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œæ–¹æ³•å°†è¿”å›ž NaN ã€‚æ‰€ä»¥ä¸‰æ¬¡è°ƒç”¨çš„è¿”å›žç»“æžœæ˜¯ 1ï¼ŒNaN å’Œ NaNã€‚ â€‹ ä½¿ç”¨åŽŸå§‹è¡¨è¾¾å¼çš„ç¨‹åºå‘˜å¯èƒ½ä¼šåœ¨ä¸¤ä¸ªæ–¹é¢çŠ¯é”™ã€‚ç¬¬ä¸€ä¸ªå¯èƒ½çš„åœ°æ–¹æ˜¯ä»–ä»¬å¯èƒ½å¿˜è®°äº†æˆ–è€…ä»Žæ¥ä¸çŸ¥é“ parseInt æŽ¥æ”¶å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚ç¬¬äºŒä¸ªå¯èƒ½çš„åœ°æ–¹æ˜¯ä»–ä»¬å¯èƒ½å¿˜è®°æˆ–è€…ä»Žä¸çŸ¥é“ map è°ƒç”¨ callbackfn æœ‰ä¸‰ä¸ªå‚æ•°ã€‚æœ€å¯èƒ½çš„æ˜¯è¿™ä¸¤ç§æƒ…å†µéƒ½å äº†ã€‚ parseInt æœ€å¸¸è§çš„ç”¨æ³•åªå–ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ä¼ ç»™ map çš„æ–¹æ³•ä¹Ÿåªä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½å¾ˆå®¹æ˜“å¿˜è®°å¯èƒ½å­˜åœ¨å¯é€‰å‚æ•°ã€‚ â€‹ æœ‰ä¸€ä¸ªç›´æŽ¥çš„æ–¹æ³•æ˜¯é‡å†™åŽŸå§‹çš„è¡¨è¾¾å¼æ¥é¿å…é”™è¯¯ï¼š 1['1','2','3'].map(function(value) &#123;return parseInt(value)&#125;) â€‹ è€Œä¸æ˜¯ç›´æŽ¥ä½¿ç”¨ï¼š 1['1','2','3'].map(parseInt) â€‹ è¿™æ ·æ˜Žç¡®çš„å®šä¹‰äº† callbackfn åªå–ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å¾ˆæ¸…æ™°åœ°åªç”¨ä¸€ä¸ªå‚æ•°è°ƒç”¨ parseInt å‡½æ•°ã€‚ä½†æ˜¯è¿™æ ·ä¹Ÿä½¿å¾—ä»£ç æ›´åŠ å†—é•¿ï¼Œå°‘äº†äº›ä¼˜é›…ã€‚ â€‹ æˆ‘ç»§ç»­åœ¨æŽ¨ç‰¹ä¸Šæœç´¢äº†è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€äº›æ‰©å±• JavaScript æ¥é¿å…æ­¤é—®é¢˜æˆ–è€…è‡³å°‘è®©ä»£ç æ›´åŠ ç®€ä»‹çš„æ–¹æ³•ã€‚ â€‹ Angus Croll (@angusTweets) å»ºè®®ç”¨ Number æž„é€ å‡½æ•°è€Œä¸æ˜¯ parseInt ä½œä¸º callbackfn èƒ½è§£å†³æ­¤é—®é¢˜ã€‚ç”¨è¿™ç§æ–¹å¼è°ƒç”¨ Number ä¹Ÿèƒ½å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º decimal æ•°å€¼ï¼Œè€Œä¸”å®ƒåªéœ€è¦ä¸€ä¸ªå‚æ•°ã€‚ â€‹ @__DavidFlanagan å»ºè®®æ–°å¢žä¸€ä¸ª mapValues æ–¹æ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼Œè¿™ä¸ªæ–¹æ³•åªä¼ ä¸€ä¸ªå‚æ•°ç»™ callbackfn ã€‚ç„¶è€Œ ECMAScript 5 æœ‰ 7 ç§ä¸åŒçš„ Array æ–¹æ³•ï¼Œå…¶æ“ä½œæ–¹å¼ä¸Ž map ç±»ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±çœŸçš„ä¸å¾—ä¸æ–°å¢ž 7 ä¸ªè¿™ç§æ–¹æ³•ã€‚ â€‹ æˆ‘è®¤ä¸ºæ–°å¢žä¸‹é¢è¿™æ ·çš„æ–¹æ³•ä¹Ÿæ˜¯ä¸€ç§è§£å†³çš„åŠžæ³•ï¼š 123456Function.prototype.only = function(numberOfArgs)&#123; var self = this; //åŽŸå§‹æ–¹æ³• return function()&#123; return self.apply(this,[].slice.call(arguments,0,numerOfArgs)) &#125;&#125; â€‹ è¿™æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›žä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿”å›žçš„æ–°å‡½æ•°è°ƒç”¨åŽŸå§‹å‡½æ•°ï¼Œå¹¶ä¸”åªä½¿ç”¨æŒ‡å®šæ•°é‡çš„å‚æ•°ã€‚ä½¿ç”¨ onlyï¼ŒåŽŸå§‹è¡¨è¾¾å¼å¯ä»¥å†™æˆè¿™æ ·ï¼š 1['1','2','3'].map(parseInt.only(1)); â€‹ è¿™æ ·åªæ˜¯ç•¥æ˜¾å†—é•¿ï¼Œå¹¶ä¸”ä¿ç•™äº†ä¸€å®šç¨‹åº¦çš„ä¼˜é›…ã€‚ â€‹ è¿™ä¸ªé—®é¢˜å¼•å‘äº†å…³äºŽ JavaScript curry function ï¼ˆæŸ¯é‡ŒåŒ–å‡½æ•°ï¼ŒçœŸæ­£æ„ä¹‰ä¸Šçš„ partial function application â€”â€”éƒ¨åˆ†å‡½æ•°åº”ç”¨ï¼Œæˆ–åå‡½æ•°åº”ç”¨ï¼Œæˆ–æ•£å‡½æ•°åº”ç”¨ï¼‰çš„è®¨è®ºã€‚éƒ¨åˆ†å‡½æ•°åº”ç”¨ å–ä¸€ä¸ªéœ€è¦ç‰¹å®šæ•°é‡å‚æ•°çš„å‡½æ•°ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„éœ€è¦æ›´å°‘å‚æ•°çš„å‡½æ•°ã€‚æˆ‘çš„ only å‡½æ•°å°±æ˜¯ä¸€ä¸ªå®žçŽ°äº† éƒ¨åˆ†å‡½æ•°åº”ç”¨ çš„å‡½æ•°ç¤ºä¾‹ã€‚ES5ä¸­æ–°å¢žçš„ Function.prototype.bind æ–¹æ³•ä¹Ÿæ˜¯ã€‚JavaScript éœ€è¦è¿™æ ·çš„æ–¹æ³•å—ï¼Ÿä¾‹å¦‚ï¼Œä¸€ä¸ª å›ºå®šæœ€å³ä¾§å‚æ•°è€Œä¸æ˜¯æœ€å·¦ä¾§å‚æ•°çš„bindRight æ–¹æ³•ã€‚ä¹Ÿè®¸å¯ä»¥ï¼Œä½†æ˜¯å‚æ•°æ•°é‡å…è®¸å¯å˜æ—¶ï¼Œæœ€å³ç©¶ç«Ÿæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿå¯èƒ½ä¸€ä¸ªå–å‚æ•°ä½ç½®çš„ bindRight æ–¹æ³•å¯èƒ½æ›´é€‚åˆ JavaScriptã€‚ â€‹ ç„¶è€Œï¼Œæ‰€æœ‰è¿™äº›å…³äºŽæ‰©å±•çš„è®¨è®ºå·²ç»åç¦»äº†åŽŸå§‹é—®é¢˜çš„å…³é”®é—®é¢˜ã€‚ä¸ºäº†ä½¿ç”¨ä»–ä»¬ä»»æ„ä¸€ä¸ªï¼Œä½ å¿…é¡»é¦–å…ˆçŸ¥é“ map å’Œ parseInt çš„å¯é€‰å‚æ•°ä¸åŒ¹é…ã€‚å¦‚æžœä½ çŸ¥é“äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆæœ‰å¾ˆå¤šä¸­æ–¹å¼æ¥è§£å†³é—®é¢˜ã€‚å¦‚æžœä½ è¿˜ä¸çŸ¥é“ï¼Œé‚£ä¹ˆä¸Šé¢æŽ¨èçš„ä»»ä½•ä¸€ç§è§£å†³æ–¹æ¡ˆéƒ½æ²¡æœ‰å¸®åŠ©ã€‚è¿™ä¼¼ä¹Žä¸»è¦æ˜¯ä¸€ä¸ª API è®¾è®¡é—®é¢˜ï¼Œå¹¶æå‡ºäº†ä¸€äº›å…³äºŽåœ¨ JavaScript ä¸­é€‚å½“ä½¿ç”¨å¯é€‰å‚æ•°çš„åŸºæœ¬é—®é¢˜ã€‚ â€‹ ä¸€ä¸ªç”¨ä¾‹æ˜¯ä»Žè°ƒç”¨è¿™çš„è§’åº¦æ¥çœ‹å¯é€‰å‚æ•°ï¼Œå¦ä¸€ä¸ªç”¨ä¾‹æ˜¯ä»Žè¢«è°ƒç”¨è€…çš„è§’åº¦æ¥çœ‹ã€‚åœ¨ parseInt çš„æƒ…å†µä¸‹ï¼Œå®ƒçš„è®¾è®¡å‡è®¾è°ƒç”¨è€…çŸ¥é“å®ƒæ­£åœ¨è°ƒç”¨ parseInt å¹¶ä¸”å·²ç»é€‚å½“çš„é€‰æ‹©äº†å®žé™…çš„å‚æ•°å€¼ã€‚ä»Žè°ƒç”¨è€…çš„è§’åº¦æ¥çœ‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚å¦‚æžœå®ƒæƒ³è¦ä½¿ç”¨é»˜è®¤çš„åŸºæ•°ï¼Œå°±å¯ä»¥æ¢ç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚ä½†æ˜¯ parseInt çš„å®žé™…è§„èŒƒä¸­è¯¦ç»†å®šä¹‰äº†ä½¿ç”¨ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ä»¥åŠå„ç§å‚æ•°å€¼è°ƒç”¨æ—¶ï¼Œè¢«è°ƒç”¨è€…å°†æ‰§è¡Œçš„æ“ä½œã€‚ â€‹ å¦ä¸€ä¸ªç”¨ä¾‹æ›´å¤šæ¥è‡ªä¸åŒç±»åž‹çš„å‡½æ•°è°ƒç”¨è€…ã€‚ä¸€ä¸ªè°ƒç”¨è€…ï¼Œå®ƒä¸çŸ¥é“å®ƒå®žé™…è°ƒç”¨äº†ä»€ä¹ˆå‡½æ•°ï¼Œå¹¶ä¸”æ€»æ˜¯ä¼ é€’ä¸€ä¸ªå›ºå®šå¤§å°çš„å‚æ•°ã€‚map çš„è§„èŒƒä¸­æ˜Žç¡®å®šä¹‰äº†å®ƒå°†æ€»æ˜¯ä¼ é€’ä¸‰ä¸ªå‚æ•°ç»™å®ƒæä¾›çš„ä»»ä½• callbackfn ã€‚å› ä¸ºè°ƒç”¨è€…å¹¶ä¸çœŸæ­£çŸ¥é“è¢«è°ƒç”¨è€…çš„èº«ä»½ï¼Œä»¥åŠè¢«è°ƒç”¨è€…éœ€è¦ä»€ä¹ˆä¿¡æ¯ï¼Œmap å°†æ‰€æœ‰å¯ç”¨çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ é€’ã€‚å‡è®¾å®žé™…çš„è¢«è°ƒç”¨è€…å°†å¿½ç•¥ä»»ä½•å®ƒä¸éœ€è¦çš„å‚æ•°ã€‚åœ¨è¿™ä¸ªç”¨ä¾‹ä¸­ï¼Œä»Žè¢«è°ƒç”¨è€…çš„è§’åº¦æ¥çœ‹ï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚ â€‹ è¿™ä¸¤ä¸ªéƒ½æ˜¯æœ‰æ•ˆçš„å¯é€‰å‚æ•°ç”¨ä¾‹ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å°†ä¸¤è€…ç»“åˆèµ·æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¾—åˆ°ä¸€ä¸ªè½¯ä»¶ â€œimpedance mismatchâ€ï¼ˆé˜»æŠ—å¤±é…ï¼‰ã€‚è¢«è°ƒç”¨è€…çš„å¯é€‰å‚æ•°å¾ˆå°‘ä¸Žè°ƒç”¨è€…çš„å¯é€‰å‚æ•°åŒ¹é…ã€‚bind æˆ–è€… only è¿™æ ·çš„é«˜é˜¶å‡½æ•°å¯ä»¥è¢«ç”¨æ¥è§£å†³è¿™æ ·çš„å¤±é…ï¼Œä½†æ˜¯å‰ææ˜¯ç¨‹åºå‘˜æ„è¯†åˆ°äº†å¤±é…çš„å­˜åœ¨ã€‚ JavaScript API çš„è®¾è®¡è€…éœ€è¦è®°ä½è¿™ä¸€ç‚¹ï¼Œæ¯ä¸ª JavaScript ç¨‹åºå‘˜éƒ½è¦æ ¼å¤–å°å¿ƒï¼Œäº†è§£ç©¶ç«Ÿä»€ä¹ˆå€¼è¢«ä¼ é€’ç»™äº†å›žè°ƒå‡½æ•°ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>FE</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NGINX: Proxy folders to different root]]></title>
    <url>%2F2018%2F10%2F17%2FNGINX-Proxy-folders-to-different-root%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡: NGINX: Proxy folders to different root è¿™ç¯‡æ•™ç¨‹æ•™ä½ åœ¨ Nginx ä¸­å°†ç«™ç‚¹çš„ä¸åŒç›®å½•è®¾ç½®æˆä¸åŒçš„åå‘ä»£ç†ç«™ç‚¹çš„æ ¹ç›®å½•ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡è®¾æœ‰ä¸€ä¸ªè®¾ç½®äº† proxy_pass çš„ location åŒºå—ï¼Œè¿™ä¸ª location åŒºå—åŒ¹é…çš„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ /nagios ï¼Œè®¿é—®è¿™ä¸ªç›®å½•å°†è·³è½¬åˆ°ä»£ç†æœåŠ¡å™¨ï¼š 12345678location /nagios/ &#123; proxy_pass http://10.0.21.8:80/; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto https; proxy_redirect off;&#125; å½“åœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„æ—¶å€™ï¼Œä¸Šé¢çš„é…ç½®ä¼šå°†ä½ çš„è¯·æ±‚å‘é€åˆ° http://10.0.21.8/nagios/ ï¼Œå› ä¸ºè¿™å°±æ˜¯ Nginx location çš„é»˜è®¤è¡Œä¸ºã€‚ç„¶è€Œå¦‚æžœä½ æƒ³è¦æµè§ˆå™¨è½¬å‘è¯·æ±‚åˆ° http://10.0.21.8/ ï¼Œä½ è¦ä¹ˆ rewrite URL è¦ä¹ˆå°±ä½¿ç”¨ / locationã€‚ ä¸‹é¢æ˜¯æ­£ç¡®çš„é‡å†™è§„åˆ™çš„ç¤ºä¾‹ï¼š 123456789location /nagios/ &#123; rewrite ^/nagios(/.*)$ $1 break; proxy_pass http://10.0.21.8:80/; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto https; proxy_redirect off;&#125; å¯ä»¥è¿™ä¸€è¡Œé…ç½®ï¼š 1rewrite ^/collectd(/.*)$ $1 break; å®ƒè§£å†³äº†é—®é¢˜, å°†ä½ çš„è¯·æ±‚å‘é€åˆ° http://10.0.21.8/ è€Œä¸æ˜¯ http://10.0.21.8/nagios.]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>NGINX</category>
      </categories>
      <tags>
        <tag>ç¿»è¯‘</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginx-Windowsç‰ˆå¼€å¯æ”¯æŒTLSv1.2]]></title>
    <url>%2F2018%2F10%2F17%2FNginx-Windows%E7%89%88%E5%BC%80%E5%90%AF%E6%94%AF%E6%8C%81TLSv1-2%2F</url>
    <content type="text"><![CDATA[å¾®ä¿¡å°ç¨‹åºè¦æ±‚ä½¿ç”¨ https å‘é€è¯·æ±‚ï¼Œå¹¶ä¸” TLSï¼ˆä¼ è¾“å±‚å®‰å…¨åè®®ï¼‰çš„ç‰ˆæœ¬è‡³å°‘ä¸º 1.2ï¼Œåœ¨é…ç½®å¥½ httpsä¹‹åŽï¼Œå¦‚æžœ TLS çš„ç‰ˆæœ¬è¾ƒä½Žï¼Œå°±æ¶‰åŠåˆ°å‡çº§é—®é¢˜ ä»Žç”³è¯·å…è´¹è¯ä¹¦åˆ°é…ç½® Nginx HTTPS é…ç½®ï¼Œæœ‰ä¸€ç¯‡æ¯”è¾ƒå®Œæ•´çš„æ•™ç¨‹ï¼šå¾®ä¿¡å°ç¨‹åºServerç«¯çŽ¯å¢ƒé…ç½® Linux ä¸‹é…ç½®çš„æ•™ç¨‹æœ‰å¾ˆå¤šï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ Windows ä¸­çš„é…ç½®è¿‡ç¨‹ï¼Œå…¬å¸çš„ Nginx è·‘åœ¨ Windows Server ä¸Šã€‚ æ“ä½œç³»ç»Ÿï¼šWindows Server 2008 R2 Nginxç‰ˆæœ¬ï¼šngixn/1.12.2 for Windows è¯ä¹¦ï¼šè…¾è®¯äº‘ç®¡ç†åŽå°ç”¨ TrustAsia ç­¾å‘çš„å…è´¹è¯ä¹¦ï¼Œæœ‰æ•ˆæœŸä¸€å¹´ å½“å‰ Nginx é…ç½®ä¸­ï¼ŒHttps æœ‰å…³çš„é…ç½®ï¼š 12345678ssl_certificate 1_gis.wohitech.com_bundle.crt;ssl_certificate_key 2_gis.wohitech.com.key;ssl on;ssl_protocols SSLv2 SSLv3 TLSv1;ssl_ciphers HIGH:!aNULL:!MD5;ssl_prefer_server_ciphers on; è…¾è®¯äº‘æä¾›äº†å·¥å…·å¯ä»¥ç›‘æµ‹åŸŸåæ˜¯å¦æ”¯æŒ HTTPS TLS1.2ï¼Œå½“å‰æ£€æµ‹å¯ä»¥çœ‹åˆ°ä¸é€šè¿‡ã€‚ åœ¨ç«ç‹æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘å€ï¼Œç‚¹å‡»åœ°å€æ å·¦ä¾§çš„é”å›¾æ ‡ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰åŸŸåçš„ HTTPS åŠ å¯†åè®®ç‰ˆæœ¬ï¼Œå½“å‰ä¸º TLS 1.0 æ‰¾åˆ°äº† Nginx å®˜ç½‘æ–‡æ¡£æä¾›çš„ HTTPS é…ç½®æ–‡æ¡£ï¼ŒConfiguring HTTPSS servers å¯¹æ¯”ç¤ºä¾‹ï¼Œæˆ‘å‘çŽ°åœ¨ ssl_protocols è¿™ä¸€è¡Œçš„é…ç½®ä¸­ï¼Œå®˜æ–¹ç¤ºä¾‹åŒ…å«äº† TLSv1.2 123456789server &#123; listen 443 ssl; server_name www.example.com; ssl_certificate www.example.com.crt; ssl_certificate_key www.example.com.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers HIGH:!aNULL:!MD5; ...&#125; æˆ‘ç”¨å®˜æ–¹ç¤ºä¾‹çš„é…ç½®æ›¿æ¢äº†ç”Ÿäº§çŽ¯å¢ƒ Nginx çš„é…ç½®ï¼ŒæˆåŠŸï¼ æ³¨æ„ï¼Œåœ¨æœåŠ¡ç«¯ä¿®æ”¹ Nginx é…ç½®åŽï¼Œæµè§ˆå™¨å†æ¬¡è®¿é—®å‰éœ€è¦å…ˆæ¸…ä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜ï¼Œå¦åˆ™ç«ç‹ä¸­çœ‹åˆ°çš„æ˜¯ç¼“å­˜çš„ä¹‹å‰çš„è¯ä¹¦ä¿¡æ¯ã€‚ FireFox ä¸­æŸ¥çœ‹åŸŸåçš„ TLS ç‰ˆæœ¬ è…¾è®¯äº‘æ£€æµ‹ç»“æžœ]]></content>
      <categories>
        <category>FE</category>
        <category>NGINX</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿ç§»Jenkinsä½œä¸šåˆ°æ–°çš„JenkinsæœåŠ¡å™¨]]></title>
    <url>%2F2018%2F10%2F15%2F%E8%BF%81%E7%A7%BBJenkins%E4%BB%BB%E5%8A%A1%E5%88%B0%E6%96%B0%E7%9A%84Jenkins%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å…¬å¸æ­å»º Jenkins æŒç»­é›†æˆçŽ¯å¢ƒï¼Œè¦å°†æµ‹è¯•çŽ¯å¢ƒä¸­é…ç½®çš„ Jenkins ä½œä¸šå¯¼å…¥åˆ°æ­£å¼çŽ¯å¢ƒä¸­ï¼Œä¸Šç½‘æ‰¾äº†ä¸‹èµ„æ–™ï¼Œå¤§æ¦‚æœ‰ä¸‰ç§å¯è¡Œçš„æ–¹æ¡ˆ: æ‹·è´ä½œä¸šæ–‡ä»¶å¤¹ ç”¨Jenkinsæ’ä»¶ ç”¨Jenkins cli å‘½ä»¤ æœ‰æ›´å¥½çš„åŠžæ³•æ¬¢è¿Žäº¤æµã€‚ é€‰é¡¹1ï¼šæ‹·è´ jobs ç›®å½•One option (and seems to be the recommended one) is to just copy the jobs directory from the old server to the new one. ä¸€ä¸ªæ–¹æ¡ˆæ˜¯ç›´æŽ¥æ‹·è´æ—§çš„ Jenkins æœåŠ¡å®‰è£…ç›®å½•ä¸‹çš„ jobs æ–‡ä»¶å¤¹åˆ°æ–°æœåŠ¡åŒçº§ç›®å½•ä¸‹ï¼Œè¿™ä¹Ÿæ˜¯è¾ƒä¸ºæŽ¨èçš„æ–¹æ¡ˆã€‚ å¼•è‡ªè¿™ç¯‡æ–‡ä»¶ Moving/copying/renaming jobs: You can: ä½ å¯ä»¥ Move a job from one installation of Jenkins to another by simply copying the corresponding job directory. é€šè¿‡ç®€å•çš„æ‹·è´å¯¹åº”çš„ job ç›®å½•å°†ä¸€ä¸ªä½œä¸šä»Žä¸€ä¸ª Jenkins å®‰è£…å®žä¾‹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä¸­ã€‚ Make a copy of an existing job by making a clone of a job directory by a different name. å¯ä»¥é€šè¿‡å…‹éš†å’Œé‡å‘½åä¸€ä¸ª job æ–‡ä»¶å¤¹æ¥åˆ¶ä½œä¸€ä¸ªå·²æœ‰ä½œä¸šçš„å‰¯æœ¬ã€‚ Rename an existing job by renaming a directory. Note that the if you change a job name you will need to change any other job that tries to call the renamed job. é€šè¿‡é‡å‘½åæ–‡ä»¶å¤¹æ¥é‡å‘½åä¸€ä¸ªå·²æœ‰çš„ä½œä¸šã€‚æ³¨æ„å¦‚æžœä½ æ”¹å˜äº†ä¸€ä¸ªä½œä¸šçš„åç§°ï¼Œä½ éœ€è¦æ”¹å˜æ‰€æœ‰ä¾èµ–è¿™ä¸ªä½œä¸šçš„å…¶ä»–ä½œä¸šã€‚ Those operations can be done even when Jenkins is running. For changes like these to take effect, you have to click â€œreload configâ€ to force Jenkins to reload configuration from the disk. è¿™äº›é€‰é¡¹å¯ä»¥åœ¨ Jenkins æ­£åœ¨è¿è¡Œçš„æƒ…å†µä¸‹æ“ä½œã€‚ä¸ºäº†è®©æ”¹å˜ç”Ÿæ•ˆï¼Œä½ å¿…é¡»ç‚¹å‡» â€œé‡æ–°åŠ è½½é…ç½®â€æ¥å¼ºåˆ¶ Jenkins ä»Žç¡¬ç›˜é‡æ–°åŠ è½½é…ç½®ã€‚ é€‰é¡¹2ï¼šå°è¯•ä¸‹é¢è¿™ä¸¤ä¸ªæ’ä»¶æœ‰ä¸€äº› Jenkins æ’ä»¶æä¾›äº†ä½œä¸šå¯¼å‡ºçš„é€‰é¡¹ï¼Œä¸‹é¢æŽ¨èäº†ä¸¤ä¸ªï¼š Job Exporter Plugin è¿™ä¸ªæ’ä»¶å¹¶æ²¡æœ‰çœŸæ­£å¯¼å‡ºä½œä¸šï¼Œè€Œæ˜¯æ”¹å˜äº†ä½œä¸šè¿è¡Œæ—¶çš„çŽ¯å¢ƒå˜é‡ã€‚ Job Importer Plugin é€‰é¡¹3ï¼šä½¿ç”¨ Jenkins CLIæˆ‘ä½¿ç”¨äº†è¿™ç§æ–¹æ¡ˆï¼Œå®ƒæ¯”è¾ƒé€‚åˆä½œä¸šæ•°é‡è¾ƒå°‘çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚æžœä½ æœ‰éžå¸¸å¤šçš„ Jenkins ä½œä¸šï¼Œä½ å¯ä»¥è€ƒè™‘ä¸‹ç¬¬ä¸€ç§æ–¹æ¡ˆã€‚ ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½ Jenkins CLI çš„ jar åŒ…æ–‡ä»¶ã€‚ ä½ å¯ä»¥åœ¨ä½ çš„ Jenkins å®‰è£…å®žä¾‹çš„ Jenkins CLI é¡µé¢ä¸Šä¸‹è½½ã€‚ æŽ¥ç€æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼ˆæŒ‡å‘æ—§æœåŠ¡å™¨ï¼‰æ¥åˆ—å‡ºä½œä¸šã€‚ 1java -jar jenkins-cli.jar -s http://&lt;YourBuildServer&gt;:&lt;YourBuildServerPort&gt;/ list-jobs ä½¿ç”¨ä¸Šé¢åˆ—è¡¨ä¸­çš„ä¸€ä¸ªä½œä¸šï¼Œå°†ä½œä¸šçš„ xml å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚ï¼ˆä¸‹é¢ä»¥Mac ä¸ºä¾‹ï¼Œå‰ªè´´æ¿ç”¨ pbcopy å’Œ pbpaste ï¼‰ 1java -jar jenkins-cli.jar -s http://&lt;YourBuildServer&gt;:&lt;YourBuildServerPort&gt;/ get-job "NAME_OF_JOB" | pbcopy è¿™é‡Œä½¿ç”¨ cli çš„ get-job â€œNAME_OF_JOBâ€ å‘½ä»¤å°†è¿™ä¸ª ä½œä¸šçš„ xml æ‰“å°åˆ° stdout æ ‡å‡†è¾“å‡ºï¼ŒæŽ¥ç€ç”¨ç®¡é“ç¬¦ è¾“å‡ºåˆ° Mac çš„ pbcopy ä»¥å°†é…ç½®åŠ è½½åˆ°å‰ªè´´æ¿ã€‚ä½ å½“ç„¶ä¹Ÿå¯ä»¥ç®¡é“è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œåƒè¿™æ · ... &gt; config.xmlã€‚ å¦‚æžœç”¨ä¸Šé¢çš„å‘½ä»¤å°†ä½œä¸šçš„ XML æ”¾åˆ°äº†å‰ªè´´æ¿ä¸­ï¼Œä½ å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å°†ä½œä¸šæ·»åŠ åˆ°æ–°æœåŠ¡å™¨ä¸Šã€‚ 1pbpaste | java -jar jenkins-cli.jar -s http://&lt;YourBuildServer&gt;:&lt;YourBuildServerPort&gt; create-job &quot;NAME_OF_JOB&quot; This uses pbpaste to take what is in the clipboard, send it to stdin and pipe it to the Jenkins cliâ€™s create-job &quot;NAME_OF_JOB&quot;command. è¿™ä¸€æ­¥ä½¿ç”¨äº† pbpaste æ¥èŽ·å–å‰ªè´´æ¿ä¸­çš„å†…å®¹ï¼Œå‘é€åˆ° stdin æ ‡å‡†è¾“å…¥ï¼Œç„¶åŽç®¡é“ä¼ é€’ç»™ Jenkins cli create-job &quot;NAME_OF_JOB&quot; å‘½ä»¤ã€‚ å¸Œæœ›èƒ½å¸®åˆ°ä½ ]]></content>
      <categories>
        <category>æž¶æž„</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
        <tag>CI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ CORS ï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰]]></title>
    <url>%2F2018%2F10%2F14%2Fusing-cors%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šUsing CORS Introduction | ä»‹ç» APIs are the threads that let you stitch together a rich web experience. But this experience has a hard time translating to the browser, where the options for cross-domain requests are limited to techniques like JSON-P(which has limited use due to security concerns) or setting up a custom proxy (which can be a pain to set up and maintain). API æ˜¯è®©ä½ å°†ä¸°å¯Œçš„ web ä½“éªŒæ‹¼æŽ¥åœ¨ä¸€èµ·çš„çº½å¸¦ã€‚ä½†æ˜¯åœ¨è¿‡åŽ»ï¼Œè·¨åŸŸè¯·æ±‚è¢«é™åˆ¶åªèƒ½åœ¨ä¸€äº›æŠ€æœ¯ä¸Šä½¿ç”¨çš„æ—¶å€™ï¼Œä¾‹å¦‚ JSON-P(å‡ºäºŽå®‰å…¨è€ƒè™‘ï¼Œä½¿ç”¨ä¸Šæœ‰è¯¸å¤šé™åˆ¶)æˆ–è€…è®¾ç½®è‡ªå®šä¹‰ä»£ç†(éš¾äºŽè®¾ç½®å’Œç»´æŠ¤)ï¼Œè¿™äº›ä½“éªŒæ˜¯å¾ˆéš¾åœ¨æµè§ˆå™¨ä¸­å®žçŽ°çš„ã€‚ Cross-Origin Resource Sharing (CORS) is a W3C spec that allows cross-domain communication from the browser. By building on top of the XMLHttpRequest object, CORS allows developers to work with the same idioms as same-domain requests. è·¨æºèµ„æºå…±äº« (CORS)æ˜¯ä¸€ä¸ª W3C è§„èŒƒï¼Œå…è®¸æµè§ˆå™¨è·¨åŸŸé€šä¿¡ã€‚å»ºç«‹åœ¨ XMLHttpRequest å¯¹è±¡ä¹‹ä¸Šï¼ŒCORS å…è®¸å¼€å‘è€…ä½¿ç”¨ä¸ŽåŒåŸŸè¯·æ±‚ç›¸åŒçš„è¯­æ³•ã€‚ The use-case for CORS is simple. Imagine the site alice.com has some data that the site bob.com wants to access. This type of request traditionally wouldnâ€™t be allowed under the browserâ€™s same origin policy. However, by supporting CORS requests, alice.com can add a few special response headers that allows bob.com to access the data. CORS çš„ç”¨ä¾‹éžå¸¸ç®€å•ã€‚æƒ³è±¡ä¸€ä¸‹ç½‘ç«™ alice.com ä¸Šæœ‰ä¸€äº›ç½‘ç«™ bob.com æƒ³è¦èŽ·å–çš„æ•°æ®ã€‚è¿™ç§ç±»åž‹çš„è¯·æ±‚åœ¨æµè§ˆå™¨çš„åŒæºç­–ç•¥ä¸‹é€šå¸¸ä¸ä¼šè¢«å…è®¸çš„ã€‚ç„¶è€Œï¼Œé€šè¿‡æ”¯æŒ CORS è¯·æ±‚ï¼Œalice.com å¯ä»¥å¢žåŠ ä¸€äº›ç‰¹æ®Šçš„å“åº”å¤´æ¥å…è®¸ bob.com èŽ·å–æ•°æ®ã€‚ As you can see from this example, CORS support requires coordination between both the server and client. Luckily, if you are a client-side developer you are shielded from most of these details. The rest of this article shows how clients can make cross-origin requests, and how servers can configure themselves to support CORS. æ­£å¦‚ä½ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­çœ‹åˆ°çš„ï¼Œæ”¯æŒ CORS éœ€è¦æœåŠ¡ç«¯ä¸Žå®¢æˆ·ç«¯ä¹‹é—´çš„åä½œã€‚å¹¸è¿çš„æ˜¯ï¼Œå¦‚æžœä½ æ˜¯ä»¥ä¸ºå®¢æˆ·ç«¯å¼€å‘è€…ï¼Œä½ å·²ç»è¢«å±è”½äº†å¤§éƒ¨åˆ†ç»†èŠ‚ã€‚æœ¬æ–‡å…¶ä»–éƒ¨åˆ†å°†ä¼šé˜è¿°å¦‚ä½•è®©å®¢æˆ·ç«¯å‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œä»¥åŠå¦‚ä½•é…ç½®æœåŠ¡å™¨æ¥æ”¯æŒ CORSã€‚ Making a CORS Request | å‘èµ·ä¸€ä¸ª CORS è¯·æ±‚ This section shows how to make a cross-domain request in JavaScript. æœ¬èŠ‚å±•ç¤ºå¦‚ä½•ç”¨ JavaScript å‘èµ·è·¨åŸŸè¯·æ±‚ Creating the XMLHttpRequest object | åˆ›å»ºä¸€ä¸ªXMLHttpRequest å¯¹è±¡ CORS is supported in the following browsers: ä¸‹é¢è¿™äº›æµè§ˆå™¨æ”¯æŒäº† CORSï¼š Chrome 3+ Firefox 3.5+ Opera 12+ Safari 4+ Internet Explorer 8+ (see the complete list of supported browsers at http://caniuse.com/#search=cors ) (æŸ¥çœ‹æµè§ˆå™¨æ”¯æŒçš„å®Œæ•´åˆ—è¡¨: http://caniuse.com/#search=cors ) Chrome, Firefox, Opera and Safari all use the XMLHttpRequest2 object. Internet Explorer uses the similar XDomainRequest object, which works in much the same way as its XMLHttpRequest counterpart, but adds additional security precautions. Chrome, Firefox, Opera and Safari å…¨éƒ¨ä½¿ç”¨ XMLHttpRequest2 å¯¹è±¡ã€‚Internet Explorer ä½¿ç”¨çš„æ˜¯ç±»ä¼¼çš„ XDomainRequest å¯¹è±¡ï¼Œå®ƒä¸Ž XMLHttpRequest å¯¹åº”éƒ¨åˆ†çš„å·¥ä½œæ–¹å¼å¤§è‡´ç›¸å½“ï¼Œä½†æ˜¯å¢žåŠ äº†é¢å¤–çš„å®‰å…¨é˜²èŒƒæŽªæ–½ã€‚ To get started, you will first need to create the appropriate request object. Nicholas Zakas wrote a simple helper method to help sort out the browser differences: é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºé€‚å½“çš„è¯·æ±‚å¯¹è±¡ã€‚Nicholas Zakas å†™äº†ä¸€ä¸ªç®€å•çš„ helper æ–¹æ³•æ¥å¸®åŠ©æ£€æŸ¥ç†æ¸…æµè§ˆå™¨é—´çš„å·®å¼‚ã€‚ 12345678910111213141516171819202122232425262728function createCORSRequest(method, url) &#123; var xhr = new XMLHttpRequest(); if ("withCredentials" in xhr) &#123; // Check if the XMLHttpRequest object has a "withCredentials" property. // "withCredentials" only exists on XMLHTTPRequest2 objects. xhr.open(method, url, true); &#125; else if (typeof XDomainRequest != "undefined") &#123; // Otherwise, check if XDomainRequest. // XDomainRequest only exists in IE, and is IE's way of making CORS requests. xhr = new XDomainRequest(); xhr.open(method, url); &#125; else &#123; // Otherwise, CORS is not supported by the browser. xhr = null; &#125; return xhr;&#125;var xhr = createCORSRequest('GET', url);if (!xhr) &#123; throw new Error('CORS not supported');&#125; Event handlers | äº‹ä»¶å¤„ç†ç¨‹åº The original XMLHttpRequest object had only one event handler, onreadystatechange, which handled all responses. Although onreadystatechange is still available, XMLHttpRequest2 introduces a bunch of new event handlers. Here is a complete list: åŽŸå§‹çš„ XMLHttpRequest å¯¹è±¡åªæœ‰ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œonreadystatechange ï¼Œè¿™ä¸ªå¤„ç†ç¨‹åºå¤„ç†äº†æ‰€æœ‰çš„è¿”å›žã€‚ä½†æ˜¯ onreadystatechange ä»ç„¶å¯ç”¨ï¼ŒXMLHttpRequest2 å¼•å…¥äº†ä¸€å †æ–°çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªå®Œæ•´åˆ—è¡¨ï¼š Event Handler Description onloadstart* When the request starts. å½“è¯·æ±‚å¼€å§‹çš„æ—¶å€™ onprogress While loading and sending data. å½“åŠ è½½å’Œå‘é€æ•°æ®çš„æ—¶å€™ onabort* When the request has been aborted. For instance, by invoking the abort() method. å½“è¯·æ±‚è¢«ä¸­æ­¢çš„æ—¶å€™ã€‚ä¾‹å¦‚é€šè¿‡è°ƒç”¨ abort() æ–¹æ³•ã€‚ onerror When the request has failed. å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™ onload When the request has successfully completed. å½“è¯·æ±‚æˆåŠŸå®Œæˆçš„æ—¶å€™ã€‚ ontimeout When the author specified timeout has passed before the request could complete. å½“è¯·æ±‚å®Œæˆä¹‹å‰è¾¾åˆ°äº†ä½œè€…è®¾å®šçš„è¶…æ—¶æ—¶é—´çš„æ—¶å€™ã€‚ onloadend* When the request has completed (either in success or failure). å½“è¯·æ±‚å®Œæˆï¼ˆä¸è®ºæˆåŠŸæˆ–è€…å¤±è´¥ï¼‰çš„æ—¶å€™ * starred items are not supported by IEâ€™s XDomainRequest * æ˜Ÿå·æ ‡è®°çš„é¡¹ç›®æ˜¯ä¸è¢« IE æµè§ˆå™¨çš„ XDomainRequest å¯¹è±¡æ”¯æŒçš„ã€‚ source: http://www.w3.org/TR/XMLHttpRequest2/#events For most cases, you will at the very least want to handle the onload and onerror events: å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ è‡³å°‘è¦å¤„ç† onload å’Œ onerror äº‹ä»¶ï¼š 123456789xhr.onload = function() &#123; var responseText = xhr.responseText; console.log(responseText); // process the response.&#125;;xhr.onerror = function() &#123; console.log('There was an error!');&#125;; Browers donâ€™t do a good job of reporting what went wrong when there is an error. For example, Firefox reports a status of 0 and an empty statusText for all errors. Browsers also report an error message to the console log, but this message cannot be accessed from JavaScript. When handling onerror, you will know that an error occurred, but not much else. æµè§ˆå™¨åœ¨å‡ºçŽ°é”™è¯¯æ—¶ä¸èƒ½å¾ˆå¥½åœ°å®šä½é”™è¯¯æ¥æºã€‚ä¾‹å¦‚ï¼ŒFirefox å¯¹æ‰€æœ‰é”™è¯¯éƒ½æŠ¥å‘Šä¸€ä¸ªçŠ¶æ€ 0 å’Œç©ºçš„ statusTextã€‚æµè§ˆå™¨ä¹Ÿä¼šåœ¨æŽ§åˆ¶å°æ—¥å¿—ä¸­æŠ¥å‘Šé”™è¯¯ï¼Œä½†æ˜¯è¿™ç§é”™è¯¯ä¿¡æ¯ä¸èƒ½è¢« JavaScript èŽ·å–ã€‚å½“å¤„ç† onerror çš„æ—¶å€™ï¼Œä½ åªçŸ¥é“å‘ç”Ÿäº†é”™è¯¯ï¼Œä½†æ˜¯é™¤æ­¤ä¹‹å¤–æ²¡æœ‰æ›´å¤šä¿¡æ¯äº†ã€‚ withCredentials Standard CORS requests do not send or set any cookies by default. In order to include cookies as part of the request, you need to set the XMLHttpRequestâ€™s .withCredentials property to true: æ ‡å‡†çš„ OCRS è¯·æ±‚é»˜è®¤ä¸å‘é€ä¹Ÿä¸è®¾ç½®ä»»ä½•cookieç¼“å­˜ã€‚ä¸ºäº†å°† cookie ç¼“å­˜ä½œä¸ºè¯·æ±‚çš„ä¸€éƒ¨åˆ†ï¼Œä½ éœ€è¦è®¾ç½® XMLHttpRequestçš„ .withCredentials å±žæ€§ä¸º trueï¼š 1xhr.withCredentials = true; In order for this to work, the server must also enable credentials by setting the Access-Control-Allow-Credentials response header to â€œtrueâ€. See the server section for details. ä¸ºäº†ä½¿ä¹‹ç”Ÿæ•ˆï¼ŒæœåŠ¡ç«¯ä¹Ÿå¿…é¡»é€šè¿‡è®¾ç½® Access-Control-Allow-Credentials å“åº”å¤´ä¸º â€trueâ€ æ¥å…è®¸è¯ä¹¦ï¼ˆcredentialsï¼‰ã€‚æ›´å¤šç»†èŠ‚çœ‹è¿™é‡Œ server section ã€‚ 1Access-Control-Allow-Credentials: true The .withCredentials property will include any cookies from the remote domain in the request, and it will also set any cookies from the remote domain. Note that these cookies still honor same-origin policies, so your JavaScript code canâ€™t access the cookies from document.cookie or the response headers. They can only be controlled by the remote domain. .withCredentials å±žæ€§å°†åŒ…å«æ¥è‡ªè¯·æ±‚ä¸­è¿œç¨‹åŸŸçš„ä»»ä½• cookie ç¼“å­˜ï¼Œå¹¶ä¸”è¿˜å°†è®¾ç½®æ¥è‡ªè¿œç¨‹åŸŸçš„ä»»ä½• cookie ç¼“å­˜ã€‚æ³¨æ„è¿™äº›ç¼“å­˜ä»ç„¶éµå¾ªåŒæºç­–ç•¥ï¼Œæ‰€ä»¥ä½ çš„ JavaScript ä»£ç è®¿é—® document.cookie ä¸­çš„ cookie ç¼“å­˜ï¼Œæˆ–è€…å“åº”å¤´ï¼ˆresponse headersï¼‰ã€‚å®ƒä»¬åªèƒ½è¢«è¿œç¨‹åŸŸåæŽ§åˆ¶ã€‚ Making the request | å‘èµ·è¯·æ±‚ Now that your CORS request is configured, you are ready to make the request. This is done by calling the send() method: CORS è¯·æ±‚é…ç½®å®ŒæˆåŽï¼Œä½ å°±å¯ä»¥å‘èµ·è¯·æ±‚äº†ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨ send() æ–¹æ³•æ¥å®Œæˆçš„ã€‚ 1xhr.send(); If the request has a body, it can be specified as an argument to send(). å¦‚ä½•è¯·æ±‚æœ‰ä¸€ä¸ªè¯·æ±‚ä½“ï¼Œè¯·æ±‚ä½“å¯ä»¥è¢«å£°æ˜Žä¸º send() æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ã€‚ And thats it! Assuming the server is properly configured to respond to CORS requests, your onload handler will fire with the response, just like the standard same-domain XHR you are so familiar with. è¿™å°±æ˜¯ CORS è¯·æ±‚äº†ï¼å‡å®šæœåŠ¡å™¨åˆç†çš„é…ç½®äº†å“åº” CORS è¯·æ±‚ï¼Œä½ çš„ onload äº‹ä»¶å¤„ç†ç¨‹åºå°†ä¼šè§¦å‘å“åº”ï¼Œå°±åƒä½ ç†Ÿæ‚‰çš„æ ‡å‡†çš„åŒåŸŸ XHR ä¸€æ ·ã€‚ End-to-End Example | ç«¯å¯¹ç«¯ç¤ºä¾‹ Here is a full working sample of a CORS request. Run the sample and watch the network requests in the browserâ€™s debugger to see the actual request being made. è¿™é‡Œæœ‰ä¸€ä¸ª CORS è¯·æ±‚çš„å®Œæ•´å·¥ä½œç¤ºä¾‹ã€‚è¿è¡Œç¤ºä¾‹ç„¶åŽåœ¨æµè§ˆå™¨çš„è°ƒè¯•å™¨ä¸­æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œæ¥çœ‹çœ‹å®žé™…ä¸Šäº§ç”Ÿçš„è¯·æ±‚ã€‚ Run Sample 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// Create the XHR object.function createCORSRequest(method, url) &#123; var xhr = new XMLHttpRequest(); if ("withCredentials" in xhr) &#123; // XHR for Chrome/Firefox/Opera/Safari. xhr.open(method, url, true); &#125; else if (typeof XDomainRequest != "undefined") &#123; // XDomainRequest for IE. xhr = new XDomainRequest(); xhr.open(method, url); &#125; else &#123; // CORS not supported. xhr = null; &#125; return xhr;&#125;// Helper method to parse the title tag from the response.function getTitle(text) &#123; return text.match('&lt;title&gt;(.*)?&lt;/title&gt;')[1];&#125;// Make the actual CORS request.function makeCorsRequest() &#123; // This is a sample server that supports CORS. var url = 'http://html5rocks-cors.s3-website-us-east-1.amazonaws.com/index.html'; var xhr = createCORSRequest('GET', url); if (!xhr) &#123; alert('CORS not supported'); return; &#125; // Response handlers. xhr.onload = function() &#123; var text = xhr.responseText; var title = getTitle(text); alert('Response from CORS request to ' + url + ': ' + title); &#125;; xhr.onerror = function() &#123; alert('Woops, there was an error making the request.'); &#125;; xhr.send();&#125; Adding CORS support to the server | åœ¨æœåŠ¡å™¨ä¸Šå¢žåŠ  CORS æ”¯æŒ Most of the heavy lifting for CORS is handled between the browser and the server. The browser adds some additional headers, and sometimes makes additional requests, during a CORS request on behalf of the client. These additions are hidden from the client (but can be discovered using a packet analyzer such as Wireshark). CORS çš„å¤§éƒ¨åˆ†ç¹é‡å·¥ä½œéƒ½æ˜¯åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œçš„ã€‚æµè§ˆå™¨åœ¨ä»£è¡¨å®¢æˆ·ç«¯çš„ CORS è¯·æ±‚æœŸé—´æ·»åŠ äº†ä¸€äº›é¢å¤–çš„è¯·æ±‚å¤´ï¼Œæœ‰æ—¶å€™ å‘èµ·é¢å¤–çš„è¯·æ±‚ã€‚è¿™äº›æ·»åŠ å¯¹å®¢æˆ·ç«¯æ˜¯éšè—çš„ï¼ˆä½†æ˜¯å¯ä»¥ä½¿ç”¨è¯¸å¦‚ Wireshark ä¹‹ç±»çš„æŠ“åŒ…åˆ†æžå·¥å…·æ¥å‘çŽ°ï¼‰ã€‚ CORS flow Browser manufacturers are responsible for the browser-side implementation. This section explains how a server can configure its headers to support CORS. æµè§ˆå™¨åˆ¶é€ å•†è´Ÿè´£æµè§ˆå™¨ç«¯çš„å®žçŽ°ã€‚è¿™ä¸€èŠ‚é˜è¿°æœåŠ¡å™¨å¦‚ä½•é…ç½®è¯·æ±‚å¤´æ¥æ”¯æŒ CORSã€‚ Types of CORS requests | CORS è¯·æ±‚çš„ç±»åž‹ Cross-origin requests come in two flavors: è·¨æºè¯·æ±‚ä¸»è¦æœ‰2ç§ï¼š simple requests ç®€å•è¯·æ±‚ â€œnot-so-simple requestsâ€ (a term I just made up) éžç®€å•çš„è¯·æ±‚ Simple requests are requests that meet the following criteria: ç®€å•è¯·æ±‚å¿…é¡»æ»¡è¶³ä»¥ä¸‹å‡†åˆ™ï¼š HTTP Method matches (case-sensitive) one of: HTTP æ–¹æ³•åŒ¹é…ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰ä¸‹é¢ä¸€ç§ HEAD GET POST HTTP Headers matches (case-insensitive): HTTP è¯·æ±‚å¤´åŒ¹é…ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰ï¼š Accept Accept-Language Content-Language Last-Event-ID Content-Type, but only if the value is one of: application/x-www-form-urlencoded multipart/form-data text/plain Simple requests are characterized as such because they can already be made from a browser without using CORS. For example, a JSON-P request can issue a cross-domain GET request. Or HTML could be used to do a form POST. ç®€å•è¯·æ±‚å…·æœ‰è¿™æ ·çš„ç‰¹ç‚¹æ˜¯å› ä¸ºä»–ä»¬å·²ç»å¯ä»¥åœ¨ä¸ä½¿ç”¨ CORS çš„æƒ…å†µä¸‹æµè§ˆå™¨ä¸­ç”Ÿæˆã€‚ä¾‹å¦‚ï¼ŒJSON-P è¯·æ±‚å¯ä»¥å‘å‡ºè·¨åŸŸ GET è¯·æ±‚ã€‚æˆ–è€… HTML å¯ä»¥ç”¨äºŽæ‰§è¡Œè¡¨å• POSTã€‚ Any request that does not meet the criteria above is a not-so-simple request, and requires a little extra communication between the browser and the server (called a preflight request), which weâ€™ll get into below. ä»»ä½•ä¸æ»¡è¶³ä»¥ä¸Šå‡†åˆ™çš„è¯·æ±‚éƒ½æ˜¯ éžç®€å•çš„ è¯·æ±‚ï¼Œéœ€è¦åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œä¸€ç‚¹ç‚¹é¢å¤–çš„é€šä¿¡ï¼ˆç§°ä¸º é¢„æ£€è¯·æ±‚ï¼‰ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹é¢ä»‹ç»ã€‚ Handling a simple request | å¤„ç†ä¸€ä¸ªç®€å•è¯·æ±‚ Lets start by examining a simple request from the client. The table below shows the JavaScript code for a simple GET request on the left, along with the actual HTTP request that the browser emits; CORS specific headers are in bold. è®©æˆ‘ä»¬ä»Žæ£€æŸ¥å®¢æˆ·ç«¯çš„ç®€å•è¯·æ±‚å¼€å§‹ã€‚ä¸‹è¡¨å±•ç¤ºäº†å·¦ä¾§ç®€å•è¯·æ±‚çš„ JavaScript ä»£ç ï¼Œä»¥åŠæµè§ˆå™¨å‘å‡ºçš„å®žé™… HTTP è¯·æ±‚ï¼›CORS ç‰¹å®šè¯·æ±‚å¤´ç”¨ç²—ä½“æ˜¾ç¤ºã€‚ JavaScript: 123var url = 'http://api.alice.com/cors';var xhr = createCORSRequest('GET', url);xhr.send(); HTTP Request: 123456GET /cors HTTP/1.1Origin: http://api.bob.comHost: api.alice.comAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... The first thing to note is that a valid CORS request always contains an Origin header. This Origin header is added by the browser, and can not be controlled by the user. The value of this header is the scheme (e.g. http), domain (e.g. bob.com) and port (included only if it is not a default port, e.g. 81) from which the request originates; for example: http://api.alice.com. ç¬¬ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œä¸€ä¸ªå¯ç”¨çš„ CORS è¯·æ±‚ å§‹ç»ˆ åŒ…å«ä¸€ä¸ª Origin è¯·æ±‚å¤´ã€‚è¿™ä¸ª Origin è¯·æ±‚å¤´æ˜¯æµè§ˆå™¨æ·»åŠ çš„ï¼Œä¸èƒ½è¢«ç”¨æˆ·æŽ§åˆ¶ã€‚è¿™ä¸ªè¯·æ±‚å¤´çš„å€¼æ˜¯è¯·æ±‚æºè‡ªçš„æ–¹æ¡ˆï¼ˆä¾‹å¦‚ï¼šhttpï¼‰ï¼ŒåŸŸï¼ˆä¾‹å¦‚ï¼šbob.comï¼‰ï¼Œå’Œç«¯å£ï¼ˆä»…åœ¨å®ƒä¸æ˜¯é»˜è®¤ç«¯å£æ—¶æ‰éœ€è¦å£°æ˜Ž ä¾‹å¦‚ï¼š81ï¼‰ï¼›ä¾‹å¦‚ï¼šhttp://api.alice.comã€‚ The presence of the Origin header does not necessarily mean that the request is a cross-origin request. While all cross-origin requests will contain an Origin header, some same-origin requests might have one as well. For example, Firefox doesnâ€™t include an Origin header on same-origin requests. But Chrome and Safari include an Origin header on same-origin POST/PUT/DELETE requests (same-origin GET requests will not have an Origin header). Here is an example of a same-origin request with an Origin header: Originè¯·æ±‚å¤´çš„å‡ºçŽ°å¹¶ä¸ä¸€å®šæ„å‘³ç€è¿™ä¸ªè¯·æ±‚å°±æ˜¯è·¨æºè¯·æ±‚ã€‚æ‰€æœ‰çš„è·¨æºè¯·æ±‚éƒ½è¦åŒ…å« Origin è¯·æ±‚å¤´ï¼Œä¸€äº›åŒæºè¯·æ±‚ä¹Ÿå¯èƒ½ä¼šæœ‰ä¸€ä¸ª Origin è¯·æ±‚å¤´ã€‚ä¾‹å¦‚ï¼ŒFirefox åœ¨åŒæºè¯·æ±‚ä¸‹ä¸åŒ…å« Origin è¯·æ±‚å¤´ã€‚ä½†æ˜¯ Chrome å’Œ Safariåœ¨åŒæºçš„ POST/PUT/DELETEï¼ˆåŒæºçš„ GET è¯·æ±‚ä¸åŒ…å« Origin è¯·æ±‚å¤´ï¼‰è¯·æ±‚ä¸­ä¼šåŒ…å«ä¸€ä¸ª Origin è¯·æ±‚å¤´ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰ Origin è¯·æ±‚å¤´çš„åŒæºè¯·æ±‚ã€‚ HTTP Request: 123POST /cors HTTP/1.1Origin: http://api.bob.comHost: api.bob.com The good news is that browsers donâ€™t expect CORS response headers on same-origin requests. The response to a same-origin request is sent to user, regardless of whether it has CORS headers or not. However, if your server code returns an error if the Origin doesnâ€™t match a list of allowed domains, be sure to include the origin the request comes from. å¥½æ¶ˆæ¯æ˜¯æµè§ˆå™¨ä¸å¸Œæœ›åŒæºè¯·æ±‚ä¸Šä½¿ç”¨ CORS å“åº”å¤´ã€‚åŒæºè¯·æ±‚çš„å“åº”è¢«å‘é€ç»™ç”¨æˆ·ï¼Œä¸è€ƒè™‘å®ƒæ˜¯å¦åŒ…å« CORS å“åº”å¤´ã€‚ä½†æ˜¯ï¼Œå¦‚æžœä½ çš„æœåŠ¡å™¨ä»£ç åœ¨ Origin ä¸Žå…è®¸çš„åŸŸååˆ—è¡¨ä¸åŒ¹é…æ—¶è¿”å›žé”™è¯¯ï¼Œè¯·ç¡®è®¤åŒ…å«è¯·æ±‚æ¥æºã€‚ Hereâ€™s a valid server response; the CORS-specific headers are bolded è¿™é‡Œæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æœåŠ¡å™¨å“åº”ï¼›CORS ç‰¹å®šçš„è¯·æ±‚å¤´åŠ é»‘æ˜¾ç¤ºäº†ã€‚ HTTP Response: 1234Access-Control-Allow-Origin: http://api.bob.comAccess-Control-Allow-Credentials: trueAccess-Control-Expose-Headers: FooBarContent-Type: text/html; charset=utf-8 All CORS related headers are prefixed with â€œAccess-Control-â€œ. Hereâ€™s some more details about each header. æ‰€æœ‰ CORS æœ‰å…³çš„è¯·æ±‚å¤´éƒ½æ˜¯ä»¥ â€œAccess-Control-â€ ä¸ºå‰ç¼€çš„ã€‚ä¸‹é¢æœ‰ä¸€äº›å…³äºŽæ¯ä¸ªè¯·æ±‚å¤´çš„è¯¦ç»†æè¿°ã€‚ Access-Control-Allow-Origin (required) - This header must be included in all valid CORS responses; omitting the header will cause the CORS request to fail. The value of the header can either echo the Origin request header (as in the example above), or be a â€˜â€˜ to allow requests from any origin. If youâ€™d like any site to be able to access your data, using â€˜â€˜ is fine. But if youâ€™d like finer control over who can access your data, use an actual value in the header. Access-Control-Allow-Origin ï¼ˆå¿…é¡»çš„ï¼‰- è¿™ä¸ªè¯·æ±‚å¤´å¿…é¡»åŒ…å«åœ¨æ‰€æœ‰æœ‰æ•ˆçš„ CORS å“åº”ä¸­ï¼›å¿½ç•¥è¿™ä¸ªè¯·æ±‚å¤´ä¼šå¯¼è‡´ CORS è¯·æ±‚å¤±è´¥ã€‚è¿™ä¸ªè¯·æ±‚å¤´çš„å€¼è¦ä¹ˆå›žæ˜¾ Origin è¯·æ±‚å¤´ï¼ˆå¦‚ä¸Šé¢çš„ä¾‹å­æ‰€ç¤ºï¼‰ï¼Œè¦ä¹ˆä¸º &#39;&#39; (ç©ºå­—ç¬¦)è¡¨ç¤ºå…è®¸æ¥è‡ªä»»ä½•æ¥æºçš„è¯·æ±‚ã€‚å¦‚æžœä½ æƒ³è¦ä»»ä½•ç½‘ç«™éƒ½èƒ½å¤ŸèŽ·å–ä½ çš„æ•°æ®ï¼Œä½¿ç”¨ &#39;&#39; å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æžœä½ å¸Œæœ›æ›´å¥½åœ°æŽ§åˆ¶è°å¯ä»¥è®¿é—®ä½ çš„æ•°æ®ï¼Œå°±è¦åœ¨è¯·æ±‚å¤´è®¾ç½®å®žé™…çš„å€¼ã€‚ Access-Control-Allow-Credentials (optional) - By default, cookies are not included in CORS requests. Use this header to indicate that cookies should be included in CORS requests. The only valid value for this header is true (all lowercase). If you donâ€™t need cookies, donâ€™t include this header (rather than setting its value to false). Access-Control-Allow-Credentials (å¯é€‰) - é»˜è®¤æƒ…å†µä¸‹ï¼Œcookie ç¼“å­˜ä¸è¢«åŒ…å«åœ¨ CORS è¯·æ±‚ä¸­ã€‚ç”¨è¿™ä¸ªè¯·æ±‚å¤´æ¥æŒ‡ç¤º cookie ç¼“å­˜è¦è¢«æ·»åŠ åœ¨ CORS è¯·æ±‚ä¸­ã€‚è¿™ä¸ªè¯·æ±‚å¤´å”¯ä¸€çš„æœ‰æ•ˆå€¼å°±æ˜¯ true ï¼ˆå…è®¸å°å†™ï¼‰ã€‚å¦‚æžœä½ ä¸éœ€è¦ cookie ç¼“å­˜ï¼Œå°±ä¸è¦åŒ…å«è¿™ä¸ªè¯·æ±‚å¤´ï¼ˆè€Œä¸æ˜¯å°†è¯·æ±‚å¤´çš„å€¼è®¾ç½®ä¸º falseï¼‰ã€‚ The Access-Control-Allow-Credentials header works in conjunction with the withCredentials property on the XMLHttpRequest 2 object. Both these properties must be set to true in order for the CORS request to succeed. If .withCredentials is true, but there is no Access-Control-Allow-Credentialsheader, the request will fail (and vice versa). Access-Control-Allow-Credentials è¯·æ±‚å¤´åœ¨ XMLHtmlRequest2 å¯¹è±¡ä¸Šçš„ withCredentials å±žæ€§ ä¸€èµ·ä½¿ç”¨ã€‚è¿™ä¸¤ä¸ªå±žæ€§éƒ½è¦è¢«è®¾ç½®ä¸º ture æ‰èƒ½è®© CORS è¯·æ±‚æˆåŠŸæ‰§è¡Œã€‚å¦‚æžœ .withCredentials ä¸º true è€Œæ²¡æœ‰ Access-Control-Allow-Credentials è¯·æ±‚å¤´ï¼Œè¯·æ±‚å°†ä¼šå¤±è´¥ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚ Its recommended that you donâ€™t set this header unless you are sure you want cookies to be included in CORS requests. é™¤éžä½ ç¡®å®šéœ€è¦åœ¨ CORS è¯·æ±‚ä¸­åŒ…å« cookie ç¼“å­˜ï¼Œå¦åˆ™ä¸å»ºè®®è®¾ç½®è¿™ä¸ªè¯·æ±‚å¤´ã€‚ Access-Control-Expose-Headers (optional) - The XMLHttpRequest 2 object has a getResponseHeader() method that returns the value of a particular response header. During a CORS request, the getResponseHeader() method can only access simple response headers. Simple response headers are defined as follows: Access-Control-Expose-Headers (å¯é€‰) - XMLHttpRequest2 å¯¹è±¡æœ‰ä¸€ä¸ª getResponseHeader() æ–¹æ³•ï¼Œè¿”å›žä¸€ä¸ªç‰¹å®šçš„å“åº”å¤´çš„å€¼ã€‚åœ¨ CORS è¯·æ±‚æœŸé—´ ï¼ŒgetResponseHeader() æ–¹æ³•åªèƒ½è®¿é—®ç®€å•çš„å“åº”å¤´ã€‚ç®€å•çš„å“åº”å¤´å®šä¹‰å¦‚ä¸‹ï¼š Cache-Control Content-Language Content-Type Expires Last-Modified Pragma If you want clients to be able to access other headers, you have to use the Access-Control-Expose-Headers header. The value of this header is a comma-delimited list of response headers you want to expose to the client. å¦‚æžœæƒ³è¦å®¢æˆ·ç«¯è®¿é—®å…¶ä»–è¯·æ±‚å¤´ï¼Œå¿…é¡»ä½¿ç”¨ Access-Control-Expose-Headers è¯·æ±‚å¤´ã€‚è¿™ä¸ªè¯·æ±‚å¤´çš„å€¼æ˜¯ä½ æƒ³è¦å‘å®¢æˆ·ç«¯å…¬å¼€çš„å“åº”å¤´éƒ¨çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚ Handling a not-so-simple request | å¤„ç†ä¸€ä¸ª éžç®€å•çš„ è¯·æ±‚ So that takes care of a simple GET request, but what if you want to do something more? Maybe you want to support other HTTP verbs like PUT or DELETE, or you want to support JSON using Content-Type: application/json. Then you need to handle what weâ€™re calling a not-so-simple request. è¿™æ ·å°±å¯ä»¥å¤„ç†ä¸€ä¸ªç®€å•è¯·æ±‚äº†ï¼Œä½†æ˜¯å¦‚æžœä½ æƒ³è¦åšæ›´å¤šäº‹æƒ…å‘¢ï¼Ÿå¯èƒ½ä½ æƒ³æ”¯æŒå…¶ä»–è¯¸å¦‚ PUT æˆ–è€… DELETE ä¹‹ç±»çš„ HTTP è°“è¯ï¼Œæˆ–è€…ä½ æƒ³ç”¨ Content-Type:application/json æ¥æ”¯æŒ JSON æ ¼å¼çš„å“åº”ã€‚é‚£ä¹ˆä½ å°±éœ€è¦å¤„ç†æˆ‘ä»¬æ‰€è°“çš„ éžç®€å•çš„ è¯·æ±‚äº† A not-so-simple request looks like a single request to the client, but it actually consists of two requests under the hood. The browser first issues a preflight request, which is like asking the server for permission to make the actual request. Once permissions have been granted, the browser makes the actual request. The browser handles the details of these two requests transparently. The preflight response can also be cached so that it is not issued on every request. ä¸€ä¸ª éžç®€å•çš„ è¯·æ±‚åœ¨å®¢æˆ·ç«¯çœ‹æ¥å°±åƒä¸€ä¸ªå•ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å®ƒå®žé™…ä¸ŠåŒ…å«ä¸¤ä¸ªè¯·æ±‚ã€‚æµè§ˆå™¨é¦–å…ˆå‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼Œçœ‹èµ·æ¥åƒæ˜¯å‘æœåŠ¡å™¨ç”³è¯·å‘èµ·å®žé™…è¯·æ±‚çš„æƒé™ã€‚ä¸€æ—¦æƒé™è¢«èµ‹äºˆï¼Œæµè§ˆå™¨å°±ä¼šå‘èµ·çœŸæ­£çš„è¯·æ±‚äº†ã€‚æµè§ˆå™¨å¤„ç†è¿™ä¸¤ä¸ªè¯·æ±‚çš„è¯¦ç»†è¿‡ç¨‹æ˜¯é€æ˜Žçš„ã€‚é¢„æ£€è¯·æ±‚çš„å“åº”ä¹Ÿå¯ä»¥è¢«ç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½å‘èµ·é¢„æ£€è¯·æ±‚äº†ã€‚ Hereâ€™s an example of a not-so-simple request: è¿™é‡Œæœ‰ä¸€ä¸ª éžç®€å•çš„ è¯·æ±‚çš„ç¤ºä¾‹ï¼š JavaScript: 12345var url = 'http://api.alice.com/cors';var xhr = createCORSRequest('PUT', url);xhr.setRequestHeader( 'X-Custom-Header', 'value');xhr.send(); Preflight Request: 12345678OPTIONS /cors HTTP/1.1Origin: http://api.bob.comAccess-Control-Request-Method: PUTAccess-Control-Request-Headers: X-Custom-HeaderHost: api.alice.comAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... Like the simple request, the browser adds the Origin header to every request, including the preflight. The preflight request is made as an HTTP OPTIONS request (so be sure your server is able to respond to this method). It also contains a few additional headers: å’Œç®€å•è¯·æ±‚ç±»ä¼¼ï¼Œæµè§ˆå™¨ä¼šå‘æ¯ä¸€ä¸ªè¯·æ±‚æ·»åŠ  Origin è¯·æ±‚å¤´ï¼ŒåŒ…æ‹¬é¢„æ£€è¯·æ±‚ã€‚è¿™ä¸ªé¢„æ£€è¯·æ±‚æ˜¯ä½œä¸º HTTP OPTIONS è¯·æ±‚ç”Ÿæˆçš„ï¼ˆå› æ­¤è¦ç¡®ä¿ä½ çš„æœåŠ¡å™¨èƒ½å¤Ÿå“åº”è¿™ç§æ–¹å¼ï¼‰ã€‚å®ƒä¹Ÿä¼šåŒ…å«é¢å¤–ä¸€äº›è¯·æ±‚å¤´ï¼š Access-Control-Request-Method - The HTTP method of the actual request. This request header is always included, even if the HTTP method is a simple HTTP method as defined earlier (GET, POST, HEAD). Access-Control-Request-Method - å®žé™…è¯·æ±‚çš„ HTTP æ–¹æ³•ã€‚å³ä½¿ HTTP æ–¹æ³•æ˜¯å‰é¢å®šä¹‰è¿‡çš„ç®€å• HTTP æ–¹æ³•ï¼ˆGET,POST,HEADï¼‰,ä¹Ÿå§‹ç»ˆåŒ…å«è¿™ä¸ªè¯·æ±‚å¤´ã€‚ Access-Control-Request-Headers - A comma-delimited list of non-simple headers that are included in the request. Access-Control-Request-Headers - åŒ…å«åœ¨è¯·æ±‚ä¸­çš„ä¸€ä¸ªéžç®€å•è¯·æ±‚å¤´é€—å·åˆ†éš”åˆ—è¡¨ã€‚ The preflight request is a way of asking permissions for the actual request, before making the actual request. The server should inspect the two headers above to verify that both the HTTP method and the requested headers are valid and accepted. åœ¨è¿›è¡Œå®žé™…è¯·æ±‚ä¹‹å‰ï¼Œé¢„æ£€è¯·æ±‚æ˜¯ä¸€ç§è¯¢é—®å®žé™…è¯·æ±‚æƒé™çš„æ–¹æ³•ã€‚ æœåŠ¡å™¨åº”è¯¥æ£€æŸ¥ä¸Šé¢ä¸¤ä¸ªè¯·æ±‚å¤´ä»¥éªŒè¯ HTTP æ–¹æ³•å’Œè¯·æ±‚å¤´æœ‰æ•ˆå¹¶æŽ¥å—ã€‚ If the HTTP method and headers are valid, the server should respond with the following: å¦‚æžœ HTTP æ–¹æ³•å’Œè¯·æ±‚å¤´æœ‰æ•ˆï¼ŒæœåŠ¡å™¨åº”è¯¥è¿”å›žå¦‚ä¸‹å“åº”ï¼š Preflight Request: é¢„æ£€è¯·æ±‚ï¼š 12345678OPTIONS /cors HTTP/1.1Origin: http://api.bob.comAccess-Control-Request-Method: PUTAccess-Control-Request-Headers: X-Custom-HeaderHost: api.alice.comAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... Preflight Response: 1234Access-Control-Allow-Origin: http://api.bob.comAccess-Control-Allow-Methods: GET, POST, PUTAccess-Control-Allow-Headers: X-Custom-HeaderContent-Type: text/html; charset=utf-8 Access-Control-Allow-Origin (required) - Like the simple response, the preflight response must include this header. Access-Control-Allow-Originï¼ˆå¿…é¡»ï¼‰- åƒç®€å•å“åº”ï¼Œé¢„æ£€å“åº”ä¹Ÿå¿…é¡»åŒ…å«è¿™ä¸ªå“åº”å¤´éƒ¨ã€‚ Access-Control-Allow-Methods (required) - Comma-delimited list of the supported HTTP methods. Note that although the preflight request only asks permisions for a single HTTP method, this reponse header can include the list of all supported HTTP methods. This is helpful because the preflight response may be cached, so a single preflight response can contain details about multiple request types. Access-Control-Allow-Methods ï¼ˆå¿…é¡»ï¼‰ - å—æ”¯æŒçš„ HTTPæ–¹æ³•çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚è¦æ³¨æ„è™½ç„¶é¢„æ£€è¯·æ±‚åªä¼šè¯¢é—®å•ä¸ªç®€å• HTTP è¯·æ±‚çš„æƒé™ï¼Œä½†æ˜¯è¿™ä¸ªå“åº”å¤´å¯ä»¥åŒ…å«æ‰€æœ‰æ”¯æŒçš„ HTTP æ–¹æ³•ã€‚è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå¯ä»¥ç¼“å­˜é¢„æ£€ è¯·æ±‚å“åº”ï¼Œæ‰€ä»¥ä¸€ä¸ªå•ä¸ªé¢„æ£€å“åº”å¯ä»¥åŒ…å«å¤šç§è¯·æ±‚ç±»åž‹çš„è¯¦ç»†ä¿¡æ¯ã€‚ Access-Control-Allow-Headers (required if the request has an Access-Control-Request-Headers header) - Comma-delimited list of the supported request headers. Like the Access-Control-Allow-Methods header above, this can list all the headers supported by the server (not only the headers requested in the preflight request). Access-Control-Allow-Headers ï¼ˆåœ¨è¯·æ±‚åŒ…å«ä¸€ä¸ª Access-Control-Request-Headers çš„æƒ…å†µä¸‹æ˜¯å¿…é¡»çš„ï¼‰ - å—æ”¯æŒçš„è¯·æ±‚å¤´çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚åƒä¸Šé¢çš„ Access-Control-Allow-Methods ï¼Œè¿™å¯ä»¥åˆ—å‡ºæ‰€æœ‰è¢«æœåŠ¡å™¨æ”¯æŒçš„è¯·æ±‚å¤´ï¼ˆä¸ä»…æ˜¯é¢„æ£€è¯·æ±‚ä¸­è¯·æ±‚çš„æ ‡å¤´ï¼‰ã€‚ Access-Control-Allow-Credentials (optional) - Same as simple request. Access-Control-Allow-Credentials ï¼ˆå¯é€‰ï¼‰ - ä¸Žç®€å•è¯·æ±‚ç›¸åŒã€‚ Access-Control-Max-Age (optional) - Making a preflight request on every request becomes expensive, since the browser is making two requests for every client request. The value of this header allows the preflight response to be cached for a specified number of seconds. Access-Control-Max-Ageï¼ˆå¯é€‰ï¼‰ - å¯¹æ¯ä¸ªè¯·æ±‚éƒ½è¿›è¡Œé¢„æ£€è¯·æ±‚æ˜¯å¼€é”€å¾ˆå¤§çš„ï¼Œå› ä¸ºæµè§ˆå™¨è¦ä¸ºæ¯æ¬¡å®¢æˆ·ç«¯è¯·æ±‚å‘èµ·ä¸¤æ¬¡è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚å¤´çš„å€¼å…è®¸é¢„æ£€è¯·æ±‚çš„å“åº”è¢«ç¼“å­˜æŒ‡å®šç§’æ•°çš„æ—¶é—´ã€‚ Once the preflight request gives permissions, the browser makes the actual request. The actual request looks like the simple request, and the response should be processed in the same way: ä¸€ç‚¹é¢„æ£€è¯·æ±‚æä¾›äº†æƒé™ï¼Œæµè§ˆå™¨å°±ä¼šå‘èµ·å®žé™…è¯·æ±‚ã€‚å®žé™…è¯·æ±‚çœ‹ä¸ŠåŽ»å°±åƒç®€å•è¯·æ±‚ï¼Œè¯·æ±‚çš„å“åº”ä¹Ÿæ˜¯ç”¨ç›¸åŒçš„æ–¹å¼å¤„ç†ï¼š Actual Request: 1234567PUT /cors HTTP/1.1Origin: http://api.bob.comHost: api.alice.comX-Custom-Header: valueAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... Actual Response: 12Access-Control-Allow-Origin: http://api.bob.comContent-Type: text/html; charset=utf-8 If the server wants to deny the CORS request, it can just return a generic response (like HTTP 200), without any CORS header. The server may want to deny the request if the HTTP method or headers requested in the preflight are not valid. Since there are no CORS-specific headers in the response, the browser assumes the request is invalid, and doesnâ€™t make the actual request: å¦‚æžœæœåŠ¡å™¨æƒ³è¦æ‹’ç» CORS è¯·æ±‚ï¼Œå®ƒåªèƒ½è¿”å›žé€šç”¨å“åº”ï¼ˆå¦‚ HTTP 200ï¼‰ï¼Œè€Œä¸éœ€è¦ä»»ä½• CORS å¤´ã€‚å¦‚æžœ HTTP æ–¹æ³•æˆ–è€…é¢„æ£€è¯·æ±‚çš„è¯·æ±‚å¤´æ— æ•ˆï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šæ‹’ç»è¯·æ±‚ã€‚å› ä¸ºè¿”å›žä¸­æ²¡æœ‰ CORS ç‰¹å®šçš„å“åº”å¤´ï¼Œæµè§ˆå™¨ä¼šå‡å®šè¯·æ±‚ä¸å¯ç”¨ï¼Œå°±ä¸ä¼šå‘èµ·å®žé™…è¯·æ±‚äº†ã€‚ Preflight Request: é¢„æ£€è¯·æ±‚ 12345678OPTIONS /cors HTTP/1.1Origin: http://api.bob.comAccess-Control-Request-Method: PUTAccess-Control-Request-Headers: X-Custom-HeaderHost: api.alice.comAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... Preflight Response: é¢„æ£€å“åº” 12// ERROR - No CORS headers, this is an invalid request!Content-Type: text/html; charset=utf-8 If there is an error in the CORS request, the browser will fire the clientâ€™s onerror event handler. It will also print the following error to the console log: å¦‚æžœ CORS è¯·æ±‚å‘ç”Ÿäº†é”™è¯¯ï¼Œæµè§ˆå™¨ä¼šè§¦å‘å®¢æˆ·ç«¯çš„ onerror äº‹ä»¶å¤„ç†ç¨‹åºã€‚ä¹Ÿä¼šåœ¨æŽ§åˆ¶å°æ—¥å¿—ä¸­æ‰“å°å¦‚ä¸‹é”™è¯¯ï¼š 1XMLHttpRequest cannot load http://api.alice.com. Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin. The browser doesnâ€™t give you a lot of details on why the error occurred, it only tells you that something went wrong. æµè§ˆå™¨ä¸ä¼šç»™å‡ºä¸ºä»€ä¹ˆå‡ºé”™çš„è¯¦ç»†ä¿¡æ¯ï¼Œå®ƒåªä¼šå‘Šè¯‰ä½ å‡ºé”™äº†ã€‚ A word about security | è°ˆä¸€ç‚¹å®‰å…¨ While CORS lays the groundwork for making cross-domain requests, the CORS headers are not a substitute for sound security practices. You shouldnâ€™t rely on the CORS header for securing resources on your site. Use the CORS headers to give the browser directions on cross-domain access, but use some other security mechanism, such as cookies or OAuth2, if you need additional security restrictions on your content. è™½ç„¶ CORS ä¸ºè·¨åŸŸè¯·æ±‚å¥ å®šäº†åŸºç¡€ï¼Œä½†æ˜¯ CORS è¯·æ±‚å¤´ä¸èƒ½ä»£æ›¿å¥å…¨çš„å®‰å…¨æŽªæ–½ã€‚ä½ ä¸èƒ½ä¾èµ– CORS å¤´æ¥ä¿éšœç½‘ç«™èµ„æºçš„å®‰å…¨ã€‚ä½¿ç”¨ CORS å¤´æ¥ç»™æµè§ˆå™¨æ‰§è¡Œè·¨åŸŸè®¿é—®çš„æŒ‡å¯¼ï¼Œä½†æ˜¯å¦‚æžœæƒ³è¦ä½ çš„å†…å®¹æ›´åŠ å®‰å…¨ï¼Œä½¿ç”¨å…¶ä»–çš„å®‰å…¨æœºåˆ¶ï¼Œä¾‹å¦‚ cookies æˆ–è€… OAuth2 ã€‚ CORS from JQuery | ç”¨ JQuery CORS JQueryâ€™s $.ajax() method can be used to make both regular XHR and CORS requests. A few notes about JQueryâ€™s implementation: JQuery çš„ $.ajax() æ–¹æ³•å¯ä»¥ç”¨æ¥å‘èµ·å¸¸è§„ XHR å’Œ CORS è¯·æ±‚ã€‚JQuery å®žçŽ°çš„ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š JQueryâ€™s CORS implementation doesnâ€™t support IEâ€™s XDomainRequest object. But there are JQuery plugins that enable this. See http://bugs.jquery.com/ticket/8283 for details. JQuery çš„ CORS å®žçŽ°ä¸æ”¯æŒ IE æµè§ˆå™¨çš„ XDomainRequest å¯¹è±¡ã€‚ä½†æ˜¯æœ‰ JQuery çš„æ’ä»¶ä½¿å®ƒæ”¯æŒã€‚è¿™é‡ŒæŸ¥çœ‹è¯¦æƒ…ã€‚ The $.support.cors boolean will be set to true if the browser supports CORS (This returns false in IE, see bullet above). This can be a quick way to check for CORS support. å¦‚æžœæµè§ˆå™¨æ”¯æŒ CORS ,å¸ƒå°”å€¼ $.support.cors å°†è¢«è®¾ç½®ä¸º true ï¼ˆåœ¨ IE æµè§ˆå™¨ä¸‹è¿”å›ž falseï¼Œçœ‹ä¸Šé¢çš„è¯´æ˜Žï¼‰ã€‚è¿™æ˜¯æ£€æŸ¥ CORS æ”¯æŒçš„ä¸€ä¸ªå¿«æ·æ–¹æ³•ã€‚ Hereâ€™s sample code for making a CORS request with JQuery. The comments give more details on how certain properties interact with CORS. è¿™é‡Œæœ‰ä¸€ä»½ç”¨ JQuery å‘èµ· CORS è¯·æ±‚çš„ç¤ºä¾‹ä»£ç ã€‚æ³¨é‡Šéƒ¨åˆ†è¯¦ç»†çš„æè¿°äº†å…·ä½“æ¯ä¸ªå±žæ€§æ˜¯å¦‚ä½•ä¸Ž CORS äº¤äº’çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243$.ajax(&#123; // The 'type' property sets the HTTP method. // A value of 'PUT' or 'DELETE' will trigger a preflight request. type: 'GET', // The URL to make the request to. url: 'http://html5rocks-cors.s3-website-us-east-1.amazonaws.com/index.html', // The 'contentType' property sets the 'Content-Type' header. // The JQuery default for this property is // 'application/x-www-form-urlencoded; charset=UTF-8', which does not trigger // a preflight. If you set this value to anything other than // application/x-www-form-urlencoded, multipart/form-data, or text/plain, // you will trigger a preflight request. contentType: 'text/plain', xhrFields: &#123; // The 'xhrFields' property sets additional fields on the XMLHttpRequest. // This can be used to set the 'withCredentials' property. // Set the value to 'true' if you'd like to pass cookies to the server. // If this is enabled, your server must respond with the header // 'Access-Control-Allow-Credentials: true'. withCredentials: false &#125;, headers: &#123; // Set any custom headers here. // If you set any non-simple headers, your server must include these // headers in the 'Access-Control-Allow-Headers' response header. &#125;, success: function() &#123; // Here's where you handle a successful response. &#125;, error: function() &#123; // Here's where you handle an error response. // Note that if the error was due to a CORS issue, // this function will still fire, but there won't be any additional // information about the error. &#125;&#125;); Cross-Domain from Chrome Extensions | ç”¨Chromeæ‰©å±•è·¨åŸŸ Chrome extensions support cross-domain requests in a two different ways: Chrome æµè§ˆå™¨æ‰©å±•é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼æ”¯æŒè·¨åŸŸè¯·æ±‚ï¼š Include domain in manifest.json - Chrome extensions can make cross-domain requests to any domain if the domain is included in the â€œpermissionsâ€ section of the manifest.json file: åœ¨ manifest.json ä¸­åŒ…å«åŸŸå - å¦‚æžœåŸŸååŒ…å«åœ¨ manifest.json æ–‡ä»¶ä¸­çš„ â€œpermissionâ€ åŒºåŸŸä¸­ï¼ŒChrome æµè§ˆå™¨æ‰©å±•å¯ä»¥ç”Ÿæˆè·¨åŸŸè¯·æ±‚åˆ°ä»»æ„åŸŸåã€‚ 1"permissions": [ "http://*.html5rocks.com"] The server doesnâ€™t need to include any additional CORS headers or do any more work in order for the request to succeed. æœåŠ¡å™¨ä¸éœ€è¦åŒ…å«ä»»ä½•é¢å¤–çš„ CORS å¤´ï¼Œä¹Ÿä¸éœ€è¦åšå…¶ä»–æ›´å¤šäº‹æƒ…æ¥è®©è¯·æ±‚æˆåŠŸã€‚ CORS request - If the domain is not in the manifest.json file, then the Chrome extension makes a standard CORS request. The value of the Origin header is â€œchrome-extension://[CHROME EXTENSION ID]â€. This means requests from Chrome extensions are subject to the same CORS rules described in this article. CORS è¯·æ±‚ - å¦‚æžœåŸŸåä¸åœ¨ manifest.json æ–‡ä»¶ä¸­ï¼ŒChrome æµè§ˆå™¨æ‰©å±•å°±ä¼šå‘èµ·ä¸€ä¸ªæ ‡å‡†çš„ CORS è¯·æ±‚ã€‚Origin å¤´çš„å€¼ä¸º â€œchrome-extension://[CHROME EXTENSION ID]â€ã€‚è¿™æ„å‘³ç€ Chrome æµè§ˆå™¨æ‰©å±•å‘å‡ºçš„è¯·æ±‚å¿…é¡»éµå¾ªæœ¬æ–‡å™è¿°çš„ç›¸åŒçš„ CORS è§„åˆ™ã€‚ Known Issues | å·²çŸ¥é—®é¢˜ CORS support is still being actively developed in all browsers; hereâ€™s a list of known issues (as of 10/2/2013): CORS æ”¯æŒä»ç„¶åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­æ´»è·ƒçš„å¼€å‘ï¼›è¿™é‡Œæœ‰ä¸€ä¸ªå·²çŸ¥é—®é¢˜åˆ—è¡¨ï¼ˆæˆªè‡³ 10/2/2013ï¼‰ FIXED XMLHttpRequestsâ€™ getAllResponseHeaders() doesnâ€™t honor Access-Control-Expose-Headers - Firefox doesnâ€™t return response headers when calling getAllResponseHeaders(). (Firefox bug). A similar bug in WebKit has been fixed. ä»¥è§£å†³ï¼šXMLHttpRequest çš„ getAllResponsHeader() ä¸æ”¯æŒ Access-Control-Expose_Headers - å½“è°ƒç”¨getAllResponseHeaders() æ—¶Firefoxæµè§ˆå™¨ä¸è¿”å›žå“åº”å¤´ã€‚ï¼ˆFirefox bugï¼‰ã€‚WebKit ä¸­åŒæ ·çš„é—®é¢˜å·²ç»è¢«è§£å†³äº†ã€‚ No error information provided to onerror handler - When the onerror handler is fired, the status code is 0, and there is no statusText. This may be by design, but it can be confusing when trying to debug why CORS requests are failing. onerror äº‹ä»¶å¤„ç†ç¨‹åºä¸æä¾›é”™è¯¯ä¿¡æ¯ã€‚å½“ onerror å¤„ç†ç¨‹åºè¢«è§¦å‘çš„æ—¶å€™ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œæ²¡æœ‰ statusTextã€‚è¿™å¯èƒ½æ˜¯æ•…æ„çš„ï¼Œä½†æ˜¯è¿™åœ¨è°ƒè¯• CORS è¯·æ±‚é”™è¯¯æ—¶ä¼šè®©äººéžå¸¸è¿·æƒ‘ã€‚ CORS Server Flowchart | CORS æœåŠ¡å™¨æµç¨‹å›¾ The flowchart below shows how a server should make the decisions as to which headers to add to a CORS response. Click the image to see a larger version. ä¸‹é¢çš„æµç¨‹å›¾å±•ç¤ºäº†æœåŠ¡å™¨åº”è¯¥å¦‚ä½•å†³å®šå°†å“ªäº›å“åº”å¤´æ·»åŠ åˆ° CORS å“åº”ä¸­ã€‚ç‚¹å‡»æŸ¥çœ‹å¤§å›¾ã€‚ CORS Server Flowchart CORS w/ Images In Canvas and WebGL contexts, cross origin images can pose big problems. You can use the crossOrigin attribute on the image element to address much of them. Read Chromium Blog: Using Cross-domain images in WebGLand Mozilla Hacks: Using CORS to load WebGL textures from cross-domain images for the details. Implementation specifics can be found at the MDN page for CORS-enabled Image. åœ¨ Canvas å’Œ WebGL çŽ¯å¢ƒä¸­ï¼Œè·¨æºå›¾åƒå¯èƒ½å¯¼è‡´å¤§é—®é¢˜ã€‚ä½ å¯ä»¥ç”¨å›¾ç‰‡å…ƒç´ çš„ crossOrigin å±žæ€§æ¥è§£å†³å¤§éƒ¨åˆ†çš„é—®é¢˜ã€‚é˜…è¯» Chromium Blog: Using Cross-domain images in WebGL å’Œ Mozilla Hacks: Using CORS to load WebGL textures from cross-domain images è¯¦ç»†äº†è§£ã€‚åœ¨ MDN é¡µé¢ä¸Šå¯ä»¥æ‰¾åˆ° æ”¯æŒ CORS å›¾åƒ çš„å®žçŽ°ç»†èŠ‚ã€‚ Resources Here are some resources if youâ€™d like to learn more about CORS: The CORS Spec A good intro to CORS from Nicholas Zakas enable-cors.org - More details on how to enable CORS on your server.]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>CORS</category>
      </categories>
      <tags>
        <tag>CORS</tag>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»ŽLinuxç³»ç»Ÿä¸­æ¢å¤æœ€è¿‘è¯¯åˆ çš„æ–‡ä»¶]]></title>
    <url>%2F2018%2F10%2F13%2F%E4%BB%8ELinux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%81%A2%E5%A4%8D%E6%9C%80%E8%BF%91%E8%AF%AF%E5%88%A0%E7%9A%84%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[â€‹ è°éƒ½ä¼šæœ‰æ‰‹æŠ–çš„æ—¶å€™ï¼Œæ™šä¸Šè¿œç¨‹å…¬å¸çš„ArchLinuxæ—¶ä¸å°å¿ƒ sudo rm -rf Desktop äº†ä¸€ä¸‹ï¼Œç„¶åŽå¼€å§‹å°è¯•æ¢å¤è¯¯åˆ æ–‡ä»¶ã€‚ googleäº†ä¸€ç¯‡æ¢å¤çš„æ•™ç¨‹ï¼šPhotoRec â€“ Recover Deleted or Lost Files in Linux â€‹ å½“æˆ‘ä»¬ä¸å°å¿ƒç”¨ shift + delete ï¼Œåˆ é™¤é€‰é¡¹ï¼Œæˆ–è€…æ¸…ç©ºå›žæ”¶ç«™çš„æ–¹å¼åˆ é™¤äº†æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶çš„å†…å®¹å®žé™…ä¸Šå¹¶æ²¡æœ‰è¢«ä»Žç¡¬ç›˜ä¸Šæ“¦é™¤ã€‚ç³»ç»Ÿåªæ˜¯ç®€å•çš„å°†è¿™äº›æ–‡ä»¶ä»Žç›®å½•ç»“æž„ä¸­ç§»é™¤äº†ï¼Œæ‰€ä»¥åœ¨è¢«åˆ çš„æ–‡ä»¶å¤¹ä¸‹çœ‹ä¸åˆ°åˆ é™¤çš„æ–‡ä»¶äº†ï¼Œä½†æ˜¯ä»–ä»¬å®žé™…ä¸Šä»ç„¶ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šè¢«åˆ é™¤çš„ä½ç½®ä¸Šã€‚ â€‹ åªè¦å…·å¤‡äº†æ­£ç¡®çš„å·¥å…·å’ŒçŸ¥è¯†ï¼Œä½ å°±å¯ä»¥å°†ä»–ä»¬ä»Žç”µè„‘ä¸Šæ¢å¤å‡ºæ¥ã€‚ä½†æ˜¯å¦‚æžœä½ ä»Žç¡¬ç›˜ä¸Šæ¢å¤æ›´å¤šæ–‡ä»¶æ—¶ï¼Œæœ€è¿‘è¢«åˆ é™¤çš„æ–‡ä»¶å¯èƒ½ä¼šè¢«è¦†ç›–ï¼Œå¯¼è‡´ä½ å¯èƒ½æ‹¿ä¸åˆ°æœ€è¿‘åˆ é™¤çš„æ–‡ä»¶ã€‚ â€‹ æˆ‘ä»¬å°†ä½¿ç”¨ Testdisk è¿™ä¸ªå·¥å…·æ¥å®Œæˆæœ¬æ¬¡Linuxä¸‹çš„æ–‡ä»¶æ¢å¤æ“ä½œï¼ŒTestdisk æ˜¯ä¸€æ¬¾éžå¸¸å‡ºè‰²çš„æ¢å¤å·¥å…·å¥—ä»¶ï¼Œé™„å¸¦ä¸€ä¸ªåä¸º PhotoRec çš„å…è´¹å·¥å…·ã€‚ åœ¨Linuxä¸Šå®‰è£… Testdisk(PhotoRec)1234567891011121314------- On Debian/Ubuntu/Linux Mint ------- $ sudo apt-get install testdisk------- On CentOS/RHEL/Fedora ------- $ sudo yum install testdisk------- On Fedora 22+ ------- $ sudo dnf install testdisk ------- On Arch Linux ------- $ pacman -S testdisk ------- On Gentoo ------- $ emerge testdisk ä¹Ÿå¯ä»¥åŽ»ç®¡ç½‘ä¸‹è½½äºŒè¿›åˆ¶å®‰è£…åŒ…æ¥æ‰‹åŠ¨å®‰è£…ï¼Œåœ°å€ æ¢å¤æ–‡ä»¶å·¥å…·å®‰è£…å®ŒæˆåŽï¼Œéœ€è¦åœ¨ shell ä¸­ç”¨ root æƒé™å¯åŠ¨ PhotoRecï¼ŒæŒ‡å®šè¢«åˆ é™¤æ–‡ä»¶æ‰€åœ¨çš„åˆ†åŒºï¼Œæˆ‘è¿™æ¬¡æ˜¯åœ¨ /dev/sda2 : 1sudo photorec /dev/sda2 ç„¶åŽå¯ä»¥çœ‹åˆ°è¿™æ ·çš„ç•Œé¢ ä½¿ç”¨å·¦å³é”®é€‰æ‹©èœå•æŒ‰é’®ï¼Œå›žè½¦ç¡®å®šã€‚è¿™é‡Œé€‰ Proceedï¼Œç„¶åŽæ•²å›žè½¦ã€‚ å‡ºçŽ°è¿™æ ·çš„ç•Œé¢ï¼š é€‰æ‹© Options æŸ¥çœ‹æœ‰å“ªäº›æ¢å¤æ“ä½œé€‰é¡¹ï¼š é”®ç›˜æŒ‰ Q è¿”å›žï¼Œåœ¨ä¸‹é¢çš„ç•Œé¢ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šä½ æƒ³æœç´¢å’Œæ¢å¤çš„æ–‡ä»¶æ‰©å±•åã€‚é€‰æ‹© File Opt ç„¶åŽå›žè½¦ã€‚ æŒ‰ s æ¥å¯ç”¨/ç¦ç”¨é€‰æ‹©æ‰€æœ‰çš„æ–‡ä»¶æ‰©å±•ï¼Œå¦‚æžœä½ å·²ç»ç¦ç”¨äº†æ‰€æœ‰æ–‡ä»¶æ‰©å±•åï¼Œåˆ™åªéœ€è¦ä½¿ç”¨å³é”®ï¼ˆæˆ–è€…å·¦é”®å–æ¶ˆé€‰æ‹©ï¼‰é€‰æ‹©è¦æ¢å¤çš„æ–‡ä»¶æ‰©å±•ç±»åž‹ã€‚ è¿™é‡Œæˆ‘é€‰æ‹©æ¢å¤ jpg å’Œä¸€äº›å…¶ä»–ç±»åž‹ã€‚ ç„¶åŽæŒ‰ b æ¥ä¿å­˜è®¾ç½®ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ä¸‹å›¾çš„æ¶ˆæ¯ã€‚æŒ‰å›žè½¦é”®è¿”å›žï¼ˆä¹Ÿå¯ä»¥æŒ‰ Qï¼‰ï¼Œç„¶åŽå†æŒ‰ Q è¿”å›žåˆ°ä¸»èœå•ã€‚ çŽ°åœ¨é€‰æ‹© Search é€‰é¡¹æ¥å¼€å§‹æ¢å¤æ“ä½œï¼Œåœ¨ä¸‹é¢çš„ç•Œé¢ä¸­ï¼Œé€‰æ‹©è¢«åˆ æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿç±»åž‹ï¼Œç„¶åŽæŒ‰å›žè½¦ã€‚ æŽ¥ä¸‹æ¥ï¼Œé€‰æ‹©æ˜¯åªæœ‰ç©ºä½™ç©ºé—´è¿˜æ˜¯æ•´ä¸ªåˆ†åŒºéƒ½è¦åˆ†æžã€‚æ³¨æ„ï¼Œé€‰æ‹©å…¨åˆ†åŒºå¯èƒ½ä¼šä½¿åˆ†åŒºå˜æ…¢ï¼Œè€—æ—¶æ›´é•¿ã€‚ä¸€æ—¦ä½ é€‰æ‹©äº†åˆé€‚çš„åˆ†åŒºé€‰é¡¹ï¼ŒæŒ‰å›žè½¦ç»§ç»­ã€‚ é€‰æ‹©ä¸€ä¸ªç›®å½•å­˜æ”¾å°†è¦æ¢å¤å‡ºæ¥çš„æ–‡ä»¶ï¼Œå¦‚æžœç›®æ ‡æ­£ç¡®ï¼ŒæŒ‰ C ç»§ç»­ã€‚ é€‰æ‹©ä¸åŒåˆ†åŒºä¸Šçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé¿å…è¢«åˆ æ–‡ä»¶è¢«è¿™ä¸ªåˆ†åŒºä¸Šæ¢å¤å‡ºæ¥çš„å…¶ä»–æ–‡ä»¶è¦†ç›–ã€‚ è¦é€‰æ‹© root åˆ†åŒºï¼Œç”¨ å·¦é”®ã€‚ è¿™é‡Œï¼Œæˆ‘åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ª recover æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾æ¢å¤æ–‡ä»¶ 1sudo mkdir /recover ä¸‹é¢çš„æˆªå›¾å±•ç¤ºäº†æ¢å¤å‡ºæ¥çš„æŒ‡å®šç±»åž‹çš„è¢«åˆ æ–‡ä»¶ã€‚ä½ å¯ä»¥æŒ‰å›žè½¦æ¥åœæ­¢æ“ä½œã€‚ æ³¨æ„ï¼šä½ çš„ç³»ç»Ÿå¯èƒ½ä¼šå˜æ…¢ï¼ŒæŸäº›æ—¶å€™è¿˜å¯èƒ½å¡é¡¿ï¼Œéœ€è¦è€å¿ƒç­‰å¾…çŸ¥é“æ•´ä¸ªè¿‡ç¨‹å®Œæˆã€‚ â€‹ åœ¨æ•´ä¸ªè¿‡ç¨‹çš„æœ€åŽï¼ŒPhotoRec ä¼šå‘Šè¯‰ä½ æ¢å¤çš„æ–‡ä»¶æ•°é‡å’Œå­˜æ”¾çš„ä½ç½®ã€‚ â€‹ è¢«æ¢å¤å‡ºæ¥çš„æ–‡ä»¶é»˜è®¤æ˜¯ç”¨ root æƒé™å­˜å‚¨çš„ï¼Œæ‰€ä»¥ä¹Ÿè¦ç”¨æå‡çš„æƒé™æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ä»¥è®¿é—®æ–‡ä»¶ã€‚ â€‹ æ“ä½œæœ‰ç–‘é—®çš„å¯ä»¥åŽ» PhotoRec å®˜ç½‘ä¸ŠåŽ»çœ‹çœ‹æ–‡æ¡£ï¼šhttp://www.cgsecurity.org/wiki/PhotoRec. æ³¨æ„äº‹é¡¹â€‹ æ¢å¤å‡ºæ¥çš„æ–‡ä»¶åä¼šè¢«æ¢å¤å·¥å…·é‡å‘½åï¼Œæ–‡ä»¶å­˜æ”¾ç›®å½•ä¹Ÿä¸æ˜¯æŒ‰ç…§åˆ é™¤ä¹‹å‰çš„æ ·å­ï¼Œè¦ä»Žæ¢å¤å‡ºæ¥çš„æ–‡ä»¶ä¸­æ‰¾åˆ°è‡ªå·±éœ€è¦çš„é‚£å‡ ä¸ªï¼Œè¿˜æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ã€‚ â€‹ å¦‚æžœä½ åƒæˆ‘ä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨è¿œç¨‹ shell ä¸­æ‰§è¡Œæ¢å¤è¿‡ç¨‹ï¼Œä¸ºäº†é¿å…è¿œç¨‹ shell å› ä¸ºç½‘ç»œé—®é¢˜ç»ˆç«¯è€Œå¯¼è‡´ PhotoRec çš„æ¢å¤è¿›ç¨‹è¢«ä¸­æ­¢ï¼Œå»ºè®®åœ¨ screen ä¸­æ‰§è¡Œæ¢å¤æ“ä½œï¼Œè¿™æ ·åŠæ—¶è¿œç¨‹ shell æ–­å¼€ï¼Œæ¢å¤è¿›ç¨‹ä¹Ÿä¼šåœ¨åŽå°ç»§ç»­æ‰§è¡Œï¼Œå†æ¬¡è¿œç¨‹ç™»å½•æ—¶è¿˜å¯ä»¥æ¢å¤åˆ°ä¹‹å‰çš„ç•Œé¢ã€‚]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NPM package.json ä¸­çš„ tilde (~) å’Œ caret (^)]]></title>
    <url>%2F2018%2F10%2F12%2Fdifference-between-tilde-and-caret-in-npm-packagefile%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šWhatâ€™s the difference between a tilde (~) and a caret (^) in a npm package.json file? å¦‚æžœä½ ç”¨ npm æ¥ç®¡ç† JavaScript åº”ç”¨ç¨‹åºçš„ package ï¼Œé‚£ä½ åº”è¯¥ç†Ÿæ‚‰ package.json æ–‡ä»¶äº†ã€‚ 12345&#123; "devDependencies": &#123; "ember-cli": "~2.14.0" &#125;&#125; è¯­æ³•æ˜¯ JSON æ ¼å¼ï¼Œkey æ˜¯ package çš„åç§°ï¼Œvalue æ˜¯è¦ä½¿ç”¨çš„è¿™ä¸ª package çš„ç‰ˆæœ¬å·ã€‚ npm å°±æ˜¯ç”¨ package.json æ–‡ä»¶æ¥å£°æ˜Žä½ çš„ app ä¾èµ–çš„ package çš„ç‰ˆæœ¬çš„ã€‚ ç‰ˆæœ¬å·ä»¥ semver è¯­æ³• è¡¨ç¤ºï¼Œå®ƒæŒ‡å®šæ¯ä¸ªéƒ¨åˆ†å…·æœ‰ä¸åŒçš„å«ä¹‰ã€‚semver è¢«ç‚¹å·åˆ’åˆ†æˆ 3 å„éƒ¨åˆ†ã€‚ 123major.minor.patch1.0.2 Majorï¼Œminor å’Œ patch ä»£è¡¨åŒ…çš„ä¸åŒå‘è¡Œç‰ˆæœ¬ã€‚ Npm ç”¨æ³¢æµªçº¿ï¼ˆ~ï¼‰å’Œæ’å…¥ç¬¦ï¼ˆ^ï¼‰æ¥åˆ†åˆ«æŒ‡å®šè¦ä½¿ç”¨çš„ patchï¼ˆè¡¥ä¸ï¼‰å’Œ minorï¼ˆå°ï¼‰ç‰ˆæœ¬ã€‚ æ‰€ä»¥å¦‚æžœä½ çœ‹åˆ°äº† ~1.0.2 å°±è¡¨ç¤ºè¦å®‰è£… 1.0.2 æˆ–ä»¥ä¸Šçš„ patch ç‰ˆæœ¬ï¼Œä¾‹å¦‚ 1.0.4 ã€‚å¦‚æžœä½ çœ‹åˆ° ^1.0.2 å°±è¡¨ç¤ºè¦å®‰è£… 1.0.2 æˆ–è€…æœ€æ–°çš„ minor ç‰ˆæœ¬æˆ–è€… patch ç‰ˆæœ¬ï¼Œä¾‹å¦‚ 1.1.0 ã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>å·¥ç¨‹åŒ–</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Archlinuxå®‰è£…Realtek-8812AUæ— çº¿ç½‘å¡é©±åŠ¨]]></title>
    <url>%2F2018%2F10%2F12%2FArchlinux%E5%AE%89%E8%A3%85Realtek-8812AU%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[â€‹ åœ¨å…¬å¸å°å¼æœºä¸Šè£…äº†Arch Linuxï¼Œè‡ªå·±çš„ç¬”è®°æœ¬ç”¨Windowsï¼Œç”¨Synergyå…±äº«é”®é¼ ï¼Œç”±äºŽç½‘å£æœ‰é™ï¼Œå°å¼æœºæŽ¥æœ‰çº¿ï¼Œç¬”è®°æœ¬è¿žwifiï¼Œä¸åœ¨ä¸€ä¸ªç½‘æ®µå†…ï¼Œå…¬å¸ç½‘ç»œä¸ç¨³å®šï¼ŒSynergyæ—¶ä¸æ—¶ä¼šæ–­å¼€è¿žæŽ¥ï¼ŒäºŽæ˜¯å°±æƒ³æŠŠæ‰‹é‡Œçš„Realtek-8812AUï¼ˆåŽé¢ç®€ç§°æ— çº¿ç½‘å¡ï¼‰ç”¨åœ¨å°å¼æœºä¸Šï¼Œè¿™æ ·å°å¼æœºå’Œç¬”è®°æœ¬éƒ½è¿žwifiï¼Œå‡ºé—®é¢˜çš„æ¦‚çŽ‡åº”è¯¥ä¼šå°ä¸€ç‚¹ã€‚ â€‹ äºŽæ˜¯å¼€å§‹æ‰¾é©±åŠ¨ï¼Œä¹°æ— çº¿ç½‘å¡æ—¶é™„å¸¦äº†ä¸€ä¸ªåˆ»æœ‰é©±åŠ¨çš„å…‰ç›˜ï¼Œæˆ‘æŠŠé©±åŠ¨æ‹·è´åŽå…‰ç›˜å°±ä¸¢æŽ‰äº†ï¼Œé‡Œé¢æœ‰Linuxé©±åŠ¨ã€‚ 123456789101112131415161718[kinboy@kinboyarchlinux Linux]$ ltotal 104K4.0K -rw-r--r-- 1 kinboy kinboy 183 Aug 1 2014 'Last Drivers Download.url' 0 -rw-r--r-- 1 kinboy kinboy 0 Feb 19 2014 RTL8812AU_linux_v4.2.4_9390.20131023 40K -rw-r--r-- 1 kinboy kinboy 37K Oct 23 2013 ReleaseNotes.pdf4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 WiFi_Direct_User_Interface4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 android_ref_codes_JB_4.14.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 android_ref_codes_JB_4.24.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 android_ref_codes_JB_4.34.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 android_reference_codes4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 android_reference_codes_ICS_nl802114.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 document4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 driver4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 hardware_wps_pbc4.0K -rw-r--r-- 1 kinboy kinboy 3.1K Aug 21 2013 install.sh 12K -rw-r--r-- 1 kinboy kinboy 8.1K Oct 23 2013 readme.txt4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 wireless_tools4.0K drwxr-xr-x 2 kinboy kinboy 4.0K Sep 12 2016 wpa_supplicant_hostapd æ‰§è¡Œ install.sh ç¼–è¯‘æ—¶å‡ºé”™ 123456789101112131415161718192021222324252627282930313233343536373839make ARCH=x86_64 CROSS_COMPILE= -C /lib/modules/4.18.12-arch1-1-ARCH/build M=/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023 modulesmake[1]: Entering directory '/usr/lib/modules/4.18.12-arch1-1-ARCH/build' CC [M] /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/core/rtw_cmd.oIn file included from /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service.h:41, from /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/drv_types.h:32, from /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/core/rtw_cmd.c:22:/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service_linux.h: In function '_init_timer':/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service_linux.h:253:8: error: '_timer' &#123;aka 'struct timer_list'&#125; has no member named 'data' ptimer-&gt;data = (unsigned long)cntx; ^~/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service_linux.h:254:2: error: implicit declaration of function 'init_timer'; did you mean '_init_timer'? [-Werror=implicit-function-declaration] init_timer(ptimer); ^~~~~~~~~~ _init_timerIn file included from /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/drv_types.h:32, from /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/core/rtw_cmd.c:22:/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service.h: In function 'thread_enter':/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service.h:342:2: error: implicit declaration of function 'allow_signal'; did you mean 'do_signal'? [-Werror=implicit-function-declaration] allow_signal(SIGTERM); ^~~~~~~~~~~~ do_signal/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service.h: In function 'flush_signals_thread':/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service.h:352:6: error: implicit declaration of function 'signal_pending'; did you mean 'timer_pending'? [-Werror=implicit-function-declaration] if (signal_pending (current)) ^~~~~~~~~~~~~~ timer_pending/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/include/osdep_service.h:354:3: error: implicit declaration of function 'flush_signals'; did you mean 'do_signal'? [-Werror=implicit-function-declaration] flush_signals(current); ^~~~~~~~~~~~~ do_signalcc1: some warnings being treated as errorsmake[2]: *** [scripts/Makefile.build:318: /home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023/core/rtw_cmd.o] Error 1make[1]: *** [Makefile:1517: _module_/home/kinboy/Linux/driver/rtl8812AU_linux_v4.2.4_9390.20131023] Error 2make[1]: Leaving directory '/usr/lib/modules/4.18.12-arch1-1-ARCH/build'make: *** [Makefile:1161: modules] Error 2##################################################Compile make driver error: 2Please check error Mesg################################################## google implicit declaration of function â€˜allow_signalâ€™ æ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œå¤§æ¦‚è®²äº†é”™è¯¯çš„åŽŸå› å’Œè§£å†³åŠžæ³• Wsky 1200Mbps Wireless USB Wifi Adapter æˆ‘åœ¨æ“ä½œè¿‡ç¨‹ä¸­æ²¡æœ‰å¾—åˆ°åŒæ ·çš„ç»“æžœï¼ŒåŽæ¥åˆåœ¨GitHubä¸­æ‰¾åˆ°äº†åŒ¹é…ç‰ˆæœ¬çš„é©±åŠ¨çš„æºç ï¼Œåœ°å€ 12345git clone https://github.com/abperiasamy/rtl8812AU_8821AU_linux.gitcd rtl8812AU_8821AU_linuxmakesudo make installsudo modprobe -a rtl8812au æ’ä¸ŠUSBæ— çº¿ç½‘å¡ï¼Œç¯äº®ï¼ æ›´æ–°ï¼šå†…æ ¸å‡çº§è‡³ 4.19 åŽï¼Œæ— çº¿ç½‘å¡é©±åŠ¨å¤±æ•ˆï¼Œä¹‹å‰çš„é©±åŠ¨æºç åœ¨ 4.19 å†…æ ¸ä¸‹æ— æ³•ç¼–è¯‘æˆåŠŸï¼Œæ‰¾åˆ°å¯ä»¥æˆåŠŸç¼–è¯‘çš„é©±åŠ¨æºç ã€‚]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>archlinux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨vimdiffä½œä¸ºgit mergetool]]></title>
    <url>%2F2018%2F10%2F09%2FUse-Vimdiff-As-Git-Mergetool%2F</url>
    <content type="text"><![CDATA[è¯‘è‡ªï¼šUse vimdiff as git mergetool ä½¿ç”¨vimdiffä½œä¸º git mergetool å¯èƒ½æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå› ä¸ºå®ƒä¼šæ‰“å¼€å¤šä¸ªçª—å£ï¼Œåªæœ‰æžå°‘çš„è¯´æ˜Žã€‚æœ¬ç¯‡æ˜¯ä¸€ä¸ªç®€å•çš„ç»ƒä¹ ï¼Œä»‹ç» vimdiff çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ä»¥åŠä»€ä¹ˆæ˜¯ LOCAL , BASE ,å’Œ REMOTE ã€‚è¿™ç¯‡æ•™ç¨‹é»˜è®¤ä½ è‡³å°‘å…·å¤‡äº†ä¸€ç‚¹åŸºç¡€çš„ vim çŸ¥è¯†ï¼ˆå¦‚ä½•ç§»åŠ¨å…‰æ ‡ï¼Œä¿å­˜ï¼Œçª—å£åˆ‡æ¢ï¼‰ã€‚å¦‚æžœä½ è¿˜ä¸å…·å¤‡è¿™äº›çŸ¥è¯†ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡çŸ­æ–‡å¯ä»¥å¸®åŠ©åˆ°ä½ ï¼š Using vim for writing codeã€‚æ˜¾ç„¶ï¼Œå¯¹gitå’Œåˆ†æ”¯çš„åŸºæœ¬ç†è§£ä¹Ÿæ˜¯å¿…é¡»çš„ã€‚ Git é…ç½®å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“å¦‚ä½•å°†vimdiffè®¾ç½®ä¸ºgit mergetoolã€‚å¦‚ä¸‹ï¼š 123git config merge.tool vimdiffgit config merge.conflictstyle diff3git config mergetool.prompt false è¿™äº›è®¾ç½®ä¼šä½¿ç”¨gitä½œä¸ºé»˜è®¤çš„åˆå¹¶å·¥å…·ï¼Œåˆå¹¶æ—¶ä¼šæ˜¾ç¤ºå‡ºå†²çªåˆ†æ”¯çš„å…±åŒç¥–å…ˆï¼Œä¼šç¦ç”¨æ‰“å¼€vimdiffçš„æç¤ºå‘½ä»¤ã€‚ åˆ›é€ åˆå¹¶å†²çªæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•çŽ¯å¢ƒã€‚ä½ å¯ä»¥è‡ªç”±é€‰æ‹©è·³è¿‡è¿™éƒ¨åˆ†æˆ–è€…è·Ÿç€æ•™ç¨‹æ¥åšã€‚ 1234mkdir zoocd zoogit initvi animals.txt æ·»åŠ ä¸€äº›åŠ¨ç‰© 1234catdogoctopusoctocat ä¿å­˜æ–‡ä»¶ 123456789101112git add animals.txtgit commit -m &quot;Initial commit&quot;git branch octodoggit checkout octodogvi animals.txt # let&apos;s change octopus to octodoggit add animals.txtgit commit -m &quot;Replace octopus with an octodog&quot;git checkout mastervi animals.txt # let&apos;s change octopus to octomangit add animals.txtgit commit -m &quot;Replace octopus with an octoman&quot;git merge octodog # merge octodog into master è¿™é‡Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªåˆå¹¶é”™è¯¯ï¼š 123Auto-merging animals.txtCONFLICT (content): Merge conflict in animals.txtAutomatic merge failed; fix conflicts and then commit the result. ç”¨vimdiffè§£å†³åˆå¹¶å†²çªè®©æˆ‘ä»¬æ¥è§£å†³å†²çªï¼š 1git mergetool è¿™ä¸€å¼€å§‹çœ‹èµ·æ¥ä¼šå¾ˆææ€–ï¼Œæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹å‘ç”Ÿäº†ä»€ä¹ˆã€‚ ä»Žå·¦è‡³å³ï¼Œä»Žä¸Šåˆ°ä¸‹ï¼š LOCAL - è¿™ä¸ªæ–‡ä»¶æ¥è‡ªå½“å‰åˆ†æ”¯ï¼›BASE - ä¸¤ä¸ªåˆ†æ”¯çš„å…±åŒç¥–å…ˆï¼Œåœ¨ä¸¤ä¸ªåˆ†æ”¯ä¸Šçš„æ–‡ä»¶æ”¹å˜ä¹‹å‰çš„æ ·å­ï¼›REMOTE - è¦åˆå¹¶åˆ°ä½ å½“å‰åˆ†æ”¯çš„å¤–éƒ¨åˆ†æ”¯ä¸Šçš„æ–‡ä»¶ï¼›MERGED - åˆå¹¶ç»“æžœï¼Œå°†ä¼šä¿å­˜åˆ°æœ¬åœ°repoä¸­ã€‚ å‡è®¾æˆ‘ä»¬å¸Œæœ›ä¿ç•™octodog çš„å˜åŒ–ï¼ˆæ¥è‡ªREMOTEï¼‰ã€‚ä¸ºæ­¤ï¼Œç§»åŠ¨åˆ°MERGEDæ–‡ä»¶ä¸Šï¼ˆCtrl + w, jï¼‰,ç§»åŠ¨å…‰æ ‡åˆ°ä¸€ä¸ªåˆå¹¶å†²çªçš„åŒºåŸŸï¼Œç„¶åŽï¼š 1:diffget RE è¿™ä¸€æ­¥ä»ŽREMOTEä¸ŠèŽ·å¾—ç›¸åº”çš„æ›´æ”¹å¹¶å°†å…¶æ”¾å…¥åˆ°MERGEDæ–‡ä»¶ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ï¼š 123:diffg RE &quot; get from REMOTE:diffg BA &quot; get from BASE:diffg LO &quot; get from LOCAL ä¿å­˜æ–‡ä»¶ï¼Œç„¶åŽé€€å‡ºï¼ˆå¿«é€Ÿä¿å­˜å†™å…¥å¹¶é€€å‡ºçš„æ–¹æ³•æ˜¯:wap ï¼‰ æ‰§è¡Œgit commitï¼Œä½ å°±å®Œæˆäº†ï¼]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å•é¡µé¢åº”ç”¨ä¸ŽæœåŠ¡å™¨]]></title>
    <url>%2F2018%2F09%2F28%2FSimple-Page%20Applications%20And%20Server%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šSingle-Page Applications and the Server SPAs minimize server requests, but they arenâ€™t server-lessSingle-page applications (SPAs) are distinguished from regular applications because they do not need to make server requests when the user navigates. However, the application still needs a server to provide the initial files for the application to render. Demystifying Single-Page Applications covers the client-side aspect of how this works and here we will cover how different types of servers can support single-page applications. Server TypesWebsites are backed by two types of servers: web and application. NGINX, a web server, provides a good explanation of the two. The most general way to differentiate the two is to say that a web server serves static content (i.e. files that already exist on the server) while an application server can generate new content. With single-page applications, there are three main scenarios for serving the applicationâ€™s content: Purely static Configurable static Dynamic Purely StaticA purely static web server can only successfully respond to requests if a resource at the requested location exists. This will typically be the case when you are using a static host, such as GitHub Pages or Amazon S3. With a purely static server, a request for /horses.html only succeeds (returns a response with status 200) if the serverâ€™s root directory contains a horses.html file. If the resource does not exist, the server will return a 404 response. Configurable StaticA web server can be configured to respond with an alternative file if the requested resource doesnâ€™t actually exist on the disk. If a request for /bears comes in and the server has no bears file, the configuration can tell it to respond with an index.html file instead. DynamicAn application server will have a web framework running on top of it. For example, a Node application server might be running Express and a Unicorn application server may be used to run Ruby on Rails. The framework is able to match requests and dynamically generate responses. Like a configurable static setup, requests donâ€™t have to map directly to files on the server, but a dynamic setup gives you even more leeway. An application server is most likely run as a proxy of a web server, but the web server would typically just pass non-static requests to the application server. Generally speaking, a dynamic/configurable static server is preferable for running a single-page application. If you are using a static file host, you can still run a single-page application, but there are some limitations that you will need to know. Serving Single-Page Applications From Static File HostsIf you are running a single-page application through a static file host, you have two options. The first, and more practical, is to have a single HTML file. With this system, the URLâ€™s hash will be used to store location data. This would be the home page: 1https://example.com/#/ and this is the contact page: 1https://example.com/#/contact Because the location is stored in the URLâ€™s hash, and the server only uses the locationâ€™s pathname to map resources, all requests to the server for pages in the application will be for the root index.html file. Most single-page application routers should provide you with a way to encode locations in the hash. With the Curi router, this is done using the Hickory hash history. 1234567import Hash from &quot;@hickory/hash&quot;;// ...const history = Hash();const router = curi(history, routes);// current URL: &quot;example.com/#/&quot;history.push(&quot;/contact&quot;);// push() changes the URL to &quot;example.com/#/contact&quot; The popular history package also has a hash option. 12import &#123; createHashHistory &#125; from &quot;history&quot;;const history = createHashHistory(); A visual drawback of using hash URLs is that they are a bit ugly. However, they are your best bet and I would recommend just dealing with it. If you really want â€œprettyâ€ URLs, you could generate an HTML file for every single possible URL in your application. That would allow your server to be able to respond with an HTML file for every (valid) request. This is technically feasible for applications with a small number of routes, and some static site generators will do this for you. However, this breaks down for sites that generate URLs for dynamic content, like profile pages for users. Serving Single-Page Applications from Configurable Static ServersIf you can configure your web server, creating a single-page application with â€œprettyâ€ URLs is much easier. The basic gist of how to configure a web server for single-page applications is that you have a single HTML file that your application serves for almost every request. 123456789&lt;!-- index.html --&gt;&lt;!doctype html&gt;&lt;html&gt; &lt;head&gt;...&lt;/head&gt; &lt;body&gt; &lt;div id=&quot;root&quot;&gt;&lt;/div&gt; &lt;script src=&quot;/static/js/index.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; Request for/camels? Respond with index.html. Request for /badgers? Respond with index.html. Request for /static/js/index.js? That is where the â€œalmostâ€ comes in. The server needs to distinguish between requests for HTML content for requests for other files so that it can serve the correct files, and not the index.html file, for those requests. With the Apache web server, you can use mod_rewrite to try to respond with the requested file, but fall back to responding with a default HTML file when the resource does not exist. 1234567891011RewriteEngine On# set the base URL prefixRewriteBase /# for requests for index.html, just respond with the fileRewriteRule ^index\.html$ - [L]# if requested path is not a valid filename, continue rewriteRewriteCond %&#123;REQUEST_FILENAME&#125; !-f# if requested path is not a valid directory, continue rewriteRewriteCond %&#123;REQUEST_FILENAME&#125; !-d# if you have continue to here, respond with index.htmlRewriteRule . /index.html [L] With Nginx, you can use try_files to serve the HTML file. This will attempt to serve the file at the provided $uri, but if that does not exist, it will fall back to the index.html file. 123456server &#123; ... location / &#123; try_files $uri /index.html; &#125;&#125; Note: These configurations are gleaned from an old React Router documentation. If you have issues getting these Apache/NGINX setups to work, I would recommend either checking their respective documentation or StackOverflow. Dynamically Serving Single-Page Applications with Application ServersThe setup for application servers is similar to configurable static servers. In some cases, they may even overlap by having Apache/NGINX/etc. serve static files and pass other requests to a proxy, the application server. There are so many different application servers out there, that it is impractical to cover the setup for each of them here, but the gist is always the same: process the request, determine how to respond, and respond with some HTML. The example code below will use the Express framework. An application server needs to identify static resource requests and respond with the correct file. If you configure your web server to handle these, then you can skip this on the application server. Additionally, a dynamic server needs to identify API requests so that they can be handled properly. Some single-page applications will also employ server-side rendering. Instead of using a common HTML file, server-side rendering will respond with the fully structured HTML for the requested page. Some people swear by this, while others consider it unnecessary. At the very least, there are some caveats to it, but we will come back to this in a little bit. Your framework should provide a way to identify static resource requests. This basically entails specifying a static file directory so that any request whose pathname begins with the static directory will just serve the requested file (or fail with a 404 response if the requested file does not exist). To do this with Express, you would use its static() method and your Express appâ€™s use() method. static() receives the local directory where the static files exist. You can either pass this as the only argument to use(), in which case it will respond to requests for the same local directory, or you can pass it a first argument path if static file requests donâ€™t refer to the literal location. 1234567const express = require(&quot;express&quot;);const app = new express();// requests for /public/js/index.js will return public/js/index.jsapp.use(express.static(&quot;public&quot;));// requests for /static/js/index.js will return public/js/index.jsapp.use(&quot;/static&quot;, express.static(&quot;public&quot;));app.listen(&quot;8000&quot;); Frameworks also need to know how to map requests to to how they should respond, similar to how routes work in a single-page application. When the framework gets a request, it will iterate over these handlers and use the first one that matches the request to respond. In order for the framework to respond to any possible location, we need to give it a catch-all route handler that responds with the common HTML file. 1234const path = require(&quot;path&quot;);app.use(&quot;*&quot;, function(req, resp) &#123; resp.sendFile(&quot;/public/index.html&quot;);&#125;); The order of operations is important here. A catch-all route will match every location, so anything that shouldnâ€™t be matched by it (i.e. static file and API requests) needs to be defined prior to the wildcard route. 12345678// 1. match static filesapp.use(&quot;/static&quot;, express.static(&quot;public&quot;));// 2. match API requestsapp.use(&quot;/graphql&quot;, ...);// 3. finally, match everything elseapp.use(&quot;*&quot;, function(req, resp) &#123; resp.sendFile(&quot;/public/index.html&quot;);&#125;); Server-Side RenderingThe technique outlines above sends a minimal HTML file, which will be â€œfilled inâ€ on the client-side to render the application. Server-side rendering (SSR) allows you to render each routeâ€™s HTML content on the server. The response will then be an HTML file that is already â€œfilled inâ€. Server-side rendering also only really makes sense to attempt if you are running a Node server because you can re-use client-side code on the server. Technically speaking, if you arenâ€™t using Node, you could create the same UI for whatever framework your server uses, but that would require you to duplicate your render logic. The advantages of using SSR is that your application will have a faster initial render for users and that it is easier for search engines to crawl your content. Whether an application really benefits has a variety of factors. For example, if you are using server-side rendering for search engine optimization, only public pages need to be server-side rendered. A private page page (one that is only visible to authorized users) would not benefit from server-side rendering since no search engines should attempt to index it. Instead of returning an HTML file from the disk, server-side rendering will generate an HTML string when a request comes in. There are two parts to this HTML string: the base HTML and the route specific HTML. The base HTML is a template that will be used for all requests. This should include any &lt;script&gt; tags that will be necessary for running the application on the client. The route specific HTML will be inserted into the template. Most of this should be inserted into a container element in the &lt;body&gt; of the template, but you may also want to insert elements into the &lt;head&gt;, such as a &lt;title&gt;. The technique for rendering on the server will depend entirely on how you are rendering on the client. If you are using React, the react-dom package provides server methods for generating an HTML string. Note: If you do server-side rendering using React, on the client you will want to use ReactDOM.hydrate() instead of ReactDOM.render(). 12345678910function responseHTML(content) &#123; return `&lt;!doctype html&gt; &lt;html&gt; &lt;head&gt;&lt;/head&gt; &lt;body&gt; &lt;div id=&quot;root&quot;&gt;$&#123;content&#125;&lt;/div&gt; &lt;script src=&quot;/static/js/bundle.js&quot;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;`;&#125; Important! Any static resource references in the template should be absolute. If you use a relative path (static/js/bundle.js) in the template, then requests for nested URLs (/parent/child) would attempt to load non-existent resource URLs (/parent/static/js/bundle.js). When the application just sends the same HTML file for every request, it doesnâ€™t matter what the requested path is, but with server-side rendering it is important to render based on the request URL. Note: With Express, the request object can be referenced to get the requested path. req.path, which is just the requested URLâ€™s pathname, can be used to determine the route that matches. However, if the app renders content using the search/hash, req.url should be used. To demo the actual rendering, we will use React and the Curi router, which makes server-side rendering very easy. 1234567891011121314151617181920212223242526272829import React from &quot;react&quot;;import renderToString from &quot;react-dom/server&quot;;import curi from &quot;@curi/core&quot;;import InMemory from &quot;@hickory/in-memory&quot;;import &#123; CuriProvider &#125; from &quot;@curi/react&quot;;import routes from &quot;../client/routes&quot;;app.use(&quot;*&quot;, function(req, resp) &#123; // 1. Use the request&apos;s URL to create the router. // Curi will use the provided location to generate a response // object const history = InMemory(&#123; locations: [req.url] &#125;); const router = curi(history, routes); // 2. Render the application using React. // The exact implementation here will vary, but Curi uses // a render-invoked prop to render a &quot;body&quot; component // from the response object provided by the router. const content = renderToString( &lt;CuriProvider&gt; &#123;(&#123; response &#125;) =&gt; &lt;response.body response=&#123;response&#125; /&gt;&#125; &lt;/CuriProvider&gt; ); // 3. Insert the content into the template. // We want to return the entire page&apos;s HTML, not just // the content rendered by React const html = responseHTML(content); // 4. Send the response HTML. resp.send(html);&#125;); That is the general gist of server-side rendering. Actual implementations vary by framework and router, but the idea is always the same. RecapIf you are using a static file host, you will either need to use hash routing and a shared HTML file or generate an HTML file for every possible route in your application. Web servers can be made more amenable to single-page applications if you can configure them. This allows you to respond with an HTML file for requests that donâ€™t have a matching resource on the server. Application servers make serving single-page applications easy by using catch-all routes to respond to requests for any location. It is important that these match any other possible URLs, such as static resource and API requests, first so that the catch-all doesnâ€™t catch those. If your application server is running Node, you can take advantage of server-side rendering to pre-generate the pageâ€™s HTML content, but this isnâ€™t always necessary. React]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>HTTP</category>
      </categories>
      <tags>
        <tag>æž¶æž„</tag>
        <tag>å•é¡µåº”ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµè§ˆå™¨çš„history]]></title>
    <url>%2F2018%2F09%2F25%2Fa-little-bit-of-history%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡: A little bit of history If you wish to understand React Router, you must first study history. More specifically, the history package, which provides the core functionality for React Router. It enables projects to easily add location based navigation on the client-side, which is essential for single page applications. å¦‚æžœä½ æƒ³è¦ç†è§£ React Routerï¼Œé‚£ä½ å¿…é¡»å…ˆå­¦ä¹  historyã€‚å…·ä½“æ¥è¯´ï¼Œæ˜¯ history åŒ…ï¼Œå®ƒæä¾›äº† React Router çš„æ ¸å¿ƒåŠŸèƒ½ã€‚å®ƒå…è®¸é¡¹ç›®è½»æ¾çš„åœ¨å®¢æˆ·ç«¯æ·»åŠ åŸºäºŽä½ç½®(location)çš„å¯¼èˆªï¼Œè¿™å¯¹ä½†é¡µé¢åº”ç”¨æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ã€‚ 1npm install --save history There are three types of history: browser, hash, and memory. The history package exports methods to create each type. å…±æœ‰3ç§ç±»åž‹çš„historyï¼šbrowserï¼Œhashï¼Œå’Œmemoryã€‚historyåŒ…å¯¼å‡ºäº†ç”¨äºŽåˆ›å»ºæ¯ç§ç±»åž‹çš„æ–¹æ³•ã€‚ 12345import &#123; createBrowserHistory, createHashHistory, createMemoryHistory&#125; from &apos;history&apos; If you are using React Router, it can automatically create history objects for you, so you may never have to actually interact with history directly. Still, it is important to understand the differences between each type of history so that you can determine which one is right for your project. å¦‚æžœä½ ä½¿ç”¨ React Routerï¼Œå®ƒèƒ½è‡ªåŠ¨åˆ›å»ºhistoryå¯¹è±¡ï¼Œæ‰€ä»¥ä½ å¯èƒ½æ°¸è¿œä¸å¿…ä¸Žhistoryç›´æŽ¥äº¤äº’ã€‚ç„¶è€Œï¼Œç†è§£historyçš„å‡ ç§ç±»åž‹ä¹‹é—´çš„å·®å¼‚è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™æ ·ä½ æ‰èƒ½å†³å®šå“ªä¸€ç§èƒ½é€‚ç”¨äºŽä½ çš„é¡¹ç›®ã€‚ What is history? ä»€ä¹ˆæ˜¯historyï¼ŸNo matter which type of history you create, you will end up with an object that has nearly the same properties and methods. ä¸è®ºä½ åˆ›å»ºäº†å“ªç§ç±»åž‹çš„historyï¼Œä½ éƒ½å°†å¾—åˆ°ä¸€ä¸ªå…·æœ‰å‡ ä¹Žç›¸åŒå±žæ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ Location ä½ç½®The most important property of a history object is the location. The location object reflects â€œwhereâ€ your application currently is. It contains a number of properties that are derived from a URL. These are pathname , search [1], and hash. history å¯¹è±¡æœ€é‡è¦çš„å±žæ€§æ˜¯locationã€‚locationå¯¹è±¡åæ˜ äº†ä½ çš„åº”ç”¨ç¨‹åºå½“å‰æ‰€åœ¨çš„ä½ç½®ã€‚å®ƒåŒ…å«äº†ä»ŽURLæ´¾ç”Ÿè¿‡æ¥çš„è‹¥å¹²å±žæ€§ã€‚å³ pathname , search[1] ,å’Œ hashã€‚ Additionally, each location has a unique key property associated with it. This key can be used to identify and store data specific to a location. å¦å¤–ï¼Œæ¯ä¸ªlocationéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ key å±žæ€§å…³è”ä¸Žä¹‹å…³è”ã€‚è¿™ä¸ª key å¯ä»¥è¢«ç”¨äºŽæ ‡è¯†å’Œå­˜å‚¨ä¸Žç‰¹å®šlocationç›¸å…³çš„æ•°æ® Finally, a location can have state associated with it. This provides a means of attaching data to a location that is not present in the URL. æœ€åŽï¼Œä¸€ä¸ªlocationè¿˜èƒ½æœ‰ä¸€ä¸ª state ä¸Žä¹‹å…³è”ã€‚å®ƒæä¾›äº†ä¸€ç§å°†æ•°æ®é™„åŠ åˆ°URLä¸­æ²¡æœ‰å‡ºçŽ°çš„ä½ç½®çš„æ–¹æ³•ã€‚ 1234567&#123; pathname: &apos;/here&apos;, search: &apos;?key=value&apos;, hash: &apos;#extra-information&apos;, state: &#123; modal: true &#125;, key: &apos;abc123&apos;&#125; When a history object is created, it will need an initial location. How this is determined is different for each type of history. For example, the browser history will parse the current URL. å½“ä¸€ä¸ª history å¯¹è±¡è¢«åˆ›å»ºï¼Œå®ƒå°±ä¼šéœ€è¦ä¸€ä¸ªåˆå§‹çš„ locationã€‚åœ¨å„ç§ç±»åž‹çš„ history ä¸­ï¼Œå¦‚ä½•ç¡®å®šè¿™ä¸ªåˆå§‹ä½ç½®æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œbrowser historyä¼šå°†å½“å‰çš„URLè½¬æ¢ä¸ºå½“å‰ locationã€‚ One location to rule them all?While there is only one current location that we can access, the history object keeps track of an array of locations. The ability to add locations and move throughout the location array is what makes history â€œhistoryâ€. If history only knew about the current location, it would be more aptly named â€œpresentâ€. è™½ç„¶æˆ‘ä»¬åªèƒ½è®¿é—®ä¸€ä¸ªå½“å‰ä½ç½®ï¼Œä½†æ˜¯ history å¯¹è±¡ä¼šè·Ÿè¸ªä¸€ç»„ location ã€‚èƒ½åœ¨ location æ•°ç»„ä¸­å®Œæˆæ·»åŠ å’Œç§»åŠ¨çš„èƒ½åŠ›è®© history æˆä¸ºçœŸæ­£çš„ â€œhistoryâ€ã€‚å¦‚æžœ history åªçŸ¥é“å½“å‰çš„ locationï¼Œé‚£ä¹ˆå®ƒè¢«å«æˆ â€œpresentâ€ å¯èƒ½ä¼šæ›´åˆé€‚ä¸€ç‚¹ã€‚ In addition to an array of locations, the history also maintains an index value, which refers to the position of current location in the array. é™¤äº†ä¸€ç»„ location ï¼Œhistory è¿˜ç»´æŠ¤äº†ä¸€ä¸ª index ç´¢å¼•å€¼ï¼Œå®ƒæŒ‡å‘äº† location æ•°ç»„ä¸­å½“å‰ location çš„ä½ç½®ã€‚ For the memory history, these are explicitly defined. For both the browser and hash histories, the array and index is controlled by the browser and cannot be directly accessed [2]. å¯¹ä¸Ž memory history ï¼Œè¿™äº›æ˜¯æ˜Žç¡®å®šä¹‰çš„é¢ã€‚å¯¹äºŽ browser å’Œ hash historyï¼Œlocation æ•°ç»„å’Œ index ç´¢å¼•å€¼éƒ½æ˜¯è¢«æµè§ˆå™¨æŽ§åˆ¶å¹¶ä¸”ä¸å¯ç›´æŽ¥è®¿é—®çš„[2]ã€‚ Navigation å¯¼èˆªAn object with a location property isnâ€™t particularly exciting. Where a history object starts to become interesting is with the navigation methods. Navigation methods allow you to change the current location. ä¸€ä¸ªå…·æœ‰ location å±žæ€§çš„å¯¹è±¡æ²¡ä»€ä¹ˆå€¼å¾—ä»¤äººå…´å¥‹çš„ã€‚history å¯¹è±¡æœ‰è¶£çš„åœ°æ–¹åœ¨äºŽ å¯¼èˆªï¼ˆnavigationï¼‰ æ–¹æ³•ã€‚å¯¼èˆªæ–¹æ³•å…è®¸ä½ æ”¹å˜å½“å‰çš„ locationã€‚ PushThe push method allows you to go to a new location. This will add a new location to the array after the current location. When this happens, any â€œfutureâ€ locations (ones that exist in the array after the current location because of use of the back button) will be dropped. pushæ–¹æ³•è®©ä½ èƒ½è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„locationã€‚å®ƒä¼šåœ¨ location æ•°ç»„ä¸­çš„å½“å‰ location çš„åŽé¢æ·»åŠ ä¸€ä¸ªæ–°çš„ locationã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œä»»ä½• â€œfutureâ€ locationï¼ˆé‚£äº›ç”±äºŽä½¿ç”¨äº†åŽé€€æŒ‰é’®åœ¨æ•°ç»„ä¸­ä½äºŽ current location ä¹‹åŽçš„ locationï¼‰ å°†è¢«åˆ é™¤ã€‚ By default, when you click on a &lt;Link&gt; from React Router, it will use history.push to navigate. é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ ä»Ž React Router ç‚¹å‡»ä¸€ä¸ª&lt;Link&gt;ï¼Œå®ƒå°†ä½¿ç”¨ history.pushæ¥è¿›è¡Œå¯¼èˆªã€‚ 1history.push(&#123; pathname: &apos;/new-place&apos; &#125;) ReplaceThe replace method is similar to push, but instead of adding a new location, it will replace the location at the current index. â€œFutureâ€ locations will not be dropped. replace æ–¹æ³•ä¸Ž push ç›¸ä¼¼ï¼Œä½†æ˜¯ä¸åŒäºŽæ·»åŠ ä¸€ä¸ªæ–°çš„ location ï¼Œå®ƒä¼šæ›¿æ¢å½“å‰ index ç´¢å¼•ä½ç½®ä¸Šçš„ locationã€‚â€œFutureâ€ location å°†ä¸ä¼šè¢«åˆ é™¤ã€‚ Redirects are a good time to use replace. This is what React Routerâ€™s&lt;Redirect&gt; component uses. é‡å®šå‘æ˜¯ä½¿ç”¨ replace çš„å¥½æ—¶æœºã€‚React Routerçš„ &lt;Redirect&gt; ä¹Ÿä½¿ç”¨å®ƒã€‚ For example, if you are on one page and click a link that navigates to a second page, that second page might redirect to a third page. If the redirect uses push, clicking the back button from the third will bring you back to the second page (which potentially would redirect you back to the third page again). Instead, by using replace, going back from the third page will take you to the first. ä¾‹å¦‚ï¼Œå¦‚æžœä½ åœ¨ä¸€ä¸ªé¡µé¢ä¸Šç‚¹å‡»äº†ä¸€ä¸ª link å¯¼èˆªåˆ°ç¬¬äºŒä¸ªé¡µé¢ä¸Šï¼Œç¬¬äºŒä¸ªé¡µé¢å¯èƒ½é‡å®šå‘åˆ°ç¬¬ä¸‰ä¸ªé¡µé¢ã€‚å¦‚æžœé‡å®šå‘ä½¿ç”¨äº† push ï¼Œåœ¨ç¬¬ä¸‰ä¸ªé¡µé¢ç‚¹å‡»åŽé€€æŒ‰é’®å°†ä¼šå¸¦ä½ å›žåˆ°ç¬¬äºŒä¸ªé¡µé¢ï¼ˆç¬¬äºŒä¸ªé¡µé¢å¯èƒ½ä¼šå†æ¬¡å°†ä½ é‡å®šå‘åˆ°ç¬¬ä¸‰ä¸ªé¡µé¢ä¸Šï¼‰ã€‚ç›¸åï¼Œä½¿ç”¨ replace ä»Žç¬¬ä¸‰é¡µå°†å¸¦ä½ å›žåˆ°ç¬¬ä¸€é¡µã€‚ 1history.replace(&#123; pathname: &apos;/go-here-instead&apos; &#125;) Go, go, goFinally, there are three related methods: goBack, goForward, and go. æœ€åŽï¼Œæœ‰ä¸‰ä¸ªç›¸å…³çš„æ–¹æ³•ï¼šgoBack ï¼ŒgoForward ï¼Œand goã€‚ goBack goes back one page. This essentially decrements the index in the locations array by one. goBack å›žé€€ä¸€é¡µã€‚å®ƒå®žè´¨ä¸Šå°† location æ•°ç»„ä¸Šçš„ index å‡ 1ã€‚ 1history.goBack() goForward is the opposite of goBack, going forward one page. It will only work when there are â€œfutureâ€ locations to go to, which happens when the user has clicked the back button. ä¸Ž goBack ç›¸åï¼Œè¿‡Forward å‰è¿›ä¸€é¡µã€‚å®ƒä»…åœ¨æœ‰ future location æ—¶èµ·ä½œç”¨ï¼Œå½“ç”¨æˆ·ç‚¹å‡»äº†åŽé€€æŒ‰é’®æ—¶ä¼šå‡ºçŽ°è¿™ç§æƒ…å†µã€‚ 1history.goForward() go is a more powerful combination of goBack and goForward . Negative numbers passed to the method will be used to go backwards in the array, and positive numbers will be used to go forward. go æ˜¯ goBack ä¸Ž goForward çš„æ›´å¼ºå¤§çš„ç»„åˆã€‚ä¼ ç»™è¿™ä¸ªæ–¹æ³•çš„è´Ÿæ•°ä¼šè¢«ç”¨äºŽåœ¨æ•°ç»„ä¸­å›žé€€ï¼Œæ•´æ•°ä¼šè¢«ç”¨äºŽå‰è¿›ã€‚ 1history.go(-3) Listen!History uses the observer pattern to allow outside code to be notified when the location changes. history ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆobserver patternï¼‰ æ¥å…è®¸å¤–éƒ¨ä»£ç åœ¨ location æ”¹å˜æ—¶æŽ¥æ”¶é€šçŸ¥ã€‚ Each history object has a listen method, which takes a function as its argument. That function will be added to an array of listener functions that the history stores. Any time the location changes (whether this is by your code calling one of the history methods or because a user clicked a browser button), the history object will call all of its listener functions. This allows you to setup code that will update whenever the location changes. æ¯ç§ history å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª listen æ–¹æ³•ï¼ŒæŽ¥æ”¶ä¸€ä¸ª function ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ª function å°†è¢«æ·»åŠ åˆ°ä¸€ä¸ª history å­˜å‚¨çš„ç›‘å¬å‡½æ•°æ•°ç»„ä¸­ã€‚ä¸€æ—¦ location å˜åŠ¨ï¼ˆä¸è®ºæ˜¯ä½ çš„ä»£ç è°ƒç”¨äº†ä¸€ä¸ª history æ–¹æ³•è¿˜æ˜¯ä¸€ä¸ªç”¨æˆ·ç‚¹å‡»äº†æµè§ˆå™¨æŒ‰é’®ï¼‰ï¼Œhistory å¯¹è±¡å°†ä¼šè°ƒç”¨æ‰€æœ‰çš„ç›‘å¬å‡½æ•°ã€‚è¿™å…è®¸ä½ ç¼–å†™ä¸€äº›åœ¨ location å˜åŒ–æ—¶æ›´æ–°çš„ä»£ç ã€‚ 1234const youAreHere = document.getElementById(&apos;youAreHere&apos;)history.listen(function(location) &#123; youAreHere.textContent = location.pathname&#125;) A React Routerâ€™s router component will subscribe to its history object so that it can re-render whenever the location changes. React Router çš„è·¯ç”±ç»„ä»¶ä¼šè®¢é˜…ä»–çš„ history å¯¹è±¡ï¼Œè¿™æ ·æ— è®ºåˆé€‚ location å‘ç”Ÿäº†å˜åŒ–ï¼Œå®ƒéƒ½èƒ½é‡æ–°æ¸²æŸ“ã€‚ Linking things togetherEach history type also has a createHref method that can take a location object and output a URL. æ¯ç§ç±»åž‹çš„ history éƒ½æœ‰ä¸€ä¸ª createHrefæ–¹æ³•ï¼ŒæŽ¥æ”¶ä¸€ä¸ª location å¯¹è±¡ï¼Œè¾“å‡ºä¸€ä¸ª URLã€‚ Internally, history can navigate using location objects. However, any code that is unaware of the history package, such as anchor elements (&lt;a&gt;), does not know what location objects are. In order to generate HTML that will still properly navigate without knowledge of history, we must be able to generate real URLs. åœ¨å†…éƒ¨ï¼Œhistory å¯ä»¥ç”¨ location å¯¹è±¡å¯¼èˆªã€‚ä½†æ˜¯ï¼Œä»»ä½•ä¸æŽ¥è§¦ history åŒ…çš„ä»£ç ï¼Œä¾‹å¦‚é”šå…ƒç´ ï¼ˆ&lt;a&gt;ï¼‰,éƒ½ä¸çŸ¥é“ location å¯¹è±¡æ˜¯ä»€ä¹ˆã€‚ä¸ºäº†ç”Ÿæˆåœ¨ä¸äº†è§£ history çš„æƒ…å†µä¸‹ä»ç„¶èƒ½å¤Ÿæ­£ç¡®å¯¼èˆªçš„ HTMLï¼Œæˆ‘ä»¬å¿…é¡»ç”ŸæˆçœŸå®žçš„ URLã€‚ 123456789const location = &#123; pathname: &apos;/one-fish&apos;, search: &apos;?two=fish&apos;, hash: &apos;#red-fish-blue-fish&apos;&#125;const url = history.createHref(location)const link = document.createElement(&apos;a&apos;)a.href = url// &lt;a href=&apos;/one-fish?two=fish#red-fish-blue-fish&apos;&gt;&lt;/a&gt; That covers the essential history API. There are a couple more properties and methods, but the above should be enough to have a solid understanding of how to work with a history object. è¿™è¦†ç›–äº†å¿…è¦çš„ history APIã€‚è¿˜æœ‰ä¸€äº›å±žæ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯ä¸Šé¢è¿™äº›åº”è¯¥è¶³å¤Ÿè®©ä½ å……åˆ†äº†è§£å¦‚ä½•ä½¿ç”¨ history å¯¹è±¡ã€‚ With our powers combinedThere are some differences between the history types that you will need to consider when deciding which is best suited for your project. Between the three of them, any use case should be covered. åœ¨å†³å®šå“ªç§ç±»åž‹æœ€é€‚åˆä½ çš„é¡¹ç›®æ—¶ï¼Œæœ‰ä¸€äº› history ç±»åž‹ä¹‹é—´çš„å·®å¼‚ä½ éœ€è¦è€ƒè™‘ã€‚è¿™ä¸‰ç§ç±»åž‹ï¼Œåº”è¯¥èƒ½å¤Ÿè¦†ç›–ä»»ä½•ç”¨ä¾‹ã€‚ In the BrowserBrowser and hash histories are both intended to be used in a browser. They interact with the history and location web APIs so that the current location is the same as the one displayed in your browserâ€™s address bar. Browser å’Œ hash history éƒ½æ˜¯åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨çš„ã€‚å®ƒä»¬ä¸Ž history å’Œ location web APIäº¤äº’ï¼Œæ‰€ä»¥ current location ä¸Žæµè§ˆå™¨åœ°å€æ ä¸­æ˜¾ç¤ºçš„æ˜¯ä¸€æ ·çš„ã€‚ 12const browserHistory = createBrowserHistory()const hashHistory = createHashHistory() The biggest difference between the two is how they create a location from a URL. The browser history uses the full URL [3], while the hash history only uses the portion of the URL located after the first hash symbol. è¿™ä¸¤è€…æœ€å¤§çš„ä¸åŒæ˜¯å®ƒä»¬å¦‚ä½•ä»Žä¸€ä¸ª URL åˆ›å»º locationã€‚browser history å°†ä¼šä½¿ç”¨å®Œæ•´ URL[3]ï¼Œç„¶è€Œ hash history åªä¼šç”¨ URL ä¸­ä½äºŽç¬¬ä¸€ä¸ª hash ç¬¦å·ï¼ˆ#ï¼‰ä¹‹åŽçš„éƒ¨åˆ†ã€‚ 1234567891011121314// Given the following URLurl = &apos;http://www.example.com/this/is/the/path?key=value#hash&apos;// a browser history creates the location object:&#123; pathname: &apos;/this/is/the/path&apos;, search: &apos;?key=value&apos;, hash: &apos;#hash&apos;&#125;// a hash history creates the location object:&#123; pathname: &apos;hash&apos;, search: &apos;&apos;, hash: &apos;&apos;&#125; Hashing things outWhy would you ever want to use a hash history? When you navigate to a URL, in theory there is a corresponding file on your server. ä¸ºä»€ä¹ˆä½ ä¼šæƒ³è¦ä½¿ç”¨ hash historyï¼Ÿå½“ä½ å¯¼èˆªåˆ°ä¸€ä¸ª URLï¼Œç†è®ºä¸Šä½ çš„æœåŠ¡å™¨ä¸Šåº”è¯¥æœ‰ä¸€ä¸ªç›¸åº”çš„æ–‡ä»¶ã€‚ For servers that can respond to dynamic requests, the requested file does not actually have to exist. Instead, the server will examine the requested URL and decide what HTML to respond with. å¯¹é‚£äº›èƒ½å¤Ÿå“åº”åŠ¨æ€è¯·æ±‚çš„æœåŠ¡å™¨æ¥è¯´ï¼Œè¢«è¯·æ±‚çš„æ–‡ä»¶ä¸å¿…å®žé™…å­˜åœ¨ã€‚ç›¸åï¼ŒæœåŠ¡å™¨ä¼šæ£€æŸ¥è¯·æ±‚çš„ URL ï¼Œç„¶åŽå†³å®šè¿”å›žä»€ä¹ˆ HTMLã€‚ However, a static file server can only return the files that exist on the disk. The most dynamic thing that a static server can do is to return the index.html file from a directory when the URL only specifies the directory. ç„¶è€Œä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨åªèƒ½è¿”å›žæœåŠ¡å™¨ä¸Šå­˜åœ¨çš„æ–‡ä»¶ã€‚é™æ€æœåŠ¡å™¨èƒ½åšåˆ°çš„æœ€åŠ¨æ€çš„äº‹æƒ…å°±æ˜¯å½“ URLåªæŒ‡å®šåˆ°ä¸€ä¸ªç›®å½•çš„æ—¶å€™è¿”å›žè¿™ä¸ªç›®å½•ä¸‹çš„ index.htmlæ–‡ä»¶ã€‚ Update 4/25/18: I wrote a small article about Single-Page Applications and the Server that should help clarify the different ways a single-page application can be hosted. Update 4/25/18: æˆ‘å†™äº†ä¸€ç¯‡å°æ–‡å…³äºŽSingle-Page Applications and the Serverï¼Œåº”è¯¥èƒ½å¤Ÿå¸®åŠ©é˜æ˜Žå•é¡µé¢åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ‰˜ç®¡çš„ä¸åŒæ–¹æ³•ã€‚ Given the limitations imposed by a static file server, the simplest solution [4] for serving your application is to only have one â€œrealâ€ location on your server to fetch your HTML from. Of course, only having one location means only having one URL for your application, which would defeat the purpose of using history. To get around this limitation, the hash history uses the hash section of the URL to set and read locations. è€ƒè™‘åˆ°é™æ€æ–‡ä»¶æœåŠ¡å™¨æ–½åŠ çš„é™åˆ¶ï¼Œä¸ºä½ çš„åº”ç”¨ç¨‹åºæä¾›æœåŠ¡çš„æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆ[4]å°±æ˜¯åœ¨æœåŠ¡å™¨ä¸Šåªæœ‰ä¸€ä¸ªçœŸå®žçš„ location æ¥èŽ·å– HTMLã€‚å½“ç„¶ï¼Œåªæœ‰ä¸€ä¸ªä½ç½®æ„å‘³ç€ä½ çš„åº”ç”¨ç¨‹åºåªæœ‰ä¸€ä¸ª URLï¼Œè¿™ç ´åäº† history çš„ç›®çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé™åˆ¶ï¼Œhash history ä½¿ç”¨ URL çš„ hash éƒ¨åˆ†æ¥è®¾ç½®å’Œè¯»å– locationã€‚ 123456789// If example.com uses a static file server, these URLs would// both fetch html from /my-site/index.htmlhttp://www.example.com/my-site#/onehttp://www.example.com/my-site#/two// However, with a hash history, an application&apos;s location will be// different for each URL because the location is derived from// the hash section of the URL&#123; pathname: &apos;/one&apos; &#125;&#123; pathname: &apos;/two&apos; &#125; While the hash history works well, it can be considered a bit of a hack because of its reliance on the storing all of the path information in the hash of a URL. Therefore, it should only be considered when your website does not have a dynamic server to server your HTML. è™½ç„¶ hash history å·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯ç”±äºŽå®ƒä¾èµ–ä¸Žå°†æ‰€æœ‰ location ä¿¡æ¯ä¿å­˜åœ¨ URL çš„ hash ä¸­ï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºè¿™ç§æ–¹æ³•æœ‰ä¸€ç‚¹ç‚¹ hackã€‚æ‰€ä»¥å½“ä½ çš„ç½‘ç«™æ²¡æœ‰åŠ¨æ€æœåŠ¡å™¨æ¥æœåŠ¡ä½ çš„ HTML æ—¶å¯ä»¥è€ƒè™‘è¿™ç§æ–¹æ³•ã€‚ Memory: The Catch-all HistoryThe best thing about memory location is that you can use it anywhere that you can run JavaScript. å…³äºŽ memory history çš„æœ€å¥½çš„äº‹æƒ…æ˜¯ä½ èƒ½åœ¨ä»»ä½•å¯ä»¥è¿è¡Œ JavaScript çš„åœ°æ–¹ä½¿ç”¨å®ƒã€‚ A simple example is that you can use it in unit tests run via Node. That allows you to test code that relies on a history object without having to actually test with a browser. ä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯ä½ å¯ä»¥åœ¨ Node ä¸­è¿è¡Œçš„å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨å®ƒã€‚è¿™å…è®¸ä½ æµ‹è¯•ä¸€äº›ä¾èµ– history å¯¹è±¡çš„ä»£ç è€Œä¸å¿…çœŸçš„ç”¨ä¸€ä¸ªæµè§ˆå™¨æ¥æµ‹è¯•ã€‚ More importantly, you can also use a memory history in mobile apps. A memory history is used by react-router-native to enable location based navigation in react-native apps. æ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ç§»åŠ¨ç«¯ app ä¸­ä½¿ç”¨å®ƒã€‚memory history è¢«react-router-native ç”¨äºŽå…è®¸åœ¨react-nativeappä¸­ä½¿ç”¨åŸºäºŽ location çš„å¯¼èˆªã€‚ If you really wanted, you could even use a memory history in the browser (although you would be losing the integration with the address bar). å¦‚æžœä½ çœŸçš„æƒ³ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ memory historyï¼ˆä½†æ˜¯ä½ ä¼šå¤±åŽ»ä¸Žåœ°å€æ çš„é›†æˆï¼‰ã€‚ The biggest difference between the memory history and the browser and hash histories is that it maintains its own in-memory array of locations. When creating a memory history you can pass information to setup the initial state. This state would be an array of locations and the index of the â€œcurrentâ€ location in that array [5]. This is different from the browser and hash histories, which rely on the browser to already be storing the array of locations. memory history ä¸Ž browser å’Œ hash historyæœ€å¤§çš„ä¸åŒåœ¨äºŽå®ƒåœ¨å†…å­˜ä¸­ç»´æŠ¤äº†è‡ªå·±è€Œ location æ•°ç»„ã€‚å½“åˆ›å»ºä¸€ä¸ª memory history çš„æ—¶å€™ä½ å¯ä»¥ä¼ é€’æ¥è®¾ç½®åˆå§‹çŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€å°†æ˜¯ä¸€ä¸ª location æ•°ç»„å’Œè¿™ä¸ªæ•°ç»„ä¸­çš„ â€œcurrentâ€ location çš„ç´¢å¼•[5]ã€‚è¿™ä¸Ž browser å’Œ hash historyä¸åŒï¼ŒåŽä¸¤ä¸ªä¾èµ–äºŽæµè§ˆå™¨å·²ç»å­˜å‚¨äº† location æ•°ç»„ã€‚ 1234const history = createMemoryHistory(&#123; initialEntries: [&apos;/&apos;, &apos;/next&apos;, &apos;/last&apos;], initialIndex: 0&#125;) While you can roll your own history equivalent code, there are a lot of little gotchas in how browsers handle navigation that can cause a headache. Instead, it is probably easier to rely on history to think about these things for you. è™½ç„¶ä½ å¯ä»¥åˆ›é€ å‡ºè‡ªå·±çš„ history ç­‰æ•ˆçš„ä»£ç ï¼Œä½†æ˜¯åˆå¾ˆå¤šå…³äºŽæµè§ˆå™¨å¦‚ä½•å¤„ç†å¯¼èˆªçš„å°é—®é¢˜ä¼šè®©äººå¤´ç—›ã€‚ç›¸åï¼Œåˆ©ç”¨ history å¯¹è±¡æ¥æ€è€ƒè¿™äº›äº‹æƒ…å¯èƒ½ä¼šæ›´ç®€å•ã€‚ No matter which history type you end up choosing you will end up with a simple to implement, but powerful way to perform navigation and location-based rendering in your application. ä¸è®ºä½ æœ€åŽé€‰ç”¨äº†å“ªä¸€ç§ history ç±»åž‹ï¼Œä½ éƒ½å°†å¾—åˆ°ä¸€ä¸ªç®€å•æ˜“ç”¨ï¼Œä½†æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­å¤„ç†å¯¼èˆªå’ŒåŸºäºŽä½ç½®çš„æ¸²æŸ“çš„å¼ºå¤§æ–¹æ³•ã€‚ Notes[1] The search property is a string instead of a parsed object. This is because there are different search string parsing packages that handle some cases slightly differently. Instead of imposing one way to parse search strings, history leaves it up to you to decide how to parse the string. If you are looking for a way to parse search strings, some popular options are qs, query-string, querystring, and the native URLSearchParams. [2] This restriction is out of security. The browserâ€™s historyâ€™s location array contains more than just the locations that have been visited within your application. Allowing access to this list would leak information about a userâ€™s browsing history that websites should not be allowed access to. [3] By default, the browser history creates location objects whose pathname is the URLâ€™s full pathname. However, you can specify a basename for a history, in which case a portion of the full pathname will be effectively ignored. 1234const history = createBrowserHistory(&#123; basename: &apos;/path&apos; &#125;)// given the url: http://www.example.com/path/here// the history object will create the location&#123; pathname: &apos;/here&apos;, ... &#125; [4] Theoretically you could serve the same HTML file from every valid URL in your application. If all of your URLs are static, this could work, but it would create lots of redundant files. If any of your URLs use parameters to match a large number of possible values, this is infeasible. [5] If you do not provide a memory history with initial locations and index, it will fallback to default values: 12entries = [&#123; pathname: &apos;/&apos; &#125;]index = 0 This might be good enough for most applications, but being able to pre-populate the history can be very useful for things like session restoration. JavaScript React React Router]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>History</category>
      </categories>
      <tags>
        <tag>ç¿»è¯‘</tag>
        <tag>æµè§ˆå™¨</tag>
        <tag>history</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS 7.4 é…ç½®è·¯ç”±ç½‘å…³æœåŠ¡å™¨]]></title>
    <url>%2F2018%2F09%2F07%2FCentOS7.4%E9%85%8D%E7%BD%AE%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[Linuxå…·æœ‰å†…æ ¸çº§çš„è·¯ç”±è¡¨ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰å¯ç”¨è½¬å‘åŠŸèƒ½çš„ï¼Œæ·»åŠ ç½‘å¡çš„IPè½¬å‘åŠŸèƒ½ 123sudo vim /etc/sysctl.conf#æ·»åŠ å¦‚ä¸‹è¡Œnet.ipv4.ip_forward = 1 é‡è½½ç½‘ç»œé…ç½®ï¼Œä½¿ç”Ÿæ•ˆ 1sudo sysctl -p å¼€å¯publicåŒºåŸŸipä¼ªè£… 1sudo firewall-cmd --permanent --zone=public --add-masquerade å¼€å¯publicåŒºåŸŸipç«¯è½¬å‘ 1sudo firewall-cmd --permanent --zone=public --add-rich-rule='rule family=ipv4 source address=192.168.12.0/24 masquerade' ä¸Šé¢å‘½ä»¤ä¸­192.168.12.0/24 IPæ®µåŒ…å«äº†è·¯ç”±å™¨IPï¼š192.168.12.252ï¼Œè¿™æ ·è®¾ç½®ä¼šå¯¼è‡´CentOSä¸Žè·¯ç”±å™¨çš„é€šä¿¡è¢«è½¬å‘ï¼ŒVPNæ–­å¼€è¿žæŽ¥ï¼Œè¿™é‡Œåªéœ€è¦æŒ‡å®šæˆ‘ä»¬éœ€è¦çš„ä¸€éƒ¨åˆ†ç½‘æ®µå°±å¯ä»¥äº†ã€‚ é‡æ–°åŠ è½½é˜²ç«å¢™é…ç½® 1sudo firewall-cmd --reload]]></content>
      <categories>
        <category>Linux</category>
        <category>Network</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>vpn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS7.4æ­å»ºL2TP/IPSec VPN Client]]></title>
    <url>%2F2018%2F09%2F07%2FCentOS7.4%E6%90%AD%E5%BB%BAL2TPIPSec%20VPN%2F</url>
    <content type="text"><![CDATA[å®‰è£…ipsecå’Œl2tpåè®®å·¥å…· 1sudo yum install libreswan xl2tpd é…ç½®æ–‡ä»¶ 12345678910111213141516171819202122232425# /etc/ipsec.d/work.confconfig setup keep-alive=300conn Work authby=secret pfs=yes auto=add keyingtries=%forever dpddelay=30 dpdtimeout=120 dpdaction=restart rekey=yes rekeymargin=1h ikelifetime=8h keylife=1h type=transport left=%defaultroute leftprotoport=udp/l2tp right=civnet.vicp.net rightprotoport=udp/l2tp ike=aes_ctr,aes_cbc,camellia_cbc,serpent_cbc,twofish_cbc,3des,3DES-SHA1;MODP1024 phase2alg=aes-HMAC_SHA1,3DES-HMAC_SHA1 sha2-truncbug=yes 123# cat /etc/ipsec.d/Work.secrets%any civnet.vicp.net : PSK "civvpn.vicp.net" 123456789# cat /etc/xl2tpd/xl2tpd.conf[lac Work]lns = civnet.vicp.netppp debug = yespppoptfile=/etc/ppp/options.ppplength bit = yesredial = yesautodial = yes 12345678910111213141516# cat /etc/ppp/options.pppipcp-accept-localipcp-accept-remoterefuse-eaprequire-mschap-v2noccpnoauthidle 86400mtu 1400mru 1400nodefaultroutedebugconnect-delay 5000name gitlabserverpassword gitlabserver æŸ¥çœ‹æ—¥å¿— 1sudo tail -f /var/log/messages | grep -v "journal" å¯åŠ¨ipsecæœåŠ¡ 1sudo systemctl start ipsec æ—¥å¿—è¾“å‡º 12345Sep 7 20:05:55 gitlabserver systemd: Stopping Internet Key Exchange (IKE) Protocol Daemon for IPsec...Sep 7 20:05:55 gitlabserver whack: 002 shutting downSep 7 20:05:55 gitlabserver systemd: Starting Internet Key Exchange (IKE) Protocol Daemon for IPsec...Sep 7 20:05:55 gitlabserver ipsec: nflog ipsec capture disabledSep 7 20:05:55 gitlabserver systemd: Started Internet Key Exchange (IKE) Protocol Daemon for IPsec. å¯åŠ¨xl2tpdæœåŠ¡ 1sudo systemctl start xl2tpd æ—¥å¿—è¾“å‡º 123456789101112131415161718Sep 7 20:08:38 gitlabserver pppd[8312]: Sent 714675 bytes, received 3429972 bytes.Sep 7 20:08:38 gitlabserver pppd[8312]: Overriding mtu 1500 to 1400Sep 7 20:08:38 gitlabserver pppd[8312]: Overriding mru 1500 to mtu value 1400Sep 7 20:08:38 gitlabserver pppd[8312]: Terminating on signal 15Sep 7 20:08:38 gitlabserver NetworkManager[898]: &lt;info&gt; [1536322118.7692] device (ppp0): state change: disconnected -&gt; unmanaged (reason 'connection-assumed', sys-iface-state: 'external')Sep 7 20:08:44 gitlabserver pppd[8312]: Connection terminated.Sep 7 20:08:44 gitlabserver avahi-daemon[830]: Withdrawing workstation service for ppp0.Sep 7 20:08:44 gitlabserver pppd[8312]: Modem hangupSep 7 20:08:44 gitlabserver pppd[8312]: Exit.Sep 7 20:08:44 gitlabserver systemd: Unit xl2tpd.service entered failed state.Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Not looking for kernel SAref support.Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Using l2tp kernel support.Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: xl2tpd version xl2tpd-1.3.8 started on gitlabserver.localdomain PID:31374Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Written by Mark Spencer, Copyright (C) 1998, Adtran, Inc.Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Forked by Scott Balmos and David Stipp, (C) 2001Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Inherited by Jeff McAdams, (C) 2002Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Forked again by Xelerance (www.xelerance.com) (C) 2006-2016Sep 7 20:08:44 gitlabserver xl2tpd: xl2tpd[31374]: Listening on IP address 0.0.0.0, port 1701 åˆ›å»ºè¿žæŽ¥ 12sudo ipsec auto --up worksudo xl2tpd-control connect work æ—¥å¿—è¾“å‡º 1234567891011121314151617Sep 7 20:12:24 gitlabserver xl2tpd: xl2tpd[20538]: Connecting to host civnet.vicp.net, port 1701Sep 7 20:12:24 gitlabserver xl2tpd: xl2tpd[20538]: Connection established to 171.113.154.63, 1701. Local: 45773, Remote: 36724 (ref=0/0).Sep 7 20:12:24 gitlabserver xl2tpd: xl2tpd[20538]: Calling on tunnel 45773Sep 7 20:12:24 gitlabserver xl2tpd: xl2tpd[20538]: Call established with 171.113.154.63, Local: 31692, Remote: 20120, Serial: 1 (ref=0/0)Sep 7 20:12:24 gitlabserver pppd[31767]: Plugin pppol2tp.so loaded.Sep 7 20:12:24 gitlabserver pppd[31767]: pppd 2.4.5 started by root, uid 0Sep 7 20:12:24 gitlabserver NetworkManager[898]: &lt;info&gt; [1536322344.5696] manager: (ppp0): new Ppp device (/org/freedesktop/NetworkManager/Devices/470)Sep 7 20:12:24 gitlabserver pppd[31767]: Using interface ppp0Sep 7 20:12:24 gitlabserver pppd[31767]: Connect: ppp0 &lt;--&gt;Sep 7 20:12:24 gitlabserver pppd[31767]: Overriding mtu 1500 to 1400Sep 7 20:12:24 gitlabserver pppd[31767]: Overriding mru 1500 to mtu value 1400Sep 7 20:12:27 gitlabserver pppd[31767]: CHAP authentication succeeded: Access grantedSep 7 20:12:27 gitlabserver pppd[31767]: CHAP authentication succeededSep 7 20:12:27 gitlabserver pppd[31767]: local IP address 10.1.0.2Sep 7 20:12:27 gitlabserver pppd[31767]: remote IP address 10.1.0.1Sep 7 20:12:27 gitlabserver NetworkManager[898]: &lt;info&gt; [1536322347.5741] device (ppp0): state change: unmanaged -&gt; unavailable (reason 'connection-assumed', sys-iface-state: 'external')Sep 7 20:12:27 gitlabserver NetworkManager[898]: &lt;info&gt; [1536322347.5746] device (ppp0): state change: unavailable -&gt; disconnected (reason 'none', sys-iface-state: 'external') æ£€æŸ¥è·¯ç”±ï¼Œè¿žæŽ¥æˆåŠŸåŽä¼šåœ¨ç³»ç»Ÿè·¯ç”±ä¸­å¢žåŠ ä¸€ä¸ªppp0çš„ç½‘ç»œæŽ¥å£ 12345678[gitlab@gitlabserver ~]$ route -nKernel IP routing tableDestination Gateway Genmask Flags Metric Ref Use Iface0.0.0.0 192.168.12.252 0.0.0.0 UG 100 0 0 enp2s010.1.0.1 0.0.0.0 255.255.255.255 UH 0 0 0 ppp0172.17.0.0 0.0.0.0 255.255.0.0 U 0 0 0 docker0192.168.12.0 0.0.0.0 255.255.255.0 U 100 0 0 enp2s0192.168.122.0 0.0.0.0 255.255.255.0 U 0 0 0 virbr0 æˆåŠŸåŽå…è®¸è¿›ç¨‹è‡ªåŠ¨å¯åŠ¨ 1sudo systemctl enable xl2tpd å‚è€ƒæ–‡æ¡£ Securing L2TP using IPsec Streisand How to Connect to L2TP/IPsec VPN on Linux SECURING VIRTUAL PRIVATE NETWORKS (VPNS) USING LIBRESWAN [strongSwan] L2TP over strongswan Linux VPN å®¢æˆ·ç«¯ VPN server for remote clients using IKEv1 with L2TP VPN Feature Guide for Security Devices]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>vpn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµè§ˆå™¨ç¼“å­˜ç­–ç•¥äº¤äº’â€”â€”maxAge ä¸Ž maxStale]]></title>
    <url>%2F2018%2F08%2F18%2F%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%E2%80%94%E2%80%94maxAge%E4%B8%8EmaxStale%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šCache Policy Interactionâ€”Maximum Age and Maximum Staleness To help ensure that the freshest content is returned to the client application, the interaction of client cache policy and server revalidation requirements always results in the most conservative cache policy. All the examples in this topic illustrate the cache policy for a resource that is cached on January 1 and expires on January 4. ä¸ºç¡®ä¿å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¢«è¿”å›žæœ€æ–°çš„å†…å®¹ï¼Œå®¢æˆ·ç«¯ç¼“å­˜ç­–ç•¥ä¸ŽæœåŠ¡ç«¯éªŒè¯çš„äº¤äº’æ€»æ˜¯äº§ç”Ÿæœ€ä¿å®ˆçš„ç¼“å­˜ç­–ç•¥ã€‚è¿™ä¸ªè¯é¢˜ä¸­çš„æ‰€æœ‰ç¤ºä¾‹éƒ½æ˜¯è¯´æ˜Žä¸€ä¸ª1æœˆ1æ—¥è¢«ç¼“å­˜ï¼Œå¹¶åœ¨1æœˆ4æ—¥åˆ°æœŸçš„èµ„æºçš„ç¼“å­˜ç­–ç•¥ã€‚ In the following examples, the maximum staleness value (maxStale) is used in conjunction with a maximum age (maxAge): ä¸‹é¢çš„ä¾‹å­ä¼šå°†æœ€å¤§è¿‡æœŸå€¼ï¼ˆmaxStaleï¼‰ä¸Žæœ€å¤§å¹´é¾„ï¼ˆmaxAgeï¼‰ç»“åˆä½¿ç”¨ï¼š If the cache policy sets maxAge = 5 days and does not specify a maxStale value, according to the maxAgevalue, the content is usable until January 6. However, according to the serverâ€™s revalidation requirements, the content expires on January 4. Because the content expiration date is more conservative (sooner), it takes precedence over the maxAge policy. Therefore, the content expires on January 4 and must be revalidated even though its maximum age has not been reached. å¦‚æžœç¼“å­˜ç­–ç•¥è®¾ç½®maxAge = 5 å¤©å¹¶ä¸”æ²¡æœ‰æŒ‡å®šä¸€ä¸ªmaxStale å€¼ï¼Œæ ¹æ®maxAge å€¼ï¼Œè¯¥å†…å®¹åœ¨1æœˆ6æ—¥ä¹‹å‰å¯ç”¨ã€‚ç„¶è€Œæ ¹æ®æœåŠ¡ç«¯éªŒè¯è¦æ±‚ï¼Œè¯¥å†…å®¹åœ¨1æœˆ4æ—¥è¿‡æœŸã€‚å› ä¸ºå†…å®¹è¿‡æœŸæ—¥æœŸæ›´ä¸ºä¿å®ˆï¼ˆæ›´å¿«ï¼‰ï¼Œå®ƒå°†ä¼˜å…ˆäºŽmaxAgeç­–ç•¥ã€‚å› æ­¤ï¼Œå³ä½¿æ²¡æœ‰è¾¾åˆ°æœ€å¤§å¹´é¾„ï¼Œè¯¥å†…å®¹ä¹Ÿå°†åœ¨1æœˆ4æ—¥è¿‡æœŸï¼Œå¿…é¡»è¢«é‡æ–°éªŒè¯ã€‚ If the cache policy sets maxAge = 5 days and maxStale = 3 days, according to the maxAge value, the content is usable until January 6. According to the maxStale value, the content is usable until January 7. Therefore, the content gets revalidated on January 6. å¦‚æžœç¼“å­˜ç­–ç•¥è®¾ç½®äº†maxAge = 5å¤©ï¼ŒmaxStale = 3å¤©ã€‚æ ¹æ® maxAge å€¼ï¼Œè¯¥å†…å®¹åœ¨1æœˆ6æ—¥å‰å¯ç”¨ï¼Œæ ¹æ®maxStale å€¼ï¼Œè¯¥å†…å®¹åœ¨1æœˆ7æ—¥å‰å¯ç”¨ã€‚å› æ­¤ï¼Œè¯¥å†…å®¹åœ¨1æœˆ6æ—¥é‡æ–°éªŒè¯ã€‚ If the cache policy sets maxAge = 5 days and maxStale = 1 day, according to the maxAge value, the content is usable until January 6. According to the maxStale value, the content is usable until January 5. Therefore, the content gets revalidated on January 5. å¦‚æžœç¼“å­˜ç­–ç•¥è®¾ç½®maxAgeå€¼ä¸º5å¤©ï¼ŒmaxStaleå€¼ä¸º1å¤©ï¼Œæ ¹æ®maxAge å€¼ï¼Œå†…å®¹åœ¨1æœˆ6æ—¥å‰å¯ç”¨ã€‚æ ¹æ®maxStaleå€¼ï¼Œå†…å®¹åœ¨1æœˆ5æ—¥å‰å¯ç”¨ï¼Œå› æ­¤ï¼Œå†…å®¹åœ¨1æœˆ5æ—¥ä¼šè¢«é‡æ–°éªŒè¯ã€‚ When the maximum age is less than the content expiration date, the more conservative caching behavior always prevails and the maximum staleness value has no effect. The following examples illustrate the effect of setting a maximum staleness (maxStale) value when the maximum age (maxAge) is reached before the content expires: å½“æœ€å¤§ å¹´é¾„å°äºŽå†…å®¹è¿‡æœŸæ—¥æœŸæ—¶ï¼Œæ€»æ˜¯å­˜åœ¨æ›´ä¿å®ˆçš„ç¼“å­˜è¡Œä¸ºï¼ˆå³æŒ‰ç…§æœ€å¤§å¹´é¾„ç¼“å­˜ï¼‰ï¼Œå¹¶ä¸”æœ€å¤§è¿‡æœŸå€¼ï¼ˆmaxStaleï¼‰å°†ä¸èµ·ä½œç”¨ã€‚ä¸‹é¢çš„ä¾‹å­è¯æ˜Žäº†ï¼Œå½“æœ€å¤§å¹´é¾„ï¼ˆmaxAgeï¼‰åœ¨å†…å®¹è¿‡æœŸæ—¥æœŸä¹‹å‰åˆ°æ¥æ—¶ï¼Œè®¾ç½®æœ€å¤§è¿‡æœŸå€¼ï¼ˆmaxStaleï¼‰çš„ä½œç”¨ã€‚ If the cache policy sets maxAge = 1 day and does not specify a value for maxStale value, the content is revalidated on January 2 even though it has not expired. å¦‚æžœå†…å®¹ç¼“å­˜ç­–ç•¥è®¾ç½®maxAge = 1å¤©å¹¶ä¸”æ²¡æœ‰æŒ‡å®šmaxStaleå€¼ï¼Œå†…å®¹åœ¨1æœˆ2æ—¥é‡æ–°éªŒè¯ï¼Œå³ä½¿è¿˜æ²¡è¿‡æœŸã€‚ If the cache policy sets maxAge = 1 day and maxStale = 3 days, the content is revalidated on January 2 to enforce the more conservative policy setting. å¦‚æžœç¼“å­˜ç­–ç•¥è®¾ç½®äº†maxAge = 1å¤©ï¼ŒmaxStale = 3å¤©ï¼Œå†…å®¹åœ¨1æœˆ2æ—¥é‡æ–°éªŒè¯æ¥å¼ºåˆ¶æ‰§è¡Œæ›´ä¿å®ˆçš„ç­–ç•¥è®¾ç½®ã€‚ If the cache policy sets maxAge = 1 day and maxStale = 1 day, the content is revalidated on January 2. å¦‚æžœç¼“å­˜ç­–ç•¥è®¾ç½®maxAge=1å¤©ï¼ŒmaxStale = 1å¤©ï¼Œå†…å®¹åœ¨1æœˆ2æ—¥é‡æ–°éªŒè¯ã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>Cache Policy</category>
      </categories>
      <tags>
        <tag>æµè§ˆå™¨</tag>
        <tag>ç¼“å­˜ç­–ç•¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Symbolic Links|ç¬¦å·é“¾æŽ¥]]></title>
    <url>%2F2018%2F08%2F10%2F%E8%AE%A9Git%E6%94%AF%E6%8C%81Windows%20Symbolic%20link%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šSymbolic links Short version: there is no exact equivalent for POSIX symlinks on Windows, and the closest thing is unavailable for non-admins by default. Therefore, symlink emulation support is switched off by default and needs to be configured by you, the user, via the core.symlinks=true config setting. ç®€ä»‹ï¼šWindowså¹³å°ä¸Šæ²¡æœ‰ä¸ŽPOSIXçš„symlinkså®Œå…¨å¯¹ç­‰çš„å¯¹è±¡ï¼Œæœ€æŽ¥è¿‘çš„ä¸€ç§ç±»åž‹ï¼ˆsymbolic linkï¼‰é»˜è®¤å¯¹éžç®¡ç†å‘˜ç”¨æˆ·æ˜¯ä¸å¯ç”¨çš„ã€‚æ‰€ä»¥ï¼Œåœ¨å®‰è£…Git-windowsçš„æ—¶å€™é»˜è®¤å…³é—­äº†æ”¯æŒ symlink çš„é€‰é¡¹ï¼Œéœ€è¦ç”¨æˆ·é€šè¿‡è®¾ç½® core.symlinks=true é…ç½®é¡¹æ¥æ‰‹åŠ¨é…ç½®ã€‚ BackgroundStarting with Windows Vista, there is support for symbolic links. These are not your grandfatherâ€™s Unix symbolic links; They differ in quite a few ways: Windowsä»ŽVistaå¼€å§‹æ”¯æŒsymbolic linksï¼ˆç¬¦å·é“¾æŽ¥ï¼‰ã€‚è¿™ä¸æ˜¯ä½ çˆ·çˆ·çš„Unixä¸Šçš„symbolic linksï¼Œä»–ä»¬éžå¸¸ä¸åŒï¼š Symbolic links are only available on Windows Vista and later, most notably not on XP Symbolic links åªåœ¨Windows Vista å’Œæ›´æ–°çš„ç‰ˆæœ¬ä¸­å¯ç”¨ï¼Œç”šè‡³XPä¸­éƒ½ä¸è¡Œã€‚ You need the SeCreateSymbolicLinkPrivilege privilege, which is by default assigned only to Administrators and guarded by UAC, but can be assigned to other users or user groups (see below). ä½ éœ€è¦SeCreateSymbolicLinkPrivilege æƒé™æ¥åˆ›å»ºSymbolic linksï¼Œè¿™ä¸ªæƒé™é»˜è®¤æ˜¯åªåˆ†é…ç»™Administratorsï¼Œè¢«UACå®ˆæŠ¤çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åˆ†é…ç»™å…¶ä»–ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚ Symbolic links on remote filesystems are disabled by default (call fsutil behavior query SymlinkEvaluation to find out) é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿä¸­çš„Symbolic linksï¼ˆè°ƒç”¨ fsutil behavior query SymlinkEvaluation å¯ä»¥çœ‹åˆ°ï¼‰ Symbolic links will only work on NTFS, not on FAT nor exFAT Symbolic links åªèƒ½ä½œç”¨åœ¨NTFSæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸èƒ½ç”¨äºŽFATå’ŒexFAT Windowsâ€™ symbolic links are typed: they need to know whether they point to a directory or to a file (for this reason, Git will update the type when it finds that it is wrong) Windows çš„Symbolic linksæ˜¯æœ‰ç±»åž‹çš„ï¼šå®ƒä»¬éœ€è¦çŸ¥é“å®ƒä»¬è¢«æŒ‡å‘çš„æ˜¯ç›®å½•è¿˜æ˜¯æ–‡ä»¶ï¼ˆå› æ­¤ï¼ŒGitåœ¨å‘çŽ°é”™è¯¯æ—¶ä¼šæ›´æ–°ç±»åž‹ï¼‰ Many programs do not understand symbolic links è®¸å¤šç¨‹åºä¸èƒ½è¯†åˆ«symbolic links For those reasons, Git for Windows disables support for symbolic links by default (it will still read them when it encounters them). You can enable support via the core.symlinks config variable, e.g. when cloning: å› ä¸ºè¿™äº›åŽŸå› ï¼ŒGit for Windows é»˜è®¤ç¦ç”¨äº†å¯¹Symbolic linksçš„æ”¯æŒï¼ˆå½“é‡åˆ°symbolic linksæ—¶ï¼ŒGitä»ç„¶ä¼šè¯»å–å®ƒä»¬ï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®é¡¹core.symlinksçš„å€¼æ¥å¯ç”¨å¯¹Symbolic linksçš„æ”¯æŒï¼Œä¾‹å¦‚åœ¨cloneä»“åº“çš„æ—¶å€™ï¼š 1git clone -c core.symlinks=true &lt;URL&gt; åˆ›å»º symbolic linksBy default, the ln -s command in Git Bash does not create symbolic links. Instead, it creates copies. é»˜è®¤æƒ…å†µä¸‹ï¼ŒGit Bashä¸­çš„ ln -s å‘½ä»¤ä¸ä¼šåˆ›å»ºsymbolic linksã€‚ç›¸åï¼Œå®ƒä¼šåˆ›å»ºå‰¯æœ¬ã€‚ To create symbolic links (provided your account has permission to do so), use the built-in mklink command, like so: è¦åˆ›å»ºSymbolic linksï¼ˆå¦‚æžœä½ çš„è´¦æˆ·æœ‰æƒé™è¿™æ ·åšï¼‰ï¼Œè¯·ä½¿ç”¨Windowsçš„cmd.exeå†…å»ºçš„mklink å‘½ä»¤ï¼Œåƒè¿™æ ·ï¼š 12mklink /d this-link-points-to c:\that-directory #åˆ›å»ºç›®å½•ç±»åž‹çš„symbolic linkmklink this-link-points-to c:\that-file #åˆ›å»ºæ–‡ä»¶ç±»åž‹çš„symbolic link å› ä¸ºæ‰§è¡Œmklinkéœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥åœ¨Windowså‘½ä»¤è¡Œä¸­æ‰§è¡Œmklinkæ—¶éœ€è¦ç”¨ç®¡ç†å‘˜æƒé™å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·ã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>å·¥å…·</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitlab Dockerå®¹å™¨ä¸­SSHç«¯å£å¤±æ•ˆé—®é¢˜]]></title>
    <url>%2F2018%2F08%2F06%2FGitlab-docker-ssh-port-failure%2F</url>
    <content type="text"><![CDATA[åœ¨Gitlabé…ç½®æ–‡ä»¶/srv/gitlab/config/gitlab.rbä¸­ï¼Œå°†SSHåè®®çš„ç«¯å£è®¾ç½®ä¸º8822äº†ï¼Œä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹ä¼šå‡ºçŽ°ç”¨SSHåè®®çš„Urlæ‰§è¡Œç½‘ç»œåŒæ­¥æ“ä½œæ—¶æç¤º&quot;è®¿é—®è¢«æ‹’ï¼Œå¯èƒ½æ˜¯æƒé™é—®é¢˜&quot; ã€‚ ä¾‹å¦‚åœ¨æˆ‘åœ¨æœåŠ¡å™¨ä¸Šsudo docker rm gitlab ä¹‹åŽå†é‡æ–° sudo docker runä¹‹åŽå°±ä¼šé‡çŽ°ä»¥ä¸Šé—®é¢˜ã€‚ æŽ’æŸ¥è¿‡ç¨‹å¦‚ä¸‹ï¼š SSHè¿žæŽ¥è¿œç¨‹è¿žæŽ¥åˆ°12.1æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹SSHè¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ 1sudo ps -aux | gerp sshd å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºè¾“å‡º å¯ä»¥çœ‹åˆ°12.1æœåŠ¡å™¨ä¸Šçš„sshdè¿›ç¨‹å¯åŠ¨çš„é…ç½®æ–‡ä»¶æ˜¯/assets/sshd_config ï¼Œè€Œä¸€èˆ¬é»˜è®¤çš„é…ç½®è·¯å¾„æ˜¯/etc/ssh/sshd_configï¼Œæ²¡æ‰¾åˆ°æ˜¯ä»€ä¹ˆåŽŸå› ï¼Œä¸è¿‡æœ‰äº†è¿™ä¸ªçº¿ç´¢å°±å¯ä»¥é¡ºè—¤æ‘¸ç“œäº†ã€‚ æ‰“å¼€é…ç½®æ–‡ä»¶ 1sudo vim /assets/sshd_config å‘çŽ°æ˜¯ç©ºçš„ã€‚ é‚£å°±åªèƒ½è¿›åˆ°gitlabçš„docker containeré‡Œé¢åŽ»çœ‹çœ‹äº† 12sudo docker exec -ti docker bashvim /assets/sshd_config å¦‚å›¾ å‘çŽ°è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢è®¾ç½®çš„ ssh ç«¯å£å·æ˜¯ 22ã€‚æˆ‘ä»¬æŠŠå®ƒæ”¹æˆ 8822 ç«¯å£ï¼Œ:wqä¿å­˜é€€å‡ºï¼Œservice ssh restart é‡å¯sshæœåŠ¡ï¼Œå°±è§£å†³é—®é¢˜äº†ã€‚]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>gitlab</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ Docker æ­å»ºç§æœ‰NPMä»“åº“]]></title>
    <url>%2F2018%2F08%2F03%2Fsinopia-private-npm-registry%2F</url>
    <content type="text"><![CDATA[å…³äºŽ Docker çš„ä½¿ç”¨ä¸åœ¨æœ¬æ–‡ä¹‹ä¸­ï¼Œè¯·è‡ªè¡Œå‚è€ƒå…¶ä»–æ–‡æ¡£ã€‚ ç»è¿‡æµ‹è¯•ï¼Œ keyvanfatehi/sinopia å¯ç”¨ã€‚ å°† docker image æ‹‰ä¸‹æ¥ 1docker pull keyvanfatehi/sinopia å°† keyvanfatehi/sinopia è·‘èµ·æ¥ 1docker run --name sinopia -d -p 4873:4873 keyvanfatehi/sinopia dockerè¿è¡Œåœ¨ä»£ç æœåŠ¡å™¨ä¸Šï¼Œæ­¤æ—¶é€šè¿‡ http://192.168.12.1:4873 å¯ä»¥è®¿é—®ç§æœ‰NPM ä»“åº“ç½‘é¡µã€‚ å‘å¸ƒ JavaScript ç±»åº“æ·»åŠ ç¤ºä¾‹ç±»åº“é¡¹ç›® Hello 1234mkdir Hellocd Helloyarn init -y # npm init -ytouch index.js åœ¨ index.js å†…æ·»åŠ å¦‚ä¸‹å†…å®¹ 12345let greeting = function(name) &#123; return &apos;Hello &apos; + name;&#125;module.exports = greeting; è¿™ä»½ä»£ç å¯¼å‡ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œå·²ç»å¯ä»¥å‘å¸ƒå’Œè¢«ä¾èµ–äº†ã€‚ npm adduser åˆæ¬¡ä½¿ç”¨è¿™ä¸ªç§æœ‰ä»“åº“éœ€è¦æ·»åŠ ç”¨æˆ· 1npm adduser --registry http://192.168.12.1:4873 npm publish å†æŠŠä¸Šé¢çš„ä»£ç å‘å¸ƒä¸ŠåŽ» 1npm publish . --registry http://192.168.12.1:4873 NPM æœ‰è‡ªå·±çš„ç‰ˆæœ¬å’Œå‘å¸ƒç­–ç•¥ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ npm help version npm help publish å‘å¸ƒå¯èƒ½å› ä¸ºç‰ˆæœ¬é—®é¢˜å¤±è´¥ï¼Œè¿½åŠ è°“è¯ â€“force å¯å¼ºåˆ¶å‘å¸ƒä½†å¹¶éžæ˜¯å¸¸è§„æ“ä½œã€‚ å‘å¸ƒåŽçš„ç®¡ç†é¡µé¢å›¾ç¤º å¼•ç”¨å·²å‘å¸ƒçš„ç±»åº“æ·»åŠ ç¤ºä¾‹ä¸šåŠ¡é¡¹ç›® myDemo 1234mkdir myDemocd myDemoyarn init -y # npm init -ytouch index.js å¼•ç”¨ Hello 1yarn add Hello --dev --registry http://192.168.12.1:4873 åœ¨ index.js å†…æ·»åŠ å¦‚ä¸‹å†…å®¹ 123456const Hello = require(&apos;Hello&apos;);(function() &#123; let greeting = Hello(&apos;Rattz&apos;); console.log(greeting);&#125;)(); è¿è¡Œèµ·æ¥ 12node index.jsHello Rattz è‡³æ­¤ç§æœ‰NPMä»“åº“æ­å»ºã€ç±»åº“å‘å¸ƒã€ä¾èµ–å¼•ç”¨çš„éƒ¨åˆ†å·²ç»å®Œæˆã€‚]]></content>
      <categories>
        <category>FE</category>
        <category>å·¥ç¨‹åŒ–</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>npm</tag>
        <tag>sinopia</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨vimå†™ä»£ç ]]></title>
    <url>%2F2018%2F07%2F26%2F%E7%94%A8vim%E5%86%99%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[Vim is a great text editor which can be much more powerful then any GUI editor or IDE. It has its learning curve, but once you are used to it youâ€™ll never want to switch to anything else. Hereâ€™s a quick tutorial on how to use and customize vim for working with code. BasicsFeel free to skip this first part if you are familiar with vim already. First, letâ€™s get the hang of moving around. You can use arrow keys or h, j, k and l to move around. Holding Ctrl while moving will allow you to move between words (separated by spaces, tabulation, or line breaks), holding Shift allows you to do so with all punctuation characters including spaces and line breaks. Typing :147 will get you to the line 147, /foo will get you to the first occurrence of foo, / will repeat the last search. Hit i to enter insert mode and type in text. Hit Esc to go back. Key a does the same thing, but sets the cursor after the selected character. Hit Insert to switch between insert and replace modes. Typing in :w will write changes to a file, :q exits the editor, :e &lt;filename&gt; opens another file. Sometimes you need to do some copy-pasting: copy (yank) line with Y and paste it with p. You should know that vim allows you to prefix the majority of commands with a number: typing in 13Y will yank 13 lines, 40j will take you 40 lines down, etc. Command x will delete a character, dd will delete a whole line. Of course, you can prefix it with a number if you need to delete more then one line. :%s/foo/bar will find and replace the first occurrence of foo with bar, :%s/foo/bar/g will do so within the whole file. Splitting windows is very helpful tool: :split &lt;filename&gt; will split the window horizontally, :vsplit &lt;filename&gt;will do so vertically. Hit Ctrl + w, and then arrow key will select an active view, Ctrl + w, r will swap the views. Simply type :q to close the window. CustomizingHereâ€™s example of a ~/.vimrc file, and the basic options necessary for editing code with vim. 1234567syntax onset tabstop=4set shiftwidth=4set smartindentset autoindentset expandtab Option syntax on enables syntax highlight, tabstop sets tab width, shiftwidth sets tab width for auto indentation, smartindent, autoindent enables indentation (smart indentation implies adding an extra indentation level after defining function, starting a loop, etc.), optional is expandtab, which tells vim to treat all tabs as spaces. If you are fan of limiting line width with n columns - add option colorcolumn=80, or (if your vim version is below 7.3) add the following lines: 12highlight OverLength ctermbg=red ctermfg=white guibg=#592929match OverLength /%80v.+/ That should highlight all text exceeding the 80 columns limit. Feel free to experiment with the options and start building up your own .vimrc. Using ctags with vimExuberant Ctags allows you to create â€œtagsâ€ for all your classes, functions, and variables to allow easily jumping between them. After installing ctags (package is also available in major repositories named ctags) generate tags: 12$ cd project/$ ctags -R * Open the main project file and move your cursor over to some function call. Hit Ctrl + ] to move to function definition, :tn will move you to the next definition for the function. Hitting Ctrl + t will return you back. Auto completion allows you not to bother with finishing words, variable or function names, and pretty much anything. That being said, Ctrl + n will finish the word for you or allow you to select the desired word from the list. This is just a basic example of what you can do with vim, for further info you can read vim documentation. I may be posting some more tips and tricks on using vim in future.]]></content>
      <categories>
        <category>å·¥å…·</category>
        <category>Vim</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SVN åˆ° Gitï¼Œè¿ç§»çš„å‡†å¤‡å·¥ä½œ]]></title>
    <url>%2F2018%2F07%2F22%2FSVN-to-Git-prepping-for-the-migration%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šSVN to Git - prepping for the migration åœ¨Why Gitä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†Gitå¯ä»¥å¸®åŠ©æ‚¨çš„å›¢é˜Ÿå˜å¾—æ›´åŠ æ•æ·çš„å¤šç§æ–¹å¼ã€‚ä¸€æ—¦ä½ å·²ç»å†³å®šè½¬æ¢ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¼„æ¸…æ¥šå¦‚ä½•å°†å·²æœ‰çš„å¼€å‘å·¥ä½œæµè¿ç§»åˆ°Gitã€‚ è¿™ç¯‡æ–‡ç« è§£é‡Šäº†ä½ åœ¨å°†å›¢é˜Ÿä»ŽSVNè½¬æ¢ä¸ºGitæ—¶å¯èƒ½ä¼šé­é‡åˆ°çš„æœ€å¤§å˜åŒ–ã€‚åœ¨è¿ç§»è¿‡ç¨‹ä¸­æœ€é‡è¦çš„äº‹æƒ…æ˜¯è¦è®°ä½Gitä¸æ˜¯SVNã€‚ä¸ºäº†ç†è§£Gitçš„å…¨éƒ¨æ½œåŠ›ï¼Œè¯·å°½åŠ›æ‹¥æŠ±ç‰ˆæœ¬æŽ§åˆ¶çš„æ–°æ€æƒ³ã€‚ For administrators Basic Git commands Git Migration Tools For developers For administrators å¯¹ç®¡ç†å‘˜é‡‡ç”¨Gitå¯èƒ½éœ€è¦å‡ å¤©åˆ°å‡ ä¸ªæœˆçš„æ—¶é—´ï¼Œå…·ä½“å–å†³äºŽå›¢é˜Ÿçš„è§„æ¨¡ã€‚æœ¬èŠ‚ä»‹ç»äº†åœ¨åŸ¹è®­å‘˜å·¥ä½¿ç”¨ Git ä»¥åŠä»Ž SVN è¿ç§»ä»“åº“åˆ° Gitè¿‡ç¨‹ä¸­å·¥ç¨‹ç»ç†éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚ Basic Git commands åŸºæœ¬Gitå‘½ä»¤Git æ›¾å› å…¶é™¡å³­çš„å­¦ä¹ æ›²çº¿å„¿é—»åã€‚ç„¶è€Œ Git ç»´æŠ¤è€…ä¸€ç›´åœ¨ç¨³æ­¥å‘å¸ƒæ–°çš„æ”¹è¿›ï¼Œä¾‹å¦‚åˆç†çš„é»˜è®¤å€¼å’Œä¸Šä¸‹æ–‡å¸®åŠ©ä¿¡æ¯ï¼Œè¿™ä½¿å¾—ä¸Šæ‰‹Gitçš„è¿‡ç¨‹æ›´åŠ è½»æ¾æ„‰æ‚¦ã€‚ Atlassian æä¾›äº†å…¨é¢çš„è‡ªå­¦Gitçš„ç³»åˆ—æ•™ç¨‹,ä¹ŸåŒ…å«äº†ç½‘ç»œè®¨è®ºå’Œåœ¨çº¿è®­ç»ƒè¯¾ç¨‹ã€‚æ‰€æœ‰è¿™äº›åº”è¯¥æ»¡è¶³äº†ä½ çš„å›¢é˜Ÿç€æ‰‹ä½¿ç”¨Gitæ‰€éœ€è¦çš„å…¨éƒ¨åŸ¹è®­é€‰æ‹©ã€‚ä¸ºäº†è®©ä½ èƒ½å¤Ÿé¡ºåˆ©å¼€å§‹ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¸¸è§Gitå‘½ä»¤çš„åˆ—è¡¨ï¼š Git task Notes Git commands Tell Git who you are Configure the author name and email address to be used with your commits.Note that Git strips some characters (for example trailing periods) from user.name. git config â€“global user.name â€œSam Smithâ€ git config â€“global user.email sam@example.com Create a new local repository git init Check out a repository Create a working copy of a local repository: git clone /path/to/repository For a remote server, use: git clone username@host:/path/to/repository Add files Add one or more files to staging (index): git add git add * Commit Commit changes to head (but not yet to the remote repository): git commit -m â€œCommit messageâ€ Commit any files youâ€™ve added with git add, and also commit any files youâ€™ve changed since then: git commit -a Push Send changes to the master branch of your remote repository: git push origin master Status List the files youâ€™ve changed and those you still need to add or commit: git status Connect to a remote repository If you havenâ€™t connected your local repository to a remote server, add the server to be able to push to it: git remote add origin List all currently configured remote repositories: git remote -v Branches Create a new branch and switch to it: git checkout -b Switch from one branch to another: git checkout List all the branches in your repo, and also tell you what branch youâ€™re currently in: git branch Delete the feature branch: git branch -d Push the branch to your remote repository, so others can use it: git push origin Push all branches to your remote repository: git push â€“all origin Delete a branch on your remote repository: git push origin : Update from the remote repository Fetch and merge changes on the remote server to your working directory: git pull To merge a different branch into your active branch: git merge View all the merge conflicts:View the conflicts against the base file:Preview changes, before merging: git diff git diff â€“base git diff After you have manually resolved any conflicts, you mark the changed file: git add Tags You can use tagging to mark a significant changeset, such as a release: git tag 1.0.0 CommitId is the leading characters of the changeset ID, up to 10, but must be unique. Get the ID using: git log Push all tags to remote repository: git push â€“tags origin Undo local changes If you mess up, you can replace the changes in your working tree with the last content in head:Changes already added to the index, as well as new files, will be kept. git checkout â€“ Instead, to drop all your local changes and commits, fetch the latest history from the server and point your local master branch at it, do this: git fetch origin git reset â€“hard origin/master Search Search the working directory for foo(): git grep â€œfoo()â€ Git Migration Tools Git è¿ç§»å·¥å…·æœ‰å¾ˆå¤šå·¥å…·å¯ä»¥å¸®åŠ©ä½ å°†å·²æœ‰çš„å·¥ç¨‹ä»ŽSVNè¿ç§»åˆ°Gitä¸Šï¼Œä½†æ˜¯åœ¨ä½ å†³å®šä½¿ç”¨å“ªç§å·¥å…·ä¹‹å‰ï¼Œä½ éœ€è¦å¼„æ¸…æ¥šä½ å¸Œæœ›å¦‚ä½•è¿ç§»è‡ªå·±çš„ä»£ç ã€‚ä½ æœ‰ä»¥ä¸‹é€‰é¡¹ï¼š è¿ç§»æ•´ä¸ªä»£ç åº“åˆ°Gitï¼ŒåŒæ—¶åœç”¨SVNã€‚ ä¸è¿ç§»çŽ°æœ‰å·¥ç¨‹åˆ°Gitï¼Œä½†æ˜¯æ–°çš„å·¥ç¨‹ä½¿ç”¨Gitã€‚ è¿ç§»ä¸€äº›å·¥ç¨‹åˆ°Gitï¼ŒåŒæ—¶åœ¨å…¶ä»–å·¥ç¨‹ä¸Šç»§ç»­ä½¿ç”¨SVNã€‚ åœ¨åŒä¸€ä¸ªå·¥ç¨‹ä¸ŠåŒæ­¥ä½¿ç”¨SVN å’Œ Gitã€‚ å®Œæ•´è¿ç§»åˆ°Gitä¼šé™ä½Žå¼€å‘æµç¨‹çš„å¤æ‚æ€§ï¼Œå› æ­¤è¿™æ˜¯é¦–é€‰æ–¹æ¡ˆã€‚ç„¶è€Œå¯¹é‚£äº›æ‹¥æœ‰æ•°åä¸ªå¼€å‘å›¢é˜Ÿå’Œå¯èƒ½å‡ ç™¾ä¸ªå·¥ç¨‹é¡¹ç›®çš„å¤§å…¬å¸æ¥è¯´ï¼Œè¿™ä¹Ÿä¸ä¸€å®šå¯è¡Œã€‚ ä½ é€‰æ‹©çš„è¿ç§»å·¥å…·å¾ˆå¤§ç¨‹åº¦å–å†³äºŽä½ æ‰€é€‰æ‹©çš„ä¸Šé¢çš„ç­–ç•¥ã€‚ä¸€äº›å¸¸è§çš„ SVN-to-Gitçš„è¿ç§»å·¥å…·ä»‹ç»å¦‚ä¸‹ã€‚ Atlassianâ€™s migration scripts Atlassiançš„è¿ç§»å·¥å…·å¦‚æžœä½ å¯¹çªç„¶è¿‡æ¸¡æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆAtlassiançš„è¿ç§»è„šæœ¬å¯¹ä½ æ¥è¯´æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚è¿™äº›è„šæœ¬æä¾›äº†å°†å·²æœ‰çš„SVNä»“åº“å¯é åœ°è½¬æ¢ä¸ºGitä»“åº“æ‰€éœ€è¦çš„å…¨éƒ¨å·¥å…·ã€‚ç”Ÿæˆçš„native-GitåŽ†å²è®°å½•å¯ç¡®ä¿ä½ åœ¨è½¬æ¢è¿‡ç¨‹åŽæ— é¡»å¤„ç†ä»»ä½•SVN-to-Gitçš„äº’æ“ä½œæ€§é—®é¢˜ã€‚ æˆ‘ä»¬æä¾›äº†å®Œæ•´çš„æŠ€æœ¯æ¼”ç»ƒ ï¼Œä½¿ç”¨è¿™äº›è„šæœ¬å°†æ‚¨çš„æ•´ä¸ªä»£ç åº“è½¬æ¢ä¸ºGitä»“åº“é›†åˆã€‚æ¼”ç»ƒè§£é‡Šäº†ä»Žæå–SVNä½œè€…ä¿¡æ¯åˆ°é‡æ–°ç»„ç»‡éžæ ‡å‡†SVNå­˜å‚¨åº“ç»“æž„çš„æ‰€æœ‰å†…å®¹ã€‚ SVN Mirror for Stash (now Bitbucket Server) pluginSVN Mirror for Stash æ˜¯ä¸€ä¸ªBitbucket Server æ’ä»¶ï¼Œå¯ä»¥è®©ä½ è½»æ¾åœ°ç»´æŠ¤å…¼å®¹SVNå’ŒGitçš„æ··åˆä»£ç åº“ã€‚å’ŒAtlassiançš„è¿ç§»è„šæœ¬ä¸åŒçš„æ˜¯ï¼ŒSVN Mirror for Stash å…è®¸ä½ åœ¨åŒä¸€ä¸ªå·¥ç¨‹ä¸ŠåŒæ­¥ä½¿ç”¨ Git å’Œ SVNï¼Œåªè¦ä½ å–œæ¬¢ã€‚ è¿™ä¸ªæŠ˜ä¸­çš„è§£å†³æ–¹æ¡ˆå¯¹å¤§å…¬å¸æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„é€‰æ‹©ã€‚å®ƒå…è®¸ä¸åŒçš„å›¢é˜Ÿåœ¨æ–¹ä¾¿æ—¶è¿ç§»å·¥ä½œæµï¼Œä»Žè€Œå®žçŽ°å¢žé‡é‡‡ç”¨Gitã€‚ What is Git-SVN?git-svnå·¥å…·æ˜¯ä¸€ä¸ªä½œç”¨äºŽæœ¬åœ°Gitä»“åº“å’Œ è¿œç¨‹SVNä»“åº“ä¹‹é—´çš„æŽ¥å£ã€‚Git-svnè®©å¼€å‘è€…å¯ä»¥åœ¨æœ¬åœ°ç¼–å†™å’Œå‘æœ¬åœ°Gitæäº¤ä»£ç ï¼Œç„¶åŽå°†æäº¤çš„å†…å®¹ç”¨ SVN commité£Žæ ¼çš„æ“ä½œæäº¤åˆ°SVNä¸­å¿ƒä»“åº“ã€‚è¿™åº”è¯¥æ˜¯æš‚æ—¶çš„ï¼Œä½†æ˜¯æŽ¢ç´¢ä»ŽSVNåˆ‡æ¢åˆ°Gitçš„è¿‡ç¨‹ä¸­å¾ˆæœ‰å¸®åŠ©ã€‚ å¦‚æžœä½ ä¸ç¡®å®šè¦åˆ‡æ¢åˆ°Gitå¹¶å¸Œæœ›è®©ä¸€äº›å¼€å‘è€…æŽ¢ç´¢Gitå‘½ä»¤è€Œä¸å…¨é¢è¿ç§»çš„æƒ…å†µä¸‹ï¼Œgit svn æ˜¯ä¸€ä¸ªé€‰æ‹©ã€‚å®ƒä¹Ÿéžå¸¸é€‚åˆåŸ¹è®­é˜¶æ®µ - è€Œä¸æ˜¯çªç„¶è¿‡æ¸¡ï¼Œä½ çš„å›¢é˜Ÿå¯ä»¥è½»æ¾åœ°ä½¿ç”¨æœ¬åœ°Gitå‘½ä»¤ï¼Œä¸å¿…æ‹…å¿ƒåä½œçš„å·¥ä½œæµã€‚ è¦æ³¨æ„ git svn åº”è¯¥åªæ˜¯ä½ çš„è¿ç§»è¿‡ç¨‹ä¸­çš„æš‚æ—¶é˜¶æ®µã€‚å› ä¸ºå®ƒä»ç„¶ä¾èµ–äºŽSVNè¿™ä¸ªåŽç«¯ï¼Œå®ƒæ— æ³•åˆ©ç”¨æ›´åŠ å¼ºå¤§çš„GitåŠŸèƒ½ï¼Œä¾‹å¦‚åˆ†æ”¯æˆ–è€…é«˜çº§åä½œå·¥ä½œæµç¨‹ã€‚ Rollout Strategies æŽ¨å‡ºç­–ç•¥è¿ç§»ä»£ç åº“åªæ˜¯åº”ç”¨Gitçš„ä¸€ä¸ªæ–¹é¢ã€‚ä½ ä¹Ÿåº”è¯¥è€ƒè™‘å¦‚ä½•å°†Gitä»‹ç»ç»™ä»£ç åº“èƒŒåŽçš„äººã€‚å¤–éƒ¨é¡¾é—®ï¼Œå†…éƒ¨Gitå† å†›å’Œé£žè¡Œå‘˜å›¢é˜Ÿæ˜¯å°†å¼€å‘å›¢é˜Ÿè¿ç§»åˆ°Gitçš„ä¸‰ä¸ªä¸»è¦ç­–ç•¥ã€‚ External Git Consultants å¤–éƒ¨é¡¾é—®Gité¡¾é—®åŸºæœ¬ä¸Šå¯ä»¥è±¡å¾æ€§åœ°æ”¶è´¹ä¸ºä½ å¤„ç†è¿ç§»è¿‡ç¨‹ã€‚è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ï¼Œä½ å¯ä»¥ä¸ç”¨è‡ªå·±èŠ±æ—¶é—´å­¦ä¹ å°±èƒ½åˆ›å»ºä¸€ä¸ªå®Œç¾Žé€‚é…ä½ çš„å›¢é˜Ÿçš„Gitå·¥ä½œæµã€‚å®ƒè¿˜å¯ä»¥ä¸ºæ‚¨æä¾›ä¸“å®¶åŸ¹è®­èµ„æºï¼Œå¦‚æžœä½ çš„å›¢é˜Ÿæ­£åœ¨å­¦ä¹ Gitã€‚ Atlassian Experts æ˜¯ä»ŽSVNè¿ç§»åˆ°Gitçš„ä¸“å®¶ï¼Œä¹Ÿæ˜¯å¯»æ‰¾Gité¡¾é—®çš„å¥½èµ„æºã€‚ å¦ä¸€æ–¹é¢ï¼Œè‡ªå·±è®¾è®¡å’Œå®žçŽ°ä¸€ä¸ªGitå·¥ä½œæµæ˜¯å›¢é˜Ÿç†è§£æ–°çš„å¼€å‘æµç¨‹çš„å†…éƒ¨å·¥ä½œçš„å¥½åŠžæ³•ã€‚è¿™ä¸­æ–¹å¼å¯ä»¥é¿å…å½“ä¸“å®¶ç¦»å¼€åŽï¼Œå›¢é˜Ÿé™·å…¥é»‘æš—çš„é£Žé™©ã€‚ Internal Git Champions å†…éƒ¨Gitå† å†›Gitå† å†›æ˜¯ä½ å…¬å¸å†…éƒ¨å¯¹ä½¿ç”¨Gitæ„Ÿåˆ°å¾ˆé«˜å…´çš„å¼€å‘è€…ã€‚åˆ©ç”¨å† å†›ç¨‹åºå‘˜å¯¹äºŽæ‹¥æœ‰å¼ºå¤§çš„å¼€å‘è€…æ–‡åŒ–çš„å…¬å¸å’Œæ¸´æœ›æˆä¸ºæ—©æœŸGitä½¿ç”¨è€…çš„çƒ­å¿ƒç¨‹åºå‘˜æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ ç›¸æ¯”äºŽå¤–é¢çš„é¡¾é—®ï¼Œè¿™ç§æ–¹å¼è¿˜æœ‰ä¸€ä¸ªæœ‰ç‚¹å°±æ˜¯èƒ½å¤Ÿå°†Gitä¸“ä¸šçŸ¥è¯†ä¿ç•™åœ¨å†…éƒ¨ã€‚ç„¶è€Œéœ€è¦å¤§é‡çš„æ—¶é—´æ¥è®­ç»ƒGitå† å†›ï¼Œè€Œä¸”éœ€è¦æ‰¿æ‹…é€‰æ‹©é”™è¯¯çš„Gitå·¥ä½œæµæˆ–è€…é”™è¯¯çš„å®žçŽ°çš„é£Žé™©ã€‚ Pilot Teams é£žè¡Œå‘˜å›¢é˜Ÿç¬¬ä¸‰ç§é€‰æ‹©æ˜¯ç”¨é£žè¡Œå‘˜å›¢é˜Ÿæµ‹è¯•ã€‚å¦‚æžœä½ æœ‰ä¸€ä¸ªå°å›¢é˜Ÿåœ¨ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„é¡¹ç›®ä¸Šå·¥ä½œï¼Œè¿™ç§æ–¹å¼æœ€å¥½ã€‚å°†å¤–éƒ¨ä¸“å®¶äºŽé£žè¡Œå‘˜å›¢é˜Ÿå†…éƒ¨çš„Gitå† å†›ç»„åˆç”šè‡³æ•ˆæžœæ›´ä½³ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯éœ€è¦æ•´ä¸ªå›¢é˜Ÿçš„æ”¯æŒï¼Œå¹¶ä¸”è¿˜é™åˆ¶äº†é€‰æ‹©é”™è¯¯å·¥ä½œæµçš„é£Žé™©ï¼Œå› ä¸ºå®ƒåœ¨è®¾è®¡æ–°çš„å¼€å‘æµç¨‹çš„æ—¶å€™èŽ·å¾—äº†æ•´ä¸ªå›¢é˜Ÿçš„è¾“å…¥ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒç¡®ä¿ç¡®ä¿æ¯”é¡¾é—®æˆ–å† å†›åœ¨ç‹¬è‡ªè®¾è®¡å·¥ä½œæµç¨‹æ—¶æ›´æ—©çš„æ•èŽ·åˆ°ä»»ä½•ç¼ºå¤±çš„éƒ¨åˆ†ã€‚ å¦ä¸€æ–¹é¢ï¼Œåˆ©ç”¨é£žè¡Œå‘˜å›¢é˜Ÿæ„å‘³ç€æ›´å¤šçš„åˆæœŸè®­ç»ƒå’Œè°ƒè¯•æ—¶é—´ï¼šå¹¶ä¸æ˜¯ä¸€ä¸ªå¼€å‘è€…åœ¨æ•´ç†å·¥ä½œæµï¼Œæ•´ä¸ªå¼€å‘å›¢é˜Ÿä¼šåœ¨ä»–ä»¬å¯¹æ–°çš„å·¥ä½œæµç¨‹æ„Ÿåˆ°èˆ’é€‚æ—¶æš‚æ—¶é™ä½Žå·¥ä½œæ•ˆçŽ‡ã€‚ Security and Permissions å®‰å…¨å’Œæƒé™è®¿é—®æŽ§åˆ¶æ˜¯ä½ éœ€è¦ä»Žæ ¹æœ¬ä¸Šé‡æ–°æ€è€ƒå¦‚ä½•ç®¡ç†ä»£ç åº“çš„Gitçš„ä¸€ä¸ªæ–¹é¢ã€‚ åœ¨SVNä¸­ï¼Œä½ é€šå¸¸å°†æ‰€æœ‰ä»£ç åº“å­˜æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ä¸­å¿ƒä»“åº“ä¸­ï¼Œç„¶åŽé™åˆ¶ä¸åŒå›¢é˜Ÿæˆ–è€…ä¸ªäººå¯¹æ–‡ä»¶å¤¹çš„è®¿é—®ã€‚åœ¨Gitä¸­ï¼Œè¿™ ä¸å†å¯èƒ½äº†ï¼šå¼€å‘è€…å¿…é¡»èƒ½å¤Ÿç­¾å‡ºæ•´ä¸ªä»“åº“æ‰èƒ½ä½¿ç”¨å®ƒã€‚ä½ é€šå¸¸ä¸èƒ½ç­¾å‡ºä¸€ä¸ªä»“åº“çš„å­é›†ï¼Œå°±åƒåœ¨SVNä¸Šæ—¶ä¸€æ ·ã€‚æƒé™åªèƒ½è¢«æŽˆäºˆæ•´ä¸ªGitä»“åº“ã€‚ è¿™å°±æ„å‘³ç€ä½ å¿…é¡»å°†åºžå¤§çš„å•ç‰‡SVNä»“åº“æ‹†åˆ†æˆå‡ ä¸ªå°çš„Gitä»“åº“ã€‚å½“æˆ‘ä»¬å°† Jira å¼€å‘å›¢é˜Ÿè¿ç§»åˆ°Gitä¸Šæ—¶ï¼Œæˆ‘ä»¬å®žé™…ä¸Šåœ¨Atlassiané‡åˆ°äº†è¿™ä¸ªç¬¬ä¸€æ‰‹èµ„æ–™ã€‚ è¯·è®°ä½ï¼ŒGitæ˜¯è¢«è®¾è®¡ç”¨äºŽä»Žå‡ åƒä¸ªç‹¬ç«‹Linuxå¼€å‘è€…é‚£é‡Œå®‰å…¨åœ°é›†æˆä»£ç è´¡çŒ®çš„ï¼Œæ‰€ä»¥ï¼Œå®ƒå¿…å®šæä¾›äº†ä¸€äº›æ–¹å¼æ¥ä¾›ä½ æ­å»ºä½ çš„å›¢é˜Ÿéœ€è¦çš„ä»»ä½•æ–¹å¼çš„è®¿é—®æŽ§åˆ¶ã€‚ä½†æ˜¯è¿™å¯èƒ½éœ€è¦é‡æ–°å®¡è§†æ‚¨çš„æž„å»ºå‘¨æœŸã€‚ å¦‚æžœä½ æ‹…å¿ƒè¦ç»´æŠ¤æ–°çš„Gitä»“åº“é›†åˆä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä½ å¯èƒ½ä¼šå‘çŽ°Gitä¹‹ä¸Šçš„ä¾èµ–å…³ç³»ç®¡ç†å±‚ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä¾èµ–ç®¡ç†å±‚å°†ä¼šæœ‰åŠ©äºŽæž„å»ºæœŸï¼Œå› ä¸ºéšç€é¡¹ç›®å¢žé•¿ï¼Œä½ éœ€è¦ç¼“å­˜æ¥åŠ é€Ÿæž„å»ºæ—¶é—´ã€‚å¯ä»¥åœ¨è¿™ç¯‡æœ‰ç”¨çš„æ–‡ç« ä¸­æ‰¾åˆ°æ¯ä¸ªæŠ€æœ¯æ ˆçš„æŽ¨èä¾èµ–å…³ç³»ç®¡ç†å±‚å·¥å…·åˆ—è¡¨ï¼šâ€œGitå’Œé¡¹ç›®ä¾èµ–å…³ç³»â€ . For developers å¼€å‘è€…A Repository for Every Developer æ¯ä¸ªå¼€å‘äººå‘˜çš„ä»£ç åº“ä½œä¸ºå¼€å‘è€…ï¼Œä½ éœ€è¦é€‚åº”çš„æœ€å¤§çš„æ”¹å˜å°±æ˜¯Gitåˆ†å¸ƒå¼çš„æœ¬è´¨ã€‚ä¸åŒäºŽå•ä¸ªä¸­å¿ƒåº“ï¼Œæ¯ä¸€ä¸ªå¼€å‘è€…éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„æ•´ä¸ªä»£ç åº“çš„å‰¯æœ¬ã€‚è¿™æžå¤§çš„æ”¹å˜äº†ä½ å’Œç¨‹åºå‘˜åŒäº‹ä»¬åä½œçš„æ–¹å¼ã€‚ ä½ å¯ä»¥ä½¿ç”¨ git clone å°†æ•´ä¸ªGitä»“åº“å…‹éš†åˆ°æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œè€Œä¸æ˜¯ä½¿ç”¨svn checkoutä»ŽSVNåº“ç­¾å‡ºå·¥ä½œå‰¯æœ¬ã€‚ é€šè¿‡ä½¿ç”¨git pushï¼Œgit fetch æˆ–è€…git pull åœ¨ä»“åº“çš„åˆ†æ”¯ä¹‹é—´ç§»åŠ¨æ¥å®žçŽ°åä½œã€‚å…±äº«é€šå¸¸åœ¨Gitåˆ†æ”¯çº§åˆ«ä¸Šå®Œæˆï¼Œä½†ä¹Ÿå¯ä»¥åƒSVNä¸€æ ·åœ¨æäº¤çº§åˆ«ä¸Šå®Œæˆã€‚ä½†æ˜¯åœ¨Gitä¸­ï¼Œæäº¤ä»£è¡¨ç€é¡¹ç›®çš„æ•´ä¸ªçŠ¶æ€ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ä¿®æ”¹ã€‚ä½ åœ¨SVN å’Œ Gitä¸­éƒ½å¯ä»¥ä½¿ç”¨åˆ†æ”¯ï¼Œè¿™é‡Œé‡è¦çš„åŒºåˆ«æ˜¯ä½ å¯ä»¥ç”¨Gitåœ¨æœ¬åœ°å®Œæˆæäº¤ï¼Œè€Œä¸ç”¨å…±äº«ä½ çš„å·¥ä½œã€‚è¿™èƒ½è®©ä½ æ›´è‡ªç”±è¿›è¡Œå®žéªŒï¼Œåœ¨ç¦»çº¿çŠ¶æ€ä¸‹å·¥ä½œæ›´æœ‰æ•ˆï¼Œè€Œä¸”åŠ é€Ÿå‡ ä¹Žæ‰€æœ‰ç‰ˆæœ¬æŽ§åˆ¶ç›¸å…³çš„å‘½ä»¤ã€‚ ç„¶è€Œï¼Œç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå°±æ˜¯è¿œç¨‹ä»“åº“å¹¶ä¸æ˜¯ä¸€ä¸ªç›´æŽ¥é“¾æŽ¥åˆ°å…¶ä»–äººçš„ä»“åº“çš„ã€‚å®ƒåªæ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œé˜²æ­¢ä½ æ¯æ¬¡ä¸Žè¿œç¨‹ä»“åº“äº¤äº’çš„æ—¶å€™å¿…é¡»é‡æ–°é”®å…¥æ•´ä¸ªURLã€‚ä½ ä¸€ç›´éƒ½æ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹çš„çŽ¯å¢ƒä¸­å·¥ä½œçš„ï¼Œç›´åˆ°ä½ æ˜Žç¡®åœ°ä»Žä¸€ä¸ªè¿œç¨‹ä»“åº“pullæˆ–è€…pushä¸€ä¸ªåˆ†æ”¯ã€‚ å¯¹SVNè€Œè¨€ï¼Œå¦ä¸€ä¸ªè¾ƒå¤§çš„è°ƒæ•´å°±æ˜¯â€œlocalâ€ å’Œ â€œremoteâ€ çš„æ¦‚å¿µã€‚æœ¬åœ°ä»“åº“åœ¨ä½ çš„æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œæ‰€æœ‰å…¶ä»–çš„ä»“åº“éƒ½è¢«è®¤ä¸ºæ˜¯è¿œç¨‹ä»“åº“ã€‚è¿œç¨‹ä»“åº“çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©ä½ çš„ä»£ç å¯ä»¥è¢«å›¢é˜Ÿçš„å…¶ä»–äººè®¿é—®åˆ°ï¼Œå› æ­¤å¹¶ä¸ä¼šåœ¨å…¶ä¸­ï¼ˆè¿œç¨‹ä»“åº“ï¼‰è¿›è¡Œæ´»åŠ¨å¼€å‘ã€‚æœ¬åœ°ä»“åº“ä½äºŽæœ¬åœ°è®¡ç®—æœºä¸Šï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œæ‰€æœ‰è½¯ä»¶å¼€å‘ã€‚ Donâ€™t Be Scared of Branching or Merging ä¸è¦è¿˜æ€•åˆ†æ”¯å’Œåˆå¹¶åœ¨SVNä¸­ï¼Œä½ é€šè¿‡åœ¨ä½ çš„å·¥ä½œå‰¯æœ¬ä¸­ç¼–è¾‘æ–‡ä»¶æ¥æäº¤ï¼Œç„¶åŽè¿è¡Œ svn commit æ¥å‘é€ä»£ç åˆ°ä¸­å¿ƒåº“ã€‚ç„¶åŽå…¶ä»–äººå°±å¯ä»¥é€šè¿‡svn updateæ‹‰å–è¿™äº›ä¿®æ”¹åˆ°ä»–ä»¬è‡ªå·±çš„å·¥ä½œå‰¯æœ¬ä¸­ã€‚SVNåˆ†æ”¯é€šå¸¸é¿è®³ç”¨äºŽé¡¹ç›®çš„å¤§åž‹ï¼Œé•¿æœŸè¿è¡Œæ–¹é¢ï¼Œå› ä¸ºåˆå¹¶æ˜¯ä¸€ä¸ªå±é™©çš„è¿‡ç¨‹ï¼Œæœ‰å¯èƒ½ç ´åé¡¹ç›®ç»“æž„ã€‚ Gitçš„åŸºæœ¬å¼€å‘å·¥ä½œæµç¨‹æ˜¯éžå¸¸ä¸åŒçš„ã€‚Gitå¼€å‘å›´ç»•ç€åˆ†æ”¯å’Œåˆå¹¶è€Œä¸æ˜¯å—é™äºŽå•ä¸€çš„å¼€å‘çº¿ï¼ˆä¾‹å¦‚ï¼Œtrunk/ï¼‰ã€‚ å½“ä½ æƒ³è¦åœ¨Gitä¸­å¼€å§‹å¤„ç†ä»»ä½•äº‹æƒ…æ—¶ï¼Œä½ å¯ä»¥ç”¨ git checkout -b &lt;branch-name&gt; åˆ›å»ºå¹¶ç­¾å‡ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ã€‚è¿™è®©ä½ æœ‰äº†ä¸€æ¡ä¸“æœ‰çš„å¼€å‘æ”¯çº¿ï¼Œä½ å¯ä»¥åœ¨è¿™æ¡æ”¯çº¿ä¸Šå†™ä»£ç ï¼Œä¸ç”¨æ‹…å¿ƒå½±å“åˆ°å›¢é˜Ÿé‡Œçš„å…¶ä»–ä»»ä½•äººã€‚å¦‚æžœä½ ç ´åäº†ä¸€äº›ä¸œè¥¿æ— æ³•ä¿®å¤ï¼Œä½ åªéœ€è¦ä½¿ç”¨git branch -d &lt;branch-name&gt; æŠ›å¼ƒåˆ†æ”¯ã€‚å¦‚æžœä½ æž„å»ºäº†ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå°±æäº¤ä¸€ä¸ªpullè¯·æ±‚ï¼Œè¦æ±‚å°†å…¶åˆå¹¶åˆ°masteråˆ†æ”¯ä¸­ã€‚ Potential Git Workflows æ½œåœ¨çš„Gitå·¥ä½œæµå½“ä½ é€‰æ‹©Gitå·¥ä½œæµçš„æ—¶å€™ï¼Œè€ƒè™‘ä½ çš„å›¢é˜Ÿéœ€æ±‚å¾ˆé‡è¦ã€‚ä¸€ä¸ªç®€å•çš„å·¥ä½œæµå¯ä»¥æœ€å¤§åŒ–å¼€å‘é€Ÿåº¦å’Œçµæ´»æ€§ï¼Œè€Œæ›´å¤æ‚çš„å·¥ä½œæµç¨‹å¯ä»¥ç¡®ä¿æ›´é«˜çš„ä¸€è‡´æ€§å’Œå¯¹æ­£åœ¨è¿›è¡Œçš„å·¥ä½œçš„æŽ§åˆ¶ã€‚ ä¸­å¿ƒåŒ–å·¥ä½œæµ æä¾›ä¸Žå¸¸è§SVNæµç¨‹æœ€æŽ¥è¿‘çš„åŒ¹é…ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨é€‰é¡¹ã€‚ åŸºäºŽè¿™ä¸ªæƒ³æ³•ï¼Œä½¿ç”¨åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµ å¯ä»¥è®©å¼€å‘äººå‘˜ä¿æŒå·¥ä½œçš„ç‹¬ç«‹æ€§ï¼Œå¹¶ä¿æŠ¤é‡è¦çš„å…±äº«åˆ†æ”¯ã€‚åŠŸèƒ½åˆ†æ”¯ä¹Ÿæž„æˆäº†é€šè¿‡pullè¯·æ±‚æ¥ç®¡ç†æ›´æ”¹çš„åŸºç¡€ã€‚ ä¸€ä¸ªGitflow å·¥ä½œæµ æ˜¯åŠŸèƒ½åˆ†æ”¯çš„ä¸€ä¸ªæ›´åŠ æ­£å¼çš„ï¼Œç»“æž„åŒ–çš„æ‰©å±•ï¼Œä½¿å…¶æˆä¸ºå…·æœ‰æ˜Žç¡®å®šä¹‰çš„å‘å¸ƒå‘¨æœŸçš„å¤§åž‹å›¢é˜Ÿçš„ç†æƒ³é€‰æ‹©ã€‚ æœ€åŽï¼Œå¦‚æžœä½ éœ€è¦æœ€å¤§é™åº¦åœ°éš”ç¦»å’ŒæŽ§åˆ¶æ›´æ”¹ï¼Œæˆ–è€…è®©æ›´å¤šå¼€å‘äººå‘˜è´¡çŒ®äºŽåŒä¸€ä¸ªå­˜å‚¨åº“ï¼Œè¯·è€ƒè™‘forking å·¥ä½œæµ ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœä½ çœŸçš„æƒ³è¦å……åˆ†åˆ©ç”¨Gitï¼Œä½œä¸ºä¸“ä¸šå›¢é˜Ÿï¼Œä½ åº”è¯¥è€ƒè™‘ç”¨åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµã€‚è¿™æ˜¯ä¸€ä¸ªçœŸæ­£åˆ†å¸ƒå¼å·¥ä½œæµï¼Œå…·æœ‰é«˜åº¦å®‰å…¨æ€§ï¼Œä»¤äººéš¾ä»¥ç½®ä¿¡çš„å¯æ‰©å±•æ€§å’Œå…¸åž‹çš„æ•æ·æ€§ã€‚ Conclusion æ€»ç»“å°†å›¢é˜Ÿè¿ç§»åˆ°Gitå¯èƒ½æ˜¯ä¸€ä¸ªè‰°å·¨çš„ä»»åŠ¡ï¼Œä½†æ˜¯ä¹Ÿä¸ä¸€å®šæ˜¯ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„é€‰é¡¹æ¥è¿ç§»ä½ çš„ä»£ç åº“ï¼Œå°†Gitèžå…¥åˆ°ä½ çš„å¼€å‘å›¢é˜Ÿï¼Œä»¥åŠå¤„ç†å®‰å…¨å’Œæƒé™é—®é¢˜ã€‚æˆ‘ä»¬ä¹Ÿä»‹ç»äº†å¼€å‘è€…åœ¨è¿ç§»è¿‡ç¨‹ä¸­åº”è¯¥ä¸ºæ­¢åšå¥½å‡†å¤‡çš„æœ€å¤§æŒ‘æˆ˜ã€‚ å¸Œæœ›ä½ çŽ°åœ¨ä»¥åŠæœ‰äº†åšå®žçš„åŸºç¡€æ¥å°†åˆ†å¸ƒå¼å¼€å‘å¼•å…¥ä½ çš„å…¬å¸ï¼Œæ— è®ºå…¶è§„æ¨¡æˆ–å…¶å½“å‰çš„å¼€å‘å®žè·µã€‚]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>svn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ›å»ºä¸€ä¸ªGitä»“åº“]]></title>
    <url>%2F2018%2F07%2F21%2FSetting-up-a-repository%2F</url>
    <content type="text"><![CDATA[git init git clone git config æœ¬æ•™ç¨‹ä¸»è¦è¦†ç›–çš„å‡ ç‚¹å¦‚ä¸‹: åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Git repo å…‹éš†ä¸€ä¸ªå·²æœ‰çš„ Git Repo å‘ Repo æäº¤ä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ç‰ˆæœ¬ å¯¹ Git Repo è¿›è¡Œä¸€äº›è¿œç¨‹åä½œçš„é…ç½® å¸¸ç”¨çš„ Git ç‰ˆæœ¬æŽ§åˆ¶å‘½ä»¤ åœ¨æœ¬ç« ç»“æŸåŽï¼Œä½ åº”è¯¥å°±èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª Git Repoï¼Œä½¿ç”¨ Git å¸¸ç”¨çš„å‘½ä»¤ï¼Œæäº¤ä¿®æ”¹çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹å·¥ç¨‹çš„ä¿®æ”¹åŽ†å²ä»¥åŠè¿žæŽ¥ä¸€ä¸ª Git æ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚ Bitbucketï¼‰ Gitä»“åº“æ˜¯ä»€ä¹ˆ? Git ä»“åº“ æ˜¯ä½ çš„å·¥ç¨‹çš„ä¸€ä¸ªè™šæ‹Ÿçš„å­˜å‚¨ï¼Œå®ƒå…è®¸ä½ ä¿å­˜ä»£ç çš„ä¸åŒç‰ˆæœ¬ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™èŽ·å–è¿™äº›ç‰ˆæœ¬äº†ã€‚ åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ä»“åº“ï¼šgit initä½ å°†ä½¿ç”¨ git init æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ repoï¼Œgit init å¯¹æ–° repo æ‰§è¡Œåˆå§‹åŒ–è®¾ç½®çš„ä¸€æ¬¡æ€§å‘½ä»¤ã€‚æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ä¼šåœ¨ä½ çš„å½“å‰å·¥ä½œç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º.git çš„å­ç›®å½•ã€‚åŒæ—¶ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„masteråˆ†æ”¯ã€‚ åˆ›å»ºæ–°çš„gitä»“åº“å¯¹çŽ°æœ‰å·¥ç¨‹è¿›è¡Œç‰ˆæœ¬æŽ§åˆ¶è¿™ä¸ªç¤ºä¾‹å‡è®¾ä½ å·²ç»æœ‰äº†æƒ³è¦åœ¨é‡Œé¢åˆ›å»ºgit repoçš„å·¥ç¨‹æ–‡ä»¶å¤¹ã€‚ç¬¬ä¸€æ­¥æ˜¯cdåˆ°è¿™ä¸ªå·¥ç¨‹æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹ï¼Œç„¶åŽæ‰§è¡Œgit initå‘½ä»¤ã€‚ 12cd /path/to/your/existing/codegit init å°†git initå‘½ä»¤æŒ‡å‘è¿™ä¸ªå·²æœ‰çš„å·¥ç¨‹ç›®å½•ä¹Ÿä¼šæ‰§è¡Œå’Œä¸Šé¢åŒæ ·çš„åˆå§‹åŒ–è®¾ç½®ï¼Œä½œç”¨äºŽè¯¥é¡¹ç›®ç›®å½•ã€‚ 1git init &lt;project directory&gt; æµè§ˆgit inité¡µé¢æŸ¥çœ‹git initçš„è¯¦ç»†ä¿¡æ¯ã€‚ å…‹éš†ä¸€ä¸ªå·²æœ‰çš„ä»“åº“ï¼šgit cloneå¦‚æžœé¡¹ç›®å·²ç»æ­å»ºäº†ä¸€ä¸ªä¸­å¿ƒä»“åº“ï¼Œcloneå‘½ä»¤å°±æ˜¯æœ€å¸¸ç”¨çš„èŽ·å–æœ¬åœ°å¼€å‘å…‹éš†çš„å‘½ä»¤ã€‚å’Œgit initä¸€æ ·ï¼Œå…‹éš†é€šç•…ä¹Ÿæ˜¯ä¸€æ¬¡æ€§æŒ‡ä»¤ã€‚ä¸€æ—¦èŽ·å–åˆ°ä¸€ä¸ªworking copyï¼Œæ‰€æœ‰ version control æŒ‡ä»¤éƒ½æ˜¯é€šè¿‡æœ¬åœ°ä»“åº“ç®¡ç†çš„ã€‚ 1git clone &lt;repo url&gt; git cloneè¢«ç”¨äºŽåˆ›å»ºä¸€ä¸ªcopyæˆ–è€…è¿œç«¯ä»“åº“çš„cloneã€‚ä½ å¯ä»¥ç»™git cloneä¼ ä¸€ä¸ªä»“åº“çš„URLåœ°å€ã€‚Gitæ”¯æŒå‡ ç§ä¸åŒçš„ç½‘ç»œä¼ è¾“åè®®å’Œå¯¹åº”çš„URLæ ¼å¼ã€‚ç¤ºä¾‹ä¸­æˆ‘ä»¬å°†ä¼šç”¨åˆ°Git SSHåè®®ã€‚Git SSH URLéµå¾ªè¿™æ ·ä¸€ä¸ªæ¨¡æ¿git@HOSTNAME:USERNAME/REPONAME.git ä¸€ä¸ªGit SSH URLçš„ç¤ºä¾‹ä»¥åŠå®ƒä¸Žæ¨¡æ¿çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š HOSTNAME: bitbucket.org USERNAME: rhyolight REPONAME: javascript-data-store å½“å‘½ä»¤æ‰§è¡ŒåŽï¼Œå°†ä¼šå¼€å§‹æ‹‰å–è¿œç«¯ä»“åº“masteråˆ†æ”¯ä¸Šçš„æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢«å­˜æ”¾åœ¨ä¸€ä¸ªæ–°å»ºçš„æ–‡ä»¶å¤¹å†…ã€‚æ–°å»ºçš„æ–‡ä»¶å¤¹ä¼šå‘½åä¸ºä¸Šé¢ç¤ºä¾‹ä¸­çš„REPONAMEï¼Œå³javascript-data-store ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†è¿œç«¯ä»“åº“çš„å…¨éƒ¨åŽ†å²è®°å½•ä»¥åŠæ–°åˆ›å»ºçš„masteråˆ†æ”¯ã€‚ æ›´å¤šgit clone çš„ä½¿ç”¨å’Œæ”¯æŒçš„Git URLæ ¼å¼ï¼Œè¯·çœ‹git clone Page ä¿å­˜ä¿®æ”¹åˆ°ä»“åº“ï¼šgit add å’Œ git commitæ—¢ç„¶ä½ å·²ç»å…‹éš†æˆ–è€…åˆå§‹åŒ–äº†ä¸€ä¸ªä»“åº“ï¼Œä½ å°±å¯ä»¥å‘å®ƒæäº¤æ–‡ä»¶ç‰ˆæœ¬çš„ä¿®æ”¹äº†ã€‚ä¸‹é¢çš„ä¾‹å­å‡è®¾ä½ å·²ç»åœ¨/path/to/projectç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š å°†å½“å‰ç›®å½•æŒ‡å‘ /path/to/project æ–°å»ºä¸€ä¸ªæ–‡ä»¶ CommitTest.txt åŒ…å«å†…å®¹â€test content for git tutorialâ€ æ‰§è¡Œ git add å°† CommitTest.txt æ·»åŠ åˆ°ä»“åº“æš‚å­˜åŒºï¼ˆstaging areaï¼‰ æäº¤ä¿®æ”¹ï¼Œé™„å¸¦ä¸€ä¸ªæè¿°æœ¬æ¬¡æäº¤ä¿®æ”¹å†…å®¹çš„messageå‚æ•° 1234cd /path/to/projectecho "test content for git tutorial" &gt;&gt; CommitTest.txtgit add CommitTest.txtgit commit -m "added CommitTest.txt to the repo" æ‰§è¡Œç¤ºä¾‹åŽï¼Œä½ çš„repoå°±ä¼šå°†CommitTest.txtæ·»åŠ åˆ°åŽ†å²ä¸­ï¼Œå¹¶è·Ÿè¸ªæœªæ¥è¿™ä¸ªæ–‡ä»¶çš„æ›´æ–°ã€‚ è¿™ä¸ªç¤ºä¾‹ä»‹ç»äº†ä¸¤ä¸ªgitå‘½ä»¤ï¼šaddå’Œcommitã€‚ç¤ºä¾‹éžå¸¸æœ‰é™ï¼Œæ›´å¤šå…³äºŽè¿™ä¸¤ä¸ªå‘½ä»¤çš„å†…å®¹åœ¨git add å’Œ git commit ã€‚git addçš„å¦ä¸€ä¸ªå¸¸ç”¨çš„æ¡ˆä¾‹æ˜¯--allé€‰é¡¹ã€‚æ‰§è¡Œ git add --allä¼šå°†ä»“åº“ä¸­æ‰€æœ‰çš„ä¿®æ”¹æœªè·Ÿè¸ªçš„æ–‡ä»¶æ·»åŠ åˆ°repoå¹¶æ›´æ–°repoçš„å·¥ä½œæ ‘ï¼ˆworking treeï¼‰ã€‚ åä½œï¼šgit pushç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼ŒGitä¸­working copy çš„æ¦‚å¿µä¸Žä½ ä»ŽSVNä»“åº“ä¸­ä½¿ç”¨check outå‘½ä»¤ç­¾å‡ºä»£ç å¾—åˆ°çš„working copyæ˜¯éžå¸¸ä¸åŒçš„ã€‚ä¸ŽSVNä¸åŒï¼ŒGitçš„æ‰€æœ‰working copyéƒ½äºŽä¸­å¿ƒä»“åº“ä¸€æ¨¡ä¸€æ ·ï¼Œä»–ä»¬éƒ½æ˜¯å®Œæ•´ï¼ˆfull-fledgedï¼‰çš„Gitä»“åº“ï¼ˆGit repositories ï¼‰ã€‚ è¿™å°±é€ æˆäº†Gitåä½œä¸ŽSVNåä½œæ ¹æœ¬ä¸Šçš„ä¸åŒã€‚SVNä¾èµ–ä¸Žä¸­å¿ƒä»“åº“ä¸Žå·¥ä½œå‰¯æœ¬ä¹‹é—´çš„å…³ç³»ï¼Œè€ŒGitçš„åä½œæ¨¡åž‹åŸºäºŽä»“åº“ä¸Žä»“åº“ä¹‹é—´çš„äº¤äº’ã€‚åœ¨Gitä½ æ˜¯ä»Žä¸€ä¸ªä»“åº“å‘å¦ä¸€ä¸ªä»“åº“æŽ¨é€æˆ–æ‹‰å–ï¼Œè€Œä¸æ˜¯å‘SVNçš„ä¸­å¿ƒä»“åº“è¿å…¥å·¥ä½œå‰¯æœ¬ã€‚ å½“ç„¶ï¼Œæ²¡æœ‰ä»»ä½•äº‹æƒ…é˜»æ­¢ä½ ç»™æŸä¸ªç‰¹å®šçš„Git Repoèµ‹äºˆç‰¹æ®Šçš„æ„ä¹‰ã€‚ä¾‹å¦‚ï¼Œç®€å•åœ°å°†æŸä¸ªGit Repoè®¾å®šæœªä¸­å¿ƒåº“ï¼Œå°±å¯ä»¥ä½¿ç”¨Gitå»ºç«‹ä¸€ä¸ªä¸­å¿ƒåŒ–çš„å·¥ä½œæµã€‚ è£¸ä»“åº“ vs. å…‹éš†çš„ä»“åº“å¦‚æžœä½ ç”¨ä¸Šä¸€èŠ‚ â€œInitializing a new Repositoryâ€ ä¸­çš„git cloneæ¥åˆ›å»ºçš„æœ¬åœ°ä»“åº“ï¼Œé‚£ä¹ˆä½ çš„ä»“åº“é‡Œå°±å·²ç»é…ç½®å¥½äº†è¿œç¨‹åä½œã€‚git cloneå°†ä¼šè‡ªåŠ¨åœ°ä¸ºä½ çš„repoé…ç½®ä¸€ä¸ªæŒ‡å‘è¿œç«¯å…‹éš†æ¥æºçš„URLã€‚è¿™å°±æ„å‘³ç€ï¼Œä¸€æ—¦ä½ ä¿®æ”¹äº†æ–‡ä»¶å¹¶æ‰§è¡Œäº†æäº¤ï¼Œä½ å°±å¯ä»¥å°†è¿™äº›ä¿®æ”¹git pushåˆ°è¿œç«¯ä»“åº“ å¦‚æžœä½ ä½¿ç”¨git initåˆ›å»ºçš„ä¸€ä¸ªæ–°é²œçš„repoï¼Œé‚£ä¹ˆä½ å°±æ²¡æœ‰è¿™ä¸ªå¯ä»¥pushä¿®æ”¹çš„è¿œç«¯repoã€‚é€šå¸¸åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„repoçš„åšæ³•æ˜¯å…ˆåŽ»Gitæ‰˜ç®¡é‚£é‡Œåˆ›å»ºä¸€ä¸ªrepoã€‚ æœåŠ¡å°†ä¼šæä¾›ä¸€ä¸ªGit URLï¼Œä½ å¯ä»¥å°†è¿™ä¸ªURLæ·»åŠ åˆ°ä½ çš„æœ¬åœ°ä»“åº“ï¼Œç„¶åŽgit pushåˆ°æ‰˜ç®¡repoã€‚ä¸€æ—¦ä½ ç”¨é€‰æ‹©çš„Gitæ‰˜ç®¡æœåŠ¡åˆ›å»ºäº†è¿œç«¯repoï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ›´æ–°ä½ çš„æœ¬åœ°ä»“åº“é…ç½®ï¼Œå»ºç«‹æ˜ å°„ã€‚æˆ‘ä»¬å°†ä¼šåœ¨ä¸‹é¢ Configuration &amp; Set Upæ•™ç¨‹ä¸­æŽ¢è®¨è¿™ä¸ªæ“ä½œã€‚ å¦‚æžœä½ æ›´å–œæ¬¢æ‰˜ç®¡è‡ªå·±çš„è¿œç¨‹ä»“åº“ï¼Œåˆ™éœ€è¦è®¾ç½®â€œè£¸ä»“åº“â€ã€‚git initå’Œgit cloneå‘½ä»¤éƒ½æŽ¥æ”¶ --bareå‚æ•°ã€‚è£¸ä»“åº“æœ€é€šå¸¸æ˜¯ç”¨äºŽåˆ›å»ºè¿œç¨‹çš„ä¸­å¿ƒä»“åº“ã€‚ é…ç½®å’Œè®¾ç½®ï¼šgit configä¸€æ—¦ä½ è®¾ç½®äº†è¿œç«¯repoï¼Œä½ å°±éœ€è¦åœ¨ä½ çš„æœ¬åœ°git configä¸­æ·»åŠ ä¸€ä¸ªè¿œç¨‹repoçš„urlï¼Œå¹¶ä¸ºä½ çš„æœ¬åœ°åˆ†æ”¯è®¾ç½®ä¸€ä¸ªä¸Šæ¸¸åˆ†æ”¯ã€‚git remoteå‘½ä»¤æä¾›äº†è¿™æ ·çš„å·¥å…·ã€‚ 1git remote add &lt;remote_name&gt; &lt;remote_repo_url&gt; è¿™ä¸ªå‘½ä»¤ä¼šå°†ä½äºŽ&lt;remote_repo_url&gt;çš„è¿œç¨‹ä»“åº“æ˜ å°„åˆ°ä½ çš„æœ¬åœ°ä»“åº“ä¸‹çš„&lt;remote_name&gt;å¼•ç”¨ä¸­ï¼ˆè¿™é‡Œæ˜¯æŒ‡ remote_name æ˜¯è¿œç«¯ä»“åº“çš„ä¸€ä¸ªæ ‡è¯†æˆ–å¼•ç”¨ï¼Œç›¸å½“äºŽåˆ«åï¼Œè¿™æ ·åœ¨æ‰§è¡Œå¦‚git pushï¼Œpullï¼Œfetchç­‰å…¶ä»–æŒ‡ä»¤æ—¶å°±å¯ä»¥è½»æ¾åœ°æŒ‡å®šè¿œç«¯ä»“åº“ï¼‰ã€‚ä¸€ç‚¹ä½ å»ºç«‹äº†è¿œç«¯repoçš„æ˜ å°„ï¼Œä½ å°±å¯ä»¥å°†æœ¬åœ°åˆ†æ”¯æŽ¨é€ç»™è¿œç«¯ä»“åº“ã€‚ 1git push -u &lt;remote_name&gt; &lt;local_branch_name&gt; è¿™ä¸ªå‘½ä»¤å°†ä¼šå°†æœ¬åœ°repoçš„&lt;local_branc_name&gt;åˆ†æ”¯pushåˆ°æœªäºŽ&lt;remote_name&gt; çš„è¿œç«¯repoã€‚ è·Ÿæ·±å…¥çš„äº†è§£git remoteï¼Œè§Git remote pageã€‚ é™¤äº†é…ç½®è¿œç«¯repoçš„URLï¼Œä½ è¿˜éœ€è¦è®¾ç½®ä¸€äº›Gitå…¨å±€é…ç½®é€‰é¡¹ï¼Œä¾‹å¦‚usernameï¼Œemailã€‚git configå‘½ä»¤å¯ä»¥å¸®åŠ©ä½ ç”¨å‘½ä»¤è¡Œé…ç½®ä½ çš„Gitå®‰è£…ç¨‹åºï¼ˆæˆ–è€…ä¸€ä¸ªå•ç‹¬çš„ä»“åº“ï¼‰ã€‚è¿™ä¸ªå‘½ä»¤å¯ä»¥å®Œæˆä»Žç”¨æˆ·ä¿¡æ¯åˆ°ä¼˜å…ˆé€‰é¡¹ï¼ˆpreferenceï¼‰ï¼Œåˆ°ä»“åº“è¡Œä¸ºçš„ä¸€åˆ‡å®šä¹‰ã€‚ä¸‹é¢åˆ—å‡ºäº†å‡ ä¸ªå¸¸ç”¨çš„é…ç½®é€‰é¡¹ã€‚ Gitåœ¨ä¸‰ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ä¿å­˜äº†é…ç½®é€‰é¡¹ï¼Œå…è®¸ä½ å°†é…ç½®é€‰é¡¹çš„ä½œç”¨åŸŸè®¾å®šä¸ºå•ä¸ªä»“åº“ï¼ˆæœ¬åœ°ï¼‰ï¼Œç”¨æˆ·ï¼ˆå…¨å±€ï¼‰æˆ–è€…æ•´ä¸ªç³»ç»Ÿï¼ˆç³»ç»Ÿï¼‰ï¼š æœ¬åœ°: &lt;repo&gt;/.git/config â€“ å…·ä½“ä»“åº“çš„è®¾ç½®. å…¨å±€: /.gitconfig â€“ å…·ä½“ç”¨æˆ·çš„è®¾ç½®. è¿™æ˜¯åŠ  â€“global æ ‡è¯†çš„è®¾ç½®ä¿å­˜çš„ä½ç½®. ç³»ç»Ÿ: $(prefix)/etc/gitconfig â€“ ç³»ç»Ÿçº§è®¾ç½®. åœ¨å½“å‰ä»“åº“ä¸­å®šä¹‰ç”¨äºŽæ‰€æœ‰æäº¤æ“ä½œçš„ä½œè€…åç§°ã€‚é€šå¸¸æˆ‘ä»¬ä¼šæƒ³è¦ä¸ºå½“å‰ç”¨æˆ·çš„è®¾ç½®åŠ ä¸Š --global æ ‡è¯†ã€‚ 1git config --global user.name &lt;name&gt; ä¸ºå½“å‰ç”¨æˆ·å®šä¹‰æ‰€æœ‰æäº¤çš„ä½œè€…åç§°ã€‚ åŠ ä¸Š--localé€‰é¡¹æˆ–è€…å¹²è„†ä¸æŒ‡å®šé…ç½®çº§åˆ«ï¼Œå°†ä¼šä¸ºå½“å‰çš„æœ¬åœ°ä»“åº“è®¾ç½®user.name ã€‚ 1git config --local user.email &lt;email&gt; ä¸ºå½“å‰ç”¨æˆ·å®šä¹‰ç”¨äºŽæ‰€æœ‰æäº¤çš„ä½œè€…é‚®ç®±ã€‚ 1git config --global alias.&lt;alias-name&gt; &lt;git-command&gt; ä¸ºGitå‘½ä»¤åˆ›å»ºä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿä¸ºå¸¸ç”¨çš„gitå‘½ä»¤åˆ›å»ºè‡ªå®šä¹‰çš„å¿«æ·æ–¹å¼ã€‚ç®€å•çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š 1git config --global alias.ci commit åˆ›å»ºä¸€ä¸ª ciå‘½ä»¤ä½œä¸ºå¿«æ·æ–¹å¼æ¥æ‰§è¡Œgit commitã€‚ å­¦ä¹ æ›´å¤šçš„gitåˆ«åè®¿é—® git config page. 1git config --system core.editor &lt;editor&gt; ä¸ºå½“å‰è®¡ç®—æœºä¸Šçš„æ‰€æœ‰ç”¨æˆ·æŒ‡å®šç”¨äºŽgit commitç­‰å‘½ä»¤çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚&lt;edtor&gt; å‚æ•°æ˜¯å¯åŠ¨æ‰€éœ€è¦çš„ç¼–è¾‘å™¨çš„å‘½ä»¤ï¼ˆä¾‹å¦‚ï¼Œviï¼‰ã€‚è¿™ä¸ªç¤ºä¾‹ç”¨åˆ°äº†â€“systemé€‰é¡¹ã€‚â€“systemé€‰é¡¹å°†ä¼šå°†é…ç½®åº”ç”¨äºŽæ•´ä¸ªç³»ç»Ÿï¼Œæ„å‘³ç€è¿™å°æœºå™¨ä¸Šçš„æ‰€æœ‰ç”¨æˆ·å’Œrepoã€‚æ›´å¤šå…³äºŽé…ç½®çº§åˆ«çš„è¯¦ç»†ä¿¡æ¯è®¿é—®git config pageã€‚ 1git config --global --edit åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶æ¥è¿›è¡Œæ‰‹åŠ¨è®¾ç½®ã€‚æ·±å…¥äº†è§£å¦‚ä½•åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­é…ç½®Gitï¼Œè®¿é—® Git config pageã€‚ è®¨è®ºæ‰€æœ‰é…ç½®é€‰é¡¹éƒ½ä¿å­˜åœ¨ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥git configå‘½ä»¤çœŸçš„æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å‘½ä»¤è¡ŒæŽ¥å£ã€‚é€šå¸¸ä½ åªéœ€è¦åœ¨å®‰è£…Gitçš„æ—¶å€™è®¾ç½®ä¸€æ¬¡ï¼Œå°±å¯ä»¥åœ¨ä¸€å°æ–°çš„å¼€å‘æœºå™¨ä¸Šå¼€å§‹å·¥ä½œäº†ï¼Œä¸ºäº†é€‚ç”¨äºŽæ‰€æœ‰æƒ…å†µï¼Œä½ éœ€è¦ä½¿ç”¨--globalæ ‡è¯†ã€‚ä¸€ä¸ªé‡è¦çš„ä¾‹å¤–æ˜¯ä½œè€…é‚®ç®±åœ°å€ã€‚ä½ å¯èƒ½éœ€è¦ä¸ºä¸€äº›ä¸ªäººæˆ–è€…å¼€æºçš„ä»“åº“è®¾ç½®ä¸ªäººé‚®ç®±åœ°å€ï¼Œä¸ºä½ çš„å·¥ä½œç›¸å…³çš„ä»“åº“è®¾ç½®ä½ çš„ä¸“ä¸šé‚®ç®±åœ°å€ã€‚ Gitå°†é…ç½®ä¿å­˜åœ¨ä¸‰ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œå…è®¸ä½ å°†é…ç½®é€‰é¡¹è®¾å®šåœ¨å•ä¸ªä»“åº“ï¼Œç”¨æˆ·å’Œæ•´ä¸ªç³»ç»Ÿçš„ä½œç”¨åŸŸé‡Œã€‚ &lt;repo&gt;/.git/config â€“ å…·ä½“ä»“åº“çš„é…ç½®ã€‚ ~/.gitconfig â€“ ç”¨æˆ·çº§é…ç½®ï¼Œè¿™é‡Œä¿å­˜ç€é‚£äº›é™„åŠ äº†--global é€‰é¡¹çš„é…ç½®ã€‚ $(prefix)/etc/gitconfig â€“ ç³»ç»Ÿçº§é…ç½®ã€‚ å½“è¿™äº›æ–‡ä»¶ä¸­çš„é€‰é¡¹å†²çªæ—¶ï¼Œæœ¬åœ°è®¾ç½®è¦†ç›–ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·è®¾ç½®ä¼šè¦†ç›–ç³»ç»Ÿçº§è®¾ç½®ã€‚å¦‚æžœä½ æ‰“å¼€ä»»æ„ä¸€ä¸ªé…ç½®æ–‡ä»¶ ï¼Œå°†ä¼šçœ‹åˆ°ä¸‹é¢è¿™äº›ä¸œè¥¿ï¼š 12345678910111213[user] name = John Smith email = john@example.com [alias] st = status co = checkout br = branch up = rebase ci = commit [core] editor = vim ä½ å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘è¿™äº›å€¼ï¼Œè¿™ä¸Žgit configçš„æ•ˆæžœæ˜¯ä¸€æ ·çš„ã€‚ ä¾‹å­åœ¨ä½ å®‰è£…å®ŒGitä¹‹åŽçš„ç¬¬ä¸€è§æƒ³åšçš„äº‹æƒ…å°±æ˜¯å‘Šè¯‰Gitä½ çš„åå­—å’Œemailï¼Œä»¥åŠè‡ªå®šä¹‰ä¸€äº›é»˜è®¤çš„è®¾ç½®ã€‚ä¸€ä¸ªç»å…¸çš„åˆå§‹é…ç½®çœ‹èµ·æ¥å·®ä¸å¤šæ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š å‘Šè¯‰Gitä½ æ˜¯è°git config 1git --global user.name &quot;John Smith&quot; git config --global user.email john@example.com é€‰æ‹©ä½ æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ 1git config --global core.editor vim æ·»åŠ ä¸€äº›ç±»ä¼¼SVNçš„åˆ«å 12345git config --global alias.st statusgit config --global alias.co checkoutgit config --global alias.br branchgit config --global alias.up rebasegit config --global alias.ci commit è¿™æ ·ä¼šåˆ›å»ºä¸€ä¸ªä¸Šä¸€èŠ‚ä¸­è®²åˆ°çš„~/.gitconfig æ–‡ä»¶ã€‚æ·±å…¥çš„äº†è§£git config è¯·çœ‹git config pageã€‚ æ€»ç»“è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ git init å’Œ git clone åˆ›å»ºä¸€ä¸ª git ä»“åº“ã€‚è¿™ç¯‡æ•™ç¨‹å¯ä»¥è¢«åº”ç”¨åœ¨ç®¡ç†è½¯ä»¶æºç å’Œå…¶ä»–éœ€è¦è¢«ç‰ˆæœ¬è¯ç®¡ç†çš„å†…å®¹ã€‚Git add, git commit, git push, å’Œ git remote ä¹Ÿè¢«å¼•å…¥å¹¶åœ¨é«˜çº§åˆ«ä¸Šåº”ç”¨äº†. Read our guide about which code repository system is right for your team!]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµè§ˆå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„]]></title>
    <url>%2F2018%2F07%2F17%2FHow-Does-Browser-Work%2F</url>
    <content type="text"><![CDATA[Web browsers are probably the most widely used software. In this book I will explain how they work behind the scenes. We will see what happens when you type â€˜google.comâ€™ in the address bar until you see the Google page on the browser screen. æµè§ˆå™¨å¯èƒ½æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„è½¯ä»¶äº†ã€‚æˆ‘å°†åœ¨è¿™æœ¬ä¹¦é‡Œè§£é‡Šæµè§ˆå™¨åŽå°æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ä»Žä½ åœ¨æµè§ˆå™¨çš„åœ°å€æ é‡Œæ•²ä¸‹ â€˜google.comâ€™ ç›´åˆ°ä½ çœ‹åˆ°æµè§ˆå™¨çª—å£é‡Œæ˜¾ç¤ºå‡ºGoogleçš„ç½‘é¡µä¹‹é—´å‘ç”Ÿäº†ä»€ä¹ˆã€‚ The browsers we will talk about æˆ‘ä»¬å°†è¦è°ˆåˆ°çš„æµè§ˆå™¨There are five major browsers used today - Internet Explorer, Firefox, Safari, Chrome and Opera.I will give examples from the open source browsers - Firefox,Chrome and Safari, which is partly open source.According to the W3C browser statistics, currently(October 2009), the usage share of Firefox, Safari and Chrome together is nearly 60%. So nowdays open source browsers are a substantial part of the browser businessã€‚ å½“ä»Šä¸»æµçš„æµè§ˆå™¨ä¸€å…±æœ‰5ç§ï¼Œåˆ†åˆ«æ˜¯ Internet Explorer, FireFox, Safari, Chrome ä»¥åŠ Operaã€‚ æˆ‘å°†ä»Žä¸€äº›å¼€æºæµè§ˆå™¨ç§ç»™å‡ºç¤ºä¾‹ï¼ŒFireFoxï¼ŒChromeï¼ŒSafariè¿™å‡ ç§æ˜¯éƒ¨åˆ†å¼€æºçš„ã€‚ æ ¹æ®W3C æµè§ˆå™¨ç»Ÿè®¡ï¼Œç›®å‰ï¼ˆ2009å¹´10æœˆï¼‰ï¼ŒFireFoxï¼ŒSafariä»¥åŠChromeä¸€å…±å æ®äº†æµè§ˆå™¨å°†è¿‘60%çš„å¸‚åœºä»½é¢ã€‚ æ‰€ä»¥çŽ°åœ¨å¼€æºæµè§ˆå™¨æ˜¯æµè§ˆå™¨ä¸šåŠ¡çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ The browserâ€™s main functionality æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½The browser main functionality is to present the web resource you choose, by requesting it from the server and displaying it on the browser window. The resource format is usually HTML but also PDF, image and more. The location of the resource is specified by the user using a URI (Uniform resource Identifier). More on that in the network chapter. æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚å¹¶å°†ç»“æžœæ˜¾ç¤ºåœ¨æµè§ˆå™¨çª—å£çš„æ–¹å¼å±•ç¤ºç”¨æˆ·é€‰æ‹©çš„ç½‘ç»œèµ„æºã€‚å¸¸è§ç½‘ç»œèµ„æºçš„æ ¼å¼æ˜¯HTMLï¼Œå½“ç„¶ä¹Ÿæœ‰PDFï¼Œimageç­‰ç­‰ã€‚è¿™äº›èµ„æºåœ¨ç½‘ç»œä¸­çš„ä½ç½®æ˜¯ç”¨æˆ·é€šè¿‡URIï¼ˆUniform resource Identifierï¼‰æŒ‡å®šçš„ã€‚åœ¨ç½‘ç»œçš„ç« èŠ‚ä¼šè¯¦ç»†è¯´æ˜Žã€‚ The way the browser interprets and displays HTML files is specified in the HTML and CSS specifications. These specifications are maintained by the W3C (World Wide Web Consortium) organization, which is the standards organization for the web. æµè§ˆå™¨è§£é‡Šå’Œæ˜¾ç¤ºHTMLæ–‡ä»¶çš„æ–¹å¼æ˜¯åœ¨HTMLå’ŒCSSè§„èŒƒä¸­æŒ‡å®šçš„ã€‚è¿™äº›è§„èŒƒæ˜¯ç”±W3Cï¼ˆWorld Wide Web Consortium)ç»„ç»‡ç»´æŠ¤çš„ï¼Œè¯¥ç»„ç»‡æ˜¯Webçš„æ ‡å‡†ç»„ç»‡ã€‚ The current version of HTML is 4 (http://www.w3.org/TR/html401/). Version 5 is in progress. The current CSS version is 2 (http://www.w3.org/TR/CSS2/) and version 3 is in progress. å½“å‰HTMLçš„ç‰ˆæœ¬æ˜¯4(http://www.w3.org/TR/html401/)ï¼Œç¬¬5ç‰ˆæ­£åœ¨è¿›è¡Œä¸­ã€‚ç›®å‰CSSç‰ˆæœ¬æ˜¯2(http://www.w3.org/TR/CSS2/) ï¼Œç¬¬3ç‰ˆæ­£åœ¨è¿›è¡Œä¸­ã€‚ For years browsers conformed to only a part of the specifications and developed their own extensions. That caused serious compatibility issues for web authors. Today most of the browsers more or less conform to the specifications. å¤šå¹´æ¥ï¼Œå„å®¶æµè§ˆå™¨åªéµå¾ªäº†éƒ¨åˆ†è§„èŒƒï¼Œå¹¶å„è‡ªå¼€å‘è¿™è‡ªå·±çš„æ‰©å±•åŠŸèƒ½ã€‚è¿™ç»™Webä½œè€…é€ æˆäº†ä¸¥é‡çš„å…¼å®¹æ€§é—®é¢˜ã€‚ä»Šå¤©å¤§å¤šæ•°æµè§ˆå™¨éƒ½éµå¾ªäº†è§„èŒƒã€‚ Browsersâ€™ user interface have a lot in common with each other. Among the common user interface elements are: æµè§ˆå™¨ç”¨æˆ·ç•Œé¢å½¼æ­¤æœ‰å¾ˆå¤šå…±åŒä¹‹å¤„ï¼Œå¸¸è§çš„ç”¨æˆ·å…ƒç´ å¦‚ä¸‹ï¼š Address bar for inserting the URI ç”¨äºŽæ’å…¥URIçš„åœ°å€æ  Back and forward buttons å‰è¿›åŽé€€æŒ‰é’® Bookmarking options ä¹¦ç­¾é€‰é¡¹ A refresh and stop buttons for refreshing and stopping the loading of current documents ç”¨äºŽåˆ·æ–°å’Œåœæ­¢åŠ è½½å½“å‰æ–‡æ¡£çš„åˆ·æ–°å’Œåœæ­¢æŒ‰é’®ã€‚ Home button that gets you to your home page ä¸»é¡µæŒ‰é’®ï¼Œå¯ä»¥è®¿é—®æ‚¨çš„ä¸»é¡µã€‚ Strangely enough, the browserâ€™s user interface is not specified in any formal specification, it is just good practices shaped over years of experience and by browsers imitating each other. The HTML5 specification doesnâ€™t define UI elements a browser must have, but lists some common elements. Among those are the address bar, status bar and tool bar. There are, of course, features unique to a specific browser like Firefox downloads manager. å¥‡æ€ªçš„æ˜¯ï¼Œæµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢å¹¶æ²¡æœ‰åœ¨ä»»ä½•è§„èŒƒä¸­å£°æ˜Žï¼Œè¿™ä»…ä»…æ˜¯å¤šå¹´å®žè·µç»éªŒå’Œæµè§ˆå™¨ä¹‹é—´äº’ç›¸æ¨¡ä»¿çš„ç»“æžœã€‚HTML5è§„èŒƒæ²¡æœ‰å®šä¹‰æµè§ˆå™¨å¿…é¡»æœ‰çš„UIå…ƒç´ ï¼Œä½†æ˜¯åˆ—å‡ºäº†ä¸€äº›å¸¸è§çš„å…ƒç´ ã€‚å…¶ä¸­åŒ…æ‹¬åœ°å€æ ï¼ŒçŠ¶æ€æ ä»¥åŠå·¥å…·æ ã€‚å½“ç„¶è¿˜æœ‰åƒFireFoxä¸‹è½½ç®¡ç†å™¨è¿™æ ·çš„ç‰¹å®šæµè§ˆå™¨æ‰€ç‰¹æœ‰çš„åŠŸèƒ½ã€‚ More on that in the user interface chapter. æ›´å¤šå†…å®¹ä¼šåœ¨ç”¨æˆ·ç•Œé¢çš„ç« èŠ‚è®²è§£ã€‚ The browserâ€™s high level structure æµè§ˆå™¨çš„é«˜çº§ç»“æž„The browserâ€™s main components are (1.1): æµè§ˆå™¨çš„ä¸»è¦ç»„ä»¶æœ‰ï¼ˆ1.1ï¼‰ï¼š The user interface - this includes the address bar, back/forward button, bookmarking menu etc. Every part of the browser display except the main window where you see the requested page. ç”¨æˆ·ç•Œé¢ï¼Œå³åŒ…æ‹¬åœ°å€æ ï¼Œå‰è¿›/åŽé€€æŒ‰é’®ï¼Œä¹¦ç­¾èœå•ç­‰ã€‚é™¤äº†æ‚¨çœ‹åˆ°æ‰€è¯·æ±‚çš„é¡µé¢çš„ä¸»çª—å£ä¹‹å¤–ï¼Œæµè§ˆå™¨çš„æ¯ä¸ªéƒ¨åˆ†éƒ½ä¼šæ˜¾ç¤ºã€‚ The browser engine - the interface for querying and manipulating the rendering engine. æµè§ˆå™¨å¼•æ“Žï¼Œå³ç”¨äºŽæŸ¥è¯¢å’Œæ“çºµæ¸²æŸ“å¼•æ“Žçš„æŽ¥å£ The rendering engine - responsible for displaying the requested content. For example if the requested content is HTML, it is responsible for parsing the HTML and CSS and displaying the parsed content on the screen. æ¸²æŸ“å¼•æ“Žï¼Œè´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ã€‚ä¾‹å¦‚å¦‚æžœè¯·æ±‚çš„å†…å®¹æ˜¯HTMLï¼Œæ¸²æŸ“å¼•æ“Žå°±è´Ÿè´£è§£æžHTMLå’ŒCSSå¹¶å°†è§£æžçš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ Networking - used for network calls, like HTTP requests. It has platform independent interface and underneath implementations for each platform. ç½‘ç»œç»„ä»¶ï¼Œç”¨äºŽæ‰§è¡Œç½‘ç»œè°ƒç”¨ï¼Œå¦‚HTTPè¯·æ±‚ã€‚å®ƒå…·æœ‰ç‹¬ç«‹äºŽå¹³å°çš„æŽ¥å£å’Œæ¯ä¸ªå¹³å°çš„åº•å±‚å®žçŽ°ã€‚ UI backend - used for drawing basic widgets like combo boxes and windows. It exposes a generic interface that is not platform specific. Underneath it uses the operating system user interface methods. UIåŽå°ï¼Œç”¨äºŽç»˜åˆ¶ç±»ä¼¼äºŽç»„åˆæ¡†å’Œçª—å£è¿™æ ·çš„åŸºæœ¬éƒ¨ä»¶ã€‚å®ƒæš´éœ²å‡ºä¸€äº›ä¸Žå¹³å°æ— å…³çš„é€šç”¨æŽ¥å£ã€‚åœ¨åº•å±‚è°ƒç”¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢æ–¹æ³•ã€‚ JavaScript interpreter. Used to parse and execute the JavaScript code. JavaScriptè§£é‡Šå™¨ï¼Œç”¨äºŽè§£æžå’Œæ‰§è¡ŒJavaScriptä»£ç ã€‚ Data storage. This is a persistence layer. The browser needs to save all sorts of data on the hard disk, for examples, cookies. The new HTML specification (HTML5) defines â€˜web databaseâ€™ which is a complete (although light) database in the browser. æ•°æ®å­˜å‚¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒä¹…å±‚ã€‚æµè§ˆå™¨éœ€è¦å°†æ‰€æœ‰ç±»åž‹çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œåƒcookieè¿™ç§ã€‚æ–°çš„HTMLè§„èŒƒï¼ˆHTML5)å®šä¹‰äº† â€˜web databaseâ€™ ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œå–„ï¼ˆè€Œè½»é‡ï¼‰çš„æµè§ˆå™¨æ•°æ®åº“ã€‚ Figure 1: Browser main components. å›¾1:æµè§ˆå™¨ä¸»è¦ç»„ä»¶ It is important to note that Chrome, unlike most browsers, holds multiple instances of the rendering engine - one for each tab,. Each tab is a separate process. å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒChromeä¸Žå¤§å¤šæ•°æµè§ˆå™¨ä¸åŒï¼Œå®ƒä¼šç”Ÿæˆå¤šä¸ªæ¸²æŸ“å¼•æ“Žçš„å®žä¾‹ï¼Œå³ä¸€ä¸ªæ ‡ç­¾é¡µå¯¹åº”ä¸€ä¸ªæ¸²æŸ“å¼•æ“Žå®žä¾‹ã€‚æ¯ä¸ªæ ‡ç­¾ä¹Ÿæ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ã€‚ I will devote a chapter for each of these components. æˆ‘å°†ä¸ºæ¯ä¸€ä¸ªç»„ä»¶è®¾ç½®ä¸€ä¸ªç« èŠ‚ã€‚ Communication between the components ç»„ä»¶ä¹‹é—´çš„é€šä¿¡Both Firefox and Chrome developed a special communication infrastructures. FireFoxå’ŒChromeéƒ½å„è‡ªå¼€å‘äº†ç‰¹æ®Šçš„é€šä¿¡åŸºç¡€æ¡†æž¶ã€‚ They will be discussed in a special chapter. æˆ‘ä»¬å°†åœ¨ç‰¹å®šç« èŠ‚ä¸­è®¨è®ºã€‚ The rendering engine æ¸²æŸ“å¼•æ“ŽThe responsibility of the rendering engine is wellâ€¦ Rendering, that is display of the requested contents on the browser screen. æ¸²æŸ“å¼•æ“Žçš„èŒè´£å°±æ˜¯ã€‚ã€‚ã€‚æ¸²æŸ“ï¼Œå°±æ˜¯è¯´å°†ç”¨æˆ·è¯·æ±‚çš„å†…å®¹æ˜¾ç¤ºåˆ°æµè§ˆå™¨å±å¹•ä¸Šã€‚ By default the rendering engine can display HTML and XML documents and images. It can display other types through a plug-in (a browser extension). An example is displaying PDF using a PDF viewer plug-in. We will talk about plug-ins and extensions in a special chapter. In this chapter we will focus on the main use case - displaying HTML and images that are formatted using CSS. æ¸²æŸ“å¼•æ“Žé»˜è®¤å¯ä»¥æ˜¾ç¤ºHTMLå’ŒXMLæ–‡æ¡£ä»¥åŠå›¾ç‰‡ã€‚å®ƒå¯ä»¥é€šè¿‡æ’ä»¶ï¼ˆæµè§ˆå™¨æ’ä»¶ï¼‰æ˜¾ç¤ºå…¶ä»–ç±»åž‹çš„èµ„æºã€‚ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªPDFé˜…è¯»å™¨æ’ä»¶åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºPDFæ–‡æ¡£ã€‚æˆ‘ä»¬å°†ä¼šåœ¨ç‰¹å®šçš„ç« èŠ‚è°ˆåˆ°æ’ä»¶å’Œæ‰©å±•ã€‚è¿™ä¸€ç« ï¼Œæˆ‘ä»¬é‡ç‚¹ä»‹ç»ä¸»è¦ç”¨ä¾‹ -æ˜¾ç¤ºä½¿ç”¨CSSæ ¼å¼åŒ–çš„HTMLå’Œå›¾åƒã€‚ Rendering engines æ¸²æŸ“å¼•æ“ŽOur reference browsers - Firefox, Chrome and Safari are built upon two rendering engines. Firefox uses Gecko - a â€œhome madeâ€ Mozilla rendering engine. Both Safari and Chrome use Webkit. æˆ‘ä»¬å‚è€ƒçš„æµè§ˆå™¨-FireFoxï¼ŒChromeå’ŒSafariéƒ½æ˜¯åŸºäºŽä¸¤ä¸ªæ¸²æŸ“å¼•æ“Žã€‚FireFoxä½¿ç”¨çš„æ˜¯Gecko-ç”±Mozillaå…¬å¸è‡ªç ”çš„æ¸²æŸ“å¼•æ“Žã€‚Safariå’ŒChromeéƒ½æ˜¯ç”¨çš„Webkitã€‚ Webkit is an open source rendering engine which started as an engine for the Linux platform and was modified by Apple to support Mac and Windows. See http://webkit.org/ for more details. Webkitæ˜¯ä¸€ä¸ªå§‹äºŽLinuxå¹³å°çš„å¼€æºçš„æ¸²æŸ“å¼•æ“Žï¼Œè¢«Appleå…¬å¸ä¿®æ”¹ä¸ºæ”¯æŒMacå’ŒWindowsæ“ä½œç³»ç»Ÿã€‚ The main flow ä¸»è¦å·¥ä½œæµç¨‹The rendering engine will start getting the contents of the requested document from the networking layer. This will usually be done in 8K chunks. æ¸²æŸ“å¼•æ“Žå°†ä¼šä»Žç½‘ç»œå±‚æŽ¥æ”¶ç”¨æˆ·è¯·æ±‚åˆ°çš„æ–‡æ¡£çš„å†…å®¹ã€‚é€šç•…æ˜¯æŒ‰ç…§8Kå¤§å°çš„å—è¿›è¡Œçš„ã€‚ After that this is the basic flow of the rendering engine: ä¹‹åŽæ¸²æŸ“å¼•æ“Žçš„ä¸»è¦å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š Figure 2:Rendering engine basic flow. å›¾2: æ¸²æŸ“å¼•æ“Žä¸»è¦å·¥ä½œæµ The rendering engine will start parsing the HTML document and turn the tags to DOM nodes in a tree called the â€œcontent treeâ€. It will parse the style data, both in external CSS files and in style elements. The styling information together with visual instructions in the HTML will be used to create another tree - the render tree. æ¸²æŸ“å¼•æ“Žå°†ä¼šè§£æžHTMLæ–‡æ¡£ï¼Œå¹¶å°†HTMLä¸­çš„æ ‡ç­¾è½¬åŒ–æˆä¸€ä¸ªè¢«å«åšâ€œcontent treeï¼ˆå†…å®¹æ ‘ï¼‰â€çš„æ ‘ä¸Šçš„DOMèŠ‚ç‚¹ã€‚å®ƒä¼šè§£æžæ ·å¼æ•°æ®ï¼Œä¸ç®¡æ˜¯æ¥è‡ªå¤–éƒ¨CSSæ–‡ä»¶è¿˜æ˜¯å†…éƒ¨æ ·å¼å…ƒç´ ä¸Šçš„ã€‚æ‰€æœ‰çš„æ ·å¼ä¿¡æ¯è¿žåŒHTMLä¸­çš„å¯è§†åŒ–æŒ‡ä»¤å°†è¢«ä¸€èµ·ç”¨äºŽåˆ›å»ºå¦ä¸€æ£µæ ‘-æ¸²æŸ“æ ‘ã€‚ The render tree contains rectangles with visual attributes like color and dimensions. The rectangles are in the right order to be displayed on the screen. æ¸²æŸ“æ ‘åŒ…å«äº†å…·æœ‰è§†è§‰å±žæ€§ï¼ˆå¦‚é¢œè‰²å’Œå°ºå¯¸ï¼‰çš„çŸ©å½¢ã€‚è¿™äº›çŸ©å½¢ä»¥æ­£ç¡®çš„é¡ºåºæŽ’åˆ—ï¼Œå¯ä»¥æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ After the construction of the render tree it goes through a â€œlayoutâ€œ process. This means giving each node the exact coordinates where it should appear on the screen. The next stage is painting - the render tree will be traversed and each node will be painted using the UI backend layer. åœ¨åˆ›å»ºå®Œæ¸²æŸ“æ ‘ä»¥åŽæ¸²æŸ“å¼•æ“Žè¦ç»åŽ†ä¸€ä¸ªå¸ƒå±€çš„å¤„ç†ã€‚è¿™å°±æ„å‘³ç€è¦ç»™æ¯ä¸ªèŠ‚ç‚¹æä¾›å®ƒä»¬åº”è¯¥å‡ºçŽ°åœ¨å±å¹•ä¸Šçš„ç¡®åˆ‡åº§æ ‡ã€‚ä¸‹ä¸€é˜¶æ®µæ˜¯ç»˜åˆ¶ - æ¸²æŸ“æ ‘å°†ä¼šè¢«éåŽ†ï¼Œå¹¶ä½¿ç”¨UIåŽç«¯ å±‚ç»˜åˆ¶æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚ Itâ€™s important to understand that this is a gradual process. For better user experience, the rendering engine will try to display contents on the screen as soon as possible. It will not wait until all HTML is parsed before starting to build and layout the render tree. Parts of the content will be parsed and displayed, while the process continues with the rest of the contents that keeps coming from the network. ç†è§£è¿™æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹å¾ˆé‡è¦ã€‚ä¸ºäº†æ›´ä½³çš„ç”¨æˆ·ä½“éªŒï¼Œæ¸²æŸ“å¼•æ“Žå°†ä¼šå°è¯•å°½å¿«åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå†…å®¹ã€‚å®ƒä¸ä¼šç­‰åˆ°æ‰€æœ‰HTMLè¢«è§£æžå°±ä¼šå¼€å§‹æž„å»ºå’Œå¸ƒå±€æ¸²æŸ“æ ‘ã€‚éƒ¨åˆ†å†…å®¹ä¼šè¢«è§£æžå’Œæ˜¾ç¤ºï¼ŒåŒæ—¶ç»§ç»­å¤„ç†æ¥è‡ªç½‘ç»œçš„å‰©ä½™å†…å®¹ã€‚ Main flow examples Figure 3: Webkit main flow å›¾3:Webkit ä¸»è¦å·¥ä½œæµ Figure 4: Mozillaâ€™s Gecko rendering engine main flow(3.6) å›¾4:Mozillaçš„Geckoæ¸²æŸ“å¼•æ“Žçš„ä¸»è¦å·¥ä½œæµ From figures 3 and 4 you can see that although Webkit and Gecko use slightly different terminology, the flow is basically the same. ä»Ž å›¾3 å’Œ å›¾4 ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡ WebKit å’Œ Gecko ä½¿ç”¨çš„æœ¯è¯­ç•¥æœ‰ä¸åŒï¼Œä½†æ˜¯æµç¨‹å¤§ä½“ç›¸åŒã€‚ Gecko calls the tree of visually formatted elements - Frame tree. Each element is a frame. Webkit uses the term â€œRender Treeâ€ and it consists of â€œRender Objectsâ€. Webkit uses the term â€œlayoutâ€ for the placing of elements, while Gecko calls it â€œReflowâ€. â€œAttachmentâ€ is Webkitâ€™s term for connecting DOM nodes and visual information to create the render tree. A minor non semantic difference is that Gecko has an extra layer between the HTML and the DOM tree. It is called the â€œcontent sinkâ€ and is a factory for making DOM elements. We will talk about each part of the flow: Gecko å°†è¿™ä¸ªå¯è§†åŒ–æ ¼å¼çš„å…ƒç´ æ ‘ç§°ä¹‹ä¸º - Frame treeï¼ˆå¸§æ ‘ï¼‰ã€‚æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªframeï¼ˆå¸§ï¼‰ã€‚Webkit ç”¨ â€œRender Treeâ€ ï¼ˆæ¸²æŸ“æ ‘ï¼‰æ¥ç§°å‘¼å®ƒï¼Œè€Œä¸”å®ƒåŒ…å«çš„æ˜¯ â€œRender Objectsâ€ï¼ˆæ¸²æŸ“å¯¹è±¡ï¼‰ã€‚Webkit ç”¨ â€œlayoutâ€ ï¼ˆå¸ƒå±€ï¼‰æ¥æ”¾ç½®å…ƒç´ ï¼Œä½†æ˜¯ Gecko ç§°ä¹‹ä¸º â€œReflowâ€ï¼ˆæ¸²æŸ“ï¼‰ã€‚â€Attachmentâ€ æ˜¯ Webkit ç”¨äºŽè¿žæŽ¥ DOM èŠ‚ç‚¹ä¸Žå¯è§†ä¿¡æ¯ä»¥åˆ›å»ºæ¸²æŸ“æ ‘çš„æœ¯è¯­ã€‚ä¸€ä¸ªå°çš„éžè¯­ä¹‰åŒ–å·®å¼‚æ˜¯ Gecko åœ¨ HTML å’Œ DOM ä¹‹é—´è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å±‚ã€‚è¢«ç§°ä½œ â€œcontent sinkâ€ï¼ˆå†…å®¹æŽ¥æ”¶å™¨ï¼‰ï¼Œæ˜¯åˆ¶é€  DOM å…ƒç´ çš„å·¥åŽ‚ã€‚æµç¨‹çš„å„ä¸ªéƒ¨åˆ†æˆ‘ä»¬éƒ½ä¼šè°ˆåˆ°ï¼š Parsing - generalSince parsing is a very significant process within the rendering engine, we will go into it a little more deeply. Letâ€™s begin with a little introduction about parsing.Parsing a document means translating it to some structure that makes sense - something the code can understand and use. The result of parsing is usually a tree of nodes that represent the structure of the document. It is called a parse tree or a syntax tree.Example - parsing the expression â€œ2 + 3 - 1â€ could return this tree: Figure 5: mathematical expression tree node GrammarsParsing is based on the syntax rules the document obeys - the language or format it was written in. Every format you can parse must have deterministic grammar consisting of vocabulary and syntax rules. It is called a context free grammar. Human languages are not such languages and therefore cannot be parsed with conventional parsing techniques. Parser - Lexer combinationParsing can be separated into two sub processes - lexical analysis and syntax analysis. Lexical analysis is the process of breaking the input into tokens. Tokens are the language vocabulary - the collection of valid building blocks. In human language it will consist of all the words that appear in the dictionary for that language. Syntax analysis is the applying of the language syntax rules. Parsers usually divide the work between two components - the lexer(sometimes called tokenizer) that is responsible for breaking the input into valid tokens, and the parser that is responsible for constructing the parse tree by analyzing the document structure according to the language syntax rules. The lexer knows how to strip irrelevant characters like white spaces and line breaks. Figure 6: from source document to parse trees The parsing process is iterative. The parser will usually ask the lexer for a new token and try to match the token with one of the syntax rules. If a rule is matched, a node corresponding to the token will be added to the parse tree and the parser will ask for another token.If no rule matches, the parser will store the token internally, and keep asking for tokens until a rule matching all the internally stored tokens is found. If no rule is found then the parser will raise an exception. This means the document was not valid and contained syntax errors. TranslationMany times the parse tree is not the final product. Parsing is often used in translation - transforming the input document to another format. An example is compilation. The compiler that compiles a source code into machine code first parses it into a parse tree and then translates the tree into a machine code document. Figure 7: compilation flow Parsing exampleIn figure 5 we built a parse tree from a mathematical expression. Letâ€™s try to define a simple mathematical language and see the parse process. Vocabulary: Our language can include integers, plus signs and minus signs. Syntax: The language syntax building blocks are expressions, terms and operations. Our language can include any number of expressions. A expression is defined as a â€œtermâ€ followed by an â€œoperationâ€ followed by another term An operation is a plus token or a minus token A term is an integer token or an expression Letâ€™s analyze the input â€œ2 + 3 - 1â€.The first substring that matches a rule is â€œ2â€, according to rule #5 it is a term. The second match is â€œ2 + 3â€ this matches the second rule - a term followed by an operation followed by another term. The next match will only be hit at the end of the input. â€œ2 + 3 - 1â€ is an expression because we already know that ?2+3? is a term so we have a term followed by an operation followed by another term. â€œ2 + + â€œwill not match any rule and therefore is an invalid input. Formal definitions for vocabulary and syntaxVocabulary is usually expressed by regular expressions. For example our language will be defined as: 123INTEGER :0|[1-9][0-9]*PLUS : +MINUS: - As you see, integers are defined by a regular expression. Syntax is usually defined in a format called BNF. Our language will be defined as: 123expression := term operation termoperation := PLUS | MINUSterm := INTEGER | expression We said that a language can be parsed by regular parsers if its grammar is a context frees grammar. An intuitive definition of a context free grammar is a grammar that can be entirely expressed in BNF. For a formal definition see http://en.wikipedia.org/wiki/Context-free_grammar Types of parsersThere are two basic types of parsers - top down parsers and bottom up parsers. An intuitive explanation is that top down parsers see the high level structure of the syntax and try to match one of them. Bottom up parsers start with the input and gradually transform it into the syntax rules, starting from the low level rules until high level rules are met. Letâ€™s see how the two types of parsers will parse our example: Top down parser will start from the higher level rule - it will identify â€œ2 + 3â€ as an expression. It will then identify â€œ2 + 3 - 1â€ as an expression (the process of identifying the expression evolves matching the other rules, but the start point is the highest level rule). The bottom up parser will scan the input until a rule is matched it will then replace the matching input with the rule. This will go on until the end of the input. The partly matched expression is placed on the parsers stack. Stack Input 2 + 3 - 1 term + 3 - 1 term operation 3 - 1 expression - 1 expression operation 1 expression This type of bottom up parser is called a shift reduce parser, because the input is shifted to the right (imagine a pointer pointing first at the input start and moving to the right) and is gradually reduced to syntax rules. Generating parsers automaticallyThere are tools that can generate a parser for you. They are called parser generators. You feed them with the grammar of your language - its vocabulary and syntax rules and they generate a working parser. Creating a parser requires a deep understanding of parsing and its not easy to create an optimized parser by hand, so parser generators can be very useful. Webkit uses two well known parser generators - Flex for creating a lexer and Bison for creating a parser (you might run into them with the names Lex and Yacc). Flex input is a file containing regular expression definitions of the tokens. Bisonâ€™s input is the language syntax rules in BNF format. HTML ParserThe job of the HTML parser is to parse the HTML markup into a parse tree. The HTML grammar definitionThe vocabulary and syntax of HTML are defined in specifications created by the w3c organization. The current version is HTML4 and work on HTML5 is in progress. Not a context free grammarAs we have seen in the parsing introduction, grammar syntax can be defined formally using formats like BNF.Unfortunately all the conventional parser topics do not apply to HTML (I didnâ€™t bring them up just for fun - they will be used in parsing CSS and JavaScript). HTML cannot easily be defined by a context free grammar that parsers need.There is a formal format for defining HTML - DTD (Document Type Definition) - but it is not a context free grammar.This appears strange at first site - HTML is rather close to XML .There are lots of available XML parsers. There is an XML variation of HTML - XHTML - so whatâ€™s the big difference?The difference is that HTML approach is more â€œforgivingâ€, it lets you omit certain tags which are added implicitly, sometimes omit the start or end of tags etc. On the whole itâ€™s a â€œsoftâ€ syntax, as opposed to XMLâ€™s stiff and demanding syntax.Apparently this seemingly small difference makes a world of a difference. On one hand this is the main reason why HTML is so popular - it forgives your mistakes and makes life easy for the web author. On the other hand, it makes it difficult to write a format grammar. So to summarize - HTML cannot be parsed easily, not by conventional parsers since its grammar is not a context free grammar, and not by XML parsers. HTML DTDHTML definition is in a DTD format. This format is used to define languages of the SGML family. The format contains definitions for all allowed elements, their attributes and hierarchy. As we saw earlier, the HTML DTD doesnâ€™t form a context free grammar. There are a few variations of the DTD. The strict mode conforms solely to the specifications but other modes contain support for markup used by browsers in the past. The purpose is backwards compatibility with older content. The current strict DTD is here:http://www.w3.org/TR/html4/strict.dtd DOMThe output tree - the parse tree is a tree of DOM element and attribute nodes. DOM is short for Document Object Model. It is the object presentation of the HTML document and the interface of HTML elements to the outside world like JavaScript.The root of the tree is the â€œDocumentâ€œ object. The DOM has an almost one to one relation to the markup. Example, this markup: 12345678&lt;html&gt; &lt;body&gt; &lt;p&gt; Hello World &lt;/p&gt; &lt;div&gt; &lt;img src="example.png"/&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; Would be translated to the following DOM tree: Figure 8: DOM tree of the example markup Like HTML, DOM is specified by the w3c organization. See http://www.w3.org/DOM/DOMTR. It is a generic specification for manipulating documents. A specific module describes HTML specific elements. The HTML definitions can be found here:http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/idl-definitions.html. When I say the tree contains DOM nodes, I mean the tree is constructed of elements that implement one of the DOM interfaces. Browsers use concrete implementations that have other attributes used by the browser internally. The parsing algorithmAs we saw in the previous sections, HTML cannot be parsed using the regular top down or bottom up parsers. The reasons are: The forgiving nature of the language. The fact that browsers have traditional error tolerance to support well known cases of invalid HTML. The parsing process in reentrant. Usually the source doesnâ€™t change during parsing, but in HTML, script tags containing â€œdocument.writeâ€ can add extra tokens, so the parsing process actually modifies the input. Unable to use the regular parsing techniques, browsers create custom parsers for parsing HTML. The parsing algorithm is described in details by the HTML5 specification. The algorithm consists of two stages - tokenization and tree construction. Tokenization is the lexical analysis, parsing the input into tokens. Among HTML tokens are start tags, end tags, attribute names and attribute values. The tokenizer recognizes the token, gives it to the tree constructor and consumes the next character for recognizing the next token and so on until the end of the input. Figure 6: HTML parsing flow (taken from HTML5 spec) The tokenization algorithmThe algorithmâ€™s output is an HTML token. The algorithm is expressed as a state machine. Each state consumes one or more characters of the input stream and updates the next state according to those characters. The decision is influenced by the current tokenization state and by the tree construction state. This means the same consumed character will yield different results for the correct next state, depending on the current state. The algorithm is too complex to bring fully, so letâ€™s see a simple example that will help us understand the principal. Basic example - tokenizing the following HTML: 12345&lt;html&gt; &lt;body&gt; Hello world &lt;/body&gt;&lt;/html&gt; The initial state is the â€œData stateâ€. When the â€œ&lt;â€ character is encountered, the state is changed to â€œTag open stateâ€ . Consuming an â€œa-zâ€ character causes creation of a â€œStart tag tokenâ€, the state is change to â€œTag name stateâ€ . We stay in this state until the â€œ&gt;â€ character is consumed. Each character is appended to the new token name. In our case the created token is an â€œhtmlâ€ token. When the â€œ&gt;â€ tag is reached, the current token is emitted and the state changes back to the â€œData stateâ€ . The â€œâ€œ tag will be treated by the same steps. So far the â€œhtmlâ€ and â€œbodyâ€ tags were emitted. We are now back at the â€œData stateâ€ . Consuming the â€œHâ€ character of â€œHello worldâ€ will cause creation and emitting of a character token, this goes on until the â€œ&lt;â€ of â€œâ€œ is reached. We will emit a character token for each character of â€œHello worldâ€. We are now back at the â€œTag open stateâ€ . Consuming the next input â€œ/â€œ will cause creation of an â€œend tag tokenâ€ and a move to the â€œTag name stateâ€ . Again we stay in this state until we reach â€œ&gt;â€.Then the new tag token will be emitted and we go back to the â€œData stateâ€ . The â€œâ€œ input will be treated like the previous case. Figure 9: Tokenizing the example input Tree construction algorithmWhen the parser is created the Document object is created. During the tree construction stage the DOM tree with the Document in its root will be modified and elements will be added to it. Each node emitted by the tokenizer will be processed by the tree constructor. For each token the specification defines which DOM element is relevant to it and will be created for this token. Except of adding the element to the DOM tree it is also added to a stack of open elements. This stack is used to correct nesting mismatches and unclosed tags. The algorithm is also described as a state machine. The states are called â€œinsertion modesâ€. Letâ€™s see the tree construction process for the example input: 12345&lt;html&gt; &lt;body&gt; Hello world &lt;/body&gt;&lt;/html&gt; The input to the tree construction stage is a sequence of tokens from the tokenization stage The first mode is the â€œinitial modeâ€. Receiving the html token will cause a move to the â€œbefore htmlâ€ mode and a reprocessing of the token in that mode. This will cause a creation of the HTMLHtmlElement element and it will be appended to the root Document object.The state will be changed to â€œbefore headâ€. We receive the â€œbodyâ€ token. An HTMLHeadElement will be created implicitly although we donâ€™t have a â€œheadâ€ token and it will be added to the tree.We now move to the â€œin headâ€ mode and then to â€œafter headâ€. The body token is reprocessed, an HTMLBodyElement is created and inserted and the mode is transferred to â€œin bodyâ€.The character tokens of the â€œHello worldâ€ string are now received. The first one will cause creation and insertion of a â€œTextâ€ node and the other characters will be appended to that node.The receiving of the body end token will cause a transfer to â€œafter bodyâ€ mode. We will now receive the html end tag which will move us to â€œafter after bodyâ€ mode. Receiving the end of file token will end the parsing. Figure 10: tree construction of example html Actions when the parsing is finishedAt this stage the browser will mark the document as interactive and start parsing scripts that are in â€œdeferredâ€ mode - those who should be executed after the document is parsed. The document state will be then set to â€œcompleteâ€ and a â€œloadâ€ event will be fired. You can see the full algorithms for tokenization and tree construction in HTML5 specification - http://www.w3.org/TR/html5/syntax.html#html-parser Browsers error toleranceYou never get an â€œInvalid Syntaxâ€ error on an HTML page. Browsers fix an invalid content and go on.Take this HTML for example: 123456789&lt;html&gt; &lt;mytag&gt; &lt;/mytag&gt; &lt;div&gt; &lt;p&gt; &lt;/div&gt; Really lousy HTML &lt;/p&gt;&lt;/html&gt; I must have violated about a million rules (â€œmytagâ€ is not a standard tag, wrong nesting of the â€œpâ€ and â€œdivâ€ elements and more) but the browser still shows it correctly and doesnâ€™t complain. So a lot of the parser code is fixing the HTML author mistakes. The error handling is quite consistent in browsers but amazingly enough itâ€™s not part of HTML current specification. Like bookmarking and back/forward buttons itâ€™s just something that developed in browsers over the years. There are known invalid HTML constructs that repeat themselves in many sites and the browsers try to fix them in a conformant way with other browsers. The HTML5 specification does define some of these requirements. Webkit summarizes this nicely in the comment at the beginning of the HTML parser class 12345678910111213141516The parser parses tokenized input into the document, building up the document tree. If the document is well-formed, parsing it is straightforward. Unfortunately, we have to handle many HTML documents that are not well-formed, so the parser has to be tolerant about errors. We have to take care of at least the following error conditions: 1. The element being added is explicitly forbidden inside some outer tag.In this case we should close all tags up to the one, which forbids the element, and add it afterwards. 2. We are not allowed to add the element directly. It could be that the person writing the document forgot some tag in between (or that the tag in between is optional).This could be the case with the following tags: HTML HEAD BODY TBODY TR TD LI (did I forget any?). 3. We want to add a block element inside to an inline element. Close all inline elements up to the next higher block element. 4. If this doesn&apos;t help, close elements until we are allowed to add the element or ignore the tag. Letâ€™s see some Webkit error tolerance examples: 1&lt;/br&gt; instead of &lt;br&gt; Some sites use instead of . In order to be compatible with IE and Firefox Webkit treats this like .The code: 1234if (t-&gt;isCloseTag(brTag) &amp;&amp; m_document-&gt;inCompatMode()) &#123; reportError(MalformedBRError); t-&gt;beginTag = true;&#125; Note - the error handling is internal - it wonâ€™t be presented to the user. A stray tableA stray table is a table inside another table contents but not inside a table cell.Like this example: 123456&lt;table&gt; &lt;table&gt; &lt;tr&gt;&lt;td&gt;inner table&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; &lt;tr&gt;&lt;td&gt;outer table&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; Webkit will change the hierarchy to two sibling tables: 123456&lt;table&gt; &lt;tr&gt;&lt;td&gt;outer table&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt; &lt;tr&gt;&lt;td&gt;inner table&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; The code: 12if (m_inStrayTableContent &amp;&amp; localName == tableTag) popBlock(tableTag); Webkit uses a stack for the current element contents - it will pop the inner table out of the outer table stack. The tables will now be siblings. Nested form elementsIn case the user puts a form inside another form, the second form is ignored.The code: 123if (!m_currentFormElement) &#123; m_currentFormElement = new HTMLFormElement(formTag, m_document);&#125; A too deep tag hierarchyThe comment speaks for itself. 12www.liceo.edu.mx is an example of a site that achieves a level of nesting of about 1500 tags, all from a bunch of &lt;b&gt;s.We will only allow at most 20 nested tags of the same type before just ignoring them all together. 123456789bool HTMLParser::allowNestedRedundantTag(const AtomicString&amp; tagName)&#123;unsigned i = 0;for (HTMLStackElem* curr = m_blockStack; i &lt; cMaxRedundantTagDepth &amp;&amp; curr &amp;&amp; curr-&gt;tagName == tagName; curr = curr-&gt;next, i++) &#123; &#125;return i != cMaxRedundantTagDepth;&#125; Misplaced html or body end tagsAgain - the comment speaks for itself. 123Support for really broken html.We never close the body tag, since some stupid web pages close it before the actual end of the doc.Let&apos;s rely on the end() call to close things. 12if (t-&gt;tagName == htmlTag || t-&gt;tagName == bodyTag ) return; So web authors beware - unless you want to appear as an example in a Webkit error tolerance code - write well formed HTML. CSS parsingRemember the parsing concepts in the introduction? Well, unlike HTML, CSS is a context free grammar and can be parsed using the types of parsers described in the introduction. In fact the CSS specification defines CSS lexical and syntax grammar (http://www.w3.org/TR/CSS2/grammar.html). Letâ€™s see some examples:The lexical grammar (vocabulary) is defined by regular expressions for each token: 1234567comment \/\*[^*]*\*+([^/*][^*]*\*+)*\/num [0-9]+|[0-9]*"."[0-9]+nonascii [\200-\377]nmstart [_a-z]|&#123;nonascii&#125;|&#123;escape&#125;nmchar [_a-z0-9-]|&#123;nonascii&#125;|&#123;escape&#125;name &#123;nmchar&#125;+ident &#123;nmstart&#125;&#123;nmchar&#125;* â€œidentâ€ is short for identifier, like a class name. â€œnameâ€ is an element id (that is referred by â€œ#â€ ) The syntax grammar is described in BNF. 123456789101112131415161718192021222324ruleset : selector [ ',' S* selector ]* '&#123;' S* declaration [ ';' S* declaration ]* '&#125;' S* ;selector : simple_selector [ combinator selector | S+ [ combinator selector ] ] ;simple_selector : element_name [ HASH | class | attrib | pseudo ]* | [ HASH | class | attrib | pseudo ]+ ;class : '.' IDENT ;element_name : IDENT | '*' ;attrib : '[' S* IDENT S* [ [ '=' | INCLUDES | DASHMATCH ] S* [ IDENT | STRING ] S* ] ']' ;pseudo : ':' [ IDENT | FUNCTION S* [IDENT S*] ')' ] ; Explanation: A ruleset is this structure: 1234div.error , a.error &#123; color:red; font-weight:bold;&#125; div.error and a.error are selectors. The part inside the curly braces contains the rules that are applied by this ruleset. This structure is defined formally in this definition: 1234ruleset : selector [ ',' S* selector ]* '&#123;' S* declaration [ ';' S* declaration ]* '&#125;' S* ; This means a ruleset is a selector or optionally number of selectors separated by a coma and spaces (S stands for white space). A ruleset contains curly braces and inside them a declaration or optionally a number of declarations separated by a semicolon. â€œdeclarationâ€ and â€œselectorâ€ will be defined in the following BNF definitions. Webkit CSS parserWebkit uses Flex and Bison parser generators to create parsers automatically from the CSS grammar files. As you recall from the parser introduction, Bison creates a bottom up shift reduce parser. Firefox uses a top down parser written manually. In both cases each CSS file is parsed into a StyleSheet object, each object contains CSS rules. The CSS rule objects contain selector and declaration objects and other object corresponding to CSS grammar. Figure 7: parsing CSS Parsing scriptsThis will be dealt with in the chapter about JavaScript The order of processing scripts and style sheetsScriptsThe model of the web is synchronous. Authors expect scripts to be parsed and executed immediately when the parser reaches a tag. The parsing of the document halts until the script was executed. If the script is external then the resource must be first fetched from the network - this is also done synchronously, the parsing halts until the resource is fetched. This was the model for many years and is also specified in HTML 4 and 5 specifications. Authors could mark the script as â€œdeferâ€ and thus it will not halt the document parsing and will execute after it is parsed. HTML5 adds an option to mark the script as asynchronous so it will be parsed and executed by a different thread. Speculative parsingBoth Webkit and Firefox do this optimization. While executing scripts, another thread parses the rest of the document and finds out what other resources need to be loaded from the network and loads them. These way resources can be loaded on parallel connections and the overall speed is better. Note - the speculative parser doesnâ€™t modify the DOM tree and leaves that to the main parser, it only parses references to external resources like external scripts, style sheets and images. Style sheetsStyle sheets on the other hand have a different model. Conceptually it seems that since style sheets donâ€™t change the DOM tree, there is no reason to wait for them and stop the document parsing. There is an issue, though, of scripts asking for style information during the document parsing stage. If the style is not loaded and parsed yet, the script will get wrong answers and apparently this caused lots of problems. It seems to be an edge case but is quite common. Firefox blocks all scripts when there is a style sheet that is still being loaded and parsed. Webkit blocks scripts only when they try to access for certain style properties that may be effected by unloaded style sheets. Render tree constructionWhile the DOM tree is being constructed, the browser constructs another tree, the render tree. This tree is of visual elements in the order in which they will be displayed. It is the visual representation of the document. The purpose of this tree is to enable painting the contents in their correct order. Firefox calls the elements in the render tree â€œframesâ€. Webkit uses the term renderer or render object.A renderer knows how to layout and paint itself and itâ€™s children.Webkits RenderObject class, the base class of the renderers has the following definition: 12345678class RenderObject&#123; virtual void layout(); virtual void paint(PaintInfo); virtual void rect repaintRect(); Node* node; //the DOM node RenderStyle* style; // the computed style RenderLayer* containgLayer; //the containing z-index layer&#125; Each renderer represents a rectangular area usually corresponding to the nodeâ€™s CSS box, as described by the CSS2 spec. It contains geometric information like width, height and position.The box type is affected by the â€œdisplayâ€ style attribute that is relevant for the node (see the style computation section). Here is Webkit code for deciding what type of renderer should be created for a DOM node, according to the display attribute. 123456789101112131415161718192021222324252627RenderObject* RenderObject::createObject(Node* node, RenderStyle* style)&#123; Document* doc = node-&gt;document(); RenderArena* arena = doc-&gt;renderArena(); ... RenderObject* o = 0; switch (style-&gt;display()) &#123; case NONE: break; case INLINE: o = new (arena) RenderInline(node); break; case BLOCK: o = new (arena) RenderBlock(node); break; case INLINE_BLOCK: o = new (arena) RenderBlock(node); break; case LIST_ITEM: o = new (arena) RenderListItem(node); break; ... &#125; return o;&#125; The element type is also considered, for example form controls and tables have special frames. In Webkit if an element wants to create a special renderer it will override the â€œcreateRendererâ€ method. The renderers points to style objects that contains the non geometric information. The render tree relation to the DOM treeThe renderers correspond to the DOM elements, but the relation is not one to one. Non visual DOM elements will not be inserted in the render tree. An example is the â€œheadâ€ element. Also elements whose display attribute was assigned to â€œnoneâ€ will not appear in the tree (elements with â€œhiddenâ€ visibility attribute will appear in the tree). There are DOM elements which correspond to several visual objects. These are usually elements with complex structure that cannot be described by a single rectangle. For example, the â€œselectâ€ element has 3 renderers - one for the display area, one for the drop down list box and one for the button. Also when text is broken into multiple lines because the width is not sufficient for one line, the new lines will be added as extra renderers.Another example of several renderers is broken HTML. According to CSS spec an inline element must contain either only block element or only inline elements. In case of mixed content, anonymous block renderers will be created to wrap the inline elements. Some render objects correspond to a DOM node but not in the same place in the tree. Floats and absolutely positioned elements are out of flow, placed in a different place in the tree, and mapped to the real frame. A placeholder frame is where they should have been. Figure 11: The render tree and the corresponding DOM tree(3.1). The â€œViewportâ€ is the initial containing block. In Webkit it will be the â€œRenderViewâ€ object. The flow of constructing the treeIn Firefox, the presentation is registered as a listener for DOM updates. The presentation delegates frame creation to the â€œFrameConstructorâ€ and the constructor resolves style(see style computation) and creates a frame. In Webkit the process of resolving the style and creating a renderer is called â€œattachmentâ€. Every DOM node has an â€œattachâ€ method. Attachment is synchronous, node insertion to the DOM tree calls the new node â€œattachâ€ method. Processing the html and body tags results in the construction of the render tree root. The root render object corresponds to what the CSS spec calls the containing block - the top most block that contains all other blocks. Its dimensions are the viewport - the browser window display area dimensions. Firefox calls it ViewPortFrame and Webkit calls it RenderView. This is the render object that the document point to. The rest of the tree is constructed as a DOM nodes insertion.See CSS2 on this topic - http://www.w3.org/TR/CSS21/intro.html#processing-model Style ComputationBuilding the render tree requires calculating the visual properties of each render object. This is done by calculating the style properties of each element. The style includes style sheets of various origins, inline style elements and visual properties in the HTML (like the â€œbgcolorâ€ property).The later is translated to matching CSS style properties. The origins of style sheets are the browserâ€™s default style sheets, the style sheets provided by the page author and user style sheets - these are style sheets provides by the browser user (browsers let you define your favorite style. In Firefox, for instance, this is done by placing a style sheet in the â€œFirefox Profileâ€ folder). Style computation brings up a few difficulties: Style data is a very large construct, holding the numerous style properties, this can cause memory problems. Finding the matching rules for each element can cause performance issues if itâ€™s not optimized. Traversing the entire rule list for each element to find matches is a heavy task. Selectors can have complex structure that can cause the matching process to start on a seemingly promising path that is proven to be futile and another path has to be tried.For example - this compound selector: 123div div div div&#123;...&#125; Means the rules apply to a â€œâ€œ who is the descendant of 3 divs.Suppose you want to check if the rule applies for a given â€œâ€œ element. You choose a certain path up the tree for checking. You may need to traverse the node tree up just to find out there are only two divs and the rule does not apply. You then need to try other paths in the tree. Applying the rules involves quite complex cascade rules that define the hierarchy of the rules. Letâ€™s see how the browsers face these issues: Sharing style dataWebkit nodes references style objects (RenderStyle) These objects can be shared by nodes in some conditions. The nodes are siblings or cousins and: The elements must be in the same mouse state (e.g., one canâ€™t be in :hover while the other isnâ€™t) Neither element should have an id The tag names should match The class attributes should match The set of mapped attributes must be identical The link states must match The focus states must match Neither element should be affected by attribute selectors, where affected is defined as having any selector match that uses an attribute selector in any position within the selector at all There must be no inline style attribute on the elements There must be no sibling selectors in use at all. WebCore simply throws a global switch when any sibling selector is encountered and disables style sharing for the entire document when they are present. This includes the + selector and selectors like :first-child and :last-child. Firefox rule treeFirefox has two extra trees for easier style computation - the rule tree and style context tree. Webkit also has style objects but they are not stored in a tree like the style context tree, only the DOM node points to its relevant style. Figure 13: Firefox style context tree(2.2) The style contexts contain end values. The values are computed by applying all the matching rules in the correct order and performing manipulations that transform them from logical to concrete values. For example - if the logical value is percentage of the screen it will be calculated and transformed to absolute units. The rule tree idea is really clever. It enables sharing these values between nodes to avoid computing them again. This also saves space. All the matched rules are stored in a tree. The bottom nodes in a path have higher priority. The tree contains all the paths for rule matches that were found. Storing the rules is done lazily. The tree isnâ€™t calculated at the beginning for every node, but whenever a node style needs to be computed the computed paths are added to the tree. The idea is to see the tree paths as words in a lexicon. Lets say we already computed this rule tree: Suppose we need to match rules for another element in the content tree, and find out the matched rules (in the correct order) are B - E - I. We already have this path in the tree because we already computed path A - B - E - I - L. We will now have less work to do. Letâ€™s see how the tree saves as work. Division into structsThe style contexts are divided into structs. Those structs contain style information for a certain category like border or color. All the properties in a struct are either inherited or non inherited. Inherited properties are properties that unless defined by the element, are inherited from its parent. Non inherited properties (called â€œresetâ€ properties) use default values if not defined. The tree helps us by caching entire structs (containing the computed end values) in the tree. The idea is that if the bottom node didnâ€™t supply a definition for a struct, a cached struct in an upper node can be used. Computing the style contexts using the rule treeWhen computing the style context for a certain element, we first compute a path in the rule tree or use an existing one. We then begin to apply the rules in the path to fill the structs in our new style context. We start at the bottom node of the path - the one with the highest precedence (usually the most specific selector) and traverse the tree up until our struct is full. If there is no specification for the struct in that rule node, then we can greatly optimize - we go up the tree until we find a node that specifies it fully and simply point to it - thatâ€™s the best optimization - the entire struct is shared. This saves computation of end values and memory.If we find partial definitions we go up the tree until the struct is filled. If we didnâ€™t find any definitions for our struct, then in case the struct is an â€œinheritedâ€ type - we point to the struct of our parent in the context tree, in this case we also succeeded in sharing structs. If its a reset struct then default values will be used. If the most specific node does add values then we need to do some extra calculations for transforming it to actual values. We then cache the result in the tree node so it can be used by children. In case an element has a sibling or a brother that points to the same tree node then the entire style context can be shared between them. Lets see an example: Suppose we have this HTML 123456789101112&lt;html&gt; &lt;body&gt; &lt;div class="err" id="div1"&gt; &lt;p&gt; this is a &lt;span class="big"&gt; big error &lt;/span&gt; this is also a &lt;span class="big"&gt; very big error&lt;/span&gt; error &lt;/p&gt; &lt;/div&gt; &lt;div class="err" id="div2"&gt;another error&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; And the following rules: 1234561. div &#123;margin:5px;color:black&#125;2. .err &#123;color:red&#125;3. .big &#123;margin-top:3px&#125;4. div span &#123;margin-bottom:4px&#125;5. #div1 &#123;color:blue&#125;6. #div 2 &#123;color:green&#125; To simplify things letâ€™s say we need to fill out only two structs - the color struct and the margin struct. The color struct contains only one member - the color The margin struct contains the four sides.The resulting rule tree will look like this (the nodes are marked with the node name : the # of rule they point at): Figure 12: The rule tree The context tree will look like this (node name : rule node they point to): Figure 13: The context tree Suppose we parse the HTML and get to the second tag. We need to create a style context for this node and fill its style structs.We will match the rules and discover that the matching rules for the are 1 ,2 and 6. This means there is already an existing path in the tree that our element can use and we just need to add another node to it for rule 6 (node F in the rule tree).We will create a style context and put it in the context tree. The new style context will point to node F in the rule tree. We now need to fill the style structs. We will begin by filling out the margin struct. Since the last rule node(F) doesnâ€™t add to the margin struct, we can go up the tree until we find a cached struct computed in a previous node insertion and use it. We will find it on node B, which is the uppermost node that specified margin rules. We do have a definition for the color struct, so we canâ€™t use a cached struct. Since color has one attribute we donâ€™t need to go up the tree to fill other attributes. We will compute the end value (convert string to RGB etc) and cache the computed struct on this node. The work on the second element is even easier. We will match the rules and come to the conclusion that it points to rule G, like the previous span. Since we have siblings that point to the same node, we can share the entire style context and just point to the context of the previous span. For structs that contain rules that are inherited from the parent, caching is done on the context tree (the color property is actually inherited, but Firefox treats it as reset and caches it on the rule tree).For instance if we added rules for fonts in a paragraph: 1p &#123;font-family:Verdana;font size:10px;font-weight:bold&#125; Then the div element, which is a child of the paragraph in the context tree, could have shared the same font struct as his parent. This is if no font rules where specified for the â€œdivâ€. In Webkit, who does not have a rule tree, the matched declarations are traversed 4 times. First non important high priority properties (properties that should be applied first because others depend on them - like display) are applied, than high priority important, then normal priority non important, then normal priority important rules. This means that properties that appear multiple times will be resolved according to the correct cascade order. The last wins. So to summarize - sharing the style objects(entirely or some of the structs inside them) solves issues 1 and 3. Firefox rule tree also helps in applying the properties in the correct order. Manipulating the rules for an easy matchThere are several sources for style rules: CSS rules, either in external style sheets or in style elements. 1p &#123;color:blue&#125; Inline style attributes like 1&lt;p style="color:blue" /&gt; HTML visual attributes (which are mapped to relevant style rules) 1&lt;p bgcolor="blue" /&gt; The last two are easily matched to the element since he owns the style attributes and HTML attributes can be mapped using the element as the key. As noted previously in issue #2, the CSS rule matching can be trickier. To solve the difficulty, the rules are manipulated for easier access. After parsing the style sheet, the rules are added one of several hash maps, according to the selector. There are maps by id, by class name, by tag name and a general map for anything that doesnâ€™t fit into those categories. If the selector is an id, the rule will be added to the id map, if itâ€™s a class it will be added to the class map etc.This manipulation makes it much easier to match rules. There is no need to look in every declaration - we can extract the relevant rules for an element from the maps. This optimization eliminates 95+% of the rules, so that they need not even be considered during the matching process(4.1). Letâ€™s see for example the following style rules: 123p.error &#123;color:red&#125;#messageDiv &#123;height:50px&#125;div &#123;margin:5px&#125; The first rule will be inserted into the class map. The second into the id map and the third into the tag map. For the following HTML fragment; 12&lt;p class="error"&gt;an error occurred &lt;/p&gt;&lt;div id=" messageDiv"&gt;this is a message&lt;/div&gt; We will first try to find rules for the p element. The class map will contain an â€œerrorâ€ key under which the rule for â€œp.errorâ€ is found. The div element will have relevant rules in the id map (the key is the id) and the tag map. So the only work left is finding out which of the rules that were extracted by the keys really match.For example if the rule for the div was 1table div &#123;margin:5px&#125; it will still be extracted from the tag map, because the key is the rightmost selector, but it would not match our div element, who does not have a table ancestor. Both Webkit and Firefox do this manipulation. Applying the rules in the correct cascade orderThe style object has properties corresponding to every visual attribute (all css attributes but more generic). If the property is not defined by any of the matched rules - then some properties can be inherited by the parent element style object. Other properties have default values. The problem begins when there is more than one definition - here comes the cascade order to solve the issue. Style sheet cascade orderA declaration for a style property can appear in several style sheets, and several times inside a style sheet. This means the order of applying the rules is very important. This is called the â€œcascadeâ€ order. According to CSS2 spec, the cascade order is (from low to high): Browser declarations User normal declarations Author normal declarations Author important declarations User important declarations The browser declarations are least important and the user overrides the author only if the declaration was marked as important. Declarations with the same order will be sorted by specifity and then the order they are specified. The HTML visual attributes are translated to matching CSS declarations . They are treated as author rules with low priority. SpecifityThe selector specifity is defined by the CSS2 specification as follows: count 1 if the declaration is from is a â€˜styleâ€™ attribute rather than a rule with a selector, 0 otherwise (= a) count the number of ID attributes in the selector (= b) count the number of other attributes and pseudo-classes in the selector (= c) count the number of element names and pseudo-elements in the selector (= d) Concatenating the four numbers a-b-c-d (in a number system with a large base) gives the specificity. The number base you need to use is defined by the highest count you have in one of the categories.For example, if a=14 you can use hexadecimal base. In the unlikely case where a=17 you will need a 17 digits number base. The later situation can happen with a selector like this: html body div div p â€¦ (17 tags in your selector.. not very likely). Some examples: 1234567891011* &#123;&#125; /* a=0 b=0 c=0 d=0 -&gt; specificity = 0,0,0,0 */li &#123;&#125; /* a=0 b=0 c=0 d=1 -&gt; specificity = 0,0,0,1 */li:first-line &#123;&#125; /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */ul li &#123;&#125; /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */ul ol+li &#123;&#125; /* a=0 b=0 c=0 d=3 -&gt; specificity = 0,0,0,3 */h1 + *[rel=up]&#123;&#125; /* a=0 b=0 c=1 d=1 -&gt; specificity = 0,0,1,1 */ul ol li.red &#123;&#125; /* a=0 b=0 c=1 d=3 -&gt; specificity = 0,0,1,3 */li.red.level &#123;&#125; /* a=0 b=0 c=2 d=1 -&gt; specificity = 0,0,2,1 */#x34y &#123;&#125; /* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */style="" /* a=1 b=0 c=0 d=0 -&gt; specificity = 1,0,0,0 */ Sorting the rulesAfter the rules are matched, they are sorted according to the cascade rules. Webkit uses bubble sort for small lists and merge sort for big ones. Webkit implements sorting by overriding the â€œ&gt;â€ operator for the rules: 123456static bool operator &gt;(CSSRuleData&amp; r1, CSSRuleData&amp; r2)&#123; int spec1 = r1.selector()-&gt;specificity(); int spec2 = r2.selector()-&gt;specificity(); return (spec1 == spec2) : r1.position() &gt; r2.position() : spec1 &gt; spec2; &#125; Gradual processWebkit uses a flag that marks if all top level style sheets (including @imports) have been loaded. If the style is not fully loaded when attaching - place holders are used and it s marked in the document, and they will be recalculated once the style sheets were loaded. LayoutWhen the renderer is created and added to the tree, it does not have a position and size. Calculating these values is called layout or reflow. HTML uses a flow based layout model, meaning that most of the time it is possible to compute the geometry in a single pass. Elements later in the flow&#39;&#39; typically do not affect the geometry of elements that are earlierin the flowâ€™â€™, so layout can proceed left-to-right, top-to-bottom through the document. There are exceptions - for example, HTML tables may require more than one pass (3.5). The coordinate system is relative to the root frame. Top and left coordinates are used. Layout is a recursive process. It begins at the root renderer, which corresponds to the element of the HTML document. Layout continues recursively through some or all of the frame hierarchy, computing geometric information for each renderer that requires it. The position of the root renderer is 0,0 and its dimensions is the viewport - the visible part of the browser window. All renderers have a â€œlayoutâ€ or â€œreflowâ€ method, each renderer invokes the layout method of its children that need layout. Dirty bit systemIn order not to do a full layout for every small change, browser use a â€œdirty bitâ€ system. A renderer that is changed or added marks itself and its children as â€œdirtyâ€ - needing layout. There are two flags - â€œdirtyâ€ and â€œchildren are dirtyâ€. Children are dirty means that although the renderer itself may be ok, it has at least one child that needs a layout. Global and incremental layoutLayout can be triggered on the entire render tree - this is â€œglobalâ€ layout. This can happen as a result of: A global style change that affects all renderers, like a font size change. As a result of a screen being resized Layout can be incremental, only the dirty renderers will be layed out (this can cause some damage which will require extra layouts).Incremental layout is triggered (asynchronously) when renderers are dirty. For example when new renderers are appended to the render tree after extra content came from the network and was added to the DOM tree. Figure 20:Incremental layout - only dirty renderers and their children are layed out(3.6). Asynchronous and Synchronous layoutIncremental layout is done asynchronously. Firefox queues â€œreflow commandsâ€ for incremental layouts and a scheduler triggers batch execution of these commands. Webkit also has a timer that executes an incremental layout - the tree is traversed and â€œdirtyâ€ renderers are layout out. Scripts asking for style information, like â€œoffsightHeightâ€ can trigger incremental layout synchronously. Global layout will usually be triggered synchronously. Sometimes layout is triggered as a callback after an initial layout because some attributes , like the scrolling position changed. OptimizationsWhen a layout is triggered by a â€œresizeâ€ or a change in the renderer position(and not size), the renders sizes are taken from a cache and not recalculated.. In some cases - only a sub tree is modified and layout does not start from the root. This can happen in cases where the change is local and does not affect its surroundings - like text inserted into text fields (otherwise every keystroke would have triggered a layout starting from the root). The layout processThe layout usually has the following pattern: Parent renderer determines its own width. Parent goes over children and: Place the child renderer (sets its x and y). Calls child layout if needed(they are dirty or we are in a global layout or some other reason) - this calculates the childâ€™s height. Parent uses children accumulative heights and the heights of the margins and paddings to set it own height - this will be used by the parent rendererâ€™s parent. Sets its dirty bit to false. Firefox uses a â€œstateâ€ object(nsHTMLReflowState) as a parameter to layout (termed â€œreflowâ€). Among others the state includes the parents width.The output of Firefox layout is a â€œmetricsâ€ object(nsHTMLReflowMetrics). It will contain the renderer computed height. Width calculationThe rendererâ€™s width is calculated using the container blockâ€™s width , the rendererâ€™s style â€œwidthâ€ property, the margins and borders.For example the width of the following div: 1&lt;div style="width:30%"/&gt; Would be calculated by Webkit as following(class RenderBox method calcWidth): The container width is the maximum of the containers availableWidth and 0. The availableWidth in this case is the contentWidth which is calculated as: 1clientWidth() - paddingLeft() - paddingRight() clientWidth and clientHeight represent the interior of an object excluding border and scrollbar. The elements width is the â€œwidthâ€ style attribute. It will be calculated as an absolute value by computing the percentage of the container width. The horizontal borders and paddings are now added. So far this was the calculation of the â€œpreferred widthâ€. Now the minimum and maximum widths will be calculated. If the preferred width is higher then the maximum width - the maximum width is used. If it is lower then the minimum width (the smallest unbreakable unit) hen the minimum width is used. The values are cached, in case a layout is needed but the width does not change. Line BreakingWhen a renderer in the middle of layout decides it needs to break. It stops and propagates to its parent it needs to be broken. The parent will create the extra renderers and calls layout on them. PaintingIn the painting stage, the render tree is traversed and the renderers â€œpaintâ€ method is called to display their content on the screen. Painting uses the UI infrastructure component. More on that in the chapter about the UI. Global and IncrementalLike layout, painting can also be global - the entire tree is painted - or incremental. In incremental painting, some of the renderers change in a way that does not affect the entire tree. The changed renderer invalidates itâ€™s rectangle on the screen. This causes the OS to see it as a â€œdirty regionâ€ and generate a â€œpaintâ€ event. The OS does it cleverly and coalesces several regions into one. In Chrome it is more complicated because the renderer is in a different process then the main process. Chrome simulates the OS behavior to some extent. The presentation listens to these events and delegates the message to the render root. The tree is traversed until the relevant renderer is reached. It will repaint itself (and usually its children). The painting orderCSS2 defines the order of the painting process - http://www.w3.org/TR/CSS21/zindex.html . This is actually the order in which the elements are stacked in the stacking contexts . This order affects painting since the stacks are painted from back to front. The stacking order of a block renderer is: background color background image border children outline Firefox display listFirefox goes over the render tree and builds a display list for the painted rectangular. It contains the renderers relevant for the rectangular, in the right painting order (backgrounds of the renderers, then borders etc). That way the tree needs to be traversed only once for a repaint instead of several times - painting all backgrounds, then all images , then all borders etc. Firefox optimizes the process by not adding elements that will be hidden, like elements completely beneath other opaque elements. Webkit rectangle storageBefore repainting, webkit saves the old rectangle as a bitmap. It then paints only the delta between the new and old rectangles. Dynamic changesThe browsers try to do the minimal possible actions in response to a change. So changes to an elements color will cause only repaint of the element. Changes to the element position will cause layout and repaint of the element, its children and possibly siblings. Adding a DOM node will cause layout and repaint of the node. Major changes, like increasing font size of the â€œhtmlâ€ element, will cause invalidation of caches, relyout and repaint of the entire tree. The rendering engineâ€™s threadsThe rendering engine is single threaded. Almost everything, except network operations, happens in a single thread. In Firefox and safari this is the main thread of the browser. In chrome itâ€™s the tab process main thread. Network operations can be performed by several parallel threads. The number of parallel connections is limited (usually 2 - 6 connections. Firefox 3, for example, uses 6). Event loopThe browser main thread is an event loop. Its an infinite loop that keeps the process alive. It waits for events (like layout and paint events) and processes them. This is Firefox code for the main event loop: 12while (!mExiting) NS_ProcessNextEvent(thread); CSS2 visual modelThe canvasAccording to CCS2 specification, the term canvas describes â€œthe space where the formatting structure is rendered.â€ - where the browser paints the content.The canvas is infinite for each dimension of the space but browsers choose an initial width based on the dimensions of the viewport. According to http://www.w3.org/TR/CSS2/zindex.html, the canvas is transparent if contained within another, and given a browser defined color if it is not. CSS Box modelThe CSS box model describes the rectangular boxes that are generated for elements in the document tree and laid out according to the visual formatting model.Each box has a content area (e.g., text, an image, etc.) and optional surrounding padding, border, and margin areas. Figure 14:CSS2 box model Each node generates 0..n such boxes.All elements have a â€œdisplayâ€ property that determines their type of box that will be generated.Examples: 123block - generates a block box.inline - generates one or more inline boxes.none - no box is generated. The default is inline but the browser style sheet set other defaults. For example - the default display for â€œdivâ€ element is block. You can find a default style sheet example here http://www.w3.org/TR/CSS2/sample.html Positioning schemeThere are three schemes: Normal - the object is positioned according to its place in the document - this means its place in the render tree is like its place in the dom tree and layed out according to its box type and dimensions Float - the object is first layed out like normal flow, then moved as far left or right as possible Absolute - the object is put in the render tree differently than its place in the DOM tree The positioning scheme is set by the â€œpositionâ€ property and the â€œfloatâ€ attribute. static and relative cause a normal flow absolute and fixed cause an absolute positioning In static positioning no position is defined and the default positioning is used. In the other schemes, the author specifies the position - top,bottom,left,right. The way the box is layed out is determined by: Box type Box dimensions Positioning scheme External information - like images size and the size of the screen Box typesBlock box: forms a block - have their own rectangle on the browser window. Figure 15:Block box Inline box: does not have its own block, but is inside a containing block. Figure 15:Inine boxes Blocks are formatted vertically one after the other. Inlines are formatted horizontally. Figure 16:Block and Inline formatting Inline boxes are put inside lines or â€œline boxesâ€. The lines are at least as tall as the tallest box but can be taller, when the boxes are aligned â€œbaselineâ€ - meaning the bottom part of an element is aligned at a point of another box other then the bottom. In case the container width is not enough, the inlines will be put in several lines. This is usually what happens in a paragraph. Figure 17:Lines PositioningRelativeRelative positioning - positioned like usual and then moved by the required delta. Figure 18:Relative positioning FloatsA float box is shifted to the left or right of a line. The interesting feature is that the other boxes flow around it The HTML: 123&lt;p&gt;&lt;img style="float:right" src="images/image.gif" width="100" height="100"&gt;Lorem ipsum dolor sit amet, consectetuer...&lt;/p&gt; Will look like: Figure 19:Float Absolute and fixedThe layout is defined exactly regardless of the normal flow. The element does not participate in the normal flow. The dimensions are relative to the container. In fixed - the container is the view port. Figure 20:Fixed positioning Note - the fixed box will not move even when the document is scrolled! Layered representationIt is specified by the z-index CSS property. It represents the 3rd dimension of the box, its position along the â€œz axisâ€. The boxes are divided to stacks (called stacking contexts). In each stack the back elements will be painted first and the forward elements on top, closer to the user. In case of overlap the will hide the former element.The stacks are ordered according to the z-index property. Boxes with â€œz-indexâ€ property form a local stack. The viewport has the outer stack.Example: 12345678910111213141516&lt;STYLE type="text/css"&gt; div &#123; position: absolute; left: 2in; top: 2in; &#125; &lt;/STYLE&gt; &lt;P&gt; &lt;DIV style="z-index: 3;background-color:red; width: 1in; height: 1in; "&gt; &lt;/DIV&gt; &lt;DIV style="z-index: 1;background-color:green;width: 2in; height: 2in;"&gt; &lt;/DIV&gt; &lt;/p&gt; The result will be this: Figure 20:Fixed positioning Although the green div comes before the red one, and would have been painted before in the regular flow, the z-index property is higher, so it is more forward in the stack held by the root box. Resources Browser architecture Grosskurth, Alan. A Reference Architecture for Web Browsers. http://grosskurth.ca/papers/browser-refarch.pdf. Parsing Aho, Sethi, Ullman, Compilers: Principles, Techniques, and Tools (aka the â€œDragon bookâ€), Addison-Wesley, 1986 Rick Jelliffe. The Bold and the Beautiful: two new drafts for HTML 5. http://broadcast.oreilly.com/2009/05/the-bold-and-the-beautiful-two.html. Firefox L. David Baron, Faster HTML and CSS: Layout Engine Internals for Web Developers. http://dbaron.org/talks/2008-11-12-faster-html-and-css/slide-6.xhtml. L. David Baron, Faster HTML and CSS: Layout Engine Internals for Web Developers(Google tech talk video). http://www.youtube.com/watch?v=a2_6bGNZ7bA. L. David Baron, Mozillaâ€™s Layout Engine. http://www.mozilla.org/newlayout/doc/layout-2006-07-12/slide-6.xhtml. L. David Baron, Mozilla Style System Documentation. http://www.mozilla.org/newlayout/doc/style-system.html. Chris Waterson, Notes on HTML Reflow. http://www.mozilla.org/newlayout/doc/reflow.html. Chris Waterson, Gecko Overview. http://www.mozilla.org/newlayout/doc/gecko-overview.htm. Alexander Larsson, The life of an HTML HTTP request. https://developer.mozilla.org/en/The_life_of_an_HTML_HTTP_request. Webkit David Hyatt, Implementing CSS(part 1). http://weblogs.mozillazine.org/hyatt/archives/cat_safari.html. David Hyatt, An Overview of WebCore. http://weblogs.mozillazine.org/hyatt/WebCore/chapter2.html. David Hyatt, WebCore Rendering. http://webkit.org/blog/114/. David Hyatt, The FOUC Problem. http://webkit.org/blog/66/the-fouc-problem/. W3C Specifications HTML 4.01 Specification. http://www.w3.org/TR/html4/. HTML5 Specification. http://dev.w3.org/html5/spec/Overview.html. Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification. http://www.w3.org/TR/CSS2/. Browsers build instructions Firefox. https://developer.mozilla.org/en/Build_Documentation Webkit. http://webkit.org/building/build.html]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>Browser</category>
      </categories>
      <tags>
        <tag>FE</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŽ¢ç´¢ JavaScript For-in å¾ªçŽ¯]]></title>
    <url>%2F2018%2F07%2F14%2FExplorer-JavaScript-For-in-loops%2F</url>
    <content type="text"><![CDATA[For-in å¾ªçŽ¯æ˜¯å¯¹è±¡å±žæ€§è¿­ä»£æŠ€æœ¯ä¸­å”¯ä¸€ä¸€é¡¹å¯ä»¥è·¨æµè§ˆå™¨çš„ã€‚ å…³äºŽä½¿ç”¨ for-in å¾ªçŽ¯è¿­ä»£æ•°ç»„çš„å±é™©æ€§ä»¥åŠä½•æ—¶ä½¿ç”¨ hasOwnPropert è¿‡æ»¤å™¨çš„æ–‡ç« æœ‰å¾ˆå¤šï¼Œä½†æ˜¯ç¾Žä¸­ä¸è¶³çš„æ˜¯ï¼Œå…³äºŽè¿™äº›æ™®éä½¿ç”¨çš„è¯­è¨€ç»“æž„çš„æ–‡ç« åˆå‡ºå¥‡çš„ä¸å®Œæ•´ã€‚æœ¬æ–‡å°è¯•ç€å¡«è¡¥ä¸€äº›ç©ºç™½ï¼Œå¸Œæœ›èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ã€‚ åŸºç¡€ES 5 è§„èŒƒè¯¦ç»†è¯´æ˜Žäº† for-in è¯­å¥çš„ä¸¤ç§ä¸åŒçš„è¯­æ³•ï¼š 1. for (var variable in objectExpression) {statement}ç¬¬ä¸€ç§æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„æ ¼å¼ã€‚ç­‰å·å³è¾¹çš„ objectExpression å¯ä»¥æ˜¯ä»»æ„å¯è®¡ç®—ä¸º JavaScript å¯¹è±¡çš„è¡¨è¾¾å¼ã€‚å¦‚æžœæˆ‘ä»¬åœ¨ç­‰å·å³è¾¹ç»™å®šäº†åŽŸå§‹ç±»åž‹ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«åŒ…è£…æˆå¯¹è±¡ã€‚ç„¶åŽé€ä¸€è¿­ä»£åŒ…è£…å¯¹è±¡çš„å±žæ€§ã€‚åœ¨æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œå¯¹è±¡å±žæ€§çš„åç§°å°†è¢«èµ‹å€¼ç»™å£°æ˜Žçš„è¿­ä»£å˜é‡ï¼Œå¦‚æžœå­˜åœ¨è¡¨è¾¾å¼ï¼Œä¼šå¯¹è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ã€‚ 12345var myObj = &#123;a: 1, b: 2, c: 3&#125;, myKeys = [];for (var property in myObj) &#123; myKeys.push(property);&#125;myKeys; //['a','b','c']; å¾ªçŽ¯å˜é‡å¯ä»¥é€‰æ‹©åœ¨ for-in å¾ªçŽ¯å¤–éƒ¨å£°æ˜Žã€‚åªæœ‰å½“è¯­å¥è·¨è¶Šå¤šè¡Œå¹¶ä¸”è¯­å¥ä¸ºå¯é€‰çš„æƒ…å†µä¸‹å¤§æ‹¬å·æ‰æ˜¯å¿…é¡»çš„ã€‚å› æ­¤ä¸‹é¢çš„ä»£ç ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œè™½ç„¶çœ‹ä¸ŠåŽ»æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œé™¤éžä½ å°±æ˜¯å¯¹ myObj çš„æœ€åŽä¸€ä¸ªå±žæ€§çš„åå­—æ„Ÿå…´è¶£ï¼ˆç¨åŽä»‹ç»æ›´å¤šå…³äºŽè¿­ä»£é¡ºåºçš„å†…å®¹ï¼‰ã€‚ 123var myObj = &#123;a: 1, b: 2, c: 3&#125;, lastProperty;for (lastProperty in myObj);lastProperty; //"c"; è¿™é‡Œæ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ï¼Œè¿™ä¸€æ¬¡ objectExpression æ˜¯ä¸€ä¸ªåŽŸå§‹ç±»åž‹ï¼š 12345678var str = "hello!", spreadOut = "";for (var index in str) &#123; (index &gt; 0) &amp;&amp; (spreadOut += " ") spreadOut += str[index];&#125;spreadOut; //"h e l l o !" è¯·æ³¨æ„ï¼Œå’Œæ‰€æœ‰å±žæ€§åç§°ä¸€æ ·ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­çš„å¾ªçŽ¯å˜é‡ index å®žé™…ä¸Šéƒ½æ˜¯å­—ç¬¦åž‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åƒä¸Šé¢é‚£æ ·ç®€å•åœ°åˆ¤æ–­æ˜¯å¦ä¸ºçœŸã€‚ç¨åŽæˆ‘ä»¬ä¼šä¸€èµ·çœ‹çœ‹ä¸ºä»€ä¹ˆ String ç±»åž‹ä¸Ž Array ç±»åž‹å¹¶ä¸æ€»æ˜¯ç”¨äºŽ for-in å¾ªçŽ¯çš„æœ€ä½³é€‰æ‹©ã€‚ 2.for (LeftHandSideExpression in objectExpression) {statement}è¿™ç§æœ‰è¶£çš„è¯­æ³•å¾ˆå°‘å‡ºçŽ°åœ¨æ–‡æ¡£ä¸­ï¼ˆMDCæ²¡æœ‰æåŠè¿™ç§è¯­æ³•ï¼‰ã€‚åœ¨ ECMAScript æœ¯è¯­ä¸­ï¼Œ leftHandSideExpression æ˜¯è§£æžä¸ºå±žæ€§å¼•ç”¨çš„ä»»æ„è¡¨è¾¾å¼ï¼ˆæƒ³è±¡ä¸€ä¸‹ä»»ä½•å¯ä»¥å‡ºçŽ°åœ¨èµ‹å€¼ç­‰å·å·¦ä¾§çš„è¡¨è¾¾å¼ï¼‰ã€‚åœ¨æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œä¸‹ä¸€ä¸ªå±žæ€§çš„åå­—è¢«èµ‹å€¼ç»™ leftHandSideExpression çš„è®¡ç®—ç»“æžœã€‚leftHandSideExpression è¡¨è¾¾å¼åœ¨æ¯æ¬¡è¿­ä»£æ—¶è§£æžä¸ºä¸åŒå¼•ç”¨æ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œæœ‰æ—¶å€™è¿™ç§æ–¹å¼éžå¸¸æœ‰ç”¨ï¼Œç”šè‡³æ›´åŠ ä¼˜é›…ï¼Œä¾‹å¦‚ï¼ŒèŽ·å–å±žæ€§åç§°æ•°ç»„çŽ°åœ¨å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ 123var myObj = &#123;a: 1, b: 2, c: 3&#125;, myKeys = [], i=0;for (myKeys[i++] in myObj);myKeys; //['a','b','c']; å“ªäº›å±žæ€§ä¼šè¢«è¿­ä»£ï¼Ÿè¿™éœ€è¦äº†è§£ä¸€äº›JavaScriptçš„å†…éƒ¨åŽŸç†ã€‚å¯¹è±¡æ˜¯å±žæ€§çš„é›†åˆï¼Œæ¯ä¸€ä¸ªå±žæ€§éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„ä¸€ç³»åˆ—å†…éƒ¨ç‰¹æ€§ ã€‚ï¼ˆæˆ‘ä»¬å¯ä»¥å°†å…¶çœ‹ä½œæŠ½è±¡å±žæ€§ - ä»–ä»¬è¢«ç”¨äºŽJavaScriptå¼•æ“Žï¼Œä½†æ˜¯ç”¨æˆ·ä¸èƒ½ç›´æŽ¥è®¿é—®è¿™äº›ç‰¹æ€§ã€‚ECMAScript ä½¿ç”¨[[property]]è¿™æ ·çš„æ ¼å¼æ¥è¡¨ç¤ºå†…éƒ¨ç‰¹æ€§ã€‚ [[Enumerable]]æ˜¯è¿™äº›ç‰¹æ€§çš„å…¶ä¸­ä¹‹ä¸€ã€‚for-in è¯­å¥ä¼šè¿­ä»£[[Enumerable]]å€¼ä¸ºtrueçš„æ¯ä¸€ä¸ªå±žæ€§ã€‚åŒ…æ‹¬å¯¹è±¡åŽŸåž‹é“¾ç»§æ‰¿è¿‡æ¥çš„å¯æžšä¸¾å±žæ€§ã€‚[[Enumerable]]å€¼ä¸ºfalseçš„å±žæ€§ï¼Œä»¥åŠè¢«è¦†ç›–çš„å±žæ€§ï¼ˆä¾‹å¦‚ï¼Œè¢«å­å­™å¯¹è±¡çš„åŒåå±žæ€§è¦†ç›–çš„åŽŸåž‹å¯¹è±¡å±žæ€§ï¼‰ä¸ä¼šè¢«è¢«è¿­ä»£ã€‚ å®žé™…ä¸Šè¿™æ„å‘³ç€,for-inå¾ªçŽ¯ä¼šé»˜è®¤é€‰æ‹©éžå½±å­ï¼Œç”¨æˆ·å®šä¹‰çš„ï¼ˆåŒ…æ‹¬ç»§æ‰¿å±žæ€§)ä½†éžå†…ç½®çš„å±žæ€§ã€‚ä¾‹å¦‚ï¼ŒOjbect å¯¹è±¡çš„å†…ç½®æ–¹æ³•ï¼ˆtoStringï¼‰ä¸ä¼šè¢«æžšä¸¾ã€‚ è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¦‚æžœä½ ä¹ æƒ¯äºŽæ‰©å±•å†…ç½®å¯¹è±¡çš„åŽŸåž‹ï¼Œé‚£ä¹ˆä½ çš„è‡ªå®šä¹‰æ‰©å±•å±žæ€§å°†ä¼šè¢«æžšä¸¾å‡ºæ¥ï¼š 123456var arr = ['a','b','c'], indexes = [];Array.prototype.each = function() &#123;/blah/&#125;;for (var index in arr) &#123; indexes.push(index);&#125;indexes; //["0", "1", "2", "each"] whoops! ä¸€äº›æ¡†æž¶ï¼ˆä¾‹å¦‚ï¼ŒPrototype.js ä»¥åŠ Mootoolsï¼‰æ·»åŠ äº†å¾ˆå¤šè‡ªå®šä¹‰åŽŸåž‹æ‰©å±•ï¼Œå¹¶ä¸”ä½¿ç”¨ for-in å¾ªçŽ¯æ¥è¿­ä»£Arrayå’ŒStringç±»åž‹ï¼Œè¿™äº›é€šå¸¸éƒ½è¢«è®¤ä¸ºä¸æ˜¯ä»€ä¹ˆå¥½ä¸»æ„ã€‚ä½¿ç”¨å¸¸è§„ forå¾ªçŽ¯æ¥è¿­ä»£Arrayå’ŒStringç±»åž‹æ˜¯ä¸€ä¸ªå¥½çš„æ›¿ä»£æ–¹æ³•ã€‚å¦å¤–,ES5 å®šä¹‰äº†ä¸€äº›è‡ªå®šä¹‰çš„Arrayè¿­ä»£å™¨ï¼ˆforEachï¼Œmapç­‰ç­‰ï¼‰ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™äº›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆçš„è¿­ä»£ç­–ç•¥æ²¡æœ‰ä¸€ä¸ªå¯¹å¸¸è§„å¯¹è±¡æœ‰æ•ˆ - è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ‰©å±•Object.prototypeè¢«è®¤ä¸ºæ˜¯éžå¸¸åçš„å®žè·µã€‚ å…³äºŽ â€œDontEnumâ€ bugIE 9ä»¥ä¸‹ç‰ˆæœ¬çš„æµè§ˆå™¨ä¼šå‡ºçŽ°ä¸€äº›å¥‡æ€ªçš„è¿­ä»£è¡Œä¸ºï¼Œå› æ­¤å†…ç½®å½±å­å±žæ€§ï¼ˆä»¥åŠnon-enumerableå±žæ€§å’ŒES3è¯­æ³•ä¸­çš„[[DontEnum]]å±žæ€§ï¼‰å°†ä¸ä¼šè¢«æžšä¸¾å‡ºæ¥ã€‚ 1234567891011var obj = &#123;a: 2,//shadow a non-enumerabletoString: "I'm an obj"&#125;,result = [];for (result[result.length] in obj);result;//IE&lt;9 -&gt; ["a"]//Other browsers -&gt; ["a", "toString"] æˆ‘èƒ½é˜»æ­¢ä¸€äº›å±žæ€§è¢«è¿­ä»£å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥ã€‚æœ‰è®¸å¤šæ ‡å‡†æŠ€æœ¯å¯ä»¥å°†ä¸éœ€è¦çš„å±žæ€§æˆå‘˜ä»Žfor-inå¾ªçŽ¯ä¸­è¿‡æ»¤å‡ºæ¥ã€‚ 1. Object.prototype.hasOwnPropertyè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨å±žæ€§çš„å†…ç½®æ–¹æ³•[[GetOwnProperty]]æ¥ç¡®å®šç»™å®šçš„å±žæ€§æ˜¯ä¸æ˜¯ç›´æŽ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„ï¼ˆè€Œä¸æ˜¯å®šä¹‰åœ¨åŽŸåž‹é“¾ä¸ŠæŸå¤„çš„ï¼‰ã€‚ 1234567var arr = ['a','b','c'], indexes = [];Array.prototype.each = function() &#123;/*blah*/&#125;;for (var index in arr) &#123; if (arr.hasOwnProperty(index)) &#123; indexes.push(index);&#125;indexes; //["0", "1", "2"] JSLint å¸Œæœ›ä½ æ€»æ˜¯å°†for-inè¯­å¥çš„å¾ªçŽ¯ä½“ç”¨ifè¯­å¥åŒ…è£¹èµ·æ¥ï¼Œå³ä½¿æ˜¯æžšä¸¾ä¸€ä¸ªå¸¸è§„å¯¹è±¡çš„æ—¶å€™ï¼ˆä¸è¦ç´§ï¼Œä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨ä¸€ä¸ª &amp;&amp; æ›¿ä»£ if! è¯­å¥æ¥å……å½“æ–­è¨€æ¡ä»¶ï¼‰ã€‚ å¦‚æžœä½ æ˜¯ä¸€ä¸ªåæ‰§ç‹‚ï¼Œä½ æˆ–è€…å…¶ä»–äººå¯èƒ½ä¼šè¦†ç›– hasOwnProperty åœ°æœ¬åœ°å®šä¹‰ï¼Œé‚£ä¹ˆä½ ç›´æŽ¥è°ƒç”¨åŽŸåž‹å¼•ç”¨ã€‚ 123456//snip... for (var index in arr) &#123; if (Object.prototype.hasOwnProperty.call(arr, index)) &#123; indexes.push(index); &#125; &#125; 2. Object.definePropertyES5 ä»‹ç»äº†Objectå¯¹è±¡ä¸Šçš„ä¸€äº›æ–¹æ³•ï¼Œå…è®¸ä½¿ç”¨è‡ªå®šä¹‰å†…éƒ¨ç‰¹æ€§æ¥å®šä¹‰å±žæ€§ï¼ˆä¸æ”¯æŒFireFox&lt;4 å’Œ IE&lt;9çš„ç‰ˆæœ¬ï¼‰ã€‚ 1234567var obj = &#123;&#125;;Object.defineProperty( obj, "value", &#123; value: true, writable: false, enumerable: true, configurable: true&#125;); æˆ‘ä»¬å¯ä»¥é€šè¿‡æ®æ­¤è®¾ç½®[[Enumerable]]ç‰¹æ€§çš„å€¼æ¥è¾¾åˆ°ä»Žfor-inå¾ªçŽ¯ä¸­éšè—ä¸€äº›è‡ªå®šä¹‰åŽŸåž‹æ‰©å±•çš„ç›®çš„ã€‚ 1234567891011var arr = ['a','b','c'], indexes = [];Object.defineProperty(Array.prototype, "each", &#123; value: function() &#123;/*blah*/&#125;, writable: false, enumerable: false, configurable: false&#125;);for (var index in arr) &#123; indexes.push(index);&#125;indexes; //["0", "1", "2"] è¿­ä»£é¡ºåºå¦‚ä½•ç¡®å®šï¼ŸECMA æ ‡å‡†æ²¡æœ‰å£°æ˜Žæžšä¸¾é¡ºåºï¼Œä½†æ˜¯éžæ•°ç»„æ˜¯å¯¹è±¡çš„å®žé™…æ ‡å‡†æ˜¯æŒ‰ç…§è¢«å±žæ€§èµ‹å€¼çš„çš„é¡ºåºæ¥è¿›è¡Œæžšä¸¾ã€‚ 12345678910var obj = &#123;a: 1, b: 2, c: 3&#125;, result = [];obj.e; //referenced but not assignedobj.f = 'bar'; //1st assignmentobj.e = 4;obj.dd = 5;obj.f = 'foo'; //2nd assignmentfor (var prop in obj) &#123; result.push(prop);&#125;result.toString(); //"a,b,c,f,e,dd" ç„¶è€Œç›®å‰æœ‰è®¸å¤šé—®é¢˜ä½ éœ€è¦æ³¨æ„ï¼šåœ¨IEæµè§ˆå™¨çŽ¯å¢ƒä¸­åˆ é™¤å±žæ€§åœ¨IEä¸­åˆ é™¤ä¸€ä¸ªå±žæ€§ï¼Œç„¶åŽé‡æ–°å®šä¹‰å®ƒï¼Œä¸ä¼šæ›´æ–°å±žæ€§åœ¨è¿­ä»£é¡ºåºä¸­çš„ä½ç½®ï¼Œè¿™ä¸Žå…¶ä»–ä¸»æµæµè§ˆå™¨ä¸­è§‚å¯Ÿåˆ°çš„è¡Œä¸ºç›¸æ‚–ï¼š 123456789var obj = &#123;a: 1, b: 2, c: 3&#125;, result = [];delete obj.b;obj.b = 4;for (var prop in obj) &#123; result.push(prop);&#125;result.toString(); //IE -&gt;"a,b,c"//Other browsers -&gt; "a,c,b" Chromeä¸­æ•°å­—å‘½åçš„å±žæ€§Chrome æµè§ˆå™¨ä¼šä¼˜å…ˆå¤„ç†æ•°å­—å‘½åçš„keyï¼Œä»¥æ•°å­—é¡ºåºè€Œä¸æ˜¯æ’å…¥é¡ºåºéåŽ†ã€‚ 1234567var obj = &#123;3:'a', 2:'b', 'foo':'c', 1:'d'&#125;, result = [];for (var prop in obj) &#123; result.push(prop);&#125;result.toString();//Chrome -&amp;gt; "1,2,3,foo"//Other browsers -&amp;gt; "3,2,foo,1" è¿™ä¸ªè¢«è®°å½•ä¸‹æ¥çš„bugï¼Œæœ‰å¤§é‡å……æ»¡äº‰è®®çš„è¯„è®ºåœ¨è®¨è®ºè¿™ä¸ªbugæ˜¯å¦åº”è¯¥è¢«ä¿®å¤ã€‚æˆ‘è®¤ä¸ºè¿™ä¸ªbugåº”è¯¥è¢«ä¿®å¤ã€‚æ ¹æ®å®šä¹‰ï¼Œå¸¸è§„å¯¹è±¡çš„å±žæ€§ç¡®å®šæ˜¯æ— åºçš„ï¼Œå¹¶ä¸”ECMAä¹Ÿæ²¡æœ‰å®šä¹‰å‡ºä¸€ä¸ªæ ‡å‡† - ä½† John Resig å’Œ Charles Kendrick æŒ‡å‡ºï¼ŒECMAæ ‡å‡†çš„ç¼ºå¤±ä¸èƒ½æˆä¸ºå€Ÿå£ - æ ‡å‡†é€šå¸¸éƒ½æ˜¯éµå¾ªå®žçŽ°çš„ï¼Œè€Œä¸æ˜¯åè¿‡æ¥ - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œchromeçš„å¤„ç†æ˜¯ä¸åˆé€‚çš„ã€‚ å…³äºŽ in æ“ä½œç¬¦è¿™ä¸ªæ¼‚äº®çš„ for-in è¡¨è¾¾å¼ä½¿ç”¨å†…ç½®çš„[[HasProperty]]æ–¹æ³•æ¥æ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå‘½åçš„å±žæ€§ï¼š propertyNameExpressionä¸­çš„ objectExpression å®ƒåƒä¸‹é¢çš„ä¼ªä»£ç ä¸­è¿™æ ·å·¥ä½œï¼š 123var name = //resolve [propertyNameExpression];var obj = //resolve [objectExpression];return obj.[[HasProperty]](name); è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨æ–¹æ³•çš„ä¾‹å­ï¼š 123456789101112var obj = &#123;a:1, b:2, c:undefined, d:4&#125;, aa = &#123;&#125;;'b' in obj; //true'c' in obj; //true ('undefined' but still exists)'e' in obj; //false (does not exist)delete obj.c;'c' in obj; //false (no longer exists)obj.e;'e' in obj; //false (referenced but not assigned)//resolving expressionsaa.o = obj;aa.a = 'a';aa.a in aa.o; //true è¯·æ³¨æ„ï¼Œâ€™câ€™æ˜¯å¦‚ä½•åœ¨ o.c å€¼ä¸º undefined çš„æƒ…å†µä¸‹ä»Žobjå¯¹è±¡ä¸­è¿”å›žtrueçš„ã€‚å†…éƒ¨æ–¹æ³•[[HasProperty]]å°†ä¼šå¯¹ä»»æ„èµ‹å€¼çš„å¯¹è±¡è¿”å›žtrueï¼Œä¸ç®¡å€¼ä¸ºå¤šå°‘ã€‚è¿™ä¸€ç‚¹åœ¨åŒºåˆ†é‚£äº›è¢«åˆ»æ„èµ‹å€¼ä¸ºundefinedçš„å±žæ€§ä¸Žåªæ˜¯ç®€å•çš„ä¸å­˜åœ¨çš„å±žæ€§çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚å’Œ for-in å¾ªçŽ¯ç›¸ä¼¼çš„æ˜¯ï¼Œin æ“ä½œç¬¦ä¼šæœç´¢å¯¹è±¡çš„åŽŸåž‹é“¾ã€‚ä¸Ž for-in å¾ªçŽ¯ä¸åŒçš„æ˜¯ï¼Œin æ“ä½œç¬¦ä¸èƒ½åŒºåˆ†å¯æžšä¸¾å±žæ€§ä¸Žä¸å¯æžšä¸¾å±žæ€§ï¼š 1234var arr = [true,false,false];1 in arr; //true'slice' in arr; //true'toString' in arr; //true è¿™å°±æ˜¯å…¨éƒ¨äº†ï¼Œè¯·éšæ„åœ¨è¯„è®ºä¸­æå‡ºå»ºè®®ï¼Œçº°æ¼ä»¥åŠæŠ•è¯‰ã€‚ â€“æœ¬æ–‡ä¸ºè¯‘æ–‡ åŽŸæ–‡é“¾æŽ¥]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ike-scanæ‰«æipsec vpnæœåŠ¡ç«¯ikeåŠ å¯†ç®—æ³•]]></title>
    <url>%2F2018%2F07%2F11%2Fike-scan%E6%89%AB%E6%8F%8F%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84ike%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼šIPsec IKEv1 algorithms IPsec IKEv1 AlgorithmsWeak Legacy AlgorithmsAs mentioned in the README.md file, there is a general consensus that the following legacy algorithms are now considered weak or broken in regards to security and should be phased out and replaced with stronger algorithms: Encryption Algorithms : 3DES Blowfish Integrity Algorithms : MD5 SHA1 Diffie Hellman Groups : MODP768 MODP1024 MODP1536 Legacy algorithms that are considered weak or broken are regularly removed from the default set of allowed algorithms with newer releases of strongSwan and Libreswan. As of strongSwan 5.4.0 and Libreswan 3.20, the above algorithms (apart from SHA1 and MODP1536 for Libreswan which still includes them for backwards compatibility) have been or in some cases already been removed from the default set of allowed algorithms. If you are not sure, or want to confirm which IPsec IKEv1 phase 1 algorithms your VPN server server proposes, see the section on how to query the VPN server. If the VPN server is only proposing weak or broken algorithms, it is recommended that it be reconfigured to propose stronger algorithms, e.g. AES, SHA2 and MODP2048. Compatibility with VPN servers using weak legacy IPsec IKEv1 algorithmsNetworkManager-l2tp as of version 1.2.6 uses the Libreswan or strongSwan default set of allowed algorithms for phase 1 and phase 2 proposal negotiations. This means VPN servers that are using only legacy ciphers that strongSwan or Libreswan now consider broken will result in a failed connection, unless user specified algorithms to supplement or override the default set of algorithms are used for phase 1 and 2. Please see Example workaround for 3DES, SHA1 and MODP1024 broken algorithms section in the source codeâ€™s README.md file for an example workaround for the 3DES, SHA1 and MODP1024 broken algorithms that many L2TP/IPsec VPN servers are still proposing. Querying VPN server for its IKEv1 algorithm proposalsInstall the ike-scan package which most Linux distributions provide and then run the following script (with further details on how below the script) : 12345678910111213141516171819#!/bin/sh# Encryption algorithms: 3des=5, aes128=7/128, aes192=7/192, aes256=7/256ENCLIST=&quot;5 7/128 7/192 7/256&quot;# Hash algorithms: md5=1, sha1=2, sha256=5, sha384=6, sha512=7HASHLIST=&quot;1 2 5 6 7&quot;# Diffie-Hellman groups: 1, 2, 5, 14, 15, 19, 20, 21GROUPLIST=&quot;1 2 5 14 15 19 20 21&quot;# Authentication method: Preshared Key=1AUTH=1for ENC in $ENCLIST; do for HASH in $HASHLIST; do for GROUP in $GROUPLIST; do echo ike-scan --trans=$ENC,$HASH,$AUTH,$GROUP -M &quot;$@&quot; ike-scan --trans=$ENC,$HASH,$AUTH,$GROUP -M &quot;$@&quot; done donedone Letâ€™s assume the above script has been copied and pasted to a file called ike-scan.sh, to run the script, issue something like the following on the command-line. Note: ike-scan needs UDP port 500 to be free, this can be achieved by stopping any running IPsec service (e.g. sudo ipsec stop). Replace 123.54.76.9 in the below with your VPN server and weâ€™ll grep for SA (i.e. IPSec Security Association) which is the main thing we are interested in. 123sudo ipsec stopchmod a+rx ./ike-scan.shsudo ./ike-scan.sh 123.54.76.9 | grep SA It may take a few minutes for the script to run to completion and the output shall look something like: 12SA=(Enc=3DES Hash=SHA1 Auth=PSK Group=2:modp1024 LifeType=Seconds LifeDuration(4)=0x00007080)SA=(Enc=AES Hash=SHA1 Auth=PSK Group=14:modp2048 KeyLength=128 LifeType=Seconds LifeDuration(4)=0x00007080 From the above example script output, it would mean the following phase 1 &amp; 2 algorithms options could be set in the IPsec dialog box advanced options: Phase1 Algorithms: aes128-sha1-modp2048,3des-sha1-modp1024 Phase2 Algorithms: aes128-sha1,3des-md5 Overriding and not just supplementing the default cipherFor strongSwan, but not Libreswan, in some cases you may need to put an exclamation mark (!) at the end of the phase 1 or 2 settings to override and not just supplement the default ciphers. For example, some Cisco Unity VPN servers may require: Phase1 Algorithms: aes128-sha1-modp1024,3des-sha1-modp1024! Phase2 Algorithms: aes128-sha1,3des-md5 KDE Plasma &lt; 5.11 and legacy IPsec IKEv1 ciphersKDE Plasma-nm (&lt; version 5.11) front end for NetworkManager-l2tp doesnâ€™t have the text boxes for user defined IPsec phase 1 and 2 algorithms, KDE bug# 380859. With Plasma 5.11 support has been added with commit# 1adb364. Current KDE Plasma &lt; 5.11 workarounds for IPsec phase 1 and 2 algorithms support include: backport the Plasma-nm patch for NetworkManager-l2tp 1.2.6 UI support. Use newer KDE backported packages for your linux distribution if available. â€œLayer 2 Tunneling Protocol (L2TP)â€ not showing upAfter installing NetworkManager-l2tp from either the source code or a prebuilt binary package, if â€œLayer 2 Tunnelling Protocol (L2TP)â€ does not show up when trying to add a VPN connection, try one of the following: sudo systemctl restart NetworkManager sudo service network-manager restart logout/login reboot Unable to save passwordLogout/login or reboot if the saved password isnâ€™t being rembered and you are seeing something like the following in the journalctl output, : 12gnome-shell[2143]: JS LOG: Invalid VPN service type (cannot find authentication binary)... NetworkManager[1234]: &lt;error&gt; ... von-connection...: Failed to request VPN secrets #3: No agents were available for this request. This bug has been fixed with newer gnome-shell versions see GNOME bug# 773893 and Fedora gnome-shell bug# 1389107 Unable to create or edit a L2TP VPN connectionUnless you are using KDE (Plasma-nm) or the command-line (/usr/bin/nmcli), you will be using a GNOME based NetworkManager connection editor to create or edit VPN connections. If you are using pre-build binary packages, please ensure you have installed the NetworkManager-l2tp-gnome or network-manager-l2tp-gnome package which provides the necessary files for use with a GNOME based NetworkManager connection editor, otherwise you may see a variation of the following error : 12Could not load editor VPN plugin for &apos;org.freedesktop.NetworkManager.l2tp&apos;(missing plugin file &quot;/usr/lib64/NetworkManager/libnm-vpn-plugin-l2tp-editor.so&quot;). Issue with not stopping system xl2tpd serviceNetworkManager-l2tp starts its own instance of an xl2tpd process and if the system xl2tpd service is running, its own xl2tpd instance wonâ€™t be able to use UDP port 1701, so will use an ephemeral port (i.e. random high port). Although the use of an ephemeral port is described in â€œSecuring L2TP using IPsecâ€ RFC3193written by Microsoft and Cisco, there are some L2TP/IPsec servers and/or firewalls that will have issues with the use of an ephemeral port. Stopping the system xl2tpd service should free UDP port 1701 and on systemd based Linux distributions, the xl2tpd service can be stopped with the following: 1sudo systemctl stop xl2tpd If stopping the xl2tpd service fixes your VPN connection issue, you can disable the xl2tpd service from starting at boot time with : 1sudo systemctl disable xl2tpd Orphaned pppd processWith xl2tpd â‰¤ 1.3.6 (and in particular Linux distributionsâ€™ xl2tpd packages that donâ€™t have xl2tpd commit# a193e02 backported which fixes a NULL-pointer deference bug), a pppd process will be left behind when tearing down a VPN connection because the parent xl2tpd process crashes before it has a chance at reaping the child pppd process. Ubuntu 16.04 and 16.10 have updated xl2tpd 1.3.6 packages that contains the fix (Ubuntu bug# 1677990). EAP: peer reports authentication failureIf you see EAP: peer reports authentication failure in the journalctl output (or elsewhere), then in the VPN connectionâ€™s PPP Settings dialog box, untick EAP in the authentication methods list. In some situations, the Use Point-to-Point encryption (MPPE) checkbox may also need to be ticked. DNS resolution issues.local hostname resolutionThere are unfortunately many Microsoft Windows networks that still use .local for internal hostnames that are resolved using unicast DNS even though Microsoft no longer recommends using .local. The use of unicast DNS for resolving .local has fallen into disfavor as mobile devices, printers and other devices supporting Zeroconf (aka Bonjour) have become increasingly common and they use multicast DNS (mDNS) for resolving hostnames ending in .local. In /etc/nsswitch.conf most Linux distributions put mdns4_minimal ahead of dns in the hosts:line which often looks something like: 1hosts: files mdns4_minimal [NOTFOUND=return] dns With the above nsswitch.conf hosts configuration, .local hostname resolution will return NOTFOUND if the hostname can not be found in mDNS. If you must VPN to a network using .local with unicast DNS and not too concerned about potential Zeroconf performance issues, one workaround is to to move dns before mdns4_minimal in the hosts: line. NetworkManager â‰¤ 1.6.2 and Systemd-resolved ignoring VPN serverâ€™s DNSNetworkManager 1.6 introduced support for the systemd-resolved local DNS forwarder backend. Some Linux distributions have switched from DNSMasq to Systemd-resolved for DNS. Unfortunately with NetworkManager â‰¤ 1.6.2 because the ppp interfaces isnâ€™t â€œmanagedâ€ by NetworkManager the VPN serverâ€™s DNS configuration is being ignored as described in GNOME bug# 779087. A workaround is to rollback to using DNSMasq: Edit /etc/NetworkManager/NetworkManager.conf and add the following line under the [main] section: 1dns=dnsmasq Backup the Systemd resolv.conf file (NetworkManager should create a new one): 1sudo mv /etc/resolv.conf /etc/resolv.conf.systemd Disable and stop the systemd-resolved service: 12sudo systemctl disable systemd-resolvedsudo systemctl stop systemd-resolved Restart network-manager 1sudo systemctl restart NetworkManager Ubuntu AppArmor issue with strongSwanFor Ubuntu versions &lt; 16.04, strongSwanâ€™s charon and stroke daemons are prevented from performing correctly as child processes under NetworkManager-l2tp due to an AppArmor name space issue involving NetworkManager and the AppArmor profiles for charon and stroke. The simplest workaround is to disable the charon and stroke AppArmor profiles : 1234sudo ln -s /etc/apparmor.d/usr.lib.ipsec.charon /etc/apparmor.d/disable/sudo apparmor_parser -R /etc/apparmor.d/usr.lib.ipsec.charonsudo ln -s /etc/apparmor.d/usr.lib.ipsec.stroke /etc/apparmor.d/disable/sudo apparmor_parser -R /etc/apparmor.d/usr.lib.ipsec.stroke With Ubuntu 16.04 (Xenial Xerus), the issue is fixed by upgrading to strongswan 5.3.5-1ubuntu3.1 (or later). With Ubuntu 16.10 (Yakkety Yak), the issue is fixed by upgrading to strongswan 5.3.5-1ubuntu4.1 (or later). With Ubuntu 17.04 and later, there is no strongSwan AppArmor issue. openSUSE and SUSE Linux Enterprise ServerFor NetworkManager-l2tp to work, please ensure the Wicked service is disabled and NetworkManager service enable: 1234sudo systemctl stop wickedsudo systemctl disable wickedsudo systemctl enable NetworkManagersudo systemctl start NetworkManager]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>vpn</tag>
        <tag>ipsec</tag>
        <tag>ike-scan</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Header Field Definitions]]></title>
    <url>%2F2018%2F07%2F02%2FHTTP%20Header%20Field%20Definitions%2F</url>
    <content type="text"><![CDATA[part of Hypertext Transfer Protocol â€“ HTTP/1.1RFC 2616 Fielding, et al. 14 Header Field DefinitionsThis section defines the syntax and semantics of all standard HTTP/1.1 header fields. For entity-header fields, both sender and recipient refer to either the client or the server, depending on who sends and who receives the entity. è¿™éƒ¨åˆ†å®šä¹‰äº†æ‰€æœ‰æ ‡å‡† HTTP/1.1 å¤´éƒ¨å­—æ®µçš„è¯­æ³•å’Œè¯­ä¹‰ã€‚å¯¹ å®žä½“å¤´éƒ¨å­—æ®µï¼Œå‘é€è€…å’ŒæŽ¥æ”¶è€…æŒ‡å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ï¼Œå–å†³äºŽè°å‘é€ä»¥åŠè°æŽ¥æ”¶å®žä½“ 14.1 AcceptThe Accept request-header field can be used to specify certain media types which are acceptable for the response. Accept headers can be used to indicate that the request is specifically limited to a small set of desired types, as in the case of a request for an in-line image. Accept è¯·æ±‚å¤´å¯ä»¥è¢«ç”¨äºŽæŒ‡å®šå¯æŽ¥æ”¶çš„è¯·æ±‚å“åº”ä¸­çš„åª’ä½“ç±»åž‹ã€‚Accept å¤´éƒ¨å¯ä»¥ç”¨äºŽæŒ‡ç¤ºè¯·æ±‚åªé™äºŽç‰¹å®šä¸€å°ç»„æ‰€éœ€çš„ç±»åž‹ï¼Œä¾‹å¦‚åœ¨åœ¨è¯·æ±‚ä¸€ä¸ªå†…åµŒå›¾ç‰‡çš„æ—¶å€™å¯ä»¥æŒ‡å®šå›¾ç‰‡çš„æ ¼å¼ç­‰ã€‚ 12345678Accept = "Accept" ":" #( media-range [ accept-params ] )media-range = ( "*/*" | ( type "/" "*" ) | ( type "/" subtype ) ) *( ";" parameter )accept-params = ";" "q" "=" qvalue *( accept-extension )accept-extension = ";" token [ "=" ( token | quoted-string ) ] The asterisk â€œâ€œ character is used to group media types into ranges, with â€œ/â€œ indicating all media types and â€œtype/â€œ indicating all subtypes of that type. The media-range MAY include media type parameters that are applicable to that range. Each media-range MAY be followed by one or more accept-params, beginning with the â€œqâ€ parameter for indicating a relative quality factor. The first â€œqâ€ parameter (if any) separates the media-range parameter(s) from the accept-params. Quality factors allow the user or user agent to indicate the relative degree of preference for that media-range, using the qvalue scale from 0 to 1 (section 3.9). The default value is q=1. 12345678Note: Use of the &quot;q&quot; parameter name to separate media typeparameters from Accept extension parameters is due to historicalpractice. Although this prevents any media type parameter named&quot;q&quot; from being used with a media range, such an event is believedto be unlikely given the lack of any &quot;q&quot; parameters in the IANAmedia type registry and the rare usage of any media typeparameters in Accept. Future media types are discouraged fromregistering any parameter named &quot;q&quot;. The example 1Accept: audio/*; q=0.2, audio/basic SHOULD be interpreted as â€œI prefer audio/basic, but send me any audio type if it is the best available after an 80% mark-down in quality.â€ If no Accept header field is present, then it is assumed that the client accepts all media types. If an Accept header field is present, and if the server cannot send a response which is acceptable according to the combined Accept field value, then the server SHOULD send a 406 (not acceptable) response. A more elaborate example is 12Accept: text/plain; q=0.5, text/html, text/x-dvi; q=0.8, text/x-c Verbally, this would be interpreted as â€œtext/html and text/x-c are the preferred media types, but if they do not exist, then send the text/x-dvi entity, and if that does not exist, send the text/plain entity.â€ Media ranges can be overridden by more specific media ranges or specific media types. If more than one media range applies to a given type, the most specific reference has precedence. For example, 1Accept: text/*, text/html, text/html;level=1, */* have the following precedence: 12341) text/html;level=12) text/html3) text/*4) */* The media type quality factor associated with a given type is determined by finding the media range with the highest precedence which matches that type. For example, 12Accept: text/*;q=0.3, text/html;q=0.7, text/html;level=1, text/html;level=2;q=0.4, */*;q=0.5 would cause the following values to be associated: 12345678910 text/html;level=1 = 1 text/html = 0.7 text/plain = 0.3 image/jpeg = 0.5 text/html;level=2 = 0.4 text/html;level=3 = 0.7Note: A user agent might be provided with a default set of qualityvalues for certain media ranges. However, unless the user agent isa closed system which cannot interact with other rendering agents,this default set ought to be configurable by the user. 14.2 Accept-CharsetThe Accept-Charset request-header field can be used to indicate what character sets are acceptable for the response. This field allows clients capable of understanding more comprehensive or special- purpose character sets to signal that capability to a server which is capable of representing documents in those character sets. 12Accept-Charset = &quot;Accept-Charset&quot; &quot;:&quot; 1#( ( charset | &quot;*&quot; )[ &quot;;&quot; &quot;q&quot; &quot;=&quot; qvalue ] ) Character set values are described in section 3.4. Each charset MAY be given an associated quality value which represents the userâ€™s preference for that charset. The default value is q=1. An example is 1Accept-Charset: iso-8859-5, unicode-1-1;q=0.8 The special value â€œâ€œ, if present in the Accept-Charset field, matches every character set (including ISO-8859-1) which is not mentioned elsewhere in the Accept-Charset field. If no â€œâ€œ is present in an Accept-Charset field, then all character sets not explicitly mentioned get a quality value of 0, except for ISO-8859-1, which gets a quality value of 1 if not explicitly mentioned. If no Accept-Charset header is present, the default is that any character set is acceptable. If an Accept-Charset header is present, and if the server cannot send a response which is acceptable according to the Accept-Charset header, then the server SHOULD send an error response with the 406 (not acceptable) status code, though the sending of an unacceptable response is also allowed. 14.3 Accept-EncodingThe Accept-Encoding request-header field is similar to Accept, but restricts the content-codings (section 3.5) that are acceptable in the response. 123Accept-Encoding = &quot;Accept-Encoding&quot; &quot;:&quot; 1#( codings [ &quot;;&quot; &quot;q&quot; &quot;=&quot; qvalue ] )codings = ( content-coding | &quot;*&quot; ) Examples of its use are: 12345Accept-Encoding: compress, gzipAccept-Encoding:Accept-Encoding: *Accept-Encoding: compress;q=0.5, gzip;q=1.0Accept-Encoding: gzip;q=1.0, identity; q=0.5, *;q=0 A server tests whether a content-coding is acceptable, according to an Accept-Encoding field, using these rules: 1234567891011121314151. If the content-coding is one of the content-codings listed in the Accept-Encoding field, then it is acceptable, unless it is accompanied by a qvalue of 0. (As defined in section 3.9, a qvalue of 0 means &quot;not acceptable.&quot;)2. The special &quot;*&quot; symbol in an Accept-Encoding field matches any available content-coding not explicitly listed in the header field.3. If multiple content-codings are acceptable, then the acceptable content-coding with the highest non-zero qvalue is preferred.4. The &quot;identity&quot; content-coding is always acceptable, unless specifically refused because the Accept-Encoding field includes &quot;identity;q=0&quot;, or because the field includes &quot;*;q=0&quot; and does not explicitly include the &quot;identity&quot; content-coding. If the Accept-Encoding field-value is empty, then only the &quot;identity&quot; encoding is acceptable. If an Accept-Encoding field is present in a request, and if the server cannot send a response which is acceptable according to the Accept-Encoding header, then the server SHOULD send an error response with the 406 (Not Acceptable) status code. If no Accept-Encoding field is present in a request, the server MAY assume that the client will accept any content coding. In this case, if â€œidentityâ€ is one of the available content-codings, then the server SHOULD use the â€œidentityâ€ content-coding, unless it has additional information that a different content-coding is meaningful to the client. 12345678910Note: If the request does not include an Accept-Encoding field,and if the &quot;identity&quot; content-coding is unavailable, thencontent-codings commonly understood by HTTP/1.0 clients (i.e.,&quot;gzip&quot; and &quot;compress&quot;) are preferred; some older clientsimproperly display messages sent with other content-codings. Theserver might also make this decision based on information aboutthe particular user-agent or client.Note: Most HTTP/1.0 applications do not recognize or obey qvaluesassociated with content-codings. This means that qvalues will notwork and are not permitted with x-gzip or x-compress. 14.4 Accept-LanguageThe Accept-Language request-header field is similar to Accept, but restricts the set of natural languages that are preferred as a response to the request. Language tags are defined in section 3.10. 123Accept-Language = &quot;Accept-Language&quot; &quot;:&quot; 1#( language-range [ &quot;;&quot; &quot;q&quot; &quot;=&quot; qvalue ] )language-range = ( ( 1*8ALPHA *( &quot;-&quot; 1*8ALPHA ) ) | &quot;*&quot; ) Each language-range MAY be given an associated quality value which represents an estimate of the userâ€™s preference for the languages specified by that range. The quality value defaults to â€œq=1â€. For example, 1Accept-Language: da, en-gb;q=0.8, en;q=0.7 would mean: â€œI prefer Danish, but will accept British English and other types of English.â€ A language-range matches a language-tag if it exactly equals the tag, or if it exactly equals a prefix of the tag such that the first tag character following the prefix is â€œ-â€œ. The special range â€œ*â€, if present in the Accept-Language field, matches every tag not matched by any other range present in the Accept-Language field. 123456Note: This use of a prefix matching rule does not imply thatlanguage tags are assigned to languages in such a way that it isalways true that if a user understands a language with a certaintag, then this user will also understand all languages with tagsfor which this tag is a prefix. The prefix rule simply allows theuse of prefix tags if this is the case. The language quality factor assigned to a language-tag by the Accept-Language field is the quality value of the longest language- range in the field that matches the language-tag. If no language- range in the field matches the tag, the language quality factor assigned is 0. If no Accept-Language header is present in the request, the server SHOULD assume that all languages are equally acceptable. If an Accept-Language header is present, then all languages which are assigned a quality factor greater than 0 are acceptable. It might be contrary to the privacy expectations of the user to send an Accept-Language header with the complete linguistic preferences of the user in every request. For a discussion of this issue, see section 15.1.4. As intelligibility is highly dependent on the individual user, it is recommended that client applications make the choice of linguistic preference available to the user. If the choice is not made available, then the Accept-Language header field MUST NOT be given in the request. 12345678Note: When making the choice of linguistic preference available tothe user, we remind implementors of the fact that users are notfamiliar with the details of language matching as described above,and should provide appropriate guidance. As an example, usersmight assume that on selecting &quot;en-gb&quot;, they will be served anykind of English document if British English is not available. Auser agent might suggest in such a case to add &quot;en&quot; to get thebest matching behavior. 14.5 Accept-Ranges12345678910111213The Accept-Ranges response-header field allows the server toindicate its acceptance of range requests for a resource: Accept-Ranges = &quot;Accept-Ranges&quot; &quot;:&quot; acceptable-ranges acceptable-ranges = 1#range-unit | &quot;none&quot;Origin servers that accept byte-range requests MAY send Accept-Ranges: bytesbut are not required to do so. Clients MAY generate byte-rangerequests without having received this header for the resourceinvolved. Range units are defined in section 3.12.Servers that do not accept any kind of range request for aresource MAY send Accept-Ranges: noneto advise the client not to attempt a range request. 14.6 Age12345678910111213141516The Age response-header field conveys the sender&apos;s estimate of theamount of time since the response (or its revalidation) wasgenerated at the origin server. A cached response is &quot;fresh&quot; ifits age does not exceed its freshness lifetime. Age values arecalculated as specified in section 13.2.3. Age = &quot;Age&quot; &quot;:&quot; age-value age-value = delta-secondsAge values are non-negative decimal integers, representing time inseconds.If a cache receives a value larger than the largest positiveinteger it can represent, or if any of its age calculationsoverflows, it MUST transmit an Age header with a value of2147483648 (2^31). An HTTP/1.1 server that includes a cache MUSTinclude an Age header field in every response generated from itsown cache. Caches SHOULD use an arithmetic type of at least 31bits of range. 14.7 Allow1234567891011121314151617181920The Allow entity-header field lists the set of methods supportedby the resource identified by the Request-URI. The purpose of thisfield is strictly to inform the recipient of valid methodsassociated with the resource. An Allow header field MUST bepresent in a 405 (Method Not Allowed) response. Allow = &quot;Allow&quot; &quot;:&quot; #MethodExample of use: Allow: GET, HEAD, PUTThis field cannot prevent a client from trying other methods.However, the indications given by the Allow header field valueSHOULD be followed. The actual set of allowed methods is definedby the origin server at the time of each request.The Allow header field MAY be provided with a PUT request torecommend the methods to be supported by the new or modifiedresource. The server is not required to support these methods andSHOULD include an Allow header in the response giving the actualsupported methods.A proxy MUST NOT modify the Allow header field even if it does notunderstand all the methods specified, since the user agent mighthave other means of communicating with the origin server. 14.8 Authorization1234567891011121314151617181920212223242526272829303132333435A user agent that wishes to authenticate itself with a server--usually, but not necessarily, after receiving a 401 response--doesso by including an Authorization request-header field with therequest. The Authorization field value consists of credentialscontaining the authentication information of the user agent forthe realm of the resource being requested. Authorization = &quot;Authorization&quot; &quot;:&quot; credentialsHTTP access authentication is described in &quot;HTTP Authentication:Basic and Digest Access Authentication&quot; [43]. If a request isauthenticated and a realm specified, the same credentials SHOULDbe valid for all other requests within this realm (assuming thatthe authentication scheme itself does not require otherwise, suchas credentials that vary according to a challenge value or usingsynchronized clocks).When a shared cache (see section 13.7) receives a requestcontaining an Authorization field, it MUST NOT return thecorresponding response as a reply to any other request, unless oneof the following specific exceptions holds:1. If the response includes the &quot;s-maxage&quot; cache-control directive, the cache MAY use that response in replying to a subsequent request. But (if the specified maximum age has passed) a proxy cache MUST first revalidate it with the origin server, using the request-headers from the new request to allow the origin server to authenticate the new request. (This is the defined behavior for s-maxage.) If the response includes &quot;s- maxage=0&quot;, the proxy MUST always revalidate it before re-using it.2. If the response includes the &quot;must-revalidate&quot; cache-control directive, the cache MAY use that response in replying to a subsequent request. But if the response is stale, all caches MUST first revalidate it with the origin server, using the request-headers from the new request to allow the origin server to authenticate the new request.3. If the response includes the &quot;public&quot; cache-control directive, it MAY be returned in reply to any subsequent request. 14.9 Cache-ControlThe Cache-Control general-header field is used to specify directives that MUST be obeyed by all caching mechanisms along the request/response chain. The directives specify behavior intended to prevent caches from adversely interfering with the request or response. These directives typically override the default caching algorithms. Cache directives are unidirectional in that the presence of a directive in a request does not imply that the same directive is to be given in the response. 12Note that HTTP/1.0 caches might not implement Cache-Control andmight only implement Pragma: no-cache (see section 14.32). Cache directives MUST be passed through by a proxy or gateway application, regardless of their significance to that application, since the directives might be applicable to all recipients along the request/response chain. It is not possible to specify a cache- directive for a specific cache. 123456789101112131415161718192021222324Cache-Control = &quot;Cache-Control&quot; &quot;:&quot; 1#cache-directivecache-directive = cache-request-directive | cache-response-directivecache-request-directive = &quot;no-cache&quot; ; Section 14.9.1 | &quot;no-store&quot; ; Section 14.9.2 | &quot;max-age&quot; &quot;=&quot; delta-seconds ; Section 14.9.3, 14.9.4 | &quot;max-stale&quot; [ &quot;=&quot; delta-seconds ] ; Section 14.9.3 | &quot;min-fresh&quot; &quot;=&quot; delta-seconds ; Section 14.9.3 | &quot;no-transform&quot; ; Section 14.9.5 | &quot;only-if-cached&quot; ; Section 14.9.4 | cache-extension ; Section 14.9.6 cache-response-directive = &quot;public&quot; ; Section 14.9.1 | &quot;private&quot; [ &quot;=&quot; &lt;&quot;&gt; 1#field-name &lt;&quot;&gt; ] ; Section 14.9.1 | &quot;no-cache&quot; [ &quot;=&quot; &lt;&quot;&gt; 1#field-name &lt;&quot;&gt; ]; Section 14.9.1 | &quot;no-store&quot; ; Section 14.9.2 | &quot;no-transform&quot; ; Section 14.9.5 | &quot;must-revalidate&quot; ; Section 14.9.4 | &quot;proxy-revalidate&quot; ; Section 14.9.4 | &quot;max-age&quot; &quot;=&quot; delta-seconds ; Section 14.9.3 | &quot;s-maxage&quot; &quot;=&quot; delta-seconds ; Section 14.9.3 | cache-extension ; Section 14.9.6cache-extension = token [ &quot;=&quot; ( token | quoted-string ) ] When a directive appears without any 1#field-name parameter, the directive applies to the entire request or response. When such a directive appears with a 1#field-name parameter, it applies only to the named field or fields, and not to the rest of the request or response. This mechanism supports extensibility; implementations of future versions of the HTTP protocol might apply these directives to header fields not defined in HTTP/1.1. The cache-control directives can be broken down into these general categories: 12345678910- Restrictions on what are cacheable; these may only be imposed by the origin server.- Restrictions on what may be stored by a cache; these may be imposed by either the origin server or the user agent.- Modifications of the basic expiration mechanism; these may be imposed by either the origin server or the user agent.- Controls over cache revalidation and reload; these may only be imposed by a user agent.- Control over transformation of entities.- Extensions to the caching system. 14.9.1 What is CacheableBy default, a response is cacheable if the requirements of the request method, request header fields, and the response status indicate that it is cacheable. Section 13.4 summarizes these defaults for cacheability. The following Cache-Control response directives allow an origin server to override the default cacheability of a response: public Indicates that the response MAY be cached by any cache, even if it would normally be non-cacheable or cacheable only within a non- shared cache. (See also Authorization, section 14.8, for additional details.) private Indicates that all or part of the response message is intended for a single user and MUST NOT be cached by a shared cache. This allows an origin server to state that the specified parts of the response are intended for only one user and are not a valid response for requests by other users. A private (non-shared) cache MAY cache the response. Note: This usage of the word private only controls where the response may be cached, and cannot ensure the privacy of the message content. no-cache If the no-cache directive does not specify a field-name, then a cache MUST NOT use the response to satisfy a subsequent request without successful revalidation with the origin server. This allows an origin server to prevent caching even by caches that have been configured to return stale responses to client requests. If the no-cache directive does specify one or more field-names, then a cache MAY use the response to satisfy a subsequent request, subject to any other restrictions on caching. However, the specified field-name(s) MUST NOT be sent in the response to a subsequent request without successful revalidation with the origin server. This allows an origin server to prevent the re-use of certain header fields in a response, while still allowing caching of the rest of the response. Note: Most HTTP/1.0 caches will not recognize or obey this directive. 14.9.2 What May be Stored by Caches no-store The purpose of the no-store directive is to prevent the inadvertent release or retention of sensitive information (for example, on backup tapes). The no-store directive applies to the entire message, and MAY be sent either in a response or in a request. If sent in a request, a cache MUST NOT store any part of either this request or any response to it. If sent in a response, a cache MUST NOT store any part of either this response or the request that elicited it. This directive applies to both non- shared and shared caches. â€œMUST NOT storeâ€ in this context means that the cache MUST NOT intentionally store the information in non-volatile storage, and MUST make a best-effort attempt to remove the information from volatile storage as promptly as possible after forwarding it. Even when this directive is associated with a response, users might explicitly store such a response outside of the caching system (e.g., with a â€œSave Asâ€ dialog). History buffers MAY store such responses as part of their normal operation. The purpose of this directive is to meet the stated requirements of certain users and service authors who are concerned about accidental releases of information via unanticipated accesses to cache data structures. While the use of this directive might improve privacy in some cases, we caution that it is NOT in any way a reliable or sufficient mechanism for ensuring privacy. In particular, malicious or compromised caches might not recognize or obey this directive, and communications networks might be vulnerable to eavesdropping. 14.9.3 Modifications of the Basic Expiration MechanismThe expiration time of an entity MAY be specified by the origin server using the Expires header (see section 14.21). Alternatively, it MAY be specified using the max-age directive in a response. When the max-age cache-control directive is present in a cached response, the response is stale if its current age is greater than the age value given (in seconds) at the time of a new request for that resource. The max-age directive on a response implies that the response is cacheable (i.e., â€œpublicâ€) unless some other, more restrictive cache directive is also present. If a response includes both an Expires header and a max-age directive, the max-age directive overrides the Expires header, even if the Expires header is more restrictive. This rule allows an origin server to provide, for a given response, a longer expiration time to an HTTP/1.1 (or later) cache than to an HTTP/1.0 cache. This might be useful if certain HTTP/1.0 caches improperly calculate ages or expiration times, perhaps due to desynchronized clocks. Many HTTP/1.0 cache implementations will treat an Expires value that is less than or equal to the response Date value as being equivalent to the Cache-Control response directive â€œno-cacheâ€. If an HTTP/1.1 cache receives such a response, and the response does not include a Cache-Control header field, it SHOULD consider the response to be non-cacheable in order to retain compatibility with HTTP/1.0 servers. Note: An origin server might wish to use a relatively new HTTP cache control feature, such as the â€œprivateâ€ directive, on a network including older caches that do not understand that feature. The origin server will need to combine the new feature with an Expires field whose value is less than or equal to the Date value. This will prevent older caches from improperly caching the response. s-maxage If a response includes an s-maxage directive, then for a shared cache (but not for a private cache), the maximum age specified by this directive overrides the maximum age specified by either the max-age directive or the Expires header. The s-maxage directive also implies the semantics of the proxy-revalidate directive (see section 14.9.4), i.e., that the shared cache must not use the entry after it becomes stale to respond to a subsequent request without first revalidating it with the origin server. The s- maxage directive is always ignored by a private cache. Note that most older caches, not compliant with this specification, do not implement any cache-control directives. An origin server wishing to use a cache-control directive that restricts, but does not prevent, caching by an HTTP/1.1-compliant cache MAY exploit the requirement that the max-age directive overrides the Expires header, and the fact that pre-HTTP/1.1-compliant caches do not observe the max-age directive. Other directives allow a user agent to modify the basic expiration mechanism. These directives MAY be specified on a request: max-age Indicates that the client is willing to accept a response whose age is no greater than the specified time in seconds. Unless max- stale directive is also included, the client is not willing to accept a stale response. min-fresh Indicates that the client is willing to accept a response whose freshness lifetime is no less than its current age plus the specified time in seconds. That is, the client wants a response that will still be fresh for at least the specified number of seconds. max-stale Indicates that the client is willing to accept a response that has exceeded its expiration time. If max-stale is assigned a value, then the client is willing to accept a response that has exceeded its expiration time by no more than the specified number of seconds. If no value is assigned to max-stale, then the client is willing to accept a stale response of any age. If a cache returns a stale response, either because of a max-stale directive on a request, or because the cache is configured to override the expiration time of a response, the cache MUST attach a Warning header to the stale response, using Warning 110 (Response is stale). A cache MAY be configured to return stale responses without validation, but only if this does not conflict with any â€œMUSTâ€-level requirements concerning cache validation (e.g., a â€œmust-revalidateâ€ cache-control directive). If both the new request and the cached entry include â€œmax-ageâ€ directives, then the lesser of the two values is used for determining the freshness of the cached entry for that request. 14.9.4 Cache Revalidation and Reload ControlsSometimes a user agent might want or need to insist that a cache revalidate its cache entry with the origin server (and not just with the next cache along the path to the origin server), or to reload its cache entry from the origin server. End-to-end revalidation might be necessary if either the cache or the origin server has overestimated the expiration time of the cached response. End-to-end reload may be necessary if the cache entry has become corrupted for some reason. End-to-end revalidation may be requested either when the client does not have its own local cached copy, in which case we call it â€œunspecified end-to-end revalidationâ€, or when the client does have a local cached copy, in which case we call it â€œspecific end-to-end revalidation.â€ The client can specify these three kinds of action using Cache- Control request directives: End-to-end reload The request includes a â€œno-cacheâ€ cache-control directive or, for compatibility with HTTP/1.0 clients, â€œPragma: no-cacheâ€. Field names MUST NOT be included with the no-cache directive in a request. The server MUST NOT use a cached copy when responding to such a request. Specific end-to-end revalidation The request includes a â€œmax-age=0â€ cache-control directive, which forces each cache along the path to the origin server to revalidate its own entry, if any, with the next cache or server. The initial request includes a cache-validating conditional with the clientâ€™s current validator. Unspecified end-to-end revalidation The request includes â€œmax-age=0â€ cache-control directive, which forces each cache along the path to the origin server to revalidate its own entry, if any, with the next cache or server. The initial request does not include a cache-validating conditional; the first cache along the path (if any) that holds a cache entry for this resource includes a cache-validating conditional with its current validator. max-age When an intermediate cache is forced, by means of a max-age=0 directive, to revalidate its own cache entry, and the client has supplied its own validator in the request, the supplied validator might differ from the validator currently stored with the cache entry. In this case, the cache MAY use either validator in making its own request without affecting semantic transparency. However, the choice of validator might affect performance. The best approach is for the intermediate cache to use its own validator when making its request. If the server replies with 304 (Not Modified), then the cache can return its now validated copy to the client with a 200 (OK) response. If the server replies with a new entity and cache validator, however, the intermediate cache can compare the returned validator with the one provided in the clientâ€™s request, using the strong comparison function. If the clientâ€™s validator is equal to the origin serverâ€™s, then the intermediate cache simply returns 304 (Not Modified). Otherwise, it returns the new entity with a 200 (OK) response. If a request includes the no-cache directive, it SHOULD NOT include min-fresh, max-stale, or max-age. only-if-cached In some cases, such as times of extremely poor network connectivity, a client may want a cache to return only those responses that it currently has stored, and not to reload or revalidate with the origin server. To do this, the client may include the only-if-cached directive in a request. If it receives this directive, a cache SHOULD either respond using a cached entry that is consistent with the other constraints of the request, or respond with a 504 (Gateway Timeout) status. However, if a group of caches is being operated as a unified system with good internal connectivity, such a request MAY be forwarded within that group of caches. must-revalidate Because a cache MAY be configured to ignore a serverâ€™s specified expiration time, and because a client request MAY include a max- stale directive (which has a similar effect), the protocol also includes a mechanism for the origin server to require revalidation of a cache entry on any subsequent use. When the must-revalidate directive is present in a response received by a cache, that cache MUST NOT use the entry after it becomes stale to respond to a subsequent request without first revalidating it with the origin server. (I.e., the cache MUST do an end-to-end revalidation every time, if, based solely on the origin serverâ€™s Expires or max-age value, the cached response is stale.) The must-revalidate directive is necessary to support reliable operation for certain protocol features. In all circumstances an HTTP/1.1 cache MUST obey the must-revalidate directive; in particular, if the cache cannot reach the origin server for any reason, it MUST generate a 504 (Gateway Timeout) response. Servers SHOULD send the must-revalidate directive if and only if failure to revalidate a request on the entity could result in incorrect operation, such as a silently unexecuted financial transaction. Recipients MUST NOT take any automated action that violates this directive, and MUST NOT automatically provide an unvalidated copy of the entity if revalidation fails. Although this is not recommended, user agents operating under severe connectivity constraints MAY violate this directive but, if so, MUST explicitly warn the user that an unvalidated response has been provided. The warning MUST be provided on each unvalidated access, and SHOULD require explicit user confirmation. proxy-revalidate The proxy-revalidate directive has the same meaning as the must- revalidate directive, except that it does not apply to non-shared user agent caches. It can be used on a response to an authenticated request to permit the userâ€™s cache to store and later return the response without needing to revalidate it (since it has already been authenticated once by that user), while still requiring proxies that service many users to revalidate each time (in order to make sure that each user has been authenticated). Note that such authenticated responses also need the public cache control directive in order to allow them to be cached at all. 14.9.5 No-Transform Directive no-transform Implementors of intermediate caches (proxies) have found it useful to convert the media type of certain entity bodies. A non- transparent proxy might, for example, convert between image formats in order to save cache space or to reduce the amount of traffic on a slow link. Serious operational problems occur, however, when these transformations are applied to entity bodies intended for certain kinds of applications. For example, applications for medical imaging, scientific data analysis and those using end-to-end authentication, all depend on receiving an entity body that is bit for bit identical to the original entity-body. Therefore, if a message includes the no-transform directive, an intermediate cache or proxy MUST NOT change those headers that are listed in section 13.5.2 as being subject to the no-transform directive. This implies that the cache or proxy MUST NOT change any aspect of the entity-body that is specified by these headers, including the value of the entity-body itself. 14.9.6 Cache Control ExtensionsThe Cache-Control header field can be extended through the use of one or more cache-extension tokens, each with an optional assigned value. Informational extensions (those which do not require a change in cache behavior) MAY be added without changing the semantics of other directives. Behavioral extensions are designed to work by acting as modifiers to the existing base of cache directives. Both the new directive and the standard directive are supplied, such that applications which do not understand the new directive will default to the behavior specified by the standard directive, and those that understand the new directive will recognize it as modifying the requirements associated with the standard directive. In this way, extensions to the cache-control directives can be made without requiring changes to the base protocol. This extension mechanism depends on an HTTP cache obeying all of the cache-control directives defined for its native HTTP-version, obeying certain extensions, and ignoring all directives that it does not understand. For example, consider a hypothetical new response directive called community which acts as a modifier to the private directive. We define this new directive to mean that, in addition to any non-shared cache, any cache which is shared only by members of the community named within its value may cache the response. An origin server wishing to allow the UCI community to use an otherwise private response in their shared cache(s) could do so by including 1Cache-Control: private, community=&quot;UCI&quot; A cache seeing this header field will act correctly even if the cache does not understand the community cache-extension, since it will also see and understand the private directive and thus default to the safe behavior. Unrecognized cache-directives MUST be ignored; it is assumed that any cache-directive likely to be unrecognized by an HTTP/1.1 cache will be combined with standard directives (or the responseâ€™s default cacheability) such that the cache behavior will remain minimally correct even if the cache does not understand the extension(s). 14.10 ConnectionThe Connection general-header field allows the sender to specify options that are desired for that particular connection and MUST NOT be communicated by proxies over further connections. The Connection header has the following grammar: 12Connection = &quot;Connection&quot; &quot;:&quot; 1#(connection-token)connection-token = token HTTP/1.1 proxies MUST parse the Connection header field before a message is forwarded and, for each connection-token in this field, remove any header field(s) from the message with the same name as the connection-token. Connection options are signaled by the presence of a connection-token in the Connection header field, not by any corresponding additional header field(s), since the additional header field may not be sent if there are no parameters associated with that connection option. Message headers listed in the Connection header MUST NOT include end-to-end headers, such as Cache-Control. HTTP/1.1 defines the â€œcloseâ€ connection option for the sender to signal that the connection will be closed after completion of the response. For example, 1Connection: close in either the request or the response header fields indicates that the connection SHOULD NOT be considered `persistentâ€™ (section 8.1) after the current request/response is complete. HTTP/1.1 applications that do not support persistent connections MUST include the â€œcloseâ€ connection option in every message. A system receiving an HTTP/1.0 (or lower-version) message that includes a Connection header MUST, for each connection-token in this field, remove and ignore any header field(s) from the message with the same name as the connection-token. This protects against mistaken forwarding of such header fields by pre-HTTP/1.1 proxies. See section 19.6.2. 14.11 Content-EncodingThe Content-Encoding entity-header field is used as a modifier to the media-type. When present, its value indicates what additional content codings have been applied to the entity-body, and thus what decoding mechanisms must be applied in order to obtain the media-type referenced by the Content-Type header field. Content-Encoding is primarily used to allow a document to be compressed without losing the identity of its underlying media type. 1Content-Encoding = &quot;Content-Encoding&quot; &quot;:&quot; 1#content-coding Content codings are defined in section 3.5. An example of its use is 1Content-Encoding: gzip The content-coding is a characteristic of the entity identified by the Request-URI. Typically, the entity-body is stored with this encoding and is only decoded before rendering or analogous usage. However, a non-transparent proxy MAY modify the content-coding if the new coding is known to be acceptable to the recipient, unless the â€œno-transformâ€ cache-control directive is present in the message. If the content-coding of an entity is not â€œidentityâ€, then the response MUST include a Content-Encoding entity-header (section 14.11) that lists the non-identity content-coding(s) used. If the content-coding of an entity in a request message is not acceptable to the origin server, the server SHOULD respond with a status code of 415 (Unsupported Media Type). If multiple encodings have been applied to an entity, the content codings MUST be listed in the order in which they were applied. Additional information about the encoding parameters MAY be provided by other entity-header fields not defined by this specification. 14.12 Content-LanguageThe Content-Language entity-header field describes the natural language(s) of the intended audience for the enclosed entity. Note that this might not be equivalent to all the languages used within the entity-body. 1Content-Language = &quot;Content-Language&quot; &quot;:&quot; 1#language-tag Language tags are defined in section 3.10. The primary purpose of Content-Language is to allow a user to identify and differentiate entities according to the userâ€™s own preferred language. Thus, if the body content is intended only for a Danish-literate audience, the appropriate field is 1Content-Language: da If no Content-Language is specified, the default is that the content is intended for all language audiences. This might mean that the sender does not consider it to be specific to any natural language, or that the sender does not know for which language it is intended. Multiple languages MAY be listed for content that is intended for multiple audiences. For example, a rendition of the â€œTreaty of Waitangi,â€ presented simultaneously in the original Maori and English versions, would call for 1Content-Language: mi, en However, just because multiple languages are present within an entity does not mean that it is intended for multiple linguistic audiences. An example would be a beginnerâ€™s language primer, such as â€œA First Lesson in Latin,â€ which is clearly intended to be used by an English-literate audience. In this case, the Content-Language would properly only include â€œenâ€. Content-Language MAY be applied to any media type â€“ it is not limited to textual documents. 14.13 Content-LengthThe Content-Length entity-header field indicates the size of the entity-body, in decimal number of OCTETs, sent to the recipient or, in the case of the HEAD method, the size of the entity-body that would have been sent had the request been a GET. 1Content-Length = &quot;Content-Length&quot; &quot;:&quot; 1*DIGIT An example is 1Content-Length: 3495 Applications SHOULD use this field to indicate the transfer-length of the message-body, unless this is prohibited by the rules in section 4.4. Any Content-Length greater than or equal to zero is a valid value. Section 4.4 describes how to determine the length of a message-body if a Content-Length is not given. Note that the meaning of this field is significantly different from the corresponding definition in MIME, where it is an optional field used within the â€œmessage/external-bodyâ€ content-type. In HTTP, it SHOULD be sent whenever the messageâ€™s length can be determined prior to being transferred, unless this is prohibited by the rules in section 4.4. 14.14 Content-LocationThe Content-Location entity-header field MAY be used to supply the resource location for the entity enclosed in the message when that entity is accessible from a location separate from the requested resourceâ€™s URI. A server SHOULD provide a Content-Location for the variant corresponding to the response entity; especially in the case where a resource has multiple entities associated with it, and those entities actually have separate locations by which they might be individually accessed, the server SHOULD provide a Content-Location for the particular variant which is returned. 12Content-Location = &quot;Content-Location&quot; &quot;:&quot; ( absoluteURI | relativeURI ) The value of Content-Location also defines the base URI for the entity. The Content-Location value is not a replacement for the original requested URI; it is only a statement of the location of the resource corresponding to this particular entity at the time of the request. Future requests MAY specify the Content-Location URI as the request- URI if the desire is to identify the source of that particular entity. A cache cannot assume that an entity with a Content-Location different from the URI used to retrieve it can be used to respond to later requests on that Content-Location URI. However, the Content- Location can be used to differentiate between multiple entities retrieved from a single requested resource, as described in section 13.6. If the Content-Location is a relative URI, the relative URI is interpreted relative to the Request-URI. The meaning of the Content-Location header in PUT or POST requests is undefined; servers are free to ignore it in those cases. 14.15 Content-MD5The Content-MD5 entity-header field, as defined in RFC 1864 [23], is an MD5 digest of the entity-body for the purpose of providing an end-to-end message integrity check (MIC) of the entity-body. (Note: a MIC is good for detecting accidental modification of the entity-body in transit, but is not proof against malicious attacks.) 12Content-MD5 = &quot;Content-MD5&quot; &quot;:&quot; md5-digestmd5-digest = &lt;base64 of 128 bit MD5 digest as per RFC 1864&gt; The Content-MD5 header field MAY be generated by an origin server or client to function as an integrity check of the entity-body. Only origin servers or clients MAY generate the Content-MD5 header field; proxies and gateways MUST NOT generate it, as this would defeat its value as an end-to-end integrity check. Any recipient of the entity- body, including gateways and proxies, MAY check that the digest value in this header field matches that of the entity-body as received. The MD5 digest is computed based on the content of the entity-body, including any content-coding that has been applied, but not including any transfer-encoding applied to the message-body. If the message is received with a transfer-encoding, that encoding MUST be removed prior to checking the Content-MD5 value against the received entity. This has the result that the digest is computed on the octets of the entity-body exactly as, and in the order that, they would be sent if no transfer-encoding were being applied. HTTP extends RFC 1864 to permit the digest to be computed for MIME composite media-types (e.g., multipart/* and message/rfc822), but this does not change how the digest is computed as defined in the preceding paragraph. There are several consequences of this. The entity-body for composite types MAY contain many body-parts, each with its own MIME and HTTP headers (including Content-MD5, Content-Transfer-Encoding, and Content-Encoding headers). If a body-part has a Content-Transfer- Encoding or Content-Encoding header, it is assumed that the content of the body-part has had the encoding applied, and the body-part is included in the Content-MD5 digest as is â€“ i.e., after the application. The Transfer-Encoding header field is not allowed within body-parts. Conversion of all line breaks to CRLF MUST NOT be done before computing or checking the digest: the line break convention used in the text actually transmitted MUST be left unaltered when computing the digest. 1234567891011Note: while the definition of Content-MD5 is exactly the same forHTTP as in RFC 1864 for MIME entity-bodies, there are several waysin which the application of Content-MD5 to HTTP entity-bodiesdiffers from its application to MIME entity-bodies. One is thatHTTP, unlike MIME, does not use Content-Transfer-Encoding, anddoes use Transfer-Encoding and Content-Encoding. Another is thatHTTP more frequently uses binary content types than MIME, so it isworth noting that, in such cases, the byte order used to computethe digest is the transmission byte order defined for the type.Lastly, HTTP allows transmission of text types with any of severalline break conventions and not just the canonical form using CRLF. 14.16 Content-RangeThe Content-Range entity-header is sent with a partial entity-body to specify where in the full entity-body the partial body should be applied. Range units are defined in section 3.12. 12345678Content-Range = &quot;Content-Range&quot; &quot;:&quot; content-range-speccontent-range-spec = byte-content-range-specbyte-content-range-spec = bytes-unit SP byte-range-resp-spec &quot;/&quot; ( instance-length | &quot;*&quot; )byte-range-resp-spec = (first-byte-pos &quot;-&quot; last-byte-pos) | &quot;*&quot;instance-length = 1*DIGIT The header SHOULD indicate the total length of the full entity-body, unless this length is unknown or difficult to determine. The asterisk â€œ*â€ character means that the instance-length is unknown at the time when the response was generated. Unlike byte-ranges-specifier values (see section 14.35.1), a byte- range-resp-spec MUST only specify one range, and MUST contain absolute byte positions for both the first and last byte of the range. A byte-content-range-spec with a byte-range-resp-spec whose last- byte-pos value is less than its first-byte-pos value, or whose instance-length value is less than or equal to its last-byte-pos value, is invalid. The recipient of an invalid byte-content-range- spec MUST ignore it and any content transferred along with it. A server sending a response with status code 416 (Requested range not satisfiable) SHOULD include a Content-Range field with a byte-range- resp-spec of â€œ*â€. The instance-length specifies the current length of the selected resource. A response with status code 206 (Partial Content) MUST NOT include a Content-Range field with a byte-range- resp-spec of â€œ*â€. Examples of byte-content-range-spec values, assuming that the entity contains a total of 1234 bytes: 12345678. The first 500 bytes: bytes 0-499/1234. The second 500 bytes: bytes 500-999/1234. All except for the first 500 bytes: bytes 500-1233/1234. The last 500 bytes: bytes 734-1233/1234 When an HTTP message includes the content of a single range (for example, a response to a request for a single range, or to a request for a set of ranges that overlap without any holes), this content is transmitted with a Content-Range header, and a Content-Length header showing the number of bytes actually transferred. For example, 123456HTTP/1.1 206 Partial contentDate: Wed, 15 Nov 1995 06:25:24 GMTLast-Modified: Wed, 15 Nov 1995 04:58:08 GMTContent-Range: bytes 21010-47021/47022Content-Length: 26012Content-Type: image/gif When an HTTP message includes the content of multiple ranges (for example, a response to a request for multiple non-overlapping ranges), these are transmitted as a multipart message. The multipart media type used for this purpose is â€œmultipart/byterangesâ€ as defined in appendix 19.2. See appendix 19.6.3 for a compatibility issue. A response to a request for a single range MUST NOT be sent using the multipart/byteranges media type. A response to a request for multiple ranges, whose result is a single range, MAY be sent as a multipart/byteranges media type with one part. A client that cannot decode a multipart/byteranges message MUST NOT ask for multiple byte-ranges in a single request. When a client requests multiple byte-ranges in one request, the server SHOULD return them in the order that they appeared in the request. If the server ignores a byte-range-spec because it is syntactically invalid, the server SHOULD treat the request as if the invalid Range header field did not exist. (Normally, this means return a 200 response containing the full entity). If the server receives a request (other than one including an If- Range request-header field) with an unsatisfiable Range request- header field (that is, all of whose byte-range-spec values have a first-byte-pos value greater than the current length of the selected resource), it SHOULD return a response code of 416 (Requested range not satisfiable) (section 10.4.17). 1234Note: clients cannot depend on servers to send a 416 (Requestedrange not satisfiable) response instead of a 200 (OK) response foran unsatisfiable Range request-header, since not all serversimplement this request-header. 14.17 Content-TypeThe Content-Type entity-header field indicates the media type of the entity-body sent to the recipient or, in the case of the HEAD method, the media type that would have been sent had the request been a GET. 1Content-Type = &quot;Content-Type&quot; &quot;:&quot; media-type Media types are defined in section 3.7. An example of the field is 1Content-Type: text/html; charset=ISO-8859-4 Further discussion of methods for identifying the media type of an entity is provided in section 7.2.1. 14.18 DateThe Date general-header field represents the date and time at which the message was originated, having the same semantics as orig-date in RFC 822. The field value is an HTTP-date, as described in section 3.3.1; it MUST be sent in RFC 1123 [8]-date format. 1Date = &quot;Date&quot; &quot;:&quot; HTTP-date An example is 1Date: Tue, 15 Nov 1994 08:12:31 GMT Origin servers MUST include a Date header field in all responses, except in these cases: 123456789101. If the response status code is 100 (Continue) or 101 (Switching Protocols), the response MAY include a Date header field, at the server&apos;s option.2. If the response status code conveys a server error, e.g. 500 (Internal Server Error) or 503 (Service Unavailable), and it is inconvenient or impossible to generate a valid Date.3. If the server does not have a clock that can provide a reasonable approximation of the current time, its responses MUST NOT include a Date header field. In this case, the rules in section 14.18.1 MUST be followed. A received message that does not have a Date header field MUST be assigned one by the recipient if the message will be cached by that recipient or gatewayed via a protocol which requires a Date. An HTTP implementation without a clock MUST NOT cache responses without revalidating them on every use. An HTTP cache, especially a shared cache, SHOULD use a mechanism, such as NTP [28], to synchronize its clock with a reliable external standard. Clients SHOULD only send a Date header field in messages that include an entity-body, as in the case of the PUT and POST requests, and even then it is optional. A client without a clock MUST NOT send a Date header field in a request. The HTTP-date sent in a Date header SHOULD NOT represent a date and time subsequent to the generation of the message. It SHOULD represent the best available approximation of the date and time of message generation, unless the implementation has no means of generating a reasonably accurate date and time. In theory, the date ought to represent the moment just before the entity is generated. In practice, the date can be generated at any time during the message origination without affecting its semantic value. 14.18.1 Clockless Origin Server OperationSome origin server implementations might not have a clock available. An origin server without a clock MUST NOT assign Expires or Last- Modified values to a response, unless these values were associated with the resource by a system or user with a reliable clock. It MAY assign an Expires value that is known, at or before server configuration time, to be in the past (this allows â€œpre-expirationâ€ of responses without storing separate Expires values for each resource). 14.19 ETagThe ETag response-header field provides the current value of the entity tag for the requested variant. The headers used with entity tags are described in sections 14.24, 14.26 and 14.44. The entity tag MAY be used for comparison with other entities from the same resource (see section 13.3.3). 1ETag = &quot;ETag&quot; &quot;:&quot; entity-tag Examples: 123ETag: &quot;xyzzy&quot;ETag: W/&quot;xyzzy&quot;ETag: &quot;&quot; 14.20 ExpectThe Expect request-header field is used to indicate that particular server behaviors are required by the client. 12345Expect = &quot;Expect&quot; &quot;:&quot; 1#expectationexpectation = &quot;100-continue&quot; | expectation-extensionexpectation-extension = token [ &quot;=&quot; ( token | quoted-string ) *expect-params ]expect-params = &quot;;&quot; token [ &quot;=&quot; ( token | quoted-string ) ] A server that does not understand or is unable to comply with any of the expectation values in the Expect field of a request MUST respond with appropriate error status. The server MUST respond with a 417 (Expectation Failed) status if any of the expectations cannot be met or, if there are other problems with the request, some other 4xx status. This header field is defined with extensible syntax to allow for future extensions. If a server receives a request containing an Expect field that includes an expectation-extension that it does not support, it MUST respond with a 417 (Expectation Failed) status. Comparison of expectation values is case-insensitive for unquoted tokens (including the 100-continue token), and is case-sensitive for quoted-string expectation-extensions. The Expect mechanism is hop-by-hop: that is, an HTTP/1.1 proxy MUST return a 417 (Expectation Failed) status if it receives a request with an expectation that it cannot meet. However, the Expect request-header itself is end-to-end; it MUST be forwarded if the request is forwarded. Many older HTTP/1.0 and HTTP/1.1 applications do not understand the Expect header. See section 8.2.3 for the use of the 100 (continue) status. 14.21 ExpiresThe Expires entity-header field gives the date/time after which the response is considered stale. A stale cache entry may not normally be returned by a cache (either a proxy cache or a user agent cache) unless it is first validated with the origin server (or with an intermediate cache that has a fresh copy of the entity). See section 13.2 for further discussion of the expiration model. The presence of an Expires field does not imply that the original resource will change or cease to exist at, before, or after that time. The format is an absolute date and time as defined by HTTP-date in section 3.3.1; it MUST be in RFC 1123 date format: 1Expires = &quot;Expires&quot; &quot;:&quot; HTTP-date An example of its use is 1234Expires: Thu, 01 Dec 1994 16:00:00 GMTNote: if a response includes a Cache-Control field with the max-age directive (see section 14.9.3), that directive overrides theExpires field. HTTP/1.1 clients and caches MUST treat other invalid date formats, especially including the value â€œ0â€, as in the past (i.e., â€œalready expiredâ€). To mark a response as â€œalready expired,â€ an origin server sends an Expires date that is equal to the Date header value. (See the rules for expiration calculations in section 13.2.4.) To mark a response as â€œnever expires,â€ an origin server sends an Expires date approximately one year from the time the response is sent. HTTP/1.1 servers SHOULD NOT send Expires dates more than one year in the future. The presence of an Expires header field with a date value of some time in the future on a response that otherwise would by default be non-cacheable indicates that the response is cacheable, unless indicated otherwise by a Cache-Control header field (section 14.9). 14.22 FromThe From request-header field, if given, SHOULD contain an Internet e-mail address for the human user who controls the requesting user agent. The address SHOULD be machine-usable, as defined by â€œmailboxâ€ in RFC 822 [9] as updated by RFC 1123 [8]: 1From = &quot;From&quot; &quot;:&quot; mailbox An example is: 1From: webmaster@w3.org This header field MAY be used for logging purposes and as a means for identifying the source of invalid or unwanted requests. It SHOULD NOT be used as an insecure form of access protection. The interpretation of this field is that the request is being performed on behalf of the person given, who accepts responsibility for the method performed. In particular, robot agents SHOULD include this header so that the person responsible for running the robot can be contacted if problems occur on the receiving end. The Internet e-mail address in this field MAY be separate from the Internet host which issued the request. For example, when a request is passed through a proxy the original issuerâ€™s address SHOULD be used. The client SHOULD NOT send the From header field without the userâ€™s approval, as it might conflict with the userâ€™s privacy interests or their siteâ€™s security policy. It is strongly recommended that the user be able to disable, enable, and modify the value of this field at any time prior to a request. 14.23 HostThe Host request-header field specifies the Internet host and port number of the resource being requested, as obtained from the original URI given by the user or referring resource (generally an HTTP URL, as described in section 3.2.2). The Host field value MUST represent the naming authority of the origin server or gateway given by the original URL. This allows the origin server or gateway to differentiate between internally-ambiguous URLs, such as the root â€œ/â€œ URL of a server for multiple host names on a single IP address. 1Host = &quot;Host&quot; &quot;:&quot; host [ &quot;:&quot; port ] ; Section 3.2.2 A â€œhostâ€ without any trailing port information implies the default port for the service requested (e.g., â€œ80â€ for an HTTP URL). For example, a request on the origin server for http://www.w3.org/pub/WWW/ would properly include: 12GET /pub/WWW/ HTTP/1.1Host: www.w3.org A client MUST include a Host header field in all HTTP/1.1 request messages . If the requested URI does not include an Internet host name for the service being requested, then the Host header field MUST be given with an empty value. An HTTP/1.1 proxy MUST ensure that any request message it forwards does contain an appropriate Host header field that identifies the service being requested by the proxy. All Internet-based HTTP/1.1 servers MUST respond with a 400 (Bad Request) status code to any HTTP/1.1 request message which lacks a Host header field. See sections 5.2 and 19.6.1.1 for other requirements relating to Host. 14.24 If-MatchThe If-Match request-header field is used with a method to make it conditional. A client that has one or more entities previously obtained from the resource can verify that one of those entities is current by including a list of their associated entity tags in the If-Match header field. Entity tags are defined in section 3.11. The purpose of this feature is to allow efficient updates of cached information with a minimum amount of transaction overhead. It is also used, on updating requests, to prevent inadvertent modification of the wrong version of a resource. As a special case, the value â€œ*â€ matches any current entity of the resource. 1If-Match = &quot;If-Match&quot; &quot;:&quot; ( &quot;*&quot; | 1#entity-tag ) If any of the entity tags match the entity tag of the entity that would have been returned in the response to a similar GET request (without the If-Match header) on that resource, or if â€œ*â€ is given and any current entity exists for that resource, then the server MAY perform the requested method as if the If-Match header field did not exist. A server MUST use the strong comparison function (see section 13.3.3) to compare the entity tags in If-Match. If none of the entity tags match, or if â€œ*â€ is given and no current entity exists, the server MUST NOT perform the requested method, and MUST return a 412 (Precondition Failed) response. This behavior is most useful when the client wants to prevent an updating method, such as PUT, from modifying a resource that has changed since the client last retrieved it. If the request would, without the If-Match header field, result in anything other than a 2xx or 412 status, then the If-Match header MUST be ignored. The meaning of â€œIf-Match: *â€ is that the method SHOULD be performed if the representation selected by the origin server (or by a cache, possibly using the Vary mechanism, see section 14.44) exists, and MUST NOT be performed if the representation does not exist. A request intended to update a resource (e.g., a PUT) MAY include an If-Match header field to signal that the request method MUST NOT be applied if the entity corresponding to the If-Match value (a single entity tag) is no longer a representation of that resource. This allows the user to indicate that they do not wish the request to be successful if the resource has been changed without their knowledge. Examples: 123If-Match: &quot;xyzzy&quot;If-Match: &quot;xyzzy&quot;, &quot;r2d2xxxx&quot;, &quot;c3piozzzz&quot;If-Match: * The result of a request having both an If-Match header field and either an If-None-Match or an If-Modified-Since header fields is undefined by this specification. 14.25 If-Modified-SinceThe If-Modified-Since request-header field is used with a method to make it conditional: if the requested variant has not been modified since the time specified in this field, an entity will not be returned from the server; instead, a 304 (not modified) response will be returned without any message-body. 1If-Modified-Since = &quot;If-Modified-Since&quot; &quot;:&quot; HTTP-date An example of the field is: 1If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT A GET method with an If-Modified-Since header and no Range header requests that the identified entity be transferred only if it has been modified since the date given by the If-Modified-Since header. The algorithm for determining this includes the following cases: 12345678910a) If the request would normally result in anything other than a 200 (OK) status, or if the passed If-Modified-Since date is invalid, the response is exactly the same as for a normal GET. A date which is later than the server&apos;s current time is invalid.b) If the variant has been modified since the If-Modified-Since date, the response is exactly the same as for a normal GET.c) If the variant has not been modified since a valid If- Modified-Since date, the server SHOULD return a 304 (Not Modified) response. The purpose of this feature is to allow efficient updates of cached information with a minimum amount of transaction overhead. 12345678910111213141516171819202122232425Note: The Range request-header field modifies the meaning of If-Modified-Since; see section 14.35 for full details.Note: If-Modified-Since times are interpreted by the server, whoseclock might not be synchronized with the client.Note: When handling an If-Modified-Since header field, someservers will use an exact date comparison function, rather than aless-than function, for deciding whether to send a 304 (NotModified) response. To get best results when sending an If-Modified-Since header field for cache validation, clients areadvised to use the exact date string received in a previous Last-Modified header field whenever possible.Note: If a client uses an arbitrary date in the If-Modified-Sinceheader instead of a date taken from the Last-Modified header forthe same request, the client should be aware of the fact that thisdate is interpreted in the server&apos;s understanding of time. Theclient should consider unsynchronized clocks and rounding problemsdue to the different encodings of time between the client andserver. This includes the possibility of race conditions if thedocument has changed between the time it was first requested andthe If-Modified-Since date of a subsequent request, and thepossibility of clock-skew-related problems if the If-Modified-Since date is derived from the client&apos;s clock without correctionto the server&apos;s clock. Corrections for different time basesbetween client and server are at best approximate due to networklatency. The result of a request having both an If-Modified-Since header field and either an If-Match or an If-Unmodified-Since header fields is undefined by this specification. 14.26 If-None-MatchThe If-None-Match request-header field is used with a method to make it conditional. A client that has one or more entities previously obtained from the resource can verify that none of those entities is current by including a list of their associated entity tags in the If-None-Match header field. The purpose of this feature is to allow efficient updates of cached information with a minimum amount of transaction overhead. It is also used to prevent a method (e.g. PUT) from inadvertently modifying an existing resource when the client believes that the resource does not exist. As a special case, the value â€œ*â€ matches any current entity of the resource. 1If-None-Match = &quot;If-None-Match&quot; &quot;:&quot; ( &quot;*&quot; | 1#entity-tag ) If any of the entity tags match the entity tag of the entity that would have been returned in the response to a similar GET request (without the If-None-Match header) on that resource, or if â€œ*â€ is given and any current entity exists for that resource, then the server MUST NOT perform the requested method, unless required to do so because the resourceâ€™s modification date fails to match that supplied in an If-Modified-Since header field in the request. Instead, if the request method was GET or HEAD, the server SHOULD respond with a 304 (Not Modified) response, including the cache- related header fields (particularly ETag) of one of the entities that matched. For all other request methods, the server MUST respond with a status of 412 (Precondition Failed). See section 13.3.3 for rules on how to determine if two entities tags match. The weak comparison function can only be used with GET or HEAD requests. If none of the entity tags match, then the server MAY perform the requested method as if the If-None-Match header field did not exist, but MUST also ignore any If-Modified-Since header field(s) in the request. That is, if no entity tags match, then the server MUST NOT return a 304 (Not Modified) response. If the request would, without the If-None-Match header field, result in anything other than a 2xx or 304 status, then the If-None-Match header MUST be ignored. (See section 13.3.4 for a discussion of server behavior when both If-Modified-Since and If-None-Match appear in the same request.) The meaning of â€œIf-None-Match: *â€ is that the method MUST NOT be performed if the representation selected by the origin server (or by a cache, possibly using the Vary mechanism, see section 14.44) exists, and SHOULD be performed if the representation does not exist. This feature is intended to be useful in preventing races between PUT operations. Examples: 12345If-None-Match: &quot;xyzzy&quot;If-None-Match: W/&quot;xyzzy&quot;If-None-Match: &quot;xyzzy&quot;, &quot;r2d2xxxx&quot;, &quot;c3piozzzz&quot;If-None-Match: W/&quot;xyzzy&quot;, W/&quot;r2d2xxxx&quot;, W/&quot;c3piozzzz&quot;If-None-Match: * The result of a request having both an If-None-Match header field and either an If-Match or an If-Unmodified-Since header fields is undefined by this specification. 14.27 If-RangeIf a client has a partial copy of an entity in its cache, and wishes to have an up-to-date copy of the entire entity in its cache, it could use the Range request-header with a conditional GET (using either or both of If-Unmodified-Since and If-Match.) However, if the condition fails because the entity has been modified, the client would then have to make a second request to obtain the entire current entity-body. The If-Range header allows a client to â€œshort-circuitâ€ the second request. Informally, its meaning is `if the entity is unchanged, send me the part(s) that I am missing; otherwise, send me the entire new entityâ€™. 1If-Range = &quot;If-Range&quot; &quot;:&quot; ( entity-tag | HTTP-date ) If the client has no entity tag for an entity, but does have a Last- Modified date, it MAY use that date in an If-Range header. (The server can distinguish between a valid HTTP-date and any form of entity-tag by examining no more than two characters.) The If-Range header SHOULD only be used together with a Range header, and MUST be ignored if the request does not include a Range header, or if the server does not support the sub-range operation. If the entity tag given in the If-Range header matches the current entity tag for the entity, then the server SHOULD provide the specified sub-range of the entity using a 206 (Partial content) response. If the entity tag does not match, then the server SHOULD return the entire entity using a 200 (OK) response. 14.28 If-Unmodified-SinceThe If-Unmodified-Since request-header field is used with a method to make it conditional. If the requested resource has not been modified since the time specified in this field, the server SHOULD perform the requested operation as if the If-Unmodified-Since header were not present. If the requested variant has been modified since the specified time, the server MUST NOT perform the requested operation, and MUST return a 412 (Precondition Failed). 1If-Unmodified-Since = &quot;If-Unmodified-Since&quot; &quot;:&quot; HTTP-date An example of the field is: 1If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT If the request normally (i.e., without the If-Unmodified-Since header) would result in anything other than a 2xx or 412 status, the If-Unmodified-Since header SHOULD be ignored. If the specified date is invalid, the header is ignored. The result of a request having both an If-Unmodified-Since header field and either an If-None-Match or an If-Modified-Since header fields is undefined by this specification. 14.29 Last-ModifiedThe Last-Modified entity-header field indicates the date and time at which the origin server believes the variant was last modified. 1Last-Modified = &quot;Last-Modified&quot; &quot;:&quot; HTTP-date An example of its use is 1Last-Modified: Tue, 15 Nov 1994 12:45:26 GMT The exact meaning of this header field depends on the implementation of the origin server and the nature of the original resource. For files, it may be just the file system last-modified time. For entities with dynamically included parts, it may be the most recent of the set of last-modify times for its component parts. For database gateways, it may be the last-update time stamp of the record. For virtual objects, it may be the last time the internal state changed. An origin server MUST NOT send a Last-Modified date which is later than the serverâ€™s time of message origination. In such cases, where the resourceâ€™s last modification would indicate some time in the future, the server MUST replace that date with the message origination date. An origin server SHOULD obtain the Last-Modified value of the entity as close as possible to the time that it generates the Date value of its response. This allows a recipient to make an accurate assessment of the entityâ€™s modification time, especially if the entity changes near the time that the response is generated. HTTP/1.1 servers SHOULD send Last-Modified whenever feasible. 14.30 LocationThe Location response-header field is used to redirect the recipient to a location other than the Request-URI for completion of the request or identification of a new resource. For 201 (Created) responses, the Location is that of the new resource which was created by the request. For 3xx responses, the location SHOULD indicate the serverâ€™s preferred URI for automatic redirection to the resource. The field value consists of a single absolute URI. 1Location = &quot;Location&quot; &quot;:&quot; absoluteURI An example is: 1234567 Location: http://www.w3.org/pub/WWW/People.htmlNote: The Content-Location header field (section 14.14) differsfrom Location in that the Content-Location identifies the originallocation of the entity enclosed in the request. It is thereforepossible for a response to contain header fields for both Locationand Content-Location. Also see section 13.10 for cacherequirements of some methods. 14.31 Max-ForwardsThe Max-Forwards request-header field provides a mechanism with the TRACE (section 9.8) and OPTIONS (section 9.2) methods to limit the number of proxies or gateways that can forward the request to the next inbound server. This can be useful when the client is attempting to trace a request chain which appears to be failing or looping in mid-chain. 1Max-Forwards = &quot;Max-Forwards&quot; &quot;:&quot; 1*DIGIT The Max-Forwards value is a decimal integer indicating the remaining number of times this request message may be forwarded. Each proxy or gateway recipient of a TRACE or OPTIONS request containing a Max-Forwards header field MUST check and update its value prior to forwarding the request. If the received value is zero (0), the recipient MUST NOT forward the request; instead, it MUST respond as the final recipient. If the received Max-Forwards value is greater than zero, then the forwarded message MUST contain an updated Max-Forwards field with a value decremented by one (1). The Max-Forwards header field MAY be ignored for all other methods defined by this specification and for any extension methods for which it is not explicitly referred to as part of that method definition. 14.32 PragmaThe Pragma general-header field is used to include implementation- specific directives that might apply to any recipient along the request/response chain. All pragma directives specify optional behavior from the viewpoint of the protocol; however, some systems MAY require that behavior be consistent with the directives. 123Pragma = &quot;Pragma&quot; &quot;:&quot; 1#pragma-directivepragma-directive = &quot;no-cache&quot; | extension-pragmaextension-pragma = token [ &quot;=&quot; ( token | quoted-string ) ] When the no-cache directive is present in a request message, an application SHOULD forward the request toward the origin server even if it has a cached copy of what is being requested. This pragma directive has the same semantics as the no-cache cache-directive (see section 14.9) and is defined here for backward compatibility with HTTP/1.0. Clients SHOULD include both header fields when a no-cache request is sent to a server not known to be HTTP/1.1 compliant. Pragma directives MUST be passed through by a proxy or gateway application, regardless of their significance to that application, since the directives might be applicable to all recipients along the request/response chain. It is not possible to specify a pragma for a specific recipient; however, any pragma directive not relevant to a recipient SHOULD be ignored by that recipient. HTTP/1.1 caches SHOULD treat â€œPragma: no-cacheâ€ as if the client had sent â€œCache-Control: no-cacheâ€. No new Pragma directives will be defined in HTTP. 123Note: because the meaning of &quot;Pragma: no-cache as a responseheader field is not actually specified, it does not provide areliable replacement for &quot;Cache-Control: no-cache&quot; in a response 14.33 Proxy-AuthenticateThe Proxy-Authenticate response-header field MUST be included as part of a 407 (Proxy Authentication Required) response. The field value consists of a challenge that indicates the authentication scheme and parameters applicable to the proxy for this Request-URI. 1Proxy-Authenticate = &quot;Proxy-Authenticate&quot; &quot;:&quot; 1#challenge The HTTP access authentication process is described in â€œHTTP Authentication: Basic and Digest Access Authenticationâ€ [43]. Unlike WWW-Authenticate, the Proxy-Authenticate header field applies only to the current connection and SHOULD NOT be passed on to downstream clients. However, an intermediate proxy might need to obtain its own credentials by requesting them from the downstream client, which in some circumstances will appear as if the proxy is forwarding the Proxy-Authenticate header field. 14.34 Proxy-AuthorizationThe Proxy-Authorization request-header field allows the client to identify itself (or its user) to a proxy which requires authentication. The Proxy-Authorization field value consists of credentials containing the authentication information of the user agent for the proxy and/or realm of the resource being requested. 1Proxy-Authorization = &quot;Proxy-Authorization&quot; &quot;:&quot; credentials The HTTP access authentication process is described in â€œHTTP Authentication: Basic and Digest Access Authenticationâ€ [43] . Unlike Authorization, the Proxy-Authorization header field applies only to the next outbound proxy that demanded authentication using the Proxy- Authenticate field. When multiple proxies are used in a chain, the Proxy-Authorization header field is consumed by the first outbound proxy that was expecting to receive credentials. A proxy MAY relay the credentials from the client request to the next proxy if that is the mechanism by which the proxies cooperatively authenticate a given request. 14.35 Range14.35.1 Byte RangesSince all HTTP entities are represented in HTTP messages as sequences of bytes, the concept of a byte range is meaningful for any HTTP entity. (However, not all clients and servers need to support byte- range operations.) Byte range specifications in HTTP apply to the sequence of bytes in the entity-body (not necessarily the same as the message-body). A byte range operation MAY specify a single range of bytes, or a set of ranges within a single entity. 123456ranges-specifier = byte-ranges-specifierbyte-ranges-specifier = bytes-unit &quot;=&quot; byte-range-setbyte-range-set = 1#( byte-range-spec | suffix-byte-range-spec )byte-range-spec = first-byte-pos &quot;-&quot; [last-byte-pos]first-byte-pos = 1*DIGITlast-byte-pos = 1*DIGIT The first-byte-pos value in a byte-range-spec gives the byte-offset of the first byte in a range. The last-byte-pos value gives the byte-offset of the last byte in the range; that is, the byte positions specified are inclusive. Byte offsets start at zero. If the last-byte-pos value is present, it MUST be greater than or equal to the first-byte-pos in that byte-range-spec, or the byte- range-spec is syntactically invalid. The recipient of a byte-range- set that includes one or more syntactically invalid byte-range-spec values MUST ignore the header field that includes that byte-range- set. If the last-byte-pos value is absent, or if the value is greater than or equal to the current length of the entity-body, last-byte-pos is taken to be equal to one less than the current length of the entity- body in bytes. By its choice of last-byte-pos, a client can limit the number of bytes retrieved without knowing the size of the entity. 12suffix-byte-range-spec = &quot;-&quot; suffix-lengthsuffix-length = 1*DIGIT A suffix-byte-range-spec is used to specify the suffix of the entity-body, of a length given by the suffix-length value. (That is, this form specifies the last N bytes of an entity-body.) If the entity is shorter than the specified suffix-length, the entire entity-body is used. If a syntactically valid byte-range-set includes at least one byte- range-spec whose first-byte-pos is less than the current length of the entity-body, or at least one suffix-byte-range-spec with a non- zero suffix-length, then the byte-range-set is satisfiable. Otherwise, the byte-range-set is unsatisfiable. If the byte-range-set is unsatisfiable, the server SHOULD return a response with a status of 416 (Requested range not satisfiable). Otherwise, the server SHOULD return a response with a status of 206 (Partial Content) containing the satisfiable ranges of the entity-body. Examples of byte-ranges-specifier values (assuming an entity-body of length 10000): 123456789101112- The first 500 bytes (byte offsets 0-499, inclusive): bytes=0- 499- The second 500 bytes (byte offsets 500-999, inclusive): bytes=500-999- The final 500 bytes (byte offsets 9500-9999, inclusive): bytes=-500- Or bytes=9500-- The first and last bytes only (bytes 0 and 9999): bytes=0-0,-1- Several legal but not canonical specifications of the second 500 bytes (byte offsets 500-999, inclusive): bytes=500-600,601-999 bytes=500-700,601-999 14.35.2 Range Retrieval RequestsHTTP retrieval requests using conditional or unconditional GET methods MAY request one or more sub-ranges of the entity, instead of the entire entity, using the Range request header, which applies to the entity returned as the result of the request: 1Range = &quot;Range&quot; &quot;:&quot; ranges-specifier A server MAY ignore the Range header. However, HTTP/1.1 origin servers and intermediate caches ought to support byte ranges when possible, since Range supports efficient recovery from partially failed transfers, and supports efficient partial retrieval of large entities. If the server supports the Range header and the specified range or ranges are appropriate for the entity: 12345678910- The presence of a Range header in an unconditional GET modifies what is returned if the GET is otherwise successful. In other words, the response carries a status code of 206 (Partial Content) instead of 200 (OK).- The presence of a Range header in a conditional GET (a request using one or both of If-Modified-Since and If-None-Match, or one or both of If-Unmodified-Since and If-Match) modifies what is returned if the GET is otherwise successful and the condition is true. It does not affect the 304 (Not Modified) response returned if the conditional is false. In some cases, it might be more appropriate to use the If-Range header (see section 14.27) in addition to the Range header. If a proxy that supports ranges receives a Range request, forwards the request to an inbound server, and receives an entire entity in reply, it SHOULD only return the requested range to its client. It SHOULD store the entire received response in its cache if that is consistent with its cache allocation policies. 14.36 RefererThe Referer[sic] request-header field allows the client to specify, for the serverâ€™s benefit, the address (URI) of the resource from which the Request-URI was obtained (the â€œreferrerâ€, although the header field is misspelled.) The Referer request-header allows a server to generate lists of back-links to resources for interest, logging, optimized caching, etc. It also allows obsolete or mistyped links to be traced for maintenance. The Referer field MUST NOT be sent if the Request-URI was obtained from a source that does not have its own URI, such as input from the user keyboard. 1Referer = &quot;Referer&quot; &quot;:&quot; ( absoluteURI | relativeURI ) Example: 1Referer: http://www.w3.org/hypertext/DataSources/Overview.html If the field value is a relative URI, it SHOULD be interpreted relative to the Request-URI. The URI MUST NOT include a fragment. See section 15.1.3 for security considerations. 14.37 Retry-AfterThe Retry-After response-header field can be used with a 503 (Service Unavailable) response to indicate how long the service is expected to be unavailable to the requesting client. This field MAY also be used with any 3xx (Redirection) response to indicate the minimum time the user-agent is asked wait before issuing the redirected request. The value of this field can be either an HTTP-date or an integer number of seconds (in decimal) after the time of the response. 1Retry-After = &quot;Retry-After&quot; &quot;:&quot; ( HTTP-date | delta-seconds ) Two examples of its use are 12Retry-After: Fri, 31 Dec 1999 23:59:59 GMTRetry-After: 120 In the latter example, the delay is 2 minutes. 14.38 ServerThe Server response-header field contains information about the software used by the origin server to handle the request. The field can contain multiple product tokens (section 3.8) and comments identifying the server and any significant subproducts. The product tokens are listed in order of their significance for identifying the application. 1Server = &quot;Server&quot; &quot;:&quot; 1*( product | comment ) Example: 1Server: CERN/3.0 libwww/2.17 If the response is being forwarded through a proxy, the proxy application MUST NOT modify the Server response-header. Instead, it SHOULD include a Via field (as described in section 14.45). 12345Note: Revealing the specific software version of the server mightallow the server machine to become more vulnerable to attacksagainst software that is known to contain security holes. Serverimplementors are encouraged to make this field a configurableoption. 14.39 TEThe TE request-header field indicates what extension transfer-codings it is willing to accept in the response and whether or not it is willing to accept trailer fields in a chunked transfer-coding. Its value may consist of the keyword â€œtrailersâ€ and/or a comma-separated list of extension transfer-coding names with optional accept parameters (as described in section 3.6). 12TE = &quot;TE&quot; &quot;:&quot; #( t-codings )t-codings = &quot;trailers&quot; | ( transfer-extension [ accept-params ] ) The presence of the keyword â€œtrailersâ€ indicates that the client is willing to accept trailer fields in a chunked transfer-coding, as defined in section 3.6.1. This keyword is reserved for use with transfer-coding values even though it does not itself represent a transfer-coding. Examples of its use are: 123TE: deflateTE:TE: trailers, deflate;q=0.5 The TE header field only applies to the immediate connection. Therefore, the keyword MUST be supplied within a Connection header field (section 14.10) whenever TE is present in an HTTP/1.1 message. A server tests whether a transfer-coding is acceptable, according to a TE field, using these rules: 123456789101112131415161718191. The &quot;chunked&quot; transfer-coding is always acceptable. If the keyword &quot;trailers&quot; is listed, the client indicates that it is willing to accept trailer fields in the chunked response on behalf of itself and any downstream clients. The implication is that, if given, the client is stating that either all downstream clients are willing to accept trailer fields in the forwarded response, or that it will attempt to buffer the response on behalf of downstream recipients. Note: HTTP/1.1 does not define any means to limit the size of a chunked response such that a client can be assured of buffering the entire response.2. If the transfer-coding being tested is one of the transfer- codings listed in the TE field, then it is acceptable unless it is accompanied by a qvalue of 0. (As defined in section 3.9, a qvalue of 0 means &quot;not acceptable.&quot;)3. If multiple transfer-codings are acceptable, then the acceptable transfer-coding with the highest non-zero qvalue is preferred. The &quot;chunked&quot; transfer-coding always has a qvalue of 1. If the TE field-value is empty or if no TE field is present, the only transfer-coding is â€œchunkedâ€. A message with no transfer-coding is always acceptable. 14.40 TrailerThe Trailer general field value indicates that the given set of header fields is present in the trailer of a message encoded with chunked transfer-coding. 1Trailer = &quot;Trailer&quot; &quot;:&quot; 1#field-name An HTTP/1.1 message SHOULD include a Trailer header field in a message using chunked transfer-coding with a non-empty trailer. Doing so allows the recipient to know which header fields to expect in the trailer. If no Trailer header field is present, the trailer SHOULD NOT include any header fields. See section 3.6.1 for restrictions on the use of trailer fields in a â€œchunkedâ€ transfer-coding. Message header fields listed in the Trailer header field MUST NOT include the following header fields: 123. Transfer-Encoding. Content-Length. Trailer 14.41 Transfer-EncodingThe Transfer-Encoding general-header field indicates what (if any) type of transformation has been applied to the message body in order to safely transfer it between the sender and the recipient. This differs from the content-coding in that the transfer-coding is a property of the message, not of the entity. 1Transfer-Encoding = &quot;Transfer-Encoding&quot; &quot;:&quot; 1#transfer-coding Transfer-codings are defined in section 3.6. An example is: 1Transfer-Encoding: chunked If multiple encodings have been applied to an entity, the transfer- codings MUST be listed in the order in which they were applied. Additional information about the encoding parameters MAY be provided by other entity-header fields not defined by this specification. Many older HTTP/1.0 applications do not understand the Transfer- Encoding header. 14.42 UpgradeThe Upgrade general-header allows the client to specify what additional communication protocols it supports and would like to use if the server finds it appropriate to switch protocols. The server MUST use the Upgrade header field within a 101 (Switching Protocols) response to indicate which protocol(s) are being switched. 1Upgrade = &quot;Upgrade&quot; &quot;:&quot; 1#product For example, 1Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11 The Upgrade header field is intended to provide a simple mechanism for transition from HTTP/1.1 to some other, incompatible protocol. It does so by allowing the client to advertise its desire to use another protocol, such as a later version of HTTP with a higher major version number, even though the current request has been made using HTTP/1.1. This eases the difficult transition between incompatible protocols by allowing the client to initiate a request in the more commonly supported protocol while indicating to the server that it would like to use a â€œbetterâ€ protocol if available (where â€œbetterâ€ is determined by the server, possibly according to the nature of the method and/or resource being requested). The Upgrade header field only applies to switching application-layer protocols upon the existing transport-layer connection. Upgrade cannot be used to insist on a protocol change; its acceptance and use by the server is optional. The capabilities and nature of the application-layer communication after the protocol change is entirely dependent upon the new protocol chosen, although the first action after changing the protocol MUST be a response to the initial HTTP request containing the Upgrade header field. The Upgrade header field only applies to the immediate connection. Therefore, the upgrade keyword MUST be supplied within a Connection header field (section 14.10) whenever Upgrade is present in an HTTP/1.1 message. The Upgrade header field cannot be used to indicate a switch to a protocol on a different connection. For that purpose, it is more appropriate to use a 301, 302, 303, or 305 redirection response. This specification only defines the protocol name â€œHTTPâ€ for use by the family of Hypertext Transfer Protocols, as defined by the HTTP version rules of section 3.1 and future updates to this specification. Any token can be used as a protocol name; however, it will only be useful if both the client and server associate the name with the same protocol. 14.43 User-AgentThe User-Agent request-header field contains information about the user agent originating the request. This is for statistical purposes, the tracing of protocol violations, and automated recognition of user agents for the sake of tailoring responses to avoid particular user agent limitations. User agents SHOULD include this field with requests. The field can contain multiple product tokens (section 3.8) and comments identifying the agent and any subproducts which form a significant part of the user agent. By convention, the product tokens are listed in order of their significance for identifying the application. 1User-Agent = &quot;User-Agent&quot; &quot;:&quot; 1*( product | comment ) Example: 1User-Agent: CERN-LineMode/2.15 libwww/2.17b3 14.44 VaryThe Vary field value indicates the set of request-header fields that fully determines, while the response is fresh, whether a cache is permitted to use the response to reply to a subsequent request without revalidation. For uncacheable or stale responses, the Vary field value advises the user agent about the criteria that were used to select the representation. A Vary field value of â€œ*â€ implies that a cache cannot determine from the request headers of a subsequent request whether this response is the appropriate representation. See section 13.6 for use of the Vary header field by caches. 1Vary = &quot;Vary&quot; &quot;:&quot; ( &quot;*&quot; | 1#field-name ) An HTTP/1.1 server SHOULD include a Vary header field with any cacheable response that is subject to server-driven negotiation. Doing so allows a cache to properly interpret future requests on that resource and informs the user agent about the presence of negotiation on that resource. A server MAY include a Vary header field with a non-cacheable response that is subject to server-driven negotiation, since this might provide the user agent with useful information about the dimensions over which the response varies at the time of the response. A Vary field value consisting of a list of field-names signals that the representation selected for the response is based on a selection algorithm which considers ONLY the listed request-header field values in selecting the most appropriate representation. A cache MAY assume that the same selection will be made for future requests with the same values for the listed field names, for the duration of time for which the response is fresh. The field-names given are not limited to the set of standard request-header fields defined by this specification. Field names are case-insensitive. A Vary field value of â€œâ€œ signals that unspecified parameters not limited to the request-headers (e.g., the network address of the client), play a role in the selection of the response representation. The â€œâ€œ value MUST NOT be generated by a proxy server; it may only be generated by an origin server. 14.45 ViaThe Via general-header field MUST be used by gateways and proxies to indicate the intermediate protocols and recipients between the user agent and the server on requests, and between the origin server and the client on responses. It is analogous to the â€œReceivedâ€ field of RFC 822 [9] and is intended to be used for tracking message forwards, avoiding request loops, and identifying the protocol capabilities of all senders along the request/response chain. 123456Via = &quot;Via&quot; &quot;:&quot; 1#( received-protocol received-by [ comment ] )received-protocol = [ protocol-name &quot;/&quot; ] protocol-versionprotocol-name = tokenprotocol-version = tokenreceived-by = ( host [ &quot;:&quot; port ] ) | pseudonympseudonym = token The received-protocol indicates the protocol version of the message received by the server or client along each segment of the request/response chain. The received-protocol version is appended to the Via field value when the message is forwarded so that information about the protocol capabilities of upstream applications remains visible to all recipients. The protocol-name is optional if and only if it would be â€œHTTPâ€. The received-by field is normally the host and optional port number of a recipient server or client that subsequently forwarded the message. However, if the real host is considered to be sensitive information, it MAY be replaced by a pseudonym. If the port is not given, it MAY be assumed to be the default port of the received-protocol. Multiple Via field values represents each proxy or gateway that has forwarded the message. Each recipient MUST append its information such that the end result is ordered according to the sequence of forwarding applications. Comments MAY be used in the Via header field to identify the software of the recipient proxy or gateway, analogous to the User-Agent and Server header fields. However, all comments in the Via field are optional and MAY be removed by any recipient prior to forwarding the message. For example, a request message could be sent from an HTTP/1.0 user agent to an internal proxy code-named â€œfredâ€, which uses HTTP/1.1 to forward the request to a public proxy at nowhere.com, which completes the request by forwarding it to the origin server at www.ics.uci.edu. The request received by www.ics.uci.edu would then have the following Via header field: 1Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1) Proxies and gateways used as a portal through a network firewall SHOULD NOT, by default, forward the names and ports of hosts within the firewall region. This information SHOULD only be propagated if explicitly enabled. If not enabled, the received-by host of any host behind the firewall SHOULD be replaced by an appropriate pseudonym for that host. For organizations that have strong privacy requirements for hiding internal structures, a proxy MAY combine an ordered subsequence of Via header field entries with identical received-protocol values into a single such entry. For example, 123Via: 1.0 ricky, 1.1 ethel, 1.1 fred, 1.0 lucy could be collapsed toVia: 1.0 ricky, 1.1 mertz, 1.0 lucy Applications SHOULD NOT combine multiple entries unless they are all under the same organizational control and the hosts have already been replaced by pseudonyms. Applications MUST NOT combine entries which have different received-protocol values. 14.46 WarningThe Warning general-header field is used to carry additional information about the status or transformation of a message which might not be reflected in the message. This information is typically used to warn about a possible lack of semantic transparency from caching operations or transformations applied to the entity body of the message. Warning headers are sent with responses using: 123456789Warning = &quot;Warning&quot; &quot;:&quot; 1#warning-valuewarning-value = warn-code SP warn-agent SP warn-text [SP warn-date]warn-code = 3DIGITwarn-agent = ( host [ &quot;:&quot; port ] ) | pseudonym ; the name or pseudonym of the server adding ; the Warning header, for use in debuggingwarn-text = quoted-stringwarn-date = &lt;&quot;&gt; HTTP-date &lt;&quot;&gt; A response MAY carry more than one Warning header. The warn-text SHOULD be in a natural language and character set that is most likely to be intelligible to the human user receiving the response. This decision MAY be based on any available knowledge, such as the location of the cache or user, the Accept-Language field in a request, the Content-Language field in a response, etc. The default language is English and the default character set is ISO-8859-1. If a character set other than ISO-8859-1 is used, it MUST be encoded in the warn-text using the method described in RFC 2047 [14]. Warning headers can in general be applied to any message, however some specific warn-codes are specific to caches and can only be applied to response messages. New Warning headers SHOULD be added after any existing Warning headers. A cache MUST NOT delete any Warning header that it received with a message. However, if a cache successfully validates a cache entry, it SHOULD remove any Warning headers previously attached to that entry except as specified for specific Warning codes. It MUST then add any Warning headers received in the validating response. In other words, Warning headers are those that would be attached to the most recent relevant response. When multiple Warning headers are attached to a response, the user agent ought to inform the user of as many of them as possible, in the order that they appear in the response. If it is not possible to inform the user of all of the warnings, the user agent SHOULD follow these heuristics: 12345- Warnings that appear early in the response take priority over those appearing later in the response.- Warnings in the user&apos;s preferred character set take priority over warnings in other character sets but with identical warn- codes and warn-agents. Systems that generate multiple Warning headers SHOULD order them with this user agent behavior in mind. Requirements for the behavior of caches with respect to Warnings are stated in section 13.1.2. This is a list of the currently-defined warn-codes, each with a recommended warn-text in English, and a description of its meaning. 110 Response is stale MUST be included whenever the returned response is stale. 111 Revalidation failed MUST be included if a cache returns a stale response because an attempt to revalidate the response failed, due to an inability to reach the server. 112 Disconnected operation SHOULD be included if the cache is intentionally disconnected from the rest of the network for a period of time. 113 Heuristic expiration MUST be included if the cache heuristically chose a freshness lifetime greater than 24 hours and the responseâ€™s age is greater than 24 hours. 199 Miscellaneous warning The warning text MAY include arbitrary information to be presented to a human user, or logged. A system receiving this warning MUST NOT take any automated action, besides presenting the warning to the user. 214 Transformation applied MUST be added by an intermediate cache or proxy if it applies any transformation changing the content-coding (as specified in the Content-Encoding header) or media-type (as specified in the Content-Type header) of the response, or the entity-body of the response, unless this Warning code already appears in the response. 299 Miscellaneous persistent warning The warning text MAY include arbitrary information to be presented to a human user, or logged. A system receiving this warning MUST NOT take any automated action. If an implementation sends a message with one or more Warning headers whose version is HTTP/1.0 or lower, then the sender MUST include in each warning-value a warn-date that matches the date in the response. If an implementation receives a message with a warning-value that includes a warn-date, and that warn-date is different from the Date value in the response, then that warning-value MUST be deleted from the message before storing, forwarding, or using it. (This prevents bad consequences of naive caching of Warning header fields.) If all of the warning-values are deleted for this reason, the Warning header MUST be deleted as well. 14.47 WWW-AuthenticateThe WWW-Authenticate response-header field MUST be included in 401 (Unauthorized) response messages. The field value consists of at least one challenge that indicates the authentication scheme(s) and parameters applicable to the Request-URI. 1WWW-Authenticate = &quot;WWW-Authenticate&quot; &quot;:&quot; 1#challenge The HTTP access authentication process is described in â€œHTTP Authentication: Basic and Digest Access Authenticationâ€ [43]. User agents are advised to take special care in parsing the WWW- Authenticate field value as it might contain more than one challenge, or if more than one WWW-Authenticate header field is provided, the contents of a challenge itself can contain a comma-separated list of authentication parameters.]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
        <category>FE</category>
        <category>HTTP</category>
      </categories>
      <tags>
        <tag>HTTP Header</tag>
        <tag>Protocol</tag>
      </tags>
  </entry>
</search>
